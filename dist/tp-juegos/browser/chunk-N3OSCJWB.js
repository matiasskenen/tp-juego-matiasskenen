import{A as sE,E as oE,F as aE,G as uE,H as cE,I as Lc,J as jc,L as Ot,a as ZI,b as Vc,c as JI,d as XI,h as eE,ib as pp,j as tE,k as Ta,p as lp,q as nE,r as rE,u as dp,x as Je,xa as hp,y as iE,ya as fp,z as cn}from"./chunk-2OTBFTP4.js";import{a as j,b as pe,f as cp,g as N}from"./chunk-WTI2L5DI.js";function lE(t,e){return Object.is(t,e)}var Xe=null,Uc=!1,Bc=1,Fn=Symbol("SIGNAL");function ye(t){let e=Xe;return Xe=t,e}function dE(){return Xe}var Sa={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yp(t){if(Uc)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(t);let e=Xe.nextProducerIndex++;if(Hc(Xe),e<Xe.producerNode.length&&Xe.producerNode[e]!==t&&Aa(Xe)){let n=Xe.producerNode[e];zc(n,Xe.producerIndexOfThis[e])}Xe.producerNode[e]!==t&&(Xe.producerNode[e]=t,Xe.producerIndexOfThis[e]=Aa(Xe)?gE(t,Xe,e):0),Xe.producerLastReadVersion[e]=t.version}function Vx(){Bc++}function hE(t){if(!(Aa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bc)){if(!t.producerMustRecompute(t)&&!wp(t)){t.dirty=!1,t.lastCleanEpoch=Bc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Bc}}function fE(t){if(t.liveConsumerNode===void 0)return;let e=Uc;Uc=!0;try{for(let n of t.liveConsumerNode)n.dirty||Lx(n)}finally{Uc=e}}function pE(){return Xe?.consumerAllowSignalWrites!==!1}function Lx(t){t.dirty=!0,fE(t),t.consumerMarkedDirty?.(t)}function qc(t){return t&&(t.nextProducerIndex=0),ye(t)}function vp(t,e){if(ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Aa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)zc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function wp(t){Hc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(hE(n),r!==n.version))return!0}return!1}function _p(t){if(Hc(t),Aa(t))for(let e=0;e<t.producerNode.length;e++)zc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function gE(t,e,n){if(mE(t),t.liveConsumerNode.length===0&&yE(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=gE(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function zc(t,e){if(mE(t),t.liveConsumerNode.length===1&&yE(t))for(let r=0;r<t.producerNode.length;r++)zc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Hc(i),i.producerIndexOfThis[r]=e}}function Aa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Hc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function mE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function yE(t){return t.producerNode!==void 0}function vE(t){let e=Object.create(jx);e.computation=t;let n=()=>{if(hE(e),yp(e),e.value===$c)throw e.error;return e.value};return n[Fn]=e,n}var gp=Symbol("UNSET"),mp=Symbol("COMPUTING"),$c=Symbol("ERRORED"),jx=pe(j({},Sa),{value:gp,dirty:!0,error:null,equal:lE,producerMustRecompute(t){return t.value===gp||t.value===mp},producerRecomputeValue(t){if(t.value===mp)throw new Error("Detected cycle in computations.");let e=t.value;t.value=mp;let n=qc(t),r;try{r=t.computation()}catch(i){r=$c,t.error=i}finally{vp(t,n)}if(e!==gp&&e!==$c&&r!==$c&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function Ux(){throw new Error}var wE=Ux;function _E(){wE()}function IE(t){wE=t}var Bx=null;function EE(t){let e=Object.create(CE);e.value=t;let n=()=>(yp(e),e.value);return n[Fn]=e,n}function Ip(t,e){pE()||_E(),t.equal(t.value,e)||(t.value=e,$x(t))}function DE(t,e){pE()||_E(),Ip(t,e(t.value))}var CE=pe(j({},Sa),{equal:lE,value:void 0});function $x(t){t.version++,Vx(),fE(t),Bx?.()}function ee(t){return typeof t=="function"}function vs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Gc=vs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function yi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(s){e=s instanceof Gc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{bE(s)}catch(o){e=e??[],o instanceof Gc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Gc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)bE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&yi(n,e)}remove(e){let{_finalizers:n}=this;n&&yi(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var Ep=Fe.EMPTY;function Wc(t){return t instanceof Fe||t&&"closed"in t&&ee(t.remove)&&ee(t.add)&&ee(t.unsubscribe)}function bE(t){ee(t)?t():t.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ws={setTimeout(t,e,...n){let{delegate:r}=ws;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ws;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Kc(t){ws.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(t);else throw t})}function Ma(){}var TE=Dp("C",void 0,void 0);function AE(t){return Dp("E",void 0,t)}function SE(t){return Dp("N",t,void 0)}function Dp(t,e,n){return{kind:t,value:e,error:n}}var vi=null;function _s(t){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!vi;if(e&&(vi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=vi;if(vi=null,n)throw r}}else t()}function ME(t){Xt.useDeprecatedSynchronousErrorHandling&&vi&&(vi.errorThrown=!0,vi.error=t)}var wi=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wc(e)&&e.add(this)):this.destination=Hx}static create(e,n,r){return new Vn(e,n,r)}next(e){this.isStopped?bp(SE(e),this):this._next(e)}error(e){this.isStopped?bp(AE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bp(TE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qx=Function.prototype.bind;function Cp(t,e){return qx.call(t,e)}var Tp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Qc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Qc(r)}else Qc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Qc(n)}}},Vn=class extends wi{constructor(e,n,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Cp(e.next,s),error:e.error&&Cp(e.error,s),complete:e.complete&&Cp(e.complete,s)}):i=e}this.destination=new Tp(i)}};function Qc(t){Xt.useDeprecatedSynchronousErrorHandling?ME(t):Kc(t)}function zx(t){throw t}function bp(t,e){let{onStoppedNotification:n}=Xt;n&&ws.setTimeout(()=>n(t,e))}var Hx={closed:!0,next:Ma,error:zx,complete:Ma};var Is=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function Yc(...t){return Ap(t)}function Ap(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=Wx(n)?n:new Vn(n,r,i);return _s(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=xE(r),new r((i,s)=>{let o=new Vn({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Is](){return this}pipe(...n){return Ap(n)(this)}toPromise(n){return n=xE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function xE(t){var e;return(e=t??Xt.Promise)!==null&&e!==void 0?e:Promise}function Gx(t){return t&&ee(t.next)&&ee(t.error)&&ee(t.complete)}function Wx(t){return t&&t instanceof wi||Gx(t)&&Wc(t)}function Sp(t){return ee(t?.lift)}function ae(t){return e=>{if(Sp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Mp(t,e,n,r,i)}var Mp=class extends wi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Es(){return ae((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Ds=class extends le{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return Es()(this)}};var RE=vs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Zc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new RE}next(n){_s(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_s(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_s(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ep:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,yi(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new le;return n.source=this,n}}return t.create=(e,n)=>new Zc(e,n),t})(),Zc=class extends Le{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ep}};var et=class extends Le{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xa={now(){return(xa.delegate||Date).now()},delegate:void 0};var Jc=class extends Le{constructor(e=1/0,n=1/0,r=xa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Xc=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ra={setInterval(t,e,...n){let{delegate:r}=Ra;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ra;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Cs=class extends Xc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Ra.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ra.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,yi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var bs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};bs.now=xa.now;var Ts=class extends bs{constructor(e,n=bs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var xp=new Ts(Cs);var el=class extends Cs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var tl=class extends Ts{};var Rp=new tl(el);var Et=new le(t=>t.complete());function NE(t){return t&&ee(t.schedule)}function Np(t){return t[t.length-1]}function nl(t){return ee(Np(t))?t.pop():void 0}function ln(t){return NE(Np(t))?t.pop():void 0}function PE(t,e){return typeof Np(t)=="number"?t.pop():e}var rl=t=>t&&typeof t.length=="number"&&typeof t!="function";function il(t){return ee(t?.then)}function sl(t){return ee(t[Is])}function ol(t){return Symbol.asyncIterator&&ee(t?.[Symbol.asyncIterator])}function al(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Kx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ul=Kx();function cl(t){return ee(t?.[ul])}function ll(t){return JI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Vc(n.read());if(i)return yield Vc(void 0);yield yield Vc(r)}}finally{n.releaseLock()}})}function dl(t){return ee(t?.getReader)}function Me(t){if(t instanceof le)return t;if(t!=null){if(sl(t))return Qx(t);if(rl(t))return Yx(t);if(il(t))return Zx(t);if(ol(t))return OE(t);if(cl(t))return Jx(t);if(dl(t))return Xx(t)}throw al(t)}function Qx(t){return new le(e=>{let n=t[Is]();if(ee(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Yx(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Zx(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Kc)})}function Jx(t){return new le(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function OE(t){return new le(e=>{eR(t,e).catch(n=>e.error(n))})}function Xx(t){return OE(ll(t))}function eR(t,e){var n,r,i,s;return ZI(this,void 0,void 0,function*(){try{for(n=XI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function xt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function yr(t,e=0){return ae((n,r)=>{n.subscribe(ue(r,i=>xt(r,t,()=>r.next(i),e),()=>xt(r,t,()=>r.complete(),e),i=>xt(r,t,()=>r.error(i),e)))})}function vr(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function kE(t,e){return Me(t).pipe(vr(e),yr(e))}function FE(t,e){return Me(t).pipe(vr(e),yr(e))}function VE(t,e){return new le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function LE(t,e){return new le(n=>{let r;return xt(n,e,()=>{r=t[ul](),xt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function hl(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{xt(n,e,()=>{let r=t[Symbol.asyncIterator]();xt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function jE(t,e){return hl(ll(t),e)}function UE(t,e){if(t!=null){if(sl(t))return kE(t,e);if(rl(t))return VE(t,e);if(il(t))return FE(t,e);if(ol(t))return hl(t,e);if(cl(t))return LE(t,e);if(dl(t))return jE(t,e)}throw al(t)}function Ce(t,e){return e?UE(t,e):Me(t)}function J(...t){let e=ln(t);return Ce(t,e)}function As(t,e){let n=ee(t)?t:()=>t,r=i=>i.error(n());return new le(e?i=>e.schedule(r,0,i):r)}function Pp(t){return!!t&&(t instanceof le||ee(t.lift)&&ee(t.subscribe))}var Ln=vs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function te(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:tR}=Array;function nR(t,e){return tR(e)?t(...e):t(e)}function fl(t){return te(e=>nR(t,e))}var{isArray:rR}=Array,{getPrototypeOf:iR,prototype:sR,keys:oR}=Object;function pl(t){if(t.length===1){let e=t[0];if(rR(e))return{args:e,keys:null};if(aR(e)){let n=oR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function aR(t){return t&&typeof t=="object"&&iR(t)===sR}function gl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Na(...t){let e=ln(t),n=nl(t),{args:r,keys:i}=pl(t);if(r.length===0)return Ce([],e);let s=new le(uR(r,e,i?o=>gl(i,o):It));return n?s.pipe(fl(n)):s}function uR(t,e,n=It){return r=>{BE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)BE(e,()=>{let l=Ce(t[c],e),h=!1;l.subscribe(ue(r,p=>{s[c]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function BE(t,e,n){t?xt(n,t,e):e()}function $E(t,e,n,r,i,s,o,a){let c=[],l=0,h=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},y=M=>l<r?D(M):c.push(M),D=M=>{s&&e.next(M),l++;let T=!1;Me(n(M,h++)).subscribe(ue(e,P=>{i?.(P),s?y(P):e.next(P)},()=>{T=!0},void 0,()=>{if(T)try{for(l--;c.length&&l<r;){let P=c.shift();o?xt(e,o,()=>D(P)):D(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,y,()=>{p=!0,g()})),()=>{a?.()}}function He(t,e,n=1/0){return ee(e)?He((r,i)=>te((s,o)=>e(r,s,i,o))(Me(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>$E(r,i,t,n)))}function wr(t=1/0){return He(It,t)}function qE(){return wr(1)}function Ss(...t){return qE()(Ce(t,ln(t)))}function ml(t){return new le(e=>{Me(t()).subscribe(e)})}function Op(...t){let e=nl(t),{args:n,keys:r}=pl(t),i=new le(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let h=0;h<o;h++){let p=!1;Me(n[h]).subscribe(ue(s,g=>{p||(p=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(l||s.next(r?gl(r,a):a),s.complete())}))}});return e?i.pipe(fl(e)):i}function cR(...t){let e=ln(t),n=PE(t,1/0),r=t;return r.length?r.length===1?Me(r[0]):wr(n)(Ce(r,e)):Et}function Dt(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function _r(t){return ae((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=Me(t(o,_r(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function zE(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ue(o,h=>{let p=l++;c=a?t(c,h,p):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function jn(t,e){return ee(e)?He(t,e,1):He(t,1)}function Ir(t){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Un(t){return t<=0?()=>Et:ae((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function kp(t){return te(()=>t)}function HE(t,e=It){return t=t??lR,ae((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function lR(t,e){return t===e}function yl(t=dR){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function dR(){return new Ln}function _i(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function dn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Dt((i,s)=>t(i,s,r)):It,Un(1),n?Ir(e):yl(()=>new Ln))}function Ms(t){return t<=0?()=>Et:ae((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Fp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Dt((i,s)=>t(i,s,r)):It,Ms(1),n?Ir(e):yl(()=>new Ln))}function GE(){return ae((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function vl(t,e){return ae(zE(t,e,arguments.length>=2,!0))}function WE(t={}){let{connector:e=()=>new Le,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,c,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),o=c=void 0,h=p=!1},D=()=>{let M=o;y(),M?.unsubscribe()};return ae((M,T)=>{l++,!p&&!h&&g();let P=c=c??e();T.add(()=>{l--,l===0&&!p&&!h&&(a=Vp(D,i))}),P.subscribe(T),!o&&l>0&&(o=new Vn({next:L=>P.next(L),error:L=>{p=!0,g(),a=Vp(y,n,L),P.error(L)},complete:()=>{h=!0,g(),a=Vp(y,r),P.complete()}}),Me(M).subscribe(o))})(s)}}function Vp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Vn({next:()=>{r.unsubscribe(),t()}});return Me(e(...n)).subscribe(r)}function hR(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,WE({connector:()=>new Jc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function wl(...t){let e=ln(t);return ae((n,r)=>{(e?Ss(t,n,e):Ss(t,n)).subscribe(r)})}function at(t,e){return ae((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,h=s++;Me(t(c,h)).subscribe(i=ue(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function fR(t,e){return ee(e)?at(()=>t,e):at(()=>t)}function Lp(t){return ae((e,n)=>{Me(t).subscribe(ue(n,()=>n.complete(),Ma)),!n.closed&&e.subscribe(n)})}function Ge(t,e,n){let r=ee(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var PD="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,n){super(ed(e,n)),this.code=e}};function ed(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ba(t){return{toString:t}.toString()}var _l="__parameters__";function pR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function OD(t,e,n){return Ba(()=>{let r=pR(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,h){let p=c.hasOwnProperty(_l)?c[_l]:Object.defineProperty(c,_l,{value:[]})[_l];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Jp=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function gR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function bt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(bt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function KE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var mR=Te({__forward_ref__:Te});function zt(t){return t.__forward_ref__=zt,t.toString=function(){return bt(this())},t}function Ct(t){return kD(t)?t():t}function kD(t){return typeof t=="function"&&t.hasOwnProperty(mR)&&t.__forward_ref__===zt}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function wn(t){return{providers:t.providers||[],imports:t.imports||[]}}function td(t){return QE(t,VD)||QE(t,LD)}function FD(t){return td(t)!==null}function QE(t,e){return t.hasOwnProperty(e)?t[e]:null}function yR(t){let e=t&&(t[VD]||t[LD]);return e||null}function YE(t){return t&&(t.hasOwnProperty(ZE)||t.hasOwnProperty(vR))?t[ZE]:null}var VD=Te({\u0275prov:Te}),ZE=Te({\u0275inj:Te}),LD=Te({ngInjectableDef:Te}),vR=Te({ngInjectorDef:Te}),G=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jD(t){return t&&!!t.\u0275providers}var wR=Te({\u0275cmp:Te}),_R=Te({\u0275dir:Te}),IR=Te({\u0275pipe:Te}),ER=Te({\u0275mod:Te}),Rl=Te({\u0275fac:Te}),Oa=Te({__NG_ELEMENT_ID__:Te}),JE=Te({__NG_ENV_ID__:Te});function nd(t){return typeof t=="string"?t:t==null?"":String(t)}function DR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():nd(t)}function CR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Q(-200,t)}function Zg(t,e){throw new Q(-201,!1)}var de=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(de||{}),Xp;function UD(){return Xp}function Bt(t){let e=Xp;return Xp=t,e}function BD(t,e,n){let r=td(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&de.Optional)return null;if(e!==void 0)return e;Zg(t,"Injector")}var bR={},ka=bR,eg="__NG_DI_FLAG__",Nl="ngTempTokenPath",TR="ngTokenPath",AR=/\n/gm,SR="\u0275",XE="__source",Os;function MR(){return Os}function Er(t){let e=Os;return Os=t,e}function xR(t,e=de.Default){if(Os===void 0)throw new Q(-203,!1);return Os===null?BD(t,void 0,e):Os.get(t,e&de.Optional?null:void 0,e)}function Y(t,e=de.Default){return(UD()||xR)(Ct(t),e)}function F(t,e=de.Default){return Y(t,rd(e))}function rd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function tg(t){let e=[];for(let n=0;n<t.length;n++){let r=Ct(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=de.Default;for(let o=0;o<r.length;o++){let a=r[o],c=RR(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(Y(i,s))}else e.push(Y(r))}return e}function $D(t,e){return t[eg]=e,t.prototype[eg]=e,t}function RR(t){return t[eg]}function NR(t,e,n,r){let i=t[Nl];throw e[XE]&&i.unshift(e[XE]),t.message=PR(`
`+t.message,i,n,r),t[TR]=i,t[Nl]=null,t}function PR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==SR?t.slice(2):t;let i=bt(e);if(Array.isArray(e))i=e.map(bt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):bt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(AR,`
  `)}`}var ut=$D(OD("Optional"),8);var id=$D(OD("SkipSelf"),4);function Fs(t,e){let n=t.hasOwnProperty(Rl);return n?t[Rl]:null}function OR(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function kR(t){return t.flat(Number.POSITIVE_INFINITY)}function Jg(t,e){t.forEach(n=>Array.isArray(n)?Jg(n,e):e(n))}function qD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Pl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function FR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function VR(t,e,n){let r=$a(t,e);return r>=0?t[r|1]=n:(r=~r,FR(t,r,e,n)),r}function jp(t,e){let n=$a(t,e);if(n>=0)return t[n|1]}function $a(t,e){return LR(t,e,1)}function LR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Vs={},$t=[],Ls=new G(""),zD=new G("",-1),HD=new G(""),Ol=class{get(e,n=ka){if(n===ka){let r=new Error(`NullInjectorError: No provider for ${bt(e)}!`);throw r.name="NullInjectorError",r}return n}},GD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(GD||{}),pn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(pn||{}),br=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(br||{});function jR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function ng(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];BR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function UR(t){return t===3||t===4||t===6}function BR(t){return t.charCodeAt(0)===64}function Fa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?eD(t,n,i,null,e[++r]):eD(t,n,i,null,null))}}return t}function eD(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var WD="ng-template";function $R(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Xg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Xg(t){return t.type===4&&t.value!==WD}function qR(t,e,n){let r=t.type===4&&!n?WD:t.value;return e===r}function zR(t,e,n){let r=4,i=t.attrs,s=i!==null?WR(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!en(r)&&!en(c))return!1;if(o&&en(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!qR(t,c,n)||c===""&&e.length===1){if(en(r))return!1;o=!0}}else if(r&8){if(i===null||!$R(t,i,c,n)){if(en(r))return!1;o=!0}}else{let l=e[++a],h=HR(c,i,Xg(t),n);if(h===-1){if(en(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(en(r))return!1;o=!0}}}}return en(r)||o}function en(t){return(t&1)===0}function HR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return KR(e,t)}function GR(t,e,n=!1){for(let r=0;r<e.length;r++)if(zR(t,e[r],n))return!0;return!1}function WR(t){for(let e=0;e<t.length;e++){let n=t[e];if(UR(n))return e}return t.length}function KR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function tD(t,e){return t?":not("+e.trim()+")":e}function QR(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!en(o)&&(e+=tD(s,i),i=""),r=o,s=s||!en(r);n++}return i!==""&&(e+=tD(s,i)),e}function YR(t){return t.map(QR).join(",")}function ZR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!en(i))break;i=s}r++}return{attrs:e,classes:n}}function KD(t){return Ba(()=>{let e=XD(t),n=pe(j({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===GD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||pn.Emulated,styles:t.styles||$t,_:null,schemas:t.schemas||null,tView:null,id:""});eC(n);let r=t.dependencies;return n.directiveDefs=rD(r,!1),n.pipeDefs=rD(r,!0),n.id=eN(n),n})}function JR(t){return Tr(t)||QD(t)}function XR(t){return t!==null}function _n(t){return Ba(()=>({type:t.type,bootstrap:t.bootstrap||$t,declarations:t.declarations||$t,imports:t.imports||$t,exports:t.exports||$t,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nD(t,e){if(t==null)return Vs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=br.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==br.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Oe(t){return Ba(()=>{let e=XD(t);return eC(e),e})}function Tr(t){return t[wR]||null}function QD(t){return t[_R]||null}function YD(t){return t[IR]||null}function ZD(t){let e=Tr(t)||QD(t)||YD(t);return e!==null?e.standalone:!1}function JD(t,e){let n=t[ER]||null;if(!n&&e===!0)throw new Error(`Type ${bt(t)} does not have '\u0275mod' property.`);return n}function XD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Vs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||$t,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nD(t.inputs,e),outputs:nD(t.outputs),debugInfo:null}}function eC(t){t.features?.forEach(e=>e(t))}function rD(t,e){if(!t)return null;let n=e?YD:JR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(XR)}function eN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ht(t){return{\u0275providers:t}}function tN(...t){return{\u0275providers:tC(!0,t),\u0275fromNgModule:!0}}function tC(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Jg(e,o=>{let a=o;rg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nC(i,s),n}function nC(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];em(i,s=>{e(s,r)})}}function rg(t,e,n,r){if(t=Ct(t),!t)return!1;let i=null,s=YE(t),o=!s&&Tr(t);if(!s&&!o){let c=t.ngModule;if(s=YE(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)rg(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Jg(s.imports,h=>{rg(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&nC(l,e)}if(!a){let l=Fs(i)||(()=>new i);e({provide:i,useFactory:l,deps:$t},i),e({provide:HD,useValue:i,multi:!0},i),e({provide:Ls,useValue:()=>Y(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;em(c,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function em(t,e){for(let n of t)jD(n)&&(n=n.\u0275providers),Array.isArray(n)?em(n,e):e(n)}var nN=Te({provide:String,useValue:Te});function rC(t){return t!==null&&typeof t=="object"&&nN in t}function rN(t){return!!(t&&t.useExisting)}function iN(t){return!!(t&&t.useFactory)}function js(t){return typeof t=="function"}function sN(t){return!!t.useClass}var sd=new G(""),bl={},oN={},Up;function tm(){return Up===void 0&&(Up=new Ol),Up}var Tt=class{},Va=class extends Tt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sg(e,o=>this.processProvider(o)),this.records.set(zD,xs(void 0,this)),i.has("environment")&&this.records.set(Tt,xs(void 0,this));let s=this.records.get(sd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(HD,$t,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Er(this),r=Bt(void 0),i;try{return e()}finally{Er(n),Bt(r)}}get(e,n=ka,r=de.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(JE))return e[JE](this);r=rd(r);let i,s=Er(this),o=Bt(void 0);try{if(!(r&de.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=dN(e)&&td(e);l&&this.injectableDefInScope(l)?c=xs(ig(e),bl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&de.Self?tm():this.parent;return n=r&de.Optional&&n===ka?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Nl]=a[Nl]||[]).unshift(bt(e)),s)throw a;return NR(a,e,"R3InjectorError",this.source)}else throw a}finally{Bt(o),Er(s)}}resolveInjectorInitializers(){let e=ye(null),n=Er(this),r=Bt(void 0),i;try{let s=this.get(Ls,$t,de.Self);for(let o of s)o()}finally{Er(n),Bt(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=Ct(e);let n=js(e)?e:Ct(e&&e.provide),r=uN(e);if(!js(e)&&e.multi===!0){let i=this.records.get(n);i||(i=xs(void 0,bl,!0),i.factory=()=>tg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ye(null);try{return n.value===bl&&(n.value=oN,n.value=n.factory()),typeof n.value=="object"&&n.value&&lN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ct(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ig(t){let e=td(t),n=e!==null?e.factory:Fs(t);if(n!==null)return n;if(t instanceof G)throw new Q(204,!1);if(t instanceof Function)return aN(t);throw new Q(204,!1)}function aN(t){if(t.length>0)throw new Q(204,!1);let n=yR(t);return n!==null?()=>n.factory(t):()=>new t}function uN(t){if(rC(t))return xs(void 0,t.useValue);{let e=iC(t);return xs(e,bl)}}function iC(t,e,n){let r;if(js(t)){let i=Ct(t);return Fs(i)||ig(i)}else if(rC(t))r=()=>Ct(t.useValue);else if(iN(t))r=()=>t.useFactory(...tg(t.deps||[]));else if(rN(t))r=()=>Y(Ct(t.useExisting));else{let i=Ct(t&&(t.useClass||t.provide));if(cN(t))r=()=>new i(...tg(t.deps));else return Fs(i)||ig(i)}return r}function xs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function cN(t){return!!t.deps}function lN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dN(t){return typeof t=="function"||typeof t=="object"&&t instanceof G}function sg(t,e){for(let n of t)Array.isArray(n)?sg(n,e):n&&jD(n)?sg(n.\u0275providers,e):e(n)}function Gt(t,e){t instanceof Va&&t.assertNotDestroyed();let n,r=Er(t),i=Bt(void 0);try{return e()}finally{Er(r),Bt(i)}}function sC(){return UD()!==void 0||MR()!=null}function hN(t){if(!sC())throw new Q(-203,!1)}function fN(t){return typeof t=="function"}var Hn=0,ce=1,X=2,mt=3,tn=4,rn=5,kl=6,Fl=7,nn=8,Us=9,gn=10,je=11,La=12,iD=13,Ks=14,mn=15,Ci=16,Rs=17,Bn=18,od=19,oC=20,Dr=21,Bp=22,qt=23,$n=25,aC=1;var bi=7,Vl=8,Bs=9,kt=10,Ll=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ll||{});function Cr(t){return Array.isArray(t)&&typeof t[aC]=="object"}function Gn(t){return Array.isArray(t)&&t[aC]===!0}function nm(t){return(t.flags&4)!==0}function ad(t){return t.componentOffset>-1}function ud(t){return(t.flags&1)===1}function Ar(t){return!!t.template}function og(t){return(t[X]&512)!==0}var ag=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function uC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Wn(){return cC}function cC(t){return t.type.prototype.ngOnChanges&&(t.setInput=gN),pN}Wn.ngInherit=!0;function pN(){let t=dC(this),e=t?.current;if(e){let n=t.previous;if(n===Vs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function gN(t,e,n,r,i){let s=this.declaredInputs[r],o=dC(t)||mN(t,{previous:Vs,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new ag(l&&l.currentValue,n,c===Vs),uC(t,e,i,n)}var lC="__ngSimpleChanges__";function dC(t){return t[lC]||null}function mN(t,e){return t[lC]=e}var sD=null;var hn=function(t,e,n){sD?.(t,e,n)},yN="svg",vN="math";function yn(t){for(;Array.isArray(t);)t=t[Hn];return t}function hC(t,e){return yn(e[t])}function Wt(t,e){return yn(e[t.index])}function fC(t,e){return t.data[e]}function xr(t,e){let n=e[t];return Cr(n)?n:n[Hn]}function wN(t){return(t[X]&4)===4}function rm(t){return(t[X]&128)===128}function _N(t){return Gn(t[mt])}function $s(t,e){return e==null?null:t[e]}function pC(t){t[Rs]=0}function gC(t){t[X]&1024||(t[X]|=1024,rm(t)&&ld(t))}function IN(t,e){for(;t>0;)e=e[Ks],t--;return e}function cd(t){return!!(t[X]&9216||t[qt]?.dirty)}function ug(t){t[gn].changeDetectionScheduler?.notify(8),t[X]&64&&(t[X]|=1024),cd(t)&&ld(t)}function ld(t){t[gn].changeDetectionScheduler?.notify(0);let e=Ti(t);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!rm(e)));)e=Ti(e)}function mC(t,e){if((t[X]&256)===256)throw new Q(911,!1);t[Dr]===null&&(t[Dr]=[]),t[Dr].push(e)}function EN(t,e){if(t[Dr]===null)return;let n=t[Dr].indexOf(e);n!==-1&&t[Dr].splice(n,1)}function Ti(t){let e=t[mt];return Gn(e)?e[mt]:e}var he={lFrame:bC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var yC=!1;function DN(){return he.lFrame.elementDepthCount}function CN(){he.lFrame.elementDepthCount++}function bN(){he.lFrame.elementDepthCount--}function vC(){return he.bindingsEnabled}function TN(){return he.skipHydrationRootTNode!==null}function AN(t){return he.skipHydrationRootTNode===t}function SN(){he.skipHydrationRootTNode=null}function Ie(){return he.lFrame.lView}function it(){return he.lFrame.tView}function I3(t){return he.lFrame.contextLView=t,t[nn]}function E3(t){return he.lFrame.contextLView=null,t}function At(){let t=wC();for(;t!==null&&t.type===64;)t=t.parent;return t}function wC(){return he.lFrame.currentTNode}function MN(){let t=he.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Oi(t,e){let n=he.lFrame;n.currentTNode=t,n.isParent=e}function im(){return he.lFrame.isParent}function _C(){he.lFrame.isParent=!1}function IC(){return yC}function oD(t){yC=t}function xN(){let t=he.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function RN(t){return he.lFrame.bindingIndex=t}function dd(){return he.lFrame.bindingIndex++}function NN(t){let e=he.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function PN(){return he.lFrame.inI18n}function ON(t,e){let n=he.lFrame;n.bindingIndex=n.bindingRootIndex=t,cg(e)}function kN(){return he.lFrame.currentDirectiveIndex}function cg(t){he.lFrame.currentDirectiveIndex=t}function FN(t){let e=he.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function EC(){return he.lFrame.currentQueryIndex}function sm(t){he.lFrame.currentQueryIndex=t}function VN(t){let e=t[ce];return e.type===2?e.declTNode:e.type===1?t[rn]:null}function DC(t,e,n){if(n&de.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&de.Host);)if(i=VN(s),i===null||(s=s[Ks],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=he.lFrame=CC();return r.currentTNode=e,r.lView=t,!0}function om(t){let e=CC(),n=t[ce];he.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function CC(){let t=he.lFrame,e=t===null?null:t.child;return e===null?bC(t):e}function bC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function TC(){let t=he.lFrame;return he.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var AC=TC;function am(){let t=TC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function LN(t){return(he.lFrame.contextLView=IN(t,he.lFrame.contextLView))[nn]}function Qs(){return he.lFrame.selectedIndex}function Ai(t){he.lFrame.selectedIndex=t}function hd(){let t=he.lFrame;return fC(t.tView,t.selectedIndex)}function jN(){return he.lFrame.currentNamespace}var SC=!0;function fd(){return SC}function pd(t){SC=t}function UN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=cC(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function gd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Tl(t,e,n){MC(t,e,3,n)}function Al(t,e,n,r){(t[X]&3)===n&&MC(t,e,n,r)}function $p(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function MC(t,e,n,r){let i=r!==void 0?t[Rs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Rs]+=65536),(a<s||s==-1)&&(BN(t,n,e,c),t[Rs]=(t[Rs]&4294901760)+c+2),c++}function aD(t,e){hn(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),hn(5,t,e)}}function BN(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[X]>>14<t[Rs]>>16&&(t[X]&3)===e&&(t[X]+=16384,aD(a,s)):aD(a,s)}var ks=-1,Si=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function $N(t){return t instanceof Si}function qN(t){return(t.flags&8)!==0}function zN(t){return(t.flags&16)!==0}var qp={},lg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=rd(r);let i=this.injector.get(e,qp,r);return i!==qp||n===qp?i:this.parentInjector.get(e,n,r)}};function xC(t){return t!==ks}function jl(t){return t&32767}function HN(t){return t>>16}function Ul(t,e){let n=HN(t),r=e;for(;n>0;)r=r[Ks],n--;return r}var dg=!0;function uD(t){let e=dg;return dg=t,e}var GN=256,RC=GN-1,NC=5,WN=0,fn={};function KN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Oa)&&(r=n[Oa]),r==null&&(r=n[Oa]=WN++);let i=r&RC,s=1<<i;e.data[t+(i>>NC)]|=s}function Bl(t,e){let n=PC(t,e);if(n!==-1)return n;let r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,zp(r.data,t),zp(e,null),zp(r.blueprint,null));let i=um(t,e),s=t.injectorIndex;if(xC(i)){let o=jl(i),a=Ul(i,e),c=a[ce].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function zp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function PC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function um(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=LC(i),r===null)return ks;if(n++,i=i[Ks],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ks}function hg(t,e,n){KN(t,e,n)}function OC(t,e,n){if(n&de.Optional||t!==void 0)return t;Zg(e,"NodeInjector")}function kC(t,e,n,r){if(n&de.Optional&&r===void 0&&(r=null),!(n&(de.Self|de.Host))){let i=t[Us],s=Bt(void 0);try{return i?i.get(e,r,n&de.Optional):BD(e,r,n&de.Optional)}finally{Bt(s)}}return OC(r,e,n)}function FC(t,e,n,r=de.Default,i){if(t!==null){if(e[X]&2048&&!(r&de.Self)){let o=JN(t,e,n,r,fn);if(o!==fn)return o}let s=VC(t,e,n,r,fn);if(s!==fn)return s}return kC(e,n,r,i)}function VC(t,e,n,r,i){let s=YN(n);if(typeof s=="function"){if(!DC(e,t,r))return r&de.Host?OC(i,n,r):kC(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&de.Optional))Zg(n);else return o}finally{AC()}}else if(typeof s=="number"){let o=null,a=PC(t,e),c=ks,l=r&de.Host?e[mn][rn]:null;for((a===-1||r&de.SkipSelf)&&(c=a===-1?um(t,e):e[a+8],c===ks||!lD(r,!1)?a=-1:(o=e[ce],a=jl(c),e=Ul(c,e)));a!==-1;){let h=e[ce];if(cD(s,a,h.data)){let p=QN(a,e,n,o,r,l);if(p!==fn)return p}c=e[a+8],c!==ks&&lD(r,e[ce].data[a+8]===l)&&cD(s,a,e)?(o=h,a=jl(c),e=Ul(c,e)):a=-1}}return i}function QN(t,e,n,r,i,s){let o=e[ce],a=o.data[t+8],c=r==null?ad(a)&&dg:r!=o&&(a.type&3)!==0,l=i&de.Host&&s===a,h=Sl(a,o,n,c,l);return h!==null?Mi(e,o,h,a):fn}function Sl(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let D=o[y];if(y<c&&n===D||y>=c&&D.type===n)return y}if(i){let y=o[c];if(y&&Ar(y)&&y.type===n)return c}return null}function Mi(t,e,n,r){let i=t[n],s=e.data;if($N(i)){let o=i;o.resolving&&CR(DR(s[n]));let a=uD(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Bt(o.injectImpl):null,h=DC(t,r,de.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&UN(n,s[n],e)}finally{l!==null&&Bt(l),uD(a),o.resolving=!1,AC()}}return i}function YN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Oa)?t[Oa]:void 0;return typeof e=="number"?e>=0?e&RC:ZN:e}function cD(t,e,n){let r=1<<t;return!!(n[e+(t>>NC)]&r)}function lD(t,e){return!(t&de.Self)&&!(t&de.Host&&e)}var Di=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return FC(this._tNode,this._lView,e,rd(r),n)}};function ZN(){return new Di(At(),Ie())}function Rr(t){return Ba(()=>{let e=t.prototype.constructor,n=e[Rl]||fg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Rl]||fg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function fg(t){return kD(t)?()=>{let e=fg(Ct(t));return e&&e()}:Fs(t)}function JN(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[X]&2048&&!(o[X]&512);){let a=VC(s,o,n,r|de.Self,fn);if(a!==fn)return a;let c=s.parent;if(!c){let l=o[oC];if(l){let h=l.get(n,fn,r);if(h!==fn)return h}c=LC(o),o=o[Ks]}s=c}return i}function LC(t){let e=t[ce],n=e.type;return n===2?e.declTNode:n===1?t[rn]:null}function dD(t,e=null,n=null,r){let i=jC(t,e,n,r);return i.resolveInjectorInitializers(),i}function jC(t,e=null,n=null,r,i=new Set){let s=[n||$t,tN(t)];return r=r||(typeof t=="object"?void 0:bt(t)),new Va(s,e||tm(),r||null,i)}var Ii=class Ii{static create(e,n){if(Array.isArray(e))return dD({name:""},n,e,"");{let r=e.name??"";return dD({name:r},e.parent,e.providers,r)}}};Ii.THROW_IF_NOT_FOUND=ka,Ii.NULL=new Ol,Ii.\u0275prov=z({token:Ii,providedIn:"any",factory:()=>Y(zD)}),Ii.__NG_ELEMENT_ID__=-1;var rt=Ii;var XN=new G("");XN.__NG_ELEMENT_ID__=t=>{let e=At();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(t&de.Optional)return null;throw new Q(204,!1)};var eP="ngOriginalError";function Hp(t){return t[eP]}var UC=!0,cm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tP,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),pg=class extends cm{constructor(e){super(),this._lView=e}onDestroy(e){return mC(this._lView,e),()=>EN(this._lView,e)}};function tP(){return new pg(Ie())}var Nr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new et(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var gg=class extends Le{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,sC()&&(this.destroyRef=F(cm,{optional:!0})??void 0,this.pendingTasks=F(Nr,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Fe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Pe=gg;function $l(...t){}function BC(t){let e,n;function r(){t=$l;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function hD(t){return queueMicrotask(()=>t()),()=>{t=$l}}var lm="isAngularZone",ql=lm+"_ID",nP=0,we=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pe(!1),this.onMicrotaskEmpty=new Pe(!1),this.onStable=new Pe(!1),this.onError=new Pe(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=UC}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,sP(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(lm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Q(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,rP,$l,$l);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},rP={};function dm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function iP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){BC(()=>{t.callbackScheduled=!1,mg(t),t.isCheckStableRunning=!0,dm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),mg(t)}function sP(t){let e=()=>{iP(t)},n=nP++;t._inner=t._inner.fork({name:"angular",properties:{[lm]:!0,[ql]:n,[ql+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(oP(c))return r.invokeTask(s,o,a,c);try{return fD(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pD(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return fD(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!aP(c)&&e(),pD(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,mg(t),dm(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function mg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function fD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pD(t){t._nesting--,dm(t)}var yg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pe,this.onMicrotaskEmpty=new Pe,this.onStable=new Pe,this.onError=new Pe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function oP(t){return $C(t,"__ignore_ng_zone__")}function aP(t){return $C(t,"__scheduler_tick__")}function $C(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var qn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Hp(e);for(;n&&Hp(n);)n=Hp(n);return n||null}},uP=new G("",{providedIn:"root",factory:()=>{let t=F(we),e=F(qn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function cP(){return Ys(At(),Ie())}function Ys(t,e){return new Ft(Wt(t,e))}var Ft=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=cP;let t=e;return t})();function lP(t){return t instanceof Ft?t.nativeElement:t}function dP(){return this._results[Symbol.iterator]()}var vg=class t{get changes(){return this._changes??=new Pe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=dP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=kR(e);(this._changesDetected=!OR(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function qC(t){return(t.flags&128)===128}var zC=new Map,hP=0;function fP(){return hP++}function pP(t){zC.set(t[od],t)}function wg(t){zC.delete(t[od])}var gD="__ngContext__";function Sr(t,e){Cr(e)?(t[gD]=e[od],pP(e)):t[gD]=e}function HC(t){return WC(t[La])}function GC(t){return WC(t[tn])}function WC(t){for(;t!==null&&!Gn(t);)t=t[tn];return t}var _g;function KC(t){_g=t}function gP(){if(_g!==void 0)return _g;if(typeof document<"u")return document;throw new Q(210,!1)}var hm=new G("",{providedIn:"root",factory:()=>mP}),mP="ng",fm=new G(""),Kt=new G("",{providedIn:"platform",factory:()=>"unknown"});var pm=new G("",{providedIn:"root",factory:()=>gP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var yP="h",vP="b";var wP=()=>null;function gm(t,e,n=!1){return wP(t,e,n)}var QC=!1,_P=new G("",{providedIn:"root",factory:()=>QC});var Il;function IP(){if(Il===void 0&&(Il=null,Jp.trustedTypes))try{Il=Jp.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Il}function EP(t){return IP()?.createScriptURL(t)||t}var zl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PD})`}};function md(t){return t instanceof zl?t.changingThisBreaksApplicationSecurity:t}function YC(t,e){let n=DP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${PD})`)}return n===e}function DP(t){return t instanceof zl&&t.getTypeName()||null}var CP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ZC(t){return t=String(t),t.match(CP)?t:"unsafe:"+t}var mm=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(mm||{});function D3(t){let e=bP();return e?e.sanitize(mm.URL,t)||"":YC(t,"URL")?md(t):ZC(nd(t))}function C3(t){return EP(t[0])}function bP(){let t=Ie();return t&&t[gn].sanitizer}var TP=/^>|^->|<!--|-->|--!>|<!-$/g,AP=/(<|>)/g,SP="\u200B$1\u200B";function MP(t){return t.replace(TP,e=>e.replace(AP,SP))}function JC(t){return t instanceof Function?t():t}function xP(t){return(t??F(rt)).get(Kt)==="browser"}var vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(vn||{}),RP;function ym(t,e){return RP(t,e)}function Ns(t,e,n,r,i){if(r!=null){let s,o=!1;Gn(r)?s=r:Cr(r)&&(o=!0,r=r[Hn]);let a=yn(r);t===0&&n!==null?i==null?rb(e,n,a):Hl(e,n,a,i||null,!0):t===1&&n!==null?Hl(e,n,a,i||null,!0):t===2?WP(e,a,o):t===3&&e.destroyNode(a),s!=null&&QP(e,t,s,n,i)}}function NP(t,e){return t.createText(e)}function PP(t,e,n){t.setValue(e,n)}function OP(t,e){return t.createComment(MP(e))}function XC(t,e,n){return t.createElement(e,n)}function kP(t,e){eb(t,e),e[Hn]=null,e[rn]=null}function FP(t,e,n,r,i,s){r[Hn]=i,r[rn]=e,vd(t,r,n,1,i,s)}function eb(t,e){e[gn].changeDetectionScheduler?.notify(9),vd(t,e,e[je],2,null,null)}function VP(t){let e=t[La];if(!e)return Gp(t[ce],t);for(;e;){let n=null;if(Cr(e))n=e[La];else{let r=e[kt];r&&(n=r)}if(!n){for(;e&&!e[tn]&&e!==t;)Cr(e)&&Gp(e[ce],e),e=e[mt];e===null&&(e=t),Cr(e)&&Gp(e[ce],e),n=e&&e[tn]}e=n}}function LP(t,e,n,r){let i=kt+r,s=n.length;r>0&&(n[i-1][tn]=e),r<s-kt?(e[tn]=n[i],qD(n,kt+r,e)):(n.push(e),e[tn]=null),e[mt]=n;let o=e[Ci];o!==null&&n!==o&&tb(o,e);let a=e[Bn];a!==null&&a.insertView(t),ug(e),e[X]|=128}function tb(t,e){let n=t[Bs],r=e[mt];if(Cr(r))t[X]|=Ll.HasTransplantedViews;else{let i=r[mt][mn];e[mn]!==i&&(t[X]|=Ll.HasTransplantedViews)}n===null?t[Bs]=[e]:n.push(e)}function vm(t,e){let n=t[Bs],r=n.indexOf(e);n.splice(r,1)}function Ig(t,e){if(t.length<=kt)return;let n=kt+e,r=t[n];if(r){let i=r[Ci];i!==null&&i!==t&&vm(i,r),e>0&&(t[n-1][tn]=r[tn]);let s=Pl(t,kt+e);kP(r[ce],r);let o=s[Bn];o!==null&&o.detachView(s[ce]),r[mt]=null,r[tn]=null,r[X]&=-129}return r}function nb(t,e){if(!(e[X]&256)){let n=e[je];n.destroyNode&&vd(t,e,n,3,null,null),VP(e)}}function Gp(t,e){if(e[X]&256)return;let n=ye(null);try{e[X]&=-129,e[X]|=256,e[qt]&&_p(e[qt]),UP(t,e),jP(t,e),e[ce].type===1&&e[je].destroy();let r=e[Ci];if(r!==null&&Gn(e[mt])){r!==e[mt]&&vm(r,e);let i=e[Bn];i!==null&&i.detachView(t)}wg(e)}finally{ye(n)}}function jP(t,e){let n=t.cleanup,r=e[Fl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Fl]=null);let i=e[Dr];if(i!==null){e[Dr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function UP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Si)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];hn(4,a,c);try{c.call(a)}finally{hn(5,a,c)}}else{hn(4,i,s);try{s.call(i)}finally{hn(5,i,s)}}}}}function BP(t,e,n){return $P(t,e.parent,n)}function $P(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Hn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===pn.None||s===pn.Emulated)return null}return Wt(r,n)}}function Hl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function rb(t,e,n){t.appendChild(e,n)}function mD(t,e,n,r,i){r!==null?Hl(t,e,n,r,i):rb(t,e,n)}function ib(t,e){return t.parentNode(e)}function qP(t,e){return t.nextSibling(e)}function zP(t,e,n){return GP(t,e,n)}function HP(t,e,n){return t.type&40?Wt(t,n):null}var GP=HP,yD;function yd(t,e,n,r){let i=BP(t,r,e),s=e[je],o=r.parent||e[rn],a=zP(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)mD(s,i,n[c],a,!1);else mD(s,i,n,a,!1);yD!==void 0&&yD(s,r,e,n,i)}function Pa(t,e){if(e!==null){let n=e.type;if(n&3)return Wt(e,t);if(n&4)return Eg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Pa(t,r);{let i=t[e.index];return Gn(i)?Eg(-1,i):yn(i)}}else{if(n&128)return Pa(t,e.next);if(n&32)return ym(e,t)()||yn(t[e.index]);{let r=sb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ti(t[mn]);return Pa(i,r)}else return Pa(t,e.next)}}}return null}function sb(t,e){if(e!==null){let r=t[mn][rn],i=e.projection;return r.projection[i]}return null}function Eg(t,e){let n=kt+t+1;if(n<e.length){let r=e[n],i=r[ce].firstChild;if(i!==null)return Pa(r,i)}return e[bi]}function WP(t,e,n){t.removeChild(null,e,n)}function wm(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Sr(yn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)wm(t,e,n.child,r,i,s,!1),Ns(e,t,i,a,s);else if(c&32){let l=ym(n,r),h;for(;h=l();)Ns(e,t,i,h,s);Ns(e,t,i,a,s)}else c&16?KP(t,e,r,n,i,s):Ns(e,t,i,a,s);n=o?n.projectionNext:n.next}}function vd(t,e,n,r,i,s){wm(n,r,t.firstChild,e,i,s,!1)}function KP(t,e,n,r,i,s){let o=n[mn],c=o[rn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ns(e,t,i,h,s)}else{let l=c,h=o[mt];qC(r)&&(l.flags|=128),wm(t,e,l,h,i,s,!0)}}function QP(t,e,n,r,i){let s=n[bi],o=yn(n);s!==o&&Ns(e,t,r,s,i);for(let a=kt;a<n.length;a++){let c=n[a];vd(c[ce],c,t,e,r,s)}}function YP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:vn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=vn.Important),t.setStyle(n,r,i,s))}}function ZP(t,e,n){t.setAttribute(e,"style",n)}function ob(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ab(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&ng(t,e,r),i!==null&&ob(t,e,i),s!==null&&ZP(t,e,s)}var Pr={};function b3(t=1){ub(it(),Ie(),Qs()+t,!1)}function ub(t,e,n,r){if(!r)if((e[X]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Tl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Al(e,s,0,n)}Ai(n)}function ne(t,e=de.Default){let n=Ie();if(n===null)return Y(t,e);let r=At();return FC(r,n,Ct(t),e)}function cb(){let t="invalid";throw new Error(t)}function lb(t,e,n,r,i,s){let o=ye(null);try{let a=null;i&br.SignalBased&&(a=e[r][Fn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&br.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):uC(e,a,r,s)}finally{ye(o)}}function JP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ai(~i);else{let s=i,o=n[++r],a=n[++r];ON(o,s);let c=e[s];a(2,c)}}}finally{Ai(-1)}}function wd(t,e,n,r,i,s,o,a,c,l,h){let p=e.blueprint.slice();return p[Hn]=i,p[X]=r|4|128|8|64,(l!==null||t&&t[X]&2048)&&(p[X]|=2048),pC(p),p[mt]=p[Ks]=t,p[nn]=n,p[gn]=o||t&&t[gn],p[je]=a||t&&t[je],p[Us]=c||t&&t[Us]||null,p[rn]=s,p[od]=fP(),p[kl]=h,p[oC]=l,p[mn]=e.type==2?t[mn]:p,p}function qa(t,e,n,r,i){let s=t.data[e];if(s===null)s=XP(t,e,n,r,i),PN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=MN();s.injectorIndex=o===null?-1:o.injectorIndex}return Oi(s,!0),s}function XP(t,e,n,r,i){let s=wC(),o=im(),a=o?s:s&&s.parent,c=t.data[e]=s1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function db(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hb(t,e,n,r,i){let s=Qs(),o=r&2;try{Ai(-1),o&&e.length>$n&&ub(t,e,$n,!1),hn(o?2:0,i),n(r,i)}finally{Ai(s),hn(o?3:1,i)}}function _m(t,e,n){if(nm(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{ye(r)}}}function Im(t,e,n){vC()&&(d1(t,e,n,Wt(n,e)),(n.flags&64)===64&&gb(t,e,n))}function Em(t,e,n=Wt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function fb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Dm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Dm(t,e,n,r,i,s,o,a,c,l,h){let p=$n+r,g=p+i,y=e1(p,g),D=typeof l=="function"?l():l;return y[ce]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:h}}function e1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Pr);return n}function t1(t,e,n,r){let s=r.get(_P,QC)||n===pn.ShadowDom,o=t.selectRootElement(e,s);return n1(o),o}function n1(t){r1(t)}var r1=()=>null;function i1(t,e,n,r){let i=vb(e);i.push(n),t.firstCreatePass&&wb(t).push(r,i.length-1)}function s1(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return TN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vD(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=br.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?wD(r,n,l,a,c):wD(r,n,l,a)}return r}function wD(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function o1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=s[h],g=n?n.get(p):null,y=g?g.inputs:null,D=g?g.outputs:null;c=vD(0,p.inputs,h,c,y),l=vD(1,p.outputs,h,l,D);let M=c!==null&&o!==null&&!Xg(e)?E1(c,h,o):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function a1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Cm(t,e,n,r,i,s,o,a){let c=Wt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Tm(t,n,h,r,i),ad(e)&&u1(n,e.index)):e.type&3?(r=a1(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function u1(t,e){let n=xr(e,t);n[X]&16||(n[X]|=64)}function bm(t,e,n,r){if(vC()){let i=r===null?null:{"":-1},s=f1(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&pb(t,e,n,o,i,a),i&&p1(n,r,i)}n.mergedAttrs=Fa(n.mergedAttrs,n.attrs)}function pb(t,e,n,r,i,s){for(let l=0;l<r.length;l++)hg(Bl(n,e),t,r[l].type);m1(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,c=db(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Fa(n.mergedAttrs,h.hostAttrs),y1(t,n,e,c,h),g1(c,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}o1(t,n,s)}function c1(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;l1(o)!=a&&o.push(a),o.push(n,r,s)}}function l1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function d1(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;ad(n)&&v1(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Bl(n,e),Sr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Mi(e,t,a,n);if(Sr(l,e),o!==null&&I1(e,a-i,l,c,n,o),Ar(c)){let h=xr(n.index,e);h[nn]=Mi(e,t,a,n)}}}function gb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=kN();try{Ai(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];cg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&h1(c,l)}}finally{Ai(-1),cg(o)}}function h1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function f1(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(GR(e,o.selectors,!1))if(r||(r=[]),Ar(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Dg(t,e,c)}else r.unshift(o),Dg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Dg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function p1(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}}function g1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ar(e)&&(n[""]=t)}}function m1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function y1(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Fs(i.type,!0)),o=new Si(s,Ar(i),ne);t.blueprint[r]=o,n[r]=o,c1(t,e,r,db(t,n,i.hostVars,Pr),i)}function v1(t,e,n){let r=Wt(e,t),i=fb(n),s=t[gn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=_d(t,wd(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function w1(t,e,n,r,i,s){let o=Wt(t,e);_1(e[je],o,s,t.value,n,r,i)}function _1(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?nd(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function I1(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],h=o[a++],p=o[a++];lb(r,n,c,l,h,p)}}function E1(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function mb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function yb(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];sm(s),a.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function _d(t,e){return t[La]?t[iD][tn]=e:t[La]=e,t[iD]=e,e}function Cg(t,e,n){sm(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function vb(t){return t[Fl]??=[]}function wb(t){return t.cleanup??=[]}function _b(t,e){let n=t[Us],r=n?n.get(qn,null):null;r&&r.handleError(e)}function Tm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],h=t.data[o];lb(h,l,r,a,c,i)}}function D1(t,e,n){let r=hC(e,t);PP(t[je],r,n)}function C1(t,e){let n=xr(e,t),r=n[ce];b1(r,n);let i=n[Hn];i!==null&&n[kl]===null&&(n[kl]=gm(i,n[Us])),Am(r,n,n[nn])}function b1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Am(t,e,n){om(e);try{let r=t.viewQuery;r!==null&&Cg(1,r,n);let i=t.template;i!==null&&hb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Bn]?.finishViewCreation(t),t.staticContentQueries&&yb(t,e),t.staticViewQueries&&Cg(2,t.viewQuery,n);let s=t.components;s!==null&&T1(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,am()}}function T1(t,e){for(let n=0;n<e.length;n++)C1(t,e[n])}function A1(t,e,n,r){let i=ye(null);try{let s=e.tView,a=t[X]&4096?4096:16,c=wd(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Ci]=l;let h=t[Bn];return h!==null&&(c[Bn]=h.createEmbeddedView(s)),Am(s,c,n),c}finally{ye(i)}}function _D(t,e){return!e||e.firstChild===null||qC(t)}function S1(t,e,n,r=!0){let i=e[ce];if(LP(i,e,t,n),r){let o=Eg(n,t),a=e[je],c=ib(a,t[bi]);c!==null&&FP(i,t[rn],a,e,c,o)}let s=e[kl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Gl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(yn(s)),Gn(s)&&M1(s,r);let o=n.type;if(o&8)Gl(t,e,n.child,r);else if(o&32){let a=ym(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=sb(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ti(e[mn]);Gl(c[ce],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function M1(t,e){for(let n=kt;n<t.length;n++){let r=t[n],i=r[ce].firstChild;i!==null&&Gl(r[ce],r,i,e)}t[bi]!==t[Hn]&&e.push(t[bi])}var Ib=[];function x1(t){return t[qt]??R1(t)}function R1(t){let e=Ib.pop()??Object.create(P1);return e.lView=t,e}function N1(t){t.lView[qt]!==t&&(t.lView=null,Ib.push(t))}var P1=pe(j({},Sa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ld(t.lView)},consumerOnSignalRead(){this.lView[qt]=this}});function O1(t){let e=t[qt]??Object.create(k1);return e.lView=t,e}var k1=pe(j({},Sa),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ti(t.lView);for(;e&&!Eb(e[ce]);)e=Ti(e);e&&gC(e)},consumerOnSignalRead(){this.lView[qt]=this}});function Eb(t){return t.type!==2}var F1=100;function Db(t,e=!0,n=0){let r=t[gn],i=r.rendererFactory,s=!1;s||i.begin?.();try{V1(t,n)}catch(o){throw e&&_b(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function V1(t,e){let n=IC();try{oD(!0),bg(t,e);let r=0;for(;cd(t);){if(r===F1)throw new Q(103,!1);r++,bg(t,1)}}finally{oD(n)}}function L1(t,e,n,r){let i=e[X];if((i&256)===256)return;let s=!1,o=!1;!s&&e[gn].inlineEffectRunner?.flush(),om(e);let a=!0,c=null,l=null;s||(Eb(t)?(l=x1(e),c=qc(l)):dE()===null?(a=!1,l=O1(e),c=qc(l)):e[qt]&&(_p(e[qt]),e[qt]=null));try{pC(e),RN(t.bindingStartIndex),n!==null&&hb(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&Tl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Al(e,y,0,null),$p(e,0)}if(o||j1(e),Cb(e,0),t.contentQueries!==null&&yb(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&Tl(e,y)}else{let y=t.contentHooks;y!==null&&Al(e,y,1),$p(e,1)}JP(t,e);let p=t.components;p!==null&&Tb(e,p,0);let g=t.viewQuery;if(g!==null&&Cg(2,g,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&Tl(e,y)}else{let y=t.viewHooks;y!==null&&Al(e,y,2),$p(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bp]){for(let y of e[Bp])y();e[Bp]=null}s||(e[X]&=-73)}catch(h){throw s||ld(e),h}finally{l!==null&&(vp(l,c),a&&N1(l)),am()}}function Cb(t,e){for(let n=HC(t);n!==null;n=GC(n))for(let r=kt;r<n.length;r++){let i=n[r];bb(i,e)}}function j1(t){for(let e=HC(t);e!==null;e=GC(e)){if(!(e[X]&Ll.HasTransplantedViews))continue;let n=e[Bs];for(let r=0;r<n.length;r++){let i=n[r];gC(i)}}}function U1(t,e,n){let r=xr(e,t);bb(r,n)}function bb(t,e){rm(t)&&bg(t,e)}function bg(t,e){let r=t[ce],i=t[X],s=t[qt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&wp(s)),o||=!1,s&&(s.dirty=!1),t[X]&=-9217,o)L1(r,t,r.template,t[nn]);else if(i&8192){Cb(t,1);let a=r.components;a!==null&&Tb(t,a,1)}}function Tb(t,e,n){for(let r=0;r<e.length;r++)U1(t,e[r],n)}function Sm(t,e){let n=IC()?64:1088;for(t[gn].changeDetectionScheduler?.notify(e);t;){t[X]|=n;let r=Ti(t);if(og(t)&&!r)return t;t=r}return null}var xi=class{get rootNodes(){let e=this._lView,n=e[ce];return Gl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nn]}set context(e){this._lView[nn]=e}get destroyed(){return(this._lView[X]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(Gn(e)){let n=e[Vl],r=n?n.indexOf(this):-1;r>-1&&(Ig(e,r),Pl(n,r))}this._attachedToViewContainer=!1}nb(this._lView[ce],this._lView)}onDestroy(e){mC(this._lView,e)}markForCheck(){Sm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){ug(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,Db(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=og(this._lView),n=this._lView[Ci];n!==null&&!e&&vm(n,this._lView),eb(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let n=og(this._lView),r=this._lView[Ci];r!==null&&!n&&tb(r,this._lView),ug(this._lView)}},Ri=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=q1;let t=e;return t})(),B1=Ri,$1=class extends B1{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=A1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new xi(i)}};function q1(){return Mm(At(),Ie())}function Mm(t,e){return t.type&4?new $1(e,t,Ys(t,e)):null}var A3=new RegExp(`^(\\d+)*(${vP}|${yP})*(.*)`);var z1=()=>null;function ID(t,e){return z1(t,e)}var qs=class{},xm=new G("",{providedIn:"root",factory:()=>!1});var Ab=new G(""),Sb=new G(""),Tg=class{},Wl=class{};function H1(t){let e=Error(`No component factory found for ${bt(t)}.`);return e[G1]=t,e}var G1="ngComponent";var Ag=class{resolveComponentFactory(e){throw H1(e)}},Lm=class Lm{};Lm.NULL=new Ag;var zs=Lm,Hs=class{},Kn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>W1();let t=e;return t})();function W1(){let t=Ie(),e=At(),n=xr(e.index,t);return(Cr(n)?n:t)[je]}var K1=(()=>{let e=class e{};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function Kl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=KE(i,a);else if(s==2){let c=a,l=e[++o];r=KE(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ql=class extends zs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Tr(e);return new Gs(n,this.ngModule)}};function ED(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:br.None;e?n.push({propName:o,templateName:r,isSignal:(a&br.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function Q1(t){let e=t.toLowerCase();return e==="svg"?yN:e==="math"?vN:null}var Gs=class extends Wl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=ED(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return ED(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=YR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ye(null);try{i=i||this.ngModule;let o=i instanceof Tt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new lg(e,o):e,c=a.get(Hs,null);if(c===null)throw new Q(407,!1);let l=a.get(K1,null),h=a.get(qs,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",D=r?t1(g,r,this.componentDef.encapsulation,a):XC(g,y,Q1(y)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let T=null;D!==null&&(T=gm(D,a,!0));let P=Dm(0,null,null,1,0,null,null,null,null,null,null),L=wd(null,P,null,M,null,null,p,g,a,null,T);om(L);let B,H,ie=null;try{let W=this.componentDef,I,v=null;W.findHostDirectiveDefs?(I=[],v=new Map,W.findHostDirectiveDefs(W,I,v),I.push(W)):I=[W];let _=Y1(L,D);ie=Z1(_,D,W,I,L,p,g),H=fC(P,$n),D&&eO(g,W,D,r),n!==void 0&&tO(H,this.ngContentSelectors,n),B=X1(ie,W,I,v,L,[nO]),Am(P,L,null)}catch(W){throw ie!==null&&wg(ie),wg(L),W}finally{am()}return new Sg(this.componentType,B,Ys(H,L),L,H)}finally{ye(s)}}},Sg=class extends Tg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new xi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Tm(s[ce],s,i,e,n),this.previousInputValues.set(e,n);let o=xr(this._tNode.index,s);Sm(o,1)}}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Y1(t,e){let n=t[ce],r=$n;return t[r]=e,qa(n,r,2,"#host",null)}function Z1(t,e,n,r,i,s,o){let a=i[ce];J1(r,t,e,o);let c=null;e!==null&&(c=gm(e,i[Us]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=wd(i,fb(n),null,h,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Dg(a,t,r.length-1),_d(i,p),i[t.index]=p}function J1(t,e,n,r){for(let i of t)e.mergedAttrs=Fa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Kl(e,e.mergedAttrs,!0),n!==null&&ab(r,n,e))}function X1(t,e,n,r,i,s){let o=At(),a=i[ce],c=Wt(o,i);pb(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,g=Mi(i,a,p,o);Sr(g,i)}gb(a,i,o),c&&Sr(c,i);let l=Mi(i,a,o.directiveStart+o.componentOffset,o);if(t[nn]=i[nn]=l,s!==null)for(let h of s)h(l,e);return _m(a,o,i),l}function eO(t,e,n,r){if(r)ng(t,n,["ng-version","18.2.3"]);else{let{attrs:i,classes:s}=ZR(e.selectors[0]);i&&ng(t,n,i),s&&s.length>0&&ob(t,n,s.join(" "))}}function tO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function nO(){let t=At();gd(Ie()[ce],t)}var Or=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rO;let t=e;return t})();function rO(){let t=At();return xb(t,Ie())}var iO=Or,Mb=class extends iO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ys(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){let e=um(this._hostTNode,this._hostLView);if(xC(e)){let n=Ul(e,this._hostLView),r=jl(e),i=n[ce].data[r+8];return new Di(i,n)}else return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=DD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-kt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ID(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,_D(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!fN(e),a;if(o)a=n;else{let D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}let c=o?e:new Gs(Tr(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let M=(o?l:this.parentInjector).get(Tt,null);M&&(s=M)}let h=Tr(c.componentType??{}),p=ID(this._lContainer,h?.id??null),g=p?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,_D(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(_N(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[mt],l=new Mb(c,c[rn],c[mt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return S1(o,i,s,r),e.attachToViewContainerRef(),qD(Wp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=DD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ig(this._lContainer,n);r&&(Pl(Wp(this._lContainer),n),nb(r[ce],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ig(this._lContainer,n);return r&&Pl(Wp(this._lContainer),n)!=null?new xi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function DD(t){return t[Vl]}function Wp(t){return t[Vl]||(t[Vl]=[])}function xb(t,e){let n,r=e[t.index];return Gn(r)?n=r:(n=mb(r,e,null,t),e[t.index]=n,_d(e,n)),oO(n,e,t,r),new Mb(n,t,e)}function sO(t,e){let n=t[je],r=n.createComment(""),i=Wt(e,t),s=ib(n,i);return Hl(n,s,r,qP(n,i),!1),r}var oO=cO,aO=()=>!1;function uO(t,e,n){return aO(t,e,n)}function cO(t,e,n,r){if(t[bi])return;let i;n.type&8?i=yn(r):i=sO(e,n),t[bi]=i}var Mg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},xg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Rm(e,n).matches!==null&&this.queries[n].setDirty()}},Rg=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=yO(e):this.predicate=e}},Ng=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Pg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,lO(n,s)),this.matchTNodeWithReadOption(e,n,Sl(n,e,s,!1,!1))}else r===Ri?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Sl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ft||i===Or||i===Ri&&n.type&4)this.addMatch(n.index,-2);else{let s=Sl(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function lO(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function dO(t,e){return t.type&11?Ys(t,e):t.type&4?Mm(t,e):null}function hO(t,e,n,r){return n===-1?dO(e,t):n===-2?fO(t,e,r):Mi(t,t[ce],n,e)}function fO(t,e,n){if(n===Ft)return Ys(e,t);if(n===Ri)return Mm(e,t);if(n===Or)return xb(e,t)}function Rb(t,e,n,r){let i=e[Bn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let h=s[l];a.push(hO(e,h,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Og(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Rb(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-c];for(let p=kt;p<h.length;p++){let g=h[p];g[Ci]===g[mt]&&Og(g[ce],g,l,r)}if(h[Bs]!==null){let p=h[Bs];for(let g=0;g<p.length;g++){let y=p[g];Og(y[ce],y,l,r)}}}}}return r}function pO(t,e){return t[Bn].queries[e].queryList}function gO(t,e,n){let r=new vg((n&4)===4);return i1(t,e,r,r.destroy),(e[Bn]??=new xg).queries.push(new Mg(r))-1}function mO(t,e,n){let r=it();return r.firstCreatePass&&(vO(r,new Rg(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),gO(r,Ie(),e)}function yO(t){return t.split(",").map(e=>e.trim())}function vO(t,e,n){t.queries===null&&(t.queries=new Ng),t.queries.track(new Pg(e,n))}function Rm(t,e){return t.queries.getByIndex(e)}function wO(t,e){let n=t[ce],r=Rm(n,e);return r.crossesNgTemplate?Og(n,t,e,[]):Rb(n,t,r,e)}var CD=new Set;function ki(t){CD.has(t)||(CD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function _O(t){return typeof t=="function"&&t[Fn]!==void 0}function Zs(t,e){ki("NgSignals");let n=EE(t),r=n[Fn];return e?.equal&&(r.equal=e.equal),n.set=i=>Ip(r,i),n.update=i=>DE(r,i),n.asReadonly=IO.bind(n),n}function IO(){let t=this[Fn];if(t.readonlyFn===void 0){let e=()=>this();e[Fn]=t,t.readonlyFn=e}return t.readonlyFn}function Nb(t){return _O(t)&&typeof t.set=="function"}function EO(t){return Object.getPrototypeOf(t.prototype).constructor}function Rt(t){let e=EO(t.type),n=!0,r=[t];for(;e;){let i;if(Ar(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=El(t.inputs),o.inputTransforms=El(t.inputTransforms),o.declaredInputs=El(t.declaredInputs),o.outputs=El(t.outputs);let a=i.hostBindings;a&&AO(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&bO(t,c),l&&TO(t,l),DO(t,i),gR(t.outputs,i.outputs),Ar(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Rt&&(n=!1)}}e=Object.getPrototypeOf(e)}CO(r)}function DO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function CO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fa(i.hostAttrs,n=Fa(n,i.hostAttrs))}}function El(t){return t===Vs?{}:t===$t?[]:t}function bO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function TO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function AO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Mr=class{},ja=class{};var kg=class extends Mr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ql(this);let s=JD(e);this._bootstrapComponents=JC(s.bootstrap),this._r3Injector=jC(e,n,[{provide:Mr,useValue:this},{provide:zs,useValue:this.componentFactoryResolver},...r],bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Fg=class extends ja{constructor(e){super(),this.moduleType=e}create(e){return new kg(this.moduleType,e,[])}};var Yl=class extends Mr{constructor(e){super(),this.componentFactoryResolver=new Ql(this),this.instance=null;let n=new Va([...e.providers,{provide:Mr,useValue:this},{provide:zs,useValue:this.componentFactoryResolver}],e.parent||tm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Id(t,e,n=null){return new Yl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Pb(t){return Nm(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function SO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Nm(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function MO(t,e,n){return t[e]=n}function Ni(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function xO(t,e,n,r){let i=Ni(t,e,n);return Ni(t,e+1,r)||i}function RO(t){return(t.flags&32)===32}function NO(t,e,n,r,i,s,o,a,c){let l=e.consts,h=qa(e,t,4,o||null,a||null);bm(e,n,h,$s(l,c)),gd(e,h);let p=h.tView=Dm(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function PO(t,e,n,r,i,s,o,a,c,l){let h=n+$n,p=e.firstCreatePass?NO(h,e,t,r,i,s,o,a,c):e.data[h];Oi(p,!1);let g=kO(e,t,p,n);fd()&&yd(e,t,g,p),Sr(g,t);let y=mb(g,t,g,p);return t[h]=y,_d(t,y),uO(y,p,t),ud(p)&&Im(e,t,p),c!=null&&Em(t,p,l),p}function OO(t,e,n,r,i,s,o,a){let c=Ie(),l=it(),h=$s(l.consts,s);return PO(c,l,t,e,n,r,i,h,o,a),OO}var kO=FO;function FO(t,e,n,r){return pd(!0),e[je].createComment("")}var Ps=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ps||{}),Ob=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),Ei=class Ei{constructor(){this.ngZone=F(we),this.scheduler=F(qs),this.errorHandler=F(qn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Ei.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Ei.PHASES=[Ps.EarlyRead,Ps.Write,Ps.MixedReadWrite,Ps.Read],Ei.\u0275prov=z({token:Ei,providedIn:"root",factory:()=>new Ei});var Vg=Ei,Lg=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Pm(t,e){!e?.injector&&hN(Pm);let n=e?.injector??F(rt);return xP(n)?(ki("NgAfterNextRender"),LO(t,n,e,!0)):jO}function VO(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function LO(t,e,n,r){let i=e.get(Ob);i.impl??=e.get(Vg);let s=n?.phase??Ps.MixedReadWrite,o=new Lg(i.impl,VO(t,s),r,e.get(cm));return i.impl.register(o),o}var jO={destroy(){}};function Ed(t,e,n,r){let i=Ie(),s=dd();if(Ni(i,s,e)){let o=it(),a=hd();w1(a,i,t,e,n,r)}return Ed}function kb(t,e,n,r){return Ni(t,dd(),n)?e+nd(n)+r:Pr}function Dl(t,e){return t<<17|e<<2}function Pi(t){return t>>17&32767}function UO(t){return(t&2)==2}function BO(t,e){return t&131071|e<<17}function jg(t){return t|2}function Ws(t){return(t&131068)>>2}function Kp(t,e){return t&-131069|e<<2}function $O(t){return(t&1)===1}function Ug(t){return t|1}function qO(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Pi(o),c=Ws(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||$a(p,h)>0)&&(l=!0)}else h=n;if(i)if(c!==0){let g=Pi(t[a+1]);t[r+1]=Dl(g,a),g!==0&&(t[g+1]=Kp(t[g+1],r)),t[a+1]=BO(t[a+1],r)}else t[r+1]=Dl(a,0),a!==0&&(t[a+1]=Kp(t[a+1],r)),a=r;else t[r+1]=Dl(c,0),a===0?a=r:t[c+1]=Kp(t[c+1],r),c=r;l&&(t[r+1]=jg(t[r+1])),bD(t,h,r,!0),bD(t,h,r,!1),zO(e,h,t,r,s),o=Dl(a,c),s?e.classBindings=o:e.styleBindings=o}function zO(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&$a(s,e)>=0&&(n[r+1]=Ug(n[r+1]))}function bD(t,e,n,r){let i=t[n+1],s=e===null,o=r?Pi(i):Ws(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];HO(c,e)&&(a=!0,t[o+1]=r?Ug(l):jg(l)),o=r?Pi(l):Ws(l)}a&&(t[n+1]=r?jg(i):Ug(i))}function HO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?$a(t,e)>=0:!1}function GO(t,e,n){let r=Ie(),i=dd();if(Ni(r,i,e)){let s=it(),o=hd();Cm(s,o,r,t,e,r[je],n,!1)}return GO}function TD(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Tm(t,n,s[o],o,r)}function Dd(t,e){return WO(t,e,null,!0),Dd}function WO(t,e,n,r){let i=Ie(),s=it(),o=NN(2);if(s.firstUpdatePass&&QO(s,t,o,r),e!==Pr&&Ni(i,o,e)){let a=s.data[Qs()];ek(s,a,i,i[je],t,i[o+1]=tk(e,n),r,o)}}function KO(t,e){return e>=t.expandoStartIndex}function QO(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Qs()],o=KO(t,n);nk(s,r)&&e===null&&!o&&(e=!1),e=YO(i,s,e,r),qO(i,s,e,n,o,r)}}function YO(t,e,n,r){let i=FN(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Qp(null,t,e,n,r),n=Ua(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Qp(i,t,e,n,r),s===null){let c=ZO(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Qp(null,t,e,c[1],r),c=Ua(c,e.attrs,r),JO(t,e,r,c))}else s=XO(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function ZO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ws(r)!==0)return t[Pi(r)]}function JO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Pi(i)]=r}function XO(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=Ua(r,o,n)}return Ua(r,e.attrs,n)}function Qp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ua(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ua(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),VR(t,o,n?!0:e[++s]))}return t===void 0?null:t}function ek(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],h=$O(l)?AD(c,e,n,i,Ws(l),o):void 0;if(!Zl(h)){Zl(s)||UO(l)&&(s=AD(c,null,n,i,a,o));let p=hC(Qs(),n);YP(r,o,p,i,s)}}function AD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,g=n[i+1];g===Pr&&(g=p?$t:void 0);let y=p?jp(g,r):h===r?g:void 0;if(l&&!Zl(y)&&(y=jp(c,r)),Zl(y)&&(a=y,o))return a;let D=t[i+1];i=o?Pi(D):Ws(D)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=jp(c,r))}return a}function Zl(t){return t!==void 0}function tk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=bt(md(t)))),t}function nk(t,e){return(t.flags&(e?8:16))!==0}function rk(t,e,n,r,i,s){let o=e.consts,a=$s(o,i),c=qa(e,t,2,r,a);return bm(e,n,c,$s(o,s)),c.attrs!==null&&Kl(c,c.attrs,!1),c.mergedAttrs!==null&&Kl(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Fb(t,e,n,r){let i=Ie(),s=it(),o=$n+t,a=i[je],c=s.firstCreatePass?rk(o,s,i,e,n,r):s.data[o],l=ik(s,i,c,a,e,t);i[o]=l;let h=ud(c);return Oi(c,!0),ab(a,l,c),!RO(c)&&fd()&&yd(s,i,l,c),DN()===0&&Sr(l,i),CN(),h&&(Im(s,i,c),_m(s,c,i)),r!==null&&Em(i,c),Fb}function Vb(){let t=At();im()?_C():(t=t.parent,Oi(t,!1));let e=t;AN(e)&&SN(),bN();let n=it();return n.firstCreatePass&&(gd(n,t),nm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&qN(e)&&TD(n,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&zN(e)&&TD(n,e,Ie(),e.stylesWithoutHost,!1),Vb}function Om(t,e,n,r){return Fb(t,e,n,r),Vb(),Om}var ik=(t,e,n,r,i,s)=>(pd(!0),XC(r,i,jN()));function sk(t,e,n,r,i){let s=e.consts,o=$s(s,r),a=qa(e,t,8,"ng-container",o);o!==null&&Kl(a,o,!0);let c=$s(s,i);return bm(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function ok(t,e,n){let r=Ie(),i=it(),s=t+$n,o=i.firstCreatePass?sk(s,i,r,e,n):i.data[s];Oi(o,!0);let a=uk(i,r,o,t);return r[s]=a,fd()&&yd(i,r,a,o),Sr(a,r),ud(o)&&(Im(i,r,o),_m(i,o,r)),n!=null&&Em(r,o),ok}function ak(){let t=At(),e=it();return im()?_C():(t=t.parent,Oi(t,!1)),e.firstCreatePass&&(gd(e,t),nm(t)&&e.queries.elementEnd(t)),ak}var uk=(t,e,n,r)=>(pd(!0),OP(e[je],""));function M3(){return Ie()}var Jl="en-US";var ck=Jl;function lk(t){typeof t=="string"&&(ck=t.toLowerCase().replace(/_/g,"-"))}var dk=(t,e,n)=>{};function Qn(t,e,n,r){let i=Ie(),s=it(),o=At();return Lb(s,i,i[je],o,t,e,r),Qn}function hk(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Fl],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Lb(t,e,n,r,i,s,o){let a=ud(r),l=t.firstCreatePass&&wb(t),h=e[nn],p=vb(e),g=!0;if(r.type&3||o){let M=Wt(r,e),T=o?o(M):M,P=p.length,L=o?H=>o(yn(H[r.index])):r.index,B=null;if(!o&&a&&(B=hk(t,e,i,r.index)),B!==null){let H=B.__ngLastListenerFn__||B;H.__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,g=!1}else{s=MD(r,e,h,s),dk(M,i,s);let H=n.listen(T,i,s);p.push(s,H),l&&l.push(i,L,P,P+1)}}else s=MD(r,e,h,s);let y=r.outputs,D;if(g&&y!==null&&(D=y[i])){let M=D.length;if(M)for(let T=0;T<M;T+=2){let P=D[T],L=D[T+1],ie=e[P][L].subscribe(s),W=p.length;p.push(s,ie),l&&l.push(i,r.index,W,-(W+1))}}}function SD(t,e,n,r){let i=ye(null);try{return hn(6,e,n),n(r)!==!1}catch(s){return _b(t,s),!1}finally{hn(7,e,n),ye(i)}}function MD(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?xr(t.index,e):e;Sm(o,5);let a=SD(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=SD(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function x3(t=1){return LN(t)}function fk(t,e,n){return jb(t,"",e,"",n),fk}function jb(t,e,n,r,i){let s=Ie(),o=kb(s,e,n,r);if(o!==Pr){let a=it(),c=hd();Cm(a,c,s,t,o,s[je],i,!1)}return jb}function R3(t,e,n){mO(t,e,n)}function pk(t){let e=Ie(),n=it(),r=EC();sm(r+1);let i=Rm(n,r);if(t.dirty&&wN(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=wO(e,r);t.reset(s,lP),t.notifyOnChanges()}return!0}return!1}function gk(){return pO(Ie(),EC())}function N3(t,e=""){let n=Ie(),r=it(),i=t+$n,s=r.firstCreatePass?qa(r,i,1,e,null):r.data[i],o=mk(r,n,s,e,t);n[i]=o,fd()&&yd(r,n,o,s),Oi(s,!1)}var mk=(t,e,n,r,i)=>(pd(!0),NP(e[je],r));function yk(t){return Ub("",t,""),yk}function Ub(t,e,n){let r=Ie(),i=kb(r,t,e,n);return i!==Pr&&D1(r,Qs(),i),Ub}function vk(t,e,n){Nb(e)&&(e=e());let r=Ie(),i=dd();if(Ni(r,i,e)){let s=it(),o=hd();Cm(s,o,r,t,e,r[je],n,!1)}return vk}function P3(t,e){let n=Nb(t);return n&&t.set(e),n}function wk(t,e){let n=Ie(),r=it(),i=At();return Lb(r,n,n[je],i,t,e),wk}function _k(t,e,n){let r=it();if(r.firstCreatePass){let i=Ar(t);Bg(n,r.data,r.blueprint,i,!0),Bg(e,r.data,r.blueprint,i,!1)}}function Bg(t,e,n,r,i){if(t=Ct(t),Array.isArray(t))for(let s=0;s<t.length;s++)Bg(t[s],e,n,r,i);else{let s=it(),o=Ie(),a=At(),c=js(t)?t:Ct(t.provide),l=iC(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(js(t)||!t.multi){let y=new Si(l,i,ne),D=Zp(c,e,i?h:h+g,p);D===-1?(hg(Bl(a,o),s,c),Yp(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[D]=y,o[D]=y)}else{let y=Zp(c,e,h+g,p),D=Zp(c,e,h,h+g),M=y>=0&&n[y],T=D>=0&&n[D];if(i&&!T||!i&&!M){hg(Bl(a,o),s,c);let P=Dk(i?Ek:Ik,n.length,i,r,l);!i&&T&&(n[D].providerFactory=P),Yp(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=Bb(n[i?D:y],l,!i&&r);Yp(s,t,y>-1?y:D,P)}!i&&r&&T&&n[D].componentProviders++}}}function Yp(t,e,n,r){let i=js(e),s=sN(e);if(i||s){let c=(s?Ct(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,c]):l[h+1].push(r,c)}else l.push(n,c)}}}function Bb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Zp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ik(t,e,n,r){return $g(this.multi,[])}function Ek(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Mi(n,n[ce],this.providerFactory.index,r);s=a.slice(0,o),$g(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],$g(i,s);return s}function $g(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Dk(t,e,n,r,i){let s=new Si(t,n,ne);return s.multi=[],s.index=e,s.componentProviders=0,Bb(s,i,r&&!n),s}function In(t,e=[]){return n=>{n.providersResolver=(r,i)=>_k(r,i?i(t):t,e)}}var Ck=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=tC(!1,r.type),s=i.length>0?Id([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=z({token:e,providedIn:"environment",factory:()=>new e(Y(Tt))});let t=e;return t})();function $b(t){ki("NgStandalone"),t.getStandaloneInjector=e=>e.get(Ck).getOrCreateStandaloneInjector(t)}function O3(t,e,n,r,i){return Tk(Ie(),xN(),t,e,n,r,i)}function bk(t,e){let n=t[e];return n===Pr?void 0:n}function Tk(t,e,n,r,i,s,o){let a=e+n;return xO(t,a,i,s)?MO(t,a+2,o?r.call(o,i,s):r(i,s)):bk(t,a+2)}var zn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},qb=new zn("18.2.3");var Cd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var zb=new G("");function Fi(t){return!!t&&typeof t.then=="function"}function Hb(t){return!!t&&typeof t.subscribe=="function"}var bd=new G(""),Gb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=F(bd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Fi(o))r.push(o);else if(Hb(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),za=new G("");function Ak(){IE(()=>{throw new Q(600,!1)})}function Sk(t){return t.isBoundToModule}var Mk=10;function xk(t,e,n){try{let r=n();return Fi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var kr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(uP),this.afterRenderManager=F(Ob),this.zonelessEnabled=F(xm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=F(Nr).hasPendingTasks.pipe(te(r=>!r)),this._injector=F(Tt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Wl;if(!this._injector.get(Gb).done){let y=!s&&ZD(r),D=!1;throw new Q(405,D)}let a;s?a=r:a=this._injector.get(zs).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Sk(a)?void 0:this._injector.get(Mr),l=i||a.selector,h=a.create(rt.NULL,[],l,c),p=h.location.nativeElement,g=h.injector.get(zb,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Ml(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let r=ye(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ye(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Hs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<Mk;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)Rk(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>cd(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ml(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(za,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ml(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Q(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ml(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Rk(t,e,n,r){if(!n&&!cd(t))return;Db(t,e,n&&!r?0:1)}var qg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Td=(()=>{let e=class e{compileModuleSync(r){return new Fg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=JD(r),o=JC(s.declarations).reduce((a,c)=>{let l=Tr(c);return l&&a.push(new Gs(l)),a},[]);return new qg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Nk=(()=>{let e=class e{constructor(){this.zone=F(we),this.changeDetectionScheduler=F(qs),this.applicationRef=F(kr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pk=new G("",{factory:()=>!1});function Wb({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new we(pe(j({},Kb()),{scheduleInRootZone:n})),[{provide:we,useFactory:t},{provide:Ls,multi:!0,useFactory:()=>{let r=F(Nk,{optional:!0});return()=>r.initialize()}},{provide:Ls,multi:!0,useFactory:()=>{let r=F(Ok);return()=>{r.initialize()}}},e===!0?{provide:Ab,useValue:!0}:[],{provide:Sb,useValue:n??UC}]}function k3(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Wb({ngZoneFactory:()=>{let i=Kb(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ki("NgZone_CoalesceEvent"),new we(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ht([{provide:Pk,useValue:!0},{provide:xm,useValue:!1},r])}function Kb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ok=(()=>{let e=class e{constructor(){this.subscription=new Fe,this.initialized=!1,this.zone=F(we),this.pendingTasks=F(Nr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kk=(()=>{let e=class e{constructor(){this.appRef=F(kr),this.taskService=F(Nr),this.ngZone=F(we),this.zonelessEnabled=F(xm),this.disableScheduling=F(Ab,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Fe,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ql):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(Sb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yg||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?hD:BC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ql+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Fk(){return typeof $localize<"u"&&$localize.locale||Jl}var km=new G("",{providedIn:"root",factory:()=>F(km,de.Optional|de.SkipSelf)||Fk()});var Qb=new G("");function Cl(t){return!!t.platformInjector}function Vk(t){let e=Cl(t)?t.r3Injector:t.moduleRef.injector,n=e.get(we);return n.run(()=>{Cl(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(qn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Cl(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Qb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{Ml(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return xk(r,n,()=>{let s=e.get(Gb);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(km,Jl);if(lk(o||Jl),Cl(t)){let a=e.get(kr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return Lk(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Lk(t,e){let n=t.injector.get(kr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new Q(-403,!1);e.push(t)}var xl=null;function jk(t=[],e){return rt.create({name:e,providers:[{provide:sd,useValue:"platform"},{provide:Qb,useValue:new Set([()=>xl=null])},...t]})}function Uk(t=[]){if(xl)return xl;let e=jk(t);return xl=e,Ak(),Bk(e),e}function Bk(t){t.get(fm,null)?.forEach(n=>n())}function F3(){return!1}var Vi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$k;let t=e;return t})();function $k(t){return qk(At(),Ie(),(t&16)===16)}function qk(t,e,n){if(ad(t)&&!n){let r=xr(t.index,e);return new xi(r,r)}else if(t.type&175){let r=e[mn];return new xi(r,e)}return null}var zg=class{constructor(){}supports(e){return Pb(e)}create(e){return new Hg(e)}},zk=(t,e)=>e,Hg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||zk}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<xD(r,i,s)?n:r,a=xD(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=c-i;if(l!=h){for(let g=0;g<l;g++){let y=g<s.length?s[g]:s[g]=0,D=y+g;h<=D&&D<l&&(s[g]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Pb(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,SO(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Gg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Xl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Wg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Xl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Wg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Kg=class{constructor(){}supports(e){return e instanceof Map||Nm(e)}create(){return new Qg}},Qg=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Nm(e)))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,n);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Yg(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}},Yg=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function RD(){return new Fm([new zg])}var Fm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||RD()),deps:[[e,new id,new ut]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new Q(901,!1)}};e.\u0275prov=z({token:e,providedIn:"root",factory:RD});let t=e;return t})();function ND(){return new Vm([new Kg])}var Vm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||ND()),deps:[[e,new id,new ut]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new Q(901,!1)}};e.\u0275prov=z({token:e,providedIn:"root",factory:ND});let t=e;return t})();function Yb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Uk(r),s=[Wb({}),{provide:qs,useExisting:kk},...n||[]],o=new Yl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return Vk({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var Zb=new G("");function Ha(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Js(t,e){ki("NgSignals");let n=vE(t);return e?.equal&&(n[Fn].equal=e.equal),n}function En(t){let e=ye(null);try{return t()}finally{ye(e)}}function Jb(t){let e=Tr(t);if(!e)return null;let n=new Gs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var iT=null;function Zn(){return iT}function sT(t){iT??=t}var Ad=class{};var ct=new G(""),zm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>F(Kk),providedIn:"platform"});let t=e;return t})(),oT=new G(""),Kk=(()=>{let e=class e extends zm{constructor(){super(),this._doc=F(ct),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zn().getBaseHref(this._doc)}onPopState(r){let i=Zn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Zn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Hm(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Xb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Yn(t){return t&&t[0]!=="?"?"?"+t:t}var Li=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>F(Gm),providedIn:"root"});let t=e;return t})(),aT=new G(""),Gm=(()=>{let e=class e extends Li{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??F(ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Hm(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Yn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Yn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Yn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Y(zm),Y(aT,8))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uT=(()=>{let e=class e extends Li{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Hm(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Yn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Yn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(Y(zm),Y(aT,8))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),eo=(()=>{let e=class e{constructor(r){this._subject=new Pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Zk(Xb(eT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Yn(i))}normalize(r){return e.stripTrailingSlash(Yk(this._basePath,eT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Yn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Yn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Yn,e.joinWithSlash=Hm,e.stripTrailingSlash=Xb,e.\u0275fac=function(i){return new(i||e)(Y(Li))},e.\u0275prov=z({token:e,factory:()=>Qk(),providedIn:"root"});let t=e;return t})();function Qk(){return new eo(Y(Li))}function Yk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function eT(t){return t.replace(/\/index.html$/,"")}function Zk(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Sd(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var jm=/\s+/,tT=[],a8=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=tT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(jm):tT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(jm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(jm).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(ne(Ft),ne(Kn))},e.\u0275dir=Oe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Um=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},u8=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Um(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),nT(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);nT(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ne(Or),ne(Ri),ne(Fm))},e.\u0275dir=Oe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function nT(t,e){t.context.$implicit=e.item}var c8=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Bm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){rT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){rT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ne(Or),ne(Ri))},e.\u0275dir=Oe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Bm=class{constructor(){this.$implicit=null,this.ngIf=null}};function rT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${bt(e)}'.`)}var l8=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:vn.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(ne(Ft),ne(Vm),ne(Kn))},e.\u0275dir=Oe({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})();var Jk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=wn({});let t=e;return t})(),Wm="browser",Xk="server";function eF(t){return t===Wm}function Md(t){return t===Xk}var cT=(()=>{let e=class e{};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>eF(F(Kt))?new $m(F(ct),window):new qm});let t=e;return t})(),$m=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=tF(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function tF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var qm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Xs=class{};var Wa=class{},Rd=class{},Jn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Qm=class{encodeKey(e){return lT(e)}encodeValue(e){return lT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function rF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var iF=/%(\d[a-f0-9])/gi,sF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function lT(t){return encodeURIComponent(t).replace(iF,(e,n)=>sF[n]??e)}function xd(t){return`${t}`}var Lr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=rF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(xd):[xd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(xd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(xd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ym=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function oF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function dT(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function hT(t){return typeof Blob<"u"&&t instanceof Blob}function fT(t){return typeof FormData<"u"&&t instanceof FormData}function aF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ga=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(oF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Jn,this.context??=new Ym,!this.params)this.params=new Lr,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||dT(this.body)||hT(this.body)||fT(this.body)||aF(this.body)?this.body:this.body instanceof Lr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||fT(this.body)?null:hT(this.body)?this.body.type||null:dT(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Lr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},jr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(jr||{}),Ka=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Jn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Nd=class t extends Ka{constructor(e={}){super(e),this.type=jr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Qa=class t extends Ka{constructor(e={}){super(e),this.type=jr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Vr=class extends Ka{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},yT=200,uF=204;function Km(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var cF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Ga)o=r;else{let l;s.headers instanceof Jn?l=s.headers:l=new Jn(s.headers);let h;s.params&&(s.params instanceof Lr?h=s.params:h=new Lr({fromObject:s.params})),o=new Ga(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=J(o).pipe(jn(l=>this.handler.handle(l)));if(r instanceof Ga||s.observe==="events")return a;let c=a.pipe(Dt(l=>l instanceof Qa));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(te(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(te(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(te(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(te(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Lr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Km(s,i))}post(r,i,s={}){return this.request("POST",r,Km(s,i))}put(r,i,s={}){return this.request("PUT",r,Km(s,i))}};e.\u0275fac=function(i){return new(i||e)(Y(Wa))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),lF=/^\)\]\}',?\n/,dF="X-Request-URL";function pT(t){if(t.url)return t.url;let e=dF.toLocaleLowerCase();return t.headers.get(e)}var hF=(()=>{let e=class e{constructor(){this.fetchImpl=F(Zm,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=F(we)}handle(r){return new le(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(Jm,o=>i.error(new Vr({error:o}))),()=>s.abort()})}doRequest(r,i,s){return N(this,null,function*(){let o=this.createRequestInit(r),a;try{let D=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,j({signal:i},o)));fF(D),s.next({type:jr.Sent}),a=yield D}catch(D){s.error(new Vr({error:D,status:D.status??0,statusText:D.statusText,url:r.urlWithParams,headers:D.headers}));return}let c=new Jn(a.headers),l=a.statusText,h=pT(a)??r.urlWithParams,p=a.status,g=null;if(r.reportProgress&&s.next(new Nd({headers:c,status:p,statusText:l,url:h})),a.body){let D=a.headers.get("content-length"),M=[],T=a.body.getReader(),P=0,L,B,H=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>N(this,null,function*(){for(;;){let{done:W,value:I}=yield T.read();if(W)break;if(M.push(I),P+=I.length,r.reportProgress){B=r.responseType==="text"?(B??"")+(L??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>s.next({type:jr.DownloadProgress,total:D?+D:void 0,loaded:P,partialText:B});H?H.run(v):v()}}}));let ie=this.concatChunks(M,P);try{let W=a.headers.get("Content-Type")??"";g=this.parseBody(r,ie,W)}catch(W){s.error(new Vr({error:W,headers:new Jn(a.headers),status:a.status,statusText:a.statusText,url:pT(a)??r.urlWithParams}));return}}p===0&&(p=g?yT:0),p>=200&&p<300?(s.next(new Qa({body:g,headers:c,status:p,statusText:l,url:h})),s.complete()):s.error(new Vr({error:g,headers:c,status:p,statusText:l,url:h}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(lF,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Zm=class{};function Jm(){}function fF(t){t.then(Jm,Jm)}function pF(t,e){return e(t)}function gF(t,e,n){return(r,i)=>Gt(n,()=>e(r,s=>t(s,i)))}var vT=new G(""),mF=new G(""),yF=new G("",{providedIn:"root",factory:()=>!0});var gT=(()=>{let e=class e extends Wa{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=F(Nr),this.contributeToStability=F(yF)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(vT),...this.injector.get(mF,[])]));this.chain=i.reduceRight((s,o)=>gF(s,o,this.injector),pF)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(_i(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(Y(Rd),Y(Tt))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();var vF=/^\)\]\}',?\n/;function wF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var mT=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Q(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ce(i.\u0275loadImpl()):J(null)).pipe(at(()=>new le(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((T,P)=>a.setRequestHeader(T,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let T=r.detectContentTypeHeader();T!==null&&a.setRequestHeader("Content-Type",T)}if(r.responseType){let T=r.responseType.toLowerCase();a.responseType=T!=="json"?T:"text"}let c=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let T=a.statusText||"OK",P=new Jn(a.getAllResponseHeaders()),L=wF(a)||r.url;return l=new Nd({headers:P,status:a.status,statusText:T,url:L}),l},p=()=>{let{headers:T,status:P,statusText:L,url:B}=h(),H=null;P!==uF&&(H=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=H?yT:0);let ie=P>=200&&P<300;if(r.responseType==="json"&&typeof H=="string"){let W=H;H=H.replace(vF,"");try{H=H!==""?JSON.parse(H):null}catch(I){H=W,ie&&(ie=!1,H={error:I,text:H})}}ie?(o.next(new Qa({body:H,headers:T,status:P,statusText:L,url:B||void 0})),o.complete()):o.error(new Vr({error:H,headers:T,status:P,statusText:L,url:B||void 0}))},g=T=>{let{url:P}=h(),L=new Vr({error:T,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});o.error(L)},y=!1,D=T=>{y||(o.next(h()),y=!0);let P={type:jr.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(P.total=T.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),o.next(P)},M=T=>{let P={type:jr.UploadProgress,loaded:T.loaded};T.lengthComputable&&(P.total=T.total),o.next(P)};return a.addEventListener("load",p),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",D),c!==null&&a.upload&&a.upload.addEventListener("progress",M)),a.send(c),o.next({type:jr.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",p),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",D),c!==null&&a.upload&&a.upload.removeEventListener("progress",M)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(Y(Xs))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),wT=new G(""),_F="XSRF-TOKEN",IF=new G("",{providedIn:"root",factory:()=>_F}),EF="X-XSRF-TOKEN",DF=new G("",{providedIn:"root",factory:()=>EF}),Pd=class{},CF=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Sd(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(Y(ct),Y(Kt),Y(IF))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function bF(t,e){let n=t.url.toLowerCase();if(!F(wT)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=F(Pd).getToken(),i=F(DF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function C8(...t){let e=[cF,mT,gT,{provide:Wa,useExisting:gT},{provide:Rd,useFactory:()=>F(hF,{optional:!0})??F(mT)},{provide:vT,useValue:bF,multi:!0},{provide:wT,useValue:!0},{provide:Pd,useClass:CF}];for(let n of t)e.push(...n.\u0275providers);return Ht(e)}var ty=class extends Ad{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ny=class t extends ty{static makeCurrent(){sT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=TF();return n==null?null:AF(n)}resetBaseElement(){Ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Sd(document.cookie,e)}},Ya=null;function TF(){return Ya=Ya||document.querySelector("base"),Ya?Ya.getAttribute("href"):null}function AF(t){return new URL(t,document.baseURI).pathname}var SF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Od=new G(""),DT=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(Y(Od),Y(we))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Za=class{constructor(e){this._doc=e}},Xm="ng-app-id",CT=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Md(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Xm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Xm),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Xm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Y(ct),Y(hm),Y(pm,8),Y(Kt))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},iy=/%COMP%/g,bT="%COMP%",MF=`_nghost-${bT}`,xF=`_ngcontent-${bT}`,RF=!0,NF=new G("",{providedIn:"root",factory:()=>RF});function PF(t){return xF.replace(iy,t)}function OF(t){return MF.replace(iy,t)}function TT(t,e){return e.map(n=>n.replace(iy,t))}var _T=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Md(c),this.defaultRenderer=new Ja(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===pn.ShadowDom&&(i=pe(j({},i),{encapsulation:pn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof kd?s.applyToHost(r):s instanceof Xa&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case pn.Emulated:o=new kd(l,h,i,this.appId,p,a,c,g);break;case pn.ShadowDom:return new ry(l,h,r,i,a,c,this.nonce,g);default:o=new Xa(l,h,i,p,a,c,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Y(DT),Y(CT),Y(hm),Y(NF),Y(ct),Y(Kt),Y(we),Y(pm))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Ja=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ey[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(IT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(IT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=ey[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ey[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(vn.DashCase|vn.Important)?e.style.setProperty(n,r,i&vn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&vn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Zn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function IT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ry=class extends Ja{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=TT(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xa=class extends Ja{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?TT(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},kd=class extends Xa{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=PF(l),this.hostAttr=OF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},kF=(()=>{let e=class e extends Za{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(Y(ct))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),FF=(()=>{let e=class e extends Za{constructor(r){super(r),this.delegate=F(Zb,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(Y(ct))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),ET=["alt","control","meta","shift"],VF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},jF=(()=>{let e=class e extends Za{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),ET.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=VF[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),ET.forEach(a=>{if(a!==s){let c=LF[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(Y(ct))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function Y8(t,e){return Yb(j({rootComponent:t},UF(e)))}function UF(t){return{appProviders:[...HF,...t?.providers??[]],platformProviders:zF}}function BF(){ny.makeCurrent()}function $F(){return new qn}function qF(){return KC(document),document}var zF=[{provide:Kt,useValue:Wm},{provide:fm,useValue:BF,multi:!0},{provide:ct,useFactory:qF,deps:[]}];var HF=[{provide:sd,useValue:"root"},{provide:qn,useFactory:$F,deps:[]},{provide:Od,useClass:kF,multi:!0,deps:[ct,we,Kt]},{provide:Od,useClass:jF,multi:!0,deps:[ct]},{provide:Od,useClass:FF,multi:!0},_T,CT,DT,{provide:Hs,useExisting:_T},{provide:Xs,useClass:SF,deps:[]},[]];var AT=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(Y(ct))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oe="primary",gu=Symbol("RouteTitle"),cy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function oo(t){return new cy(t)}function WF(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function KF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dn(t[n],e[n]))return!1;return!0}function Dn(t,e){let n=t?ly(t):void 0,r=e?ly(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!LT(t[i],e[i]))return!1;return!0}function ly(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function LT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function jT(t){return t.length>0?t[t.length-1]:null}function $r(t){return Pp(t)?t:Fi(t)?Ce(Promise.resolve(t)):J(t)}var QF={exact:BT,subset:$T},UT={exact:YF,subset:ZF,ignored:()=>!0};function ST(t,e,n){return QF[n.paths](t.root,e.root,n.matrixParams)&&UT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function YF(t,e){return Dn(t,e)}function BT(t,e,n){if(!Ui(t.segments,e.segments)||!Ld(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!BT(t.children[r],e.children[r],n))return!1;return!0}function ZF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>LT(t[n],e[n]))}function $T(t,e,n){return qT(t,e,e.segments,n)}function qT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ui(i,n)||e.hasChildren()||!Ld(i,n,r))}else if(t.segments.length===n.length){if(!Ui(t.segments,n)||!Ld(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!$T(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ui(t.segments,i)||!Ld(t.segments,i,r)||!t.children[oe]?!1:qT(t.children[oe],e,s,r)}}function Ld(t,e,n){return e.every((r,i)=>UT[n](t[i].parameters,r.parameters))}var er=class{constructor(e=new Ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=oo(this.queryParams),this._queryParamMap}toString(){return eV.serialize(this)}},Ee=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jd(this)}},ji=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=oo(this.parameters),this._parameterMap}toString(){return HT(this)}};function JF(t,e){return Ui(t,e)&&t.every((n,r)=>Dn(n.parameters,e[r].parameters))}function Ui(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function XF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var mu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>new ao,providedIn:"root"});let t=e;return t})(),ao=class{parse(e){let n=new hy(e);return new er(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${eu(e.root,!0)}`,r=rV(e.queryParams),i=typeof e.fragment=="string"?`#${tV(e.fragment)}`:"";return`${n}${r}${i}`}},eV=new ao;function jd(t){return t.segments.map(e=>HT(e)).join("/")}function eu(t,e){if(!t.hasChildren())return jd(t);if(e){let n=t.children[oe]?eu(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${eu(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=XF(t,(r,i)=>i===oe?[eu(t.children[oe],!1)]:[`${i}:${eu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${jd(t)}/${n[0]}`:`${jd(t)}/(${n.join("//")})`}}function zT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fd(t){return zT(t).replace(/%3B/gi,";")}function tV(t){return encodeURI(t)}function dy(t){return zT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ud(t){return decodeURIComponent(t)}function MT(t){return Ud(t.replace(/\+/g,"%20"))}function HT(t){return`${dy(t.path)}${nV(t.parameters)}`}function nV(t){return Object.entries(t).map(([e,n])=>`;${dy(e)}=${dy(n)}`).join("")}function rV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Fd(n)}=${Fd(i)}`).join("&"):`${Fd(n)}=${Fd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var iV=/^[^\/()?;#]+/;function sy(t){let e=t.match(iV);return e?e[0]:""}var sV=/^[^\/()?;=#]+/;function oV(t){let e=t.match(sV);return e?e[0]:""}var aV=/^[^=?&#]+/;function uV(t){let e=t.match(aV);return e?e[0]:""}var cV=/^[^&#]+/;function lV(t){let e=t.match(cV);return e?e[0]:""}var hy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new Ee(e,n)),r}parseSegment(){let e=sy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new ji(Ud(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=oV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=sy(this.remaining);i&&(r=i,this.capture(r))}e[Ud(n)]=Ud(r)}parseQueryParam(e){let n=uV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=lV(this.remaining);o&&(r=o,this.capture(r))}let i=MT(n),s=MT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=sy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[oe]:new Ee([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function GT(t){return t.segments.length>0?new Ee([],{[oe]:t}):t}function WT(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=WT(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ee(t.segments,e);return dV(n)}function dV(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new Ee(t.segments.concat(e.segments),e.children)}return t}function ou(t){return t instanceof er}function hV(t,e,n=null,r=null){let i=KT(t);return QT(i,e,n,r)}function KT(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Ee(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=GT(r);return e??i}function QT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return oy(i,i,i,n,r);let s=fV(e);if(s.toRoot())return oy(i,i,new Ee([],{}),n,r);let o=pV(s,i,t),a=o.processChildren?ru(o.segmentGroup,o.index,s.commands):ZT(o.segmentGroup,o.index,s.commands);return oy(i,o.segmentGroup,a,n,r)}function Bd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function au(t){return typeof t=="object"&&t!=null&&t.outlets}function oy(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=YT(t,e,n);let a=GT(WT(o));return new er(a,s,i)}function YT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=YT(s,e,n)}),new Ee(t.segments,r)}var $d=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Bd(r[0]))throw new Q(4003,!1);let i=r.find(au);if(i&&i!==jT(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new $d(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new $d(n,e,r)}var ro=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function pV(t,e,n){if(t.isAbsolute)return new ro(e,!0,0);if(!n)return new ro(e,!1,NaN);if(n.parent===null)return new ro(n,!0,0);let r=Bd(t.commands[0])?0:1,i=n.segments.length-1+r;return gV(n,i,t.numberOfDoubleDots)}function gV(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new ro(r,!1,i-s)}function mV(t){return au(t[0])?t[0].outlets:{[oe]:t}}function ZT(t,e,n){if(t??=new Ee([],{}),t.segments.length===0&&t.hasChildren())return ru(t,e,n);let r=yV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ee(t.segments.slice(0,r.pathIndex),{});return s.children[oe]=new Ee(t.segments.slice(r.pathIndex),t.children),ru(s,0,i)}else return r.match&&i.length===0?new Ee(t.segments,{}):r.match&&!t.hasChildren()?fy(t,e,n):r.match?ru(t,0,i):fy(t,e,n)}function ru(t,e,n){if(n.length===0)return new Ee(t.segments,{});{let r=mV(n),i={};if(Object.keys(r).some(s=>s!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let s=ru(t.children[oe],e,n);return new Ee(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=ZT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ee(t.segments,i)}}function yV(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(au(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!RT(c,l,o))return s;r+=2}else{if(!RT(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function fy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(au(s)){let c=vV(s.outlets);return new Ee(r,c)}if(i===0&&Bd(n[0])){let c=t.segments[e];r.push(new ji(c.path,xT(n[0]))),i++;continue}let o=au(s)?s.outlets[oe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Bd(a)?(r.push(new ji(o,xT(a))),i+=2):(r.push(new ji(o,{})),i++)}return new Ee(r,{})}function vV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=fy(new Ee([],{}),0,r))}),e}function xT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function RT(t,e,n){return t==n.path&&Dn(e,n.parameters)}var iu="imperative",st=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(st||{}),Qt=class{constructor(e,n){this.id=e,this.url=n}},uo=class extends Qt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=st.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends Qt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=st.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Lt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Lt||{}),qd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(qd||{}),Xn=class extends Qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=st.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ur=class extends Qt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=st.NavigationSkipped}},uu=class extends Qt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=st.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zd=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=st.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},py=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=st.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gy=class extends Qt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=st.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},my=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yy=class extends Qt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vy=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wy=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_y=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Iy=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ey=class{constructor(e){this.snapshot=e,this.type=st.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dy=class{constructor(e){this.snapshot=e,this.type=st.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=st.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},cu=class{},co=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function wV(t,e){return t.providers&&!t._injector&&(t._injector=Id(t.providers,e,`Route: ${t.path}`)),t._injector??e}function sn(t){return t.outlet||oe}function _V(t,e){let n=t.filter(r=>sn(r)===e);return n.push(...t.filter(r=>sn(r)!==e)),n}function yu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Cy=class{get injector(){return yu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new vu(this.rootInjector),this.attachRef=null}},vu=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Cy(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(Y(Tt))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=by(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=by(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ty(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ty(e,this._root).map(n=>n.value)}};function by(t,e){if(t===e.value)return e;for(let n of e.children){let r=by(t,n);if(r)return r}return null}function Ty(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ty(t,n);if(r.length)return r.unshift(e),r}return[]}var Vt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function no(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Wd=class extends Gd{constructor(e,n){super(e),this.snapshot=n,ky(this,e)}toString(){return this.snapshot.toString()}};function JT(t){let e=IV(t),n=new et([new ji("",{})]),r=new et({}),i=new et({}),s=new et({}),o=new et(""),a=new Bi(n,r,s,o,i,oe,t,e.root);return a.snapshot=e.root,new Wd(new Vt(a,[]),e)}function IV(t){let e={},n={},r={},i="",s=new io([],e,r,i,n,oe,t,null,{});return new Qd("",new Vt(s,[]))}var Bi=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(te(l=>l[gu]))??J(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>oo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>oo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),t.params),data:j(j({},e.data),t.data),resolve:j(j(j(j({},t.data),e.data),i?.data),t._resolvedData)}:r={params:j({},t.params),data:j({},t.data),resolve:j(j({},t.data),t._resolvedData??{})},i&&e0(i)&&(r.resolve[gu]=i.title),r}var io=class{get title(){return this.data?.[gu]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=oo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=oo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Qd=class extends Gd{constructor(e,n){super(n),this.url=e,ky(this,n)}toString(){return XT(this._root)}};function ky(t,e){e.value._routerState=t,e.children.forEach(n=>ky(t,n))}function XT(t){let e=t.children.length>0?` { ${t.children.map(XT).join(", ")} } `:"";return`${t.value}${e}`}function ay(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dn(e.params,n.params)||t.paramsSubject.next(n.params),KF(e.url,n.url)||t.urlSubject.next(n.url),Dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ay(t,e){let n=Dn(t.params,e.params)&&JF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ay(t.parent,e.parent))}function e0(t){return typeof t.title=="string"||t.title===null}var EV=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Pe,this.deactivateEvents=new Pe,this.attachEvents=new Pe,this.detachEvents=new Pe,this.parentContexts=F(vu),this.location=F(Or),this.changeDetector=F(Vi),this.inputBinder=F(Xd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Sy(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wn]});let t=e;return t})(),Sy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Bi?this.route:e===vu?this.childContexts:this.parent.get(e,n)}},Xd=new G(""),NT=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Na([i.queryParams,i.params,i.data]).pipe(at(([o,a,c],l)=>(c=j(j(j({},o),a),c),l===0?J(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Jb(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function DV(t,e,n){let r=lu(t,e._root,n?n._root:void 0);return new Wd(r,e)}function lu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=CV(t,e,n);return new Vt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>lu(t,a)),o}}let r=bV(e.value),i=e.children.map(s=>lu(t,s));return new Vt(r,i)}}function CV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return lu(t,r,i);return lu(t,r)})}function bV(t){return new Bi(new et(t.url),new et(t.params),new et(t.queryParams),new et(t.fragment),new et(t.data),t.outlet,t.component,t)}var du=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},t0="ngNavigationCancelingError";function Yd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ou(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=n0(!1,Lt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function n0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[t0]=!0,n.cancellationCode=e,n}function TV(t){return r0(t)&&ou(t.url)}function r0(t){return!!t&&t[t0]}var AV=(t,e,n,r)=>te(i=>(new My(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),My=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ay(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=no(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=no(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=no(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=no(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Dy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Iy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(ay(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ay(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Zd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},so=class{constructor(e,n){this.component=e,this.route=n}};function SV(t,e,n){let r=t._root,i=e?e._root:null;return tu(r,i,n,[r.value])}function MV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ho(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!FD(t)?t:e.get(t):r}function tu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=no(e);return t.children.forEach(o=>{xV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>su(a,n.getContext(o),i)),i}function xV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=RV(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Zd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?tu(t,e,a?a.children:null,r,i):tu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new so(a.outlet.component,o))}else o&&su(e,a,i),i.canActivateChecks.push(new Zd(r)),s.component?tu(t,null,a?a.children:null,r,i):tu(t,null,n,r,i);return i}function RV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ui(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ui(t.url,e.url)||!Dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ay(t,e)||!Dn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ay(t,e)}}function su(t,e,n){let r=no(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?su(o,e.children.getContext(s),n):su(o,null,n):su(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new so(e.outlet.component,i)):n.canDeactivateChecks.push(new so(null,i)):n.canDeactivateChecks.push(new so(null,i))}function wu(t){return typeof t=="function"}function NV(t){return typeof t=="boolean"}function PV(t){return t&&wu(t.canLoad)}function OV(t){return t&&wu(t.canActivate)}function kV(t){return t&&wu(t.canActivateChild)}function FV(t){return t&&wu(t.canDeactivate)}function VV(t){return t&&wu(t.canMatch)}function i0(t){return t instanceof Ln||t?.name==="EmptyError"}var Vd=Symbol("INITIAL_VALUE");function lo(){return at(t=>Na(t.map(e=>e.pipe(Un(1),wl(Vd)))).pipe(te(e=>{for(let n of e)if(n!==!0){if(n===Vd)return Vd;if(n===!1||LV(n))return n}return!0}),Dt(e=>e!==Vd),Un(1)))}function LV(t){return ou(t)||t instanceof du}function jV(t,e){return He(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?J(pe(j({},n),{guardsResult:!0})):UV(o,r,i,t).pipe(He(a=>a&&NV(a)?BV(r,s,t,e):J(a)),te(a=>pe(j({},n),{guardsResult:a})))})}function UV(t,e,n,r){return Ce(t).pipe(He(i=>GV(i.component,i.route,n,e,r)),dn(i=>i!==!0,!0))}function BV(t,e,n,r){return Ce(e).pipe(jn(i=>Ss(qV(i.route.parent,r),$V(i.route,r),HV(t,i.path,n),zV(t,i.route,n))),dn(i=>i!==!0,!0))}function $V(t,e){return t!==null&&e&&e(new Ey(t)),J(!0)}function qV(t,e){return t!==null&&e&&e(new _y(t)),J(!0)}function zV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(s=>ml(()=>{let o=yu(e)??n,a=ho(s,o),c=OV(a)?a.canActivate(e,t):Gt(o,()=>a(e,t));return $r(c).pipe(dn())}));return J(i).pipe(lo())}function HV(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>MV(o)).filter(o=>o!==null).map(o=>ml(()=>{let a=o.guards.map(c=>{let l=yu(o.node)??n,h=ho(c,l),p=kV(h)?h.canActivateChild(r,t):Gt(l,()=>h(r,t));return $r(p).pipe(dn())});return J(a).pipe(lo())}));return J(s).pipe(lo())}function GV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(a=>{let c=yu(e)??i,l=ho(a,c),h=FV(l)?l.canDeactivate(t,e,n,r):Gt(c,()=>l(t,e,n,r));return $r(h).pipe(dn())});return J(o).pipe(lo())}function WV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let s=i.map(o=>{let a=ho(o,t),c=PV(a)?a.canLoad(e,n):Gt(t,()=>a(e,n));return $r(c)});return J(s).pipe(lo(),s0(r))}function s0(t){return Yc(Ge(e=>{if(typeof e!="boolean")throw Yd(t,e)}),te(e=>e===!0))}function KV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let s=i.map(o=>{let a=ho(o,t),c=VV(a)?a.canMatch(e,n):Gt(t,()=>a(e,n));return $r(c)});return J(s).pipe(lo(),s0(r))}var hu=class{constructor(e){this.segmentGroup=e||null}},fu=class extends Error{constructor(e){super(),this.urlTree=e}};function to(t){return As(new hu(t))}function QV(t){return As(new Q(4e3,!1))}function YV(t){return As(n0(!1,Lt.GuardRejected))}var xy=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return QV(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:g,params:y,data:D,title:M}=i,T=Gt(s,()=>a({params:y,data:D,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:g,title:M}));if(T instanceof er)throw new fu(T);n=T}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new fu(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new er(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ee(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ry={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZV(t,e,n,r,i){let s=o0(t,e,n);return s.matched?(r=wV(e,r),KV(r,e,n,i).pipe(te(o=>o===!0?s:j({},Ry)))):J(s)}function o0(t,e,n){if(e.path==="**")return JV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?j({},Ry):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||WF)(n,t,e);if(!i)return j({},Ry);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?j(j({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function JV(t){return{matched:!0,parameters:t.length>0?jT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function PT(t,e,n,r){return n.length>0&&tL(t,n,r)?{segmentGroup:new Ee(e,eL(r,new Ee(n,t.children))),slicedSegments:[]}:n.length===0&&nL(t,n,r)?{segmentGroup:new Ee(t.segments,XV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ee(t.segments,t.children),slicedSegments:n}}function XV(t,e,n,r){let i={};for(let s of n)if(eh(t,e,s)&&!r[sn(s)]){let o=new Ee([],{});i[sn(s)]=o}return j(j({},r),i)}function eL(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&sn(r)!==oe){let i=new Ee([],{});n[sn(r)]=i}return n}function tL(t,e,n){return n.some(r=>eh(t,e,r)&&sn(r)!==oe)}function nL(t,e,n){return n.some(r=>eh(t,e,r))}function eh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function rL(t,e,n){return e.length===0&&!t.children[n]}var Ny=class{};function iL(t,e,n,r,i,s,o="emptyOnly"){return new Py(t,e,n,r,i,o,s).recognize()}var sL=31,Py=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new xy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=PT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:n,rootSnapshot:r})=>{let i=new Vt(r,n),s=new Qd("",i),o=hV(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new io([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,n).pipe(te(r=>({children:r,rootSnapshot:n})),_r(r=>{if(r instanceof fu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(te(o=>o instanceof Vt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ce(s).pipe(jn(o=>{let a=r.children[o],c=_V(n,o);return this.processSegmentGroup(e,c,a,o,i)}),vl((o,a)=>(o.push(...a),o)),Ir(null),Fp(),He(o=>{if(o===null)return to(r);let a=a0(o);return oL(a),J(a)}))}processSegment(e,n,r,i,s,o,a){return Ce(n).pipe(jn(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(_r(l=>{if(l instanceof hu)return J(null);throw l}))),dn(c=>!!c),_r(c=>{if(i0(c))return rL(r,i,s)?J(new Ny):to(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return sn(r)!==o&&(o===oe||!eh(i,s,r))?to(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):to(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=o0(n,i,s);if(!c)return to(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sL&&(this.allowRedirects=!1));let y=new io(s,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,OT(i),sn(i),i.component??i._loadedComponent??null,i,kT(i)),D=Kd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(He(T=>this.processSegment(e,r,n,T.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=ZV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(at(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(at(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=c,D=new io(g,p,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,OT(r),sn(r),r.component??r._loadedComponent??null,r,kT(r)),M=Kd(D,o,this.paramsInheritanceStrategy);D.params=Object.freeze(M.params),D.data=Object.freeze(M.data);let{segmentGroup:T,slicedSegments:P}=PT(n,g,y,l);if(P.length===0&&T.hasChildren())return this.processChildren(h,l,T,D).pipe(te(B=>new Vt(D,B)));if(l.length===0&&P.length===0)return J(new Vt(D,[]));let L=sn(r)===s;return this.processSegment(h,l,T,P,L?oe:s,!0,D).pipe(te(B=>new Vt(D,B instanceof Vt?[B]:[])))}))):to(n)))}getChildConfig(e,n,r){return n.children?J({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):WV(e,n,r,this.urlSerializer).pipe(He(i=>i?this.configLoader.loadChildren(e,n).pipe(Ge(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):YV(n))):J({routes:[],injector:e})}};function oL(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function aL(t){let e=t.value.routeConfig;return e&&e.path===""}function a0(t){let e=[],n=new Set;for(let r of t){if(!aL(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=a0(r.children);e.push(new Vt(r.value,i))}return e.filter(r=>!n.has(r))}function OT(t){return t.data||{}}function kT(t){return t.resolve||{}}function uL(t,e,n,r,i,s){return He(o=>iL(t,e,n,r,o.extractedUrl,i,s).pipe(te(({state:a,tree:c})=>pe(j({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function cL(t,e){return He(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return J(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of u0(c))o.add(l);let a=0;return Ce(o).pipe(jn(c=>s.has(c)?lL(c,r,t,e):(c.data=Kd(c,c.parent,t).resolve,J(void 0))),Ge(()=>a++),Ms(1),He(c=>a===o.size?J(n):Et))})}function u0(t){let e=t.children.map(n=>u0(n)).flat();return[t,...e]}function lL(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!e0(i)&&(s[gu]=i.title),dL(s,t,e,r).pipe(te(o=>(t._resolvedData=o,t.data=Kd(t,t.parent,n).resolve,null)))}function dL(t,e,n,r){let i=ly(t);if(i.length===0)return J({});let s={};return Ce(i).pipe(He(o=>hL(t[o],e,n,r).pipe(dn(),Ge(a=>{if(a instanceof du)throw Yd(new ao,a);s[o]=a}))),Ms(1),kp(s),_r(o=>i0(o)?Et:As(o)))}function hL(t,e,n,r){let i=yu(e)??r,s=ho(t,i),o=s.resolve?s.resolve(e,n):Gt(i,()=>s(e,n));return $r(o)}function uy(t){return at(e=>{let n=t(e);return n?Ce(n).pipe(te(()=>e)):J(e)})}var c0=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===oe);return i}getResolvedTitleForRoute(r){return r.data[gu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>F(fL),providedIn:"root"});let t=e;return t})(),fL=(()=>{let e=class e extends c0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(Y(AT))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_u=new G("",{providedIn:"root",factory:()=>({})}),pL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=KD({type:e,selectors:[["ng-component"]],standalone:!0,features:[$b],decls:1,vars:0,template:function(i,s){i&1&&Om(0,"router-outlet")},dependencies:[EV],encapsulation:2});let t=e;return t})();function Fy(t){let e=t.children&&t.children.map(Fy),n=e?pe(j({},t),{children:e}):j({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=pL),n}var pu=new G(""),Vy=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(Td)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return J(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=$r(r.loadComponent()).pipe(te(l0),Ge(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),_i(()=>{this.componentLoaders.delete(r)})),s=new Ds(i,()=>new Le).pipe(Es());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return J({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=gL(i,this.compiler,r,this.onLoadEndListener).pipe(_i(()=>{this.childrenLoaders.delete(i)})),a=new Ds(o,()=>new Le).pipe(Es());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gL(t,e,n,r){return $r(t.loadChildren()).pipe(te(l0),He(i=>i instanceof ja||Array.isArray(i)?J(i):Ce(e.compileModuleAsync(i))),te(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(pu,[],{optional:!0,self:!0}).flat()),{routes:o.map(Fy),injector:s}}))}function mL(t){return t&&typeof t=="object"&&"default"in t}function l0(t){return mL(t)?t.default:t}var Ly=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>F(yL),providedIn:"root"});let t=e;return t})(),yL=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),d0=new G(""),h0=new G("");function vL(t,e,n){let r=t.get(h0),i=t.get(ct);return t.get(we).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),wL(t))),{onViewTransitionCreated:c}=r;return c&&Gt(t,()=>c({transition:a,from:e,to:n})),o})}function wL(t){return new Promise(e=>{Pm({read:()=>setTimeout(e)},{injector:t})})}var _L=new G(""),jy=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=F(Vy),this.environmentInjector=F(Tt),this.urlSerializer=F(mu),this.rootContexts=F(vu),this.location=F(eo),this.inputBindingEnabled=F(Xd,{optional:!0})!==null,this.titleStrategy=F(c0),this.options=F(_u,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Ly),this.createViewTransition=F(d0,{optional:!0}),this.navigationErrorHandler=F(_L,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let r=s=>this.events.next(new vy(s)),i=s=>this.events.next(new wy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(pe(j(j({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new et({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:iu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dt(o=>o.id!==0),te(o=>pe(j({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),at(o=>{let a=!1,c=!1;return J(o).pipe(at(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Lt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?pe(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let g="";return this.events.next(new Ur(l.id,this.urlSerializer.serialize(l.rawUrl),g,qd.IgnoredSameUrlNavigation)),l.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return J(l).pipe(at(g=>{let y=this.transitions?.getValue();return this.events.next(new uo(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?Et:Promise.resolve(g)}),uL(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=pe(j({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new zd(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:D,restoredState:M,extras:T}=l,P=new uo(g,this.urlSerializer.serialize(y),D,M);this.events.next(P);let L=JT(this.rootComponentType).snapshot;return this.currentTransition=o=pe(j({},l),{targetSnapshot:L,urlAfterRedirects:y,extras:pe(j({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,J(o)}else{let g="";return this.events.next(new Ur(l.id,this.urlSerializer.serialize(l.extractedUrl),g,qd.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Et}}),Ge(l=>{let h=new py(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),te(l=>(this.currentTransition=o=pe(j({},l),{guards:SV(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),jV(this.environmentInjector,l=>this.events.next(l)),Ge(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Yd(this.urlSerializer,l.guardsResult);let h=new gy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Dt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Lt.GuardRejected),!1)),uy(l=>{if(l.guards.canActivateChecks.length)return J(l).pipe(Ge(h=>{let p=new my(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),at(h=>{let p=!1;return J(h).pipe(cL(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Lt.NoDataFromResolver)}}))}),Ge(h=>{let p=new yy(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),uy(l=>{let h=p=>{let g=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ge(y=>{p.component=y}),te(()=>{})));for(let y of p.children)g.push(...h(y));return g};return Na(h(l.targetSnapshot.root)).pipe(Ir(null),Un(1))}),uy(()=>this.afterPreactivation()),at(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ce(p).pipe(te(()=>o)):J(o)}),te(l=>{let h=DV(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=pe(j({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Ge(()=>{this.events.next(new cu)}),AV(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Un(1),Ge({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Lp(this.transitionAbortSubject.pipe(Ge(l=>{throw l}))),_i(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Lt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_r(l=>{if(c=!0,r0(l))this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),TV(l)?this.events.next(new co(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let h=new uu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=Gt(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof du){let{message:g,cancellationCode:y}=Yd(this.urlSerializer,p);this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),g,y)),this.events.next(new co(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let g=r.errorHandler(l);o.resolve(!!g)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Et}))}))}cancelNavigationTransition(r,i,s){let o=new Xn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IL(t){return t!==iu}var EL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>F(DL),providedIn:"root"});let t=e;return t})(),Oy=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},DL=(()=>{let e=class e extends Oy{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Rr(e)))(s||e)}})(),e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),f0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>F(CL),providedIn:"root"});let t=e;return t})(),CL=(()=>{let e=class e extends f0{constructor(){super(...arguments),this.location=F(eo),this.urlSerializer=F(mu),this.options=F(_u,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Ly),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=JT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof uo)this.stateMemento=this.createStateMemento();else if(r instanceof Ur)this.rawUrlTree=i.initialUrl;else if(r instanceof zd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof cu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Xn&&(r.code===Lt.GuardRejected||r.code===Lt.NoDataFromResolver)?this.restoreHistory(i):r instanceof uu?this.restoreHistory(i,!0):r instanceof tr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof er?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=j(j({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=j(j({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Rr(e)))(s||e)}})(),e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(nu||{});function p0(t,e){t.events.pipe(Dt(n=>n instanceof tr||n instanceof Xn||n instanceof uu||n instanceof Ur),te(n=>n instanceof tr||n instanceof Ur?nu.COMPLETE:(n instanceof Xn?n.code===Lt.Redirect||n.code===Lt.SupersededByNewNavigation:!1)?nu.REDIRECTING:nu.FAILED),Dt(n=>n!==nu.REDIRECTING),Un(1)).subscribe(()=>{e()})}function bL(t){throw t}var TL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Br=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(Cd),this.stateManager=F(f0),this.options=F(_u,{optional:!0})||{},this.pendingTasks=F(Nr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(jy),this.urlSerializer=F(mu),this.location=F(eo),this.urlHandlingStrategy=F(Ly),this._events=new Le,this.errorHandler=this.options.errorHandler||bL,this.navigated=!1,this.routeReuseStrategy=F(EL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(pu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Xd,{optional:!0}),this.eventsSubscription=new Fe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Xn&&i.code!==Lt.Redirect&&i.code!==Lt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof tr)this.navigated=!0;else if(i instanceof co){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=j({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||IL(s.source)},a);this.scheduleNavigation(c,iu,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ML(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),iu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=j({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Fy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":p=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let g;try{let y=s?s.snapshot:this.routerState.snapshot.root;g=KT(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return QT(g,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=ou(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,iu,null,i)}navigate(r,i={skipLocationChange:!1}){return SL(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=j({},TL):i===!1?s=j({},AL):s=i,ou(r))return ST(this.currentUrlTree,r,s);let o=this.parseUrl(r);return ST(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,h;a?(c=a.resolve,l=a.reject,h=a.promise):h=new Promise((g,y)=>{c=g,l=y});let p=this.pendingTasks.add();return p0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function ML(t){return!(t instanceof cu)&&!(t instanceof co)}var Jd=class{};var xL=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Dt(r=>r instanceof tr),jn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Id(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Ce(s).pipe(wr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=J(null);let o=s.pipe(He(a=>a===null?J(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Ce([o,a]).pipe(wr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(Y(Br),Y(Td),Y(Tt),Y(Jd),Y(Vy))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),g0=new G(""),RL=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof uo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof tr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Ur&&r.code===qd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Hd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){cb()},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function m5(t,...e){return Ht([{provide:pu,multi:!0,useValue:t},[],{provide:Bi,useFactory:m0,deps:[Br]},{provide:za,multi:!0,useFactory:y0},e.map(n=>n.\u0275providers)])}function m0(t){return t.routerState.root}function Iu(t,e){return{\u0275kind:t,\u0275providers:e}}function y0(){let t=F(rt);return e=>{let n=t.get(kr);if(e!==n.components[0])return;let r=t.get(Br),i=t.get(v0);t.get(Uy)===1&&r.initialNavigation(),t.get(w0,null,de.Optional)?.setUpPreloading(),t.get(g0,null,de.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var v0=new G("",{factory:()=>new Le}),Uy=new G("",{providedIn:"root",factory:()=>1});function NL(){return Iu(2,[{provide:Uy,useValue:0},{provide:bd,multi:!0,deps:[rt],useFactory:e=>{let n=e.get(oT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Br),s=e.get(v0);p0(i,()=>{r(!0)}),e.get(jy).afterPreactivation=()=>(r(!0),s.closed?J(void 0):s),i.initialNavigation()}))}}])}function PL(){return Iu(3,[{provide:bd,multi:!0,useFactory:()=>{let e=F(Br);return()=>{e.setUpLocationChangeListener()}}},{provide:Uy,useValue:2}])}var w0=new G("");function OL(t){return Iu(0,[{provide:w0,useExisting:xL},{provide:Jd,useExisting:t}])}function kL(){return Iu(8,[NT,{provide:Xd,useExisting:NT}])}function FL(t){let e=[{provide:d0,useValue:vL},{provide:h0,useValue:j({skipNextTransition:!!t?.skipInitialTransition},t)}];return Iu(9,e)}var FT=new G("ROUTER_FORROOT_GUARD"),VL=[eo,{provide:mu,useClass:ao},Br,vu,{provide:Bi,useFactory:m0,deps:[Br]},Vy,[]],y5=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[VL,[],{provide:pu,multi:!0,useValue:r},{provide:FT,useFactory:BL,deps:[[Br,new ut,new id]]},{provide:_u,useValue:i||{}},i?.useHash?jL():UL(),LL(),i?.preloadingStrategy?OL(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?$L(i):[],i?.bindToComponentInputs?kL().\u0275providers:[],i?.enableViewTransitions?FL().\u0275providers:[],qL()]}}static forChild(r){return{ngModule:e,providers:[{provide:pu,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(Y(FT,8))},e.\u0275mod=_n({type:e}),e.\u0275inj=wn({});let t=e;return t})();function LL(){return{provide:g0,useFactory:()=>{let t=F(cT),e=F(we),n=F(_u),r=F(jy),i=F(mu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new RL(i,r,t,e,n)}}}function jL(){return{provide:Li,useClass:uT}}function UL(){return{provide:Li,useClass:Gm}}function BL(t){return"guarded"}function $L(t){return[t.initialNavigation==="disabled"?PL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?NL().\u0275providers:[]]}var VT=new G("");function qL(){return[{provide:VT,useFactory:y0},{provide:za,multi:!0,useExisting:VT}]}var zL="firebase",HL="10.13.1";Ot(zL,HL,"app");var qi=new zn("ANGULARFIRE2_VERSION");function nh(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Eu=(t,e)=>{let n=e?[e]:jc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},po=class{constructor(){return Eu(GL)}},GL="app-check";function fo(){}var th=class{zone;delegate;constructor(e,n=Rp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},By=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fo,{},fo,fo)),n.pipe(Ge({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},go=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new th(Zone.current)),this.insideAngular=n.run(()=>new th(Zone.current,xp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(Y(we))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function rh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function WL(t){return rh().ngZone.runOutsideAngular(()=>t())}function $i(t){return rh().ngZone.run(()=>t())}function KL(t){return QL(rh())(t)}function QL(t){return function(n){return n=n.lift(new By(t.ngZone)),n.pipe(vr(t.outsideAngular),yr(t.insideAngular))}}var YL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),$i(()=>t.apply(void 0,r))},on=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=$i(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fo,{},fo,fo))),r[s]=YL(r[s],n));let i=WL(()=>t.apply(this,r));if(!e)if(i instanceof le){let s=rh();return i.pipe(vr(s.outsideAngular),yr(s.insideAngular))}else return $i(()=>i);return i instanceof le?i.pipe(KL):i instanceof Promise?$i(()=>new Promise((s,o)=>i.then(a=>$i(()=>s(a)),a=>$i(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:$i(()=>i)};var nr=class{constructor(e){return e}},zi=class{constructor(){return jc()}};function ZL(t){return t&&t.length===1?t[0]:new nr(Lc())}var $y=new G("angularfire2._apps"),JL={provide:nr,useFactory:ZL,deps:[[new ut,$y]]},XL={provide:zi,deps:[[new ut,$y]]};function ej(t){return(e,n)=>{let r=n.get(Kt);Ot("angularfire",qi.full,"core"),Ot("angularfire",qi.full,"app"),Ot("angular",qb.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new nr(i)}}function L5(t,...e){return Ht([JL,XL,{provide:$y,useFactory:ej(t),multi:!0,deps:[we,rt,go,...e]}])}var j5=on(cE,!0);var _0="auth",Hi=class{constructor(e){return e}},Du=class{constructor(){return Eu(_0)}};var qy=new G("angularfire2.auth-instances");function Jj(t,e){let n=nh(_0,t,e);return n&&new Hi(n)}function Xj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hi(r)}}var e2={provide:Du,deps:[[new ut,qy]]},t2={provide:Hi,useFactory:Jj,deps:[[new ut,qy],nr]};function N6(t,...e){return Ot("angularfire",qi.full,"auth"),Ht([t2,e2,{provide:qy,useFactory:Xj(t),multi:!0,deps:[we,rt,go,zi,[new ut,po],...e]}])}var P6=on(hp,!0);var O6=on(pp,!0);var k6=on(fp,!0);var x0=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ne(Kn),ne(Ft))},e.\u0275dir=Oe({type:e});let t=e;return t})(),fh=(()=>{let e=class e extends x0{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Rr(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,features:[Rt]});let t=e;return t})(),_o=new G(""),r2={provide:_o,useExisting:zt(()=>i2),multi:!0},i2=(()=>{let e=class e extends fh{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Rr(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&Qn("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[In([r2]),Rt]});let t=e;return t})(),s2={provide:_o,useExisting:zt(()=>R0),multi:!0};function o2(){let t=Zn()?Zn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var a2=new G(""),R0=(()=>{let e=class e extends x0{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!o2())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ne(Kn),ne(Ft),ne(a2,8))},e.\u0275dir=Oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Qn("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[In([s2]),Rt]});let t=e;return t})();function qr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function N0(t){return t!=null&&typeof t.length=="number"}var xu=new G(""),ph=new G(""),u2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,I0=class{static min(e){return c2(e)}static max(e){return l2(e)}static required(e){return P0(e)}static requiredTrue(e){return d2(e)}static email(e){return h2(e)}static minLength(e){return f2(e)}static maxLength(e){return p2(e)}static pattern(e){return g2(e)}static nullValidator(e){return sh(e)}static compose(e){return j0(e)}static composeAsync(e){return U0(e)}};function c2(t){return e=>{if(qr(e.value)||qr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function l2(t){return e=>{if(qr(e.value)||qr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function P0(t){return qr(t.value)?{required:!0}:null}function d2(t){return t.value===!0?null:{required:!0}}function h2(t){return qr(t.value)||u2.test(t.value)?null:{email:!0}}function f2(t){return e=>qr(e.value)||!N0(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function p2(t){return e=>N0(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function g2(t){if(!t)return sh;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(qr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function sh(t){return null}function O0(t){return t!=null}function k0(t){return Fi(t)?Ce(t):t}function F0(t){let e={};return t.forEach(n=>{e=n!=null?j(j({},e),n):e}),Object.keys(e).length===0?null:e}function V0(t,e){return e.map(n=>n(t))}function m2(t){return!t.validate}function L0(t){return t.map(e=>m2(e)?e:n=>e.validate(n))}function j0(t){if(!t)return null;let e=t.filter(O0);return e.length==0?null:function(n){return F0(V0(n,e))}}function Qy(t){return t!=null?j0(L0(t)):null}function U0(t){if(!t)return null;let e=t.filter(O0);return e.length==0?null:function(n){let r=V0(n,e).map(k0);return Op(r).pipe(te(F0))}}function Yy(t){return t!=null?U0(L0(t)):null}function E0(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function B0(t){return t._rawValidators}function $0(t){return t._rawAsyncValidators}function zy(t){return t?Array.isArray(t)?t:[t]:[]}function oh(t,e){return Array.isArray(t)?t.includes(e):t===e}function D0(t,e){let n=zy(e);return zy(t).forEach(i=>{oh(n,i)||n.push(i)}),n}function C0(t,e){return zy(e).filter(n=>!oh(t,n))}var ah=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Yy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},rr=class extends ah{get formDirective(){return null}get path(){return null}},zr=class extends ah{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},uh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},y2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},J6=pe(j({},y2),{"[class.ng-submitted]":"isSubmitted"}),X6=(()=>{let e=class e extends uh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(zr,2))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Dd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Rt]});let t=e;return t})(),eW=(()=>{let e=class e extends uh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(rr,10))},e.\u0275dir=Oe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Dd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Rt]});let t=e;return t})();var Cu="VALID",ih="INVALID",mo="PENDING",bu="DISABLED",Hr=class{},ch=class extends Hr{constructor(e,n){super(),this.value=e,this.source=n}},Au=class extends Hr{constructor(e,n){super(),this.pristine=e,this.source=n}},Su=class extends Hr{constructor(e,n){super(),this.touched=e,this.source=n}},yo=class extends Hr{constructor(e,n){super(),this.status=e,this.source=n}},Hy=class extends Hr{constructor(e){super(),this.source=e}},Gy=class extends Hr{constructor(e){super(),this.source=e}};function Zy(t){return(gh(t)?t.validators:t)||null}function v2(t){return Array.isArray(t)?Qy(t):t||null}function Jy(t,e){return(gh(e)?e.asyncValidators:t)||null}function w2(t){return Array.isArray(t)?Yy(t):t||null}function gh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function q0(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[n])throw new Q(1001,"")}function z0(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new Q(1002,"")})}var vo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Js(()=>this.statusReactive()),this.statusReactive=Zs(void 0),this._pristine=Js(()=>this.pristineReactive()),this.pristineReactive=Zs(!0),this._touched=Js(()=>this.touchedReactive()),this.touchedReactive=Zs(!1),this._events=new Le,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return En(this.statusReactive)}set status(e){En(()=>this.statusReactive.set(e))}get valid(){return this.status===Cu}get invalid(){return this.status===ih}get pending(){return this.status==mo}get disabled(){return this.status===bu}get enabled(){return this.status!==bu}get pristine(){return En(this.pristineReactive)}set pristine(e){En(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return En(this.touchedReactive)}set touched(e){En(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(D0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(D0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(C0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(C0(e,this._rawAsyncValidators))}hasValidator(e){return oh(this._rawValidators,e)}hasAsyncValidator(e){return oh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(pe(j({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Su(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Su(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(pe(j({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Au(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Au(!0,r))}markAsPending(e={}){this.status=mo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(pe(j({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=bu,this.errors=null,this._forEachChild(i=>{i.disable(pe(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ch(this.value,r)),this._events.next(new yo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(j({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Cu,this._forEachChild(r=>{r.enable(pe(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pe(j({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cu||this.status===mo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ch(this.value,n)),this._events.next(new yo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(pe(j({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bu:Cu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=mo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=k0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new yo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?bu:this.errors?ih:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mo)?mo:this._anyControlsHaveStatus(ih)?ih:Cu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Au(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Su(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=v2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=w2(this._rawAsyncValidators)}},wo=class extends vo{constructor(e,n,r){super(Zy(n),Jy(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){z0(this,!0,e),Object.keys(e).forEach(r=>{q0(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Wy=class extends wo{};var Io=new G("CallSetDisabledState",{providedIn:"root",factory:()=>Ru}),Ru="always";function H0(t,e){return[...e.path,t]}function lh(t,e,n=Ru){Xy(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),I2(t,e),D2(t,e),E2(t,e),_2(t,e)}function b0(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hh(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function dh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function _2(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Xy(t,e){let n=B0(t);e.validator!==null?t.setValidators(E0(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=$0(t);e.asyncValidator!==null?t.setAsyncValidators(E0(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();dh(e._rawValidators,i),dh(e._rawAsyncValidators,i)}function hh(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=B0(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=$0(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return dh(e._rawValidators,r),dh(e._rawAsyncValidators,r),n}function I2(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&G0(t,e)})}function E2(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&G0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function G0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function D2(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function W0(t,e){t==null,Xy(t,e)}function C2(t,e){return hh(t,e)}function K0(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function b2(t){return Object.getPrototypeOf(t.constructor)===fh}function Q0(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Y0(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===R0?n=s:b2(s)?r=s:i=s}),i||r||n||null}function T2(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var A2={provide:rr,useExisting:zt(()=>S2)},Tu=Promise.resolve(),S2=(()=>{let e=class e extends rr{get submitted(){return En(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Js(()=>this.submittedReactive()),this.submittedReactive=Zs(!1),this._directives=new Set,this.ngSubmit=new Pe,this.form=new wo({},Qy(r),Yy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Tu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),lh(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Tu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Tu.then(()=>{let i=this._findContainer(r.path),s=new wo({});W0(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Tu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Tu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),Q0(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(ne(xu,10),ne(ph,10),ne(Io,8))},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Qn("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[In([A2]),Rt]});let t=e;return t})();function T0(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function A0(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Mu=class extends vo{constructor(e=null,n,r){super(Zy(n),Jy(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(A0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){T0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){T0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){A0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var M2=t=>t instanceof Mu;var x2={provide:zr,useExisting:zt(()=>R2)},S0=Promise.resolve(),R2=(()=>{let e=class e extends zr{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Mu,this._registered=!1,this.name="",this.update=new Pe,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Y0(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),K0(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){lh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){S0.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Ha(i);S0.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?H0(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(ne(rr,9),ne(xu,10),ne(ph,10),ne(_o,10),ne(Vi,8),ne(Io,8))},e.\u0275dir=Oe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[In([x2]),Rt,Wn]});let t=e;return t})(),nW=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),N2={provide:_o,useExisting:zt(()=>P2),multi:!0},P2=(()=>{let e=class e extends fh{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Rr(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Qn("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[In([N2]),Rt]});let t=e;return t})(),O2={provide:_o,useExisting:zt(()=>F2),multi:!0};var k2=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),F2=(()=>{let e=class e extends fh{constructor(r,i,s,o){super(r,i),this._registry=s,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=F(Io,{optional:!0})??Ru}ngOnInit(){this._control=this._injector.get(zr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(ne(Kn),ne(Ft),ne(k2),ne(rt))},e.\u0275dir=Oe({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,s){i&1&&Qn("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[In([O2]),Rt]});let t=e;return t})();var Z0=new G("");var V2={provide:rr,useExisting:zt(()=>L2)},L2=(()=>{let e=class e extends rr{get submitted(){return En(this._submittedReactive)}set submitted(r){this._submittedReactive.set(r)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Js(()=>this._submittedReactive()),this._submittedReactive=Zs(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Pe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return lh(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){b0(r.control||null,r,!1),T2(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this._submittedReactive.set(!0),Q0(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new Hy(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this._submittedReactive.set(!1),this.form._events.next(new Gy(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(b0(i||null,r),M2(s)&&(lh(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);W0(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&C2(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xy(this.form,this),this._oldForm&&hh(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(ne(xu,10),ne(ph,10),ne(Io,8))},e.\u0275dir=Oe({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Qn("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[In([V2]),Rt,Wn]});let t=e;return t})();var j2={provide:zr,useExisting:zt(()=>U2)},U2=(()=>{let e=class e extends zr{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Pe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Y0(this,o)}ngOnChanges(r){this._added||this._setUpControl(),K0(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return H0(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(ne(rr,13),ne(xu,10),ne(ph,10),ne(_o,10),ne(Z0,8))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[In([j2]),Rt,Wn]});let t=e;return t})();var B2=(()=>{let e=class e{constructor(){this._validator=sh}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):sh,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,features:[Wn]});let t=e;return t})();var $2={provide:xu,useExisting:zt(()=>q2),multi:!0};var q2=(()=>{let e=class e extends B2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ha,this.createValidator=r=>P0}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Rr(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Ed("required",s._enabled?"":null)},inputs:{required:"required"},features:[In([$2]),Rt]});let t=e;return t})();var J0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=wn({});let t=e;return t})(),Ky=class extends vo{constructor(e,n,r){super(Zy(n),Jy(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){z0(this,!1,e),e.forEach((r,i)=>{q0(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function M0(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var rW=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return M0(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new wo(s,o)}record(r,i=null){let s=this._reduceControls(r);return new Wy(s,i)}control(r,i,s){let o={};return this.useNonNullable?(M0(i)?o=i:(o.validators=i,o.asyncValidators=s),new Mu(r,pe(j({},o),{nonNullable:!0}))):new Mu(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new Ky(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Mu)return r;if(r instanceof vo)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var iW=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Io,useValue:r.callSetDisabledState??Ru}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=wn({imports:[J0]});let t=e;return t})(),sW=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Z0,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Io,useValue:r.callSetDisabledState??Ru}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_n({type:e}),e.\u0275inj=wn({imports:[J0]});let t=e;return t})();var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eA={};var Gr,ev;(function(){var t;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,C,A){for(var w=Array(arguments.length-2),Pn=2;Pn<arguments.length;Pn++)w[Pn-2]=arguments[Pn];return v.prototype[C].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var E=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)E[C]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(C=0;16>C;++C)E[C]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],C=I.g[2];var A=I.g[3],w=v+(A^_&(C^A))+E[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+E[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+E[2]+606105819&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+E[3]+3250441966&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(A^_&(C^A))+E[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+E[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+E[6]+2821735955&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+E[7]+4249261313&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(A^_&(C^A))+E[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+E[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+E[10]+4294925233&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+E[11]+2304563134&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(A^_&(C^A))+E[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(C^v&(_^C))+E[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=C+(_^A&(v^_))+E[14]+2792965006&4294967295,C=A+(w<<17&4294967295|w>>>15),w=_+(v^C&(A^v))+E[15]+1236535329&4294967295,_=C+(w<<22&4294967295|w>>>10),w=v+(C^A&(_^C))+E[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+E[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+E[11]+643717713&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+E[0]+3921069994&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(C^A&(_^C))+E[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+E[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+E[15]+3634488961&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+E[4]+3889429448&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(C^A&(_^C))+E[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+E[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+E[3]+4107603335&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+E[8]+1163531501&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(C^A&(_^C))+E[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^C&(v^_))+E[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=C+(v^_&(A^v))+E[7]+1735328473&4294967295,C=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(C^A))+E[12]+2368359562&4294967295,_=C+(w<<20&4294967295|w>>>12),w=v+(_^C^A)+E[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+E[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+E[11]+1839030562&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+E[14]+4259657740&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(_^C^A)+E[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+E[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+E[7]+4139469664&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+E[10]+3200236656&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(_^C^A)+E[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+E[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+E[3]+3572445317&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+E[6]+76029189&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(_^C^A)+E[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^C)+E[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=C+(A^v^_)+E[15]+530742520&4294967295,C=A+(w<<16&4294967295|w>>>16),w=_+(C^A^v)+E[2]+3299628645&4294967295,_=C+(w<<23&4294967295|w>>>9),w=v+(C^(_|~A))+E[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+E[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+E[14]+2878612391&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+E[5]+4237533241&4294967295,_=C+(w<<21&4294967295|w>>>11),w=v+(C^(_|~A))+E[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+E[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+E[10]+4293915773&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+E[1]+2240044497&4294967295,_=C+(w<<21&4294967295|w>>>11),w=v+(C^(_|~A))+E[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+E[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+E[6]+2734768916&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+E[13]+1309151649&4294967295,_=C+(w<<21&4294967295|w>>>11),w=v+(C^(_|~A))+E[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~C))+E[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=C+(v^(A|~_))+E[2]+718787259&4294967295,C=A+(w<<15&4294967295|w>>>17),w=_+(A^(C|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(C+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,E=this.B,C=this.h,A=0;A<v;){if(C==0)for(;A<=_;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<v;)if(E[C++]=I.charCodeAt(A++),C==this.blockSize){i(this,E),C=0;break}}else for(;A<v;)if(E[C++]=I[A++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var E=0;32>E;E+=8)I[_++]=this.g[v]>>>E&255;return I};function s(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function o(I,v){this.h=v;for(var _=[],E=!0,C=I.length-1;0<=C;C--){var A=I[C]|0;E&&A==v||(_[C]=A,E=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return T(l(-I));for(var v=[],_=1,E=0;I>=_;E++)v[E]=I/_|0,_*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return T(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),E=p,C=0;C<I.length;C+=8){var A=Math.min(8,I.length-C),w=parseInt(I.substring(C,C+A),v);8>A?(A=l(Math.pow(v,A)),E=E.j(A).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(M(this))return-T(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(M(this))return"-"+T(this).toString(I);for(var v=l(Math.pow(I,6)),_=this,E="";;){var C=H(_,v).g;_=P(_,C.j(v));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=C,D(_))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function M(I){return I.h==-1}t.l=function(I){return I=P(this,I),M(I)?-1:D(I)?0:1};function T(I){for(var v=I.g.length,_=[],E=0;E<v;E++)_[E]=~I.g[E];return new o(_,~I.h).add(g)}t.abs=function(){return M(this)?T(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0,C=0;C<=v;C++){var A=E+(this.i(C)&65535)+(I.i(C)&65535),w=(A>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);E=w>>>16,A&=65535,w&=65535,_[C]=w<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function P(I,v){return I.add(T(v))}t.j=function(I){if(D(this)||D(I))return p;if(M(this))return M(I)?T(this).j(T(I)):T(T(this).j(I));if(M(I))return T(this.j(T(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<I.g.length;C++){var A=this.i(E)>>>16,w=this.i(E)&65535,Pn=I.i(C)>>>16,aa=I.i(C)&65535;_[2*E+2*C]+=w*aa,L(_,2*E+2*C),_[2*E+2*C+1]+=A*aa,L(_,2*E+2*C+1),_[2*E+2*C+1]+=w*Pn,L(_,2*E+2*C+1),_[2*E+2*C+2]+=A*Pn,L(_,2*E+2*C+2)}for(E=0;E<v;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=v;E<2*v;E++)_[E]=0;return new o(_,0)};function L(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function B(I,v){this.g=I,this.h=v}function H(I,v){if(D(v))throw Error("division by zero");if(D(I))return new B(p,p);if(M(I))return v=H(T(I),v),new B(T(v.g),T(v.h));if(M(v))return v=H(I,T(v)),new B(T(v.g),v.h);if(30<I.g.length){if(M(I)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=v;0>=E.l(I);)_=ie(_),E=ie(E);var C=W(_,1),A=W(E,1);for(E=W(E,2),_=W(_,2);!D(E);){var w=A.add(E);0>=w.l(I)&&(C=C.add(_),A=w),E=W(E,1),_=W(_,1)}return v=P(I,C.j(v)),new B(C,v)}for(C=p;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=l(_),w=A.j(v);M(w)||0<w.l(I);)_-=E,A=l(_),w=A.j(v);D(A)&&(A=g),C=C.add(A),I=P(I,w)}return new B(C,I)}t.A=function(I){return H(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)&I.i(E);return new o(_,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)|I.i(E);return new o(_,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)^I.i(E);return new o(_,this.h^I.h)};function ie(I){for(var v=I.g.length+1,_=[],E=0;E<v;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(_,I.h)}function W(I,v){var _=v>>5;v%=32;for(var E=I.g.length-_,C=[],A=0;A<E;A++)C[A]=0<v?I.i(A+_)>>>v|I.i(A+_+1)<<32-v:I.i(A+_);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ev=eA.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Gr=eA.Integer=o}).apply(typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{});var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var tv,nv,Eo,rv,Nu,yh,iv,sv,ov;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mh=="object"&&mh];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var b=u[m];if(!(b in f))break e;f=f[b]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var f=0,m=!1,b={next:function(){if(!m&&f<u.length){var R=f++;return{value:d(R,u[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),u.apply(d,b)}}return function(){return u.apply(d,arguments)}}function g(u,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function D(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(m,b,R){for(var V=Array(arguments.length-2),be=2;be<arguments.length;be++)V[be-2]=arguments[be];return d.prototype[b].apply(m,V)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function T(u,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(c(m)){let b=u.length||0,R=m.length||0;u.length=b+R;for(let V=0;V<R;V++)u[b+V]=m[V]}else u.push(m)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(u){return/^[\s\xa0]*$/.test(u)}function B(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var ie=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function W(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function v(u){let d={};for(let f in u)d[f]=u[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)u[f]=m[f];for(let R=0;R<_.length;R++)f=_[R],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function C(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function A(u){a.setTimeout(()=>{throw u},0)}function w(){var u=Lf;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Pn{constructor(){this.h=this.g=null}add(d,f){let m=aa.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var aa=new P(()=>new rx,u=>u.reset());class rx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ua,ca=!1,Lf=new Pn,Y_=()=>{let u=a.Promise.resolve(void 0);ua=()=>{u.then(ix)}};var ix=()=>{for(var u;u=w();){try{u.h.call(u.g)}catch(f){A(f)}var d=aa;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}ca=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var sx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function la(u,d){if(ht.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ie){e:{try{H(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ox[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&la.aa.h.call(this)}}D(la,ht);var ox={2:"touch",3:"pen",4:"mouse"};la.prototype.h=function(){la.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var da="closure_listenable_"+(1e6*Math.random()|0),ax=0;function ux(u,d,f,m,b){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++ax,this.da=this.fa=!1}function _c(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ic(u){this.src=u,this.g={},this.h=0}Ic.prototype.add=function(u,d,f,m,b){var R=u.toString();u=this.g[R],u||(u=this.g[R]=[],this.h++);var V=Uf(u,d,m,b);return-1<V?(d=u[V],f||(d.fa=!1)):(d=new ux(d,this.src,R,!!m,b),d.fa=f,u.push(d)),d};function jf(u,d){var f=d.type;if(f in u.g){var m=u.g[f],b=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=b)&&Array.prototype.splice.call(m,b,1),R&&(_c(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Uf(u,d,f,m){for(var b=0;b<u.length;++b){var R=u[b];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return b}return-1}var Bf="closure_lm_"+(1e6*Math.random()|0),$f={};function Z_(u,d,f,m,b){if(m&&m.once)return X_(u,d,f,m,b);if(Array.isArray(d)){for(var R=0;R<d.length;R++)Z_(u,d[R],f,m,b);return null}return f=Gf(f),u&&u[da]?u.K(d,f,l(m)?!!m.capture:!!m,b):J_(u,d,f,!1,m,b)}function J_(u,d,f,m,b,R){if(!d)throw Error("Invalid event type");var V=l(b)?!!b.capture:!!b,be=zf(u);if(be||(u[Bf]=be=new Ic(u)),f=be.add(d,f,m,V,R),f.proxy)return f;if(m=cx(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)sx||(b=V),b===void 0&&(b=!1),u.addEventListener(d.toString(),m,b);else if(u.attachEvent)u.attachEvent(tI(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function cx(){function u(f){return d.call(u.src,u.listener,f)}let d=lx;return u}function X_(u,d,f,m,b){if(Array.isArray(d)){for(var R=0;R<d.length;R++)X_(u,d[R],f,m,b);return null}return f=Gf(f),u&&u[da]?u.L(d,f,l(m)?!!m.capture:!!m,b):J_(u,d,f,!0,m,b)}function eI(u,d,f,m,b){if(Array.isArray(d))for(var R=0;R<d.length;R++)eI(u,d[R],f,m,b);else m=l(m)?!!m.capture:!!m,f=Gf(f),u&&u[da]?(u=u.i,d=String(d).toString(),d in u.g&&(R=u.g[d],f=Uf(R,f,m,b),-1<f&&(_c(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete u.g[d],u.h--)))):u&&(u=zf(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Uf(d,f,m,b)),(f=-1<u?d[u]:null)&&qf(f))}function qf(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[da])jf(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(tI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=zf(d))?(jf(f,u),f.h==0&&(f.src=null,d[Bf]=null)):_c(u)}}}function tI(u){return u in $f?$f[u]:$f[u]="on"+u}function lx(u,d){if(u.da)u=!0;else{d=new la(d,this);var f=u.listener,m=u.ha||u.src;u.fa&&qf(u),u=f.call(m,d)}return u}function zf(u){return u=u[Bf],u instanceof Ic?u:null}var Hf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gf(u){return typeof u=="function"?u:(u[Hf]||(u[Hf]=function(d){return u.handleEvent(d)}),u[Hf])}function ft(){fr.call(this),this.i=new Ic(this),this.M=this,this.F=null}D(ft,fr),ft.prototype[da]=!0,ft.prototype.removeEventListener=function(u,d,f,m){eI(this,u,d,f,m)};function wt(u,d){var f,m=u.F;if(m)for(f=[];m;m=m.F)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new ht(d,u);else if(d instanceof ht)d.target=d.target||u;else{var b=d;d=new ht(m,u),E(d,b)}if(b=!0,f)for(var R=f.length-1;0<=R;R--){var V=d.g=f[R];b=Ec(V,m,!0,d)&&b}if(V=d.g=u,b=Ec(V,m,!0,d)&&b,b=Ec(V,m,!1,d)&&b,f)for(R=0;R<f.length;R++)V=d.g=f[R],b=Ec(V,m,!1,d)&&b}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],m=0;m<f.length;m++)_c(f[m]);delete u.g[d],u.h--}}this.F=null},ft.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},ft.prototype.L=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function Ec(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,R=0;R<d.length;++R){var V=d[R];if(V&&!V.da&&V.capture==f){var be=V.listener,ot=V.ha||V.src;V.fa&&jf(u.i,V),b=be.call(ot,m)!==!1&&b}}return b&&!m.defaultPrevented}function nI(u,d,f){if(typeof u=="function")f&&(u=g(u,f));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function rI(u){u.g=nI(()=>{u.g=null,u.i&&(u.i=!1,rI(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class dx extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(u){fr.call(this),this.h=u,this.g={}}D(ha,fr);var iI=[];function sI(u){W(u.g,function(d,f){this.g.hasOwnProperty(f)&&qf(d)},u),u.g={}}ha.prototype.N=function(){ha.aa.N.call(this),sI(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wf=a.JSON.stringify,hx=a.JSON.parse,fx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Kf(){}Kf.prototype.h=null;function oI(u){return u.h||(u.h=u.i())}function aI(){}var fa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qf(){ht.call(this,"d")}D(Qf,ht);function Yf(){ht.call(this,"c")}D(Yf,ht);var fi={},uI=null;function Dc(){return uI=uI||new ft}fi.La="serverreachability";function cI(u){ht.call(this,fi.La,u)}D(cI,ht);function pa(u){let d=Dc();wt(d,new cI(d))}fi.STAT_EVENT="statevent";function lI(u,d){ht.call(this,fi.STAT_EVENT,u),this.stat=d}D(lI,ht);function _t(u){let d=Dc();wt(d,new lI(d,u))}fi.Ma="timingevent";function dI(u,d){ht.call(this,fi.Ma,u),this.size=d}D(dI,ht);function ga(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ma(){this.g=!0}ma.prototype.xa=function(){this.g=!1};function px(u,d,f,m,b,R){u.info(function(){if(u.g)if(R)for(var V="",be=R.split("&"),ot=0;ot<be.length;ot++){var ve=be[ot].split("=");if(1<ve.length){var pt=ve[0];ve=ve[1];var gt=pt.split("_");V=2<=gt.length&&gt[1]=="type"?V+(pt+"="+ve+"&"):V+(pt+"=redacted&")}}else V=null;else V=R;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+V})}function gx(u,d,f,m,b,R,V){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+R+" "+V})}function ps(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+yx(u,f)+(m?" "+m:"")})}function mx(u,d){u.info(function(){return"TIMEOUT: "+d})}ma.prototype.info=function(){};function yx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var m=f[u];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var R=b[0];if(R!="noop"&&R!="stop"&&R!="close")for(var V=1;V<b.length;V++)b[V]=""}}}}return Wf(f)}catch{return d}}var Cc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zf;function bc(){}D(bc,Kf),bc.prototype.g=function(){return new XMLHttpRequest},bc.prototype.i=function(){return{}},Zf=new bc;function pr(u,d,f,m){this.j=u,this.i=d,this.l=f,this.R=m||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fI}function fI(){this.i=null,this.g="",this.h=!1}var pI={},Jf={};function Xf(u,d,f){u.L=1,u.v=Mc(On(d)),u.m=f,u.P=!0,gI(u,null)}function gI(u,d){u.F=Date.now(),Tc(u),u.A=On(u.v);var f=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),MI(f.i,"t",m),u.C=0,f=u.j.J,u.h=new fI,u.g=WI(u.j,f?d:null,!u.m),0<u.O&&(u.M=new dx(g(u.Y,u,u.g),u.O)),d=u.U,f=u.g,m=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(iI[0]=b.toString()),b=iI);for(var R=0;R<b.length;R++){var V=Z_(f,b[R],m||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),pa(),px(u.i,u.u,u.A,u.l,u.R,u.m)}pr.prototype.ca=function(u){u=u.target;let d=this.M;d&&kn(u)==3?d.j():this.Y(u)},pr.prototype.Y=function(u){try{if(u==this.g)e:{let gt=kn(this.g);var d=this.g.Ba();let ys=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||FI(this.g)))){this.J||gt!=4||d==7||(d==8||0>=ys?pa(3):pa(2)),ep(this);var f=this.g.Z();this.X=f;t:if(mI(this)){var m=FI(this.g);u="";var b=m.length,R=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),ya(this);var V="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,u+=this.h.i.decode(m[d],{stream:!(R&&d==b-1)});m.length=0,this.h.g+=u,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=f==200,gx(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ot=this.g;if((be=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(be)){var ve=be;break t}}ve=null}if(f=ve)ps(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tp(this,f);else{this.o=!1,this.s=3,_t(12),pi(this),ya(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<V.length;)if(Jt=vx(this,V),Jt==Jf){gt==4&&(this.s=4,_t(14),f=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==pI){this.s=4,_t(15),ps(this.i,this.l,V,"[Invalid Chunk]"),f=!1;break}else ps(this.i,this.l,Jt,null),tp(this,Jt);if(mI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||V.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)ps(this.i,this.l,V,"[Invalid Chunked Response]"),pi(this),ya(this);else if(0<V.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),ap(pt),pt.M=!0,_t(11))}}else ps(this.i,this.l,V,null),tp(this,V);gt==4&&pi(this),this.o&&!this.J&&(gt==4?qI(this.j,this):(this.o=!1,Tc(this)))}else kx(this.g),f==400&&0<V.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),pi(this),ya(this)}}}catch{}finally{}};function mI(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function vx(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?Jf:(f=Number(d.substring(f,m)),isNaN(f)?pI:(m+=1,m+f>d.length?Jf:(d=d.slice(m,m+f),u.C=m+f,d)))}pr.prototype.cancel=function(){this.J=!0,pi(this)};function Tc(u){u.S=Date.now()+u.I,yI(u,u.I)}function yI(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ga(g(u.ba,u),d)}function ep(u){u.B&&(a.clearTimeout(u.B),u.B=null)}pr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(mx(this.i,this.A),this.L!=2&&(pa(),_t(17)),pi(this),this.s=2,ya(this)):yI(this,this.S-u)};function ya(u){u.j.G==0||u.J||qI(u.j,u)}function pi(u){ep(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,sI(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function tp(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||np(f.h,u))){if(!u.K&&np(f.h,u)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Oc(f),Nc(f);else break e;op(f),_t(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ga(g(f.Za,f),6e3));if(1>=_I(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else mi(f,11)}else if((u.K||f.g==u)&&Oc(f),!L(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ve=b[d];if(f.T=ve[0],ve=ve[1],f.G==2)if(ve[0]=="c"){f.K=ve[1],f.ia=ve[2];let pt=ve[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=ve[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let ys=ve[5];ys!=null&&typeof ys=="number"&&0<ys&&(m=1.5*ys,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Jt=u.g;if(Jt){let Fc=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fc){var R=m.h;R.g||Fc.indexOf("spdy")==-1&&Fc.indexOf("quic")==-1&&Fc.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(rp(R,R.h),R.h=null))}if(m.D){let up=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;up&&(m.ya=up,Se(m.I,m.D,up))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var V=u;if(m.qa=GI(m,m.J?m.ia:null,m.W),V.K){II(m.h,V);var be=V,ot=m.L;ot&&(be.I=ot),be.B&&(ep(be),Tc(be)),m.g=V}else BI(m);0<f.i.length&&Pc(f)}else ve[0]!="stop"&&ve[0]!="close"||mi(f,7);else f.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?mi(f,7):sp(f):ve[0]!="noop"&&f.l&&f.l.ta(ve),f.v=0)}}pa(4)}catch{}}var wx=class{constructor(u,d){this.g=u,this.map=d}};function vI(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wI(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _I(u){return u.h?1:u.g?u.g.size:0}function np(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function rp(u,d){u.g?u.g.add(d):u.h=d}function II(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}vI.prototype.cancel=function(){if(this.i=EI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function EI(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function _x(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,m=0;m<f;m++)d.push(u[m]);return d}d=[],f=0;for(m in u)d[f++]=u[m];return d}function Ix(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let m in u)d[f++]=m;return d}}}function DI(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=Ix(u),m=_x(u),b=m.length,R=0;R<b;R++)d.call(void 0,m[R],f&&f[R],u)}var CI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ex(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var m=u[f].indexOf("="),b=null;if(0<=m){var R=u[f].substring(0,m);b=u[f].substring(m+1)}else R=u[f];d(R,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function gi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gi){this.h=u.h,Ac(this,u.j),this.o=u.o,this.g=u.g,Sc(this,u.s),this.l=u.l;var d=u.i,f=new _a;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),bI(this,f),this.m=u.m}else u&&(d=String(u).match(CI))?(this.h=!1,Ac(this,d[1]||"",!0),this.o=va(d[2]||""),this.g=va(d[3]||"",!0),Sc(this,d[4]),this.l=va(d[5]||"",!0),bI(this,d[6]||"",!0),this.m=va(d[7]||"")):(this.h=!1,this.i=new _a(null,this.h))}gi.prototype.toString=function(){var u=[],d=this.j;d&&u.push(wa(d,TI,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(wa(d,TI,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(wa(f,f.charAt(0)=="/"?bx:Cx,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",wa(f,Ax)),u.join("")};function On(u){return new gi(u)}function Ac(u,d,f){u.j=f?va(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Sc(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function bI(u,d,f){d instanceof _a?(u.i=d,Sx(u.i,u.h)):(f||(d=wa(d,Tx)),u.i=new _a(d,u.h))}function Se(u,d,f){u.i.set(d,f)}function Mc(u){return Se(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function va(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function wa(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,Dx),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Dx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var TI=/[#\/\?@]/g,Cx=/[#\?:]/g,bx=/[#\?]/g,Tx=/[#\?@]/g,Ax=/#/g;function _a(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function gr(u){u.g||(u.g=new Map,u.h=0,u.i&&Ex(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=_a.prototype,t.add=function(u,d){gr(this),this.i=null,u=gs(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function AI(u,d){gr(u),d=gs(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function SI(u,d){return gr(u),d=gs(u,d),u.g.has(d)}t.forEach=function(u,d){gr(this),this.g.forEach(function(f,m){f.forEach(function(b){u.call(d,b,m,this)},this)},this)},t.na=function(){gr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let b=u[m];for(let R=0;R<b.length;R++)f.push(d[m])}return f},t.V=function(u){gr(this);let d=[];if(typeof u=="string")SI(this,u)&&(d=d.concat(this.g.get(gs(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},t.set=function(u,d){return gr(this),this.i=null,u=gs(this,u),SI(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function MI(u,d,f){AI(u,d),0<f.length&&(u.i=null,u.g.set(gs(u,d),M(f)),u.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),V=this.V(m);for(m=0;m<V.length;m++){var b=R;V[m]!==""&&(b+="="+encodeURIComponent(String(V[m]))),u.push(b)}}return this.i=u.join("&")};function gs(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function Sx(u,d){d&&!u.j&&(gr(u),u.i=null,u.g.forEach(function(f,m){var b=m.toLowerCase();m!=b&&(AI(this,m),MI(this,b,f))},u)),u.j=d}function Mx(u,d){let f=new ma;if(a.Image){let m=new Image;m.onload=y(mr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(mr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(mr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(mr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function xx(u,d){let f=new ma,m=new AbortController,b=setTimeout(()=>{m.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(R=>{clearTimeout(b),R.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),mr(f,"TestPingServer: error",!1,d)})}function mr(u,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function Rx(){this.g=new fx}function Nx(u,d,f){let m=f||"";try{DI(u,function(b,R){let V=b;l(b)&&(V=Wf(b)),d.push(m+R+"="+encodeURIComponent(V))})}catch(b){throw d.push(m+"type="+encodeURIComponent("_badmap")),b}}function Ia(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Ia,Kf),Ia.prototype.g=function(){return new xc(this.l,this.j)},Ia.prototype.i=function(u){return function(){return u}}({});function xc(u,d){ft.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(xc,ft),t=xc.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Da(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xI(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xI(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Ea(this):Da(this),this.readyState==3&&xI(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ea(this))},t.Qa=function(u){this.g&&(this.response=u,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Da(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Da(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function RI(u){let d="";return W(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function ip(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=RI(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Se(u,d,f))}function ke(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ke,ft);var Px=/^https?$/i,Ox=["POST","PUT"];t=ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zf.g(),this.v=this.o?oI(this.o):oI(Zf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(R){NI(this,R);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ox,d,void 0))||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,V]of f)this.g.setRequestHeader(R,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kI(this),this.u=!0,this.g.send(u),this.u=!1}catch(R){NI(this,R)}};function NI(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,PI(u),Rc(u)}function PI(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,wt(this,"complete"),wt(this,"abort"),Rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?OI(this):this.bb())},t.bb=function(){OI(this)};function OI(u){if(u.h&&typeof o<"u"&&(!u.v[1]||kn(u)!=4||u.Z()!=2)){if(u.u&&kn(u)==4)nI(u.Ea,0,u);else if(wt(u,"readystatechange"),kn(u)==4){u.h=!1;try{let V=u.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=V===0){var b=String(u.D).match(CI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!Px.test(b?b.toLowerCase():"")}f=m}if(f)wt(u,"complete"),wt(u,"success");else{u.m=6;try{var R=2<kn(u)?u.g.statusText:""}catch{R=""}u.l=R+" ["+u.Z()+"]",PI(u)}}finally{Rc(u)}}}}function Rc(u,d){if(u.g){kI(u);let f=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||wt(u,"ready");try{f.onreadystatechange=m}catch{}}}function kI(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function kn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),hx(d)}};function FI(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kx(u){let d={};u=(u.g&&2<=kn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(L(u[m]))continue;var f=C(u[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[b]||[];d[b]=R,R.push(f)}I(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function VI(u){this.Aa=0,this.i=[],this.j=new ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,u),this.cb=Ca("retryDelaySeedMs",1e4,u),this.Wa=Ca("forwardChannelMaxRetries",2,u),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new vI(u&&u.concurrentRequestLimit),this.Da=new Rx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=VI.prototype,t.la=8,t.G=1,t.connect=function(u,d,f,m){_t(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=GI(this,null,this.W),Pc(this)};function sp(u){if(LI(u),u.G==3){var d=u.U++,f=On(u.I);if(Se(f,"SID",u.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),ba(u,f),d=new pr(u,u.j,d),d.L=2,d.v=Mc(On(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=WI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Tc(d)}HI(u)}function Nc(u){u.g&&(ap(u),u.g.cancel(),u.g=null)}function LI(u){Nc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Oc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Pc(u){if(!wI(u.h)&&!u.s){u.s=!0;var d=u.Ga;ua||Y_(),ca||(ua(),ca=!0),Lf.add(d,u),u.B=0}}function Fx(u,d){return _I(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ga(g(u.Ga,u,d),zI(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let b=new pr(this,this.j,u),R=this.o;if(this.S&&(R?(R=v(R),E(R,this.S)):R=this.S),this.m!==null||this.O||(b.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=UI(this,b,d),f=On(this.I),Se(f,"RID",u),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),ba(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(RI(R)))+"&"+d:this.m&&ip(f,this.m,R)),rp(this.h,b),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),b.T=!0,Xf(b,f,null)):Xf(b,f,d),this.G=2}}else this.G==3&&(u?jI(this,u):this.i.length==0||wI(this.h)||jI(this))};function jI(u,d){var f;d?f=d.l:f=u.U++;let m=On(u.I);Se(m,"SID",u.K),Se(m,"RID",f),Se(m,"AID",u.T),ba(u,m),u.m&&u.o&&ip(m,u.m,u.o),f=new pr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=UI(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),rp(u.h,f),Xf(f,m,d)}function ba(u,d){u.H&&W(u.H,function(f,m){Se(d,m,f)}),u.l&&DI({},function(f,m){Se(d,m,f)})}function UI(u,d,f){f=Math.min(u.i.length,f);var m=u.l?g(u.l.Na,u.l,u):null;e:{var b=u.i;let R=-1;for(;;){let V=["count="+f];R==-1?0<f?(R=b[0].g,V.push("ofs="+R)):R=0:V.push("ofs="+R);let be=!0;for(let ot=0;ot<f;ot++){let ve=b[ot].g,pt=b[ot].map;if(ve-=R,0>ve)R=Math.max(0,b[ot].g-100),be=!1;else try{Nx(pt,V,"req"+ve+"_")}catch{m&&m(pt)}}if(be){m=V.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,m}function BI(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;ua||Y_(),ca||(ua(),ca=!0),Lf.add(d,u),u.v=0}}function op(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ga(g(u.Fa,u),zI(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,$I(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ga(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Nc(this),$I(this))};function ap(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function $I(u){u.g=new pr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=On(u.qa);Se(d,"RID","rpc"),Se(d,"SID",u.K),Se(d,"AID",u.T),Se(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Se(d,"TO",u.ja),Se(d,"TYPE","xmlhttp"),ba(u,d),u.m&&u.o&&ip(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Mc(On(d)),f.m=null,f.P=!0,gI(f,u)}t.Za=function(){this.C!=null&&(this.C=null,Nc(this),op(this),_t(19))};function Oc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function qI(u,d){var f=null;if(u.g==d){Oc(u),ap(u),u.g=null;var m=2}else if(np(u.h,d))f=d.D,II(u.h,d),m=1;else return;if(u.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=u.B;m=Dc(),wt(m,new dI(m,f)),Pc(u)}else BI(u);else if(b=d.s,b==3||b==0&&0<d.X||!(m==1&&Fx(u,d)||m==2&&op(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),b){case 1:mi(u,5);break;case 4:mi(u,10);break;case 3:mi(u,6);break;default:mi(u,2)}}}function zI(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function mi(u,d){if(u.j.info("Error code "+d),d==2){var f=g(u.fb,u),m=u.Xa;let b=!m;m=new gi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ac(m,"https"),Mc(m),b?Mx(m.toString(),f):xx(m.toString(),f)}else _t(2);u.G=0,u.l&&u.l.sa(d),HI(u),LI(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function HI(u){if(u.G=0,u.ka=[],u.l){let d=EI(u.h);(d.length!=0||u.i.length!=0)&&(T(u.ka,d),T(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function GI(u,d,f){var m=f instanceof gi?On(f):new gi(f);if(m.g!="")d&&(m.g=d+"."+m.g),Sc(m,m.s);else{var b=a.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var R=new gi(null);m&&Ac(R,m),d&&(R.g=d),b&&Sc(R,b),f&&(R.l=f),m=R}return f=u.D,d=u.ya,f&&d&&Se(m,f,d),Se(m,"VER",u.la),ba(u,m),m}function WI(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new ke(new Ia({eb:f})):new ke(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function KI(){}t=KI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kc(){}kc.prototype.g=function(u,d){return new Pt(u,d)};function Pt(u,d){ft.call(this),this.g=new VI(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!L(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!L(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ms(this)}D(Pt,ft),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){sp(this.g)},Pt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Wf(u),u=f);d.i.push(new wx(d.Ya++,u)),d.G==3&&Pc(d)},Pt.prototype.N=function(){this.g.l=null,delete this.j,sp(this.g),delete this.g,Pt.aa.N.call(this)};function QI(u){Qf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}D(QI,Qf);function YI(){Yf.call(this),this.status=1}D(YI,Yf);function ms(u){this.g=u}D(ms,KI),ms.prototype.ua=function(){wt(this.g,"a")},ms.prototype.ta=function(u){wt(this.g,new QI(u))},ms.prototype.sa=function(u){wt(this.g,new YI)},ms.prototype.ra=function(){wt(this.g,"b")},kc.prototype.createWebChannel=kc.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,ov=ir.createWebChannelTransport=function(){return new kc},sv=ir.getStatEventTarget=function(){return Dc()},iv=ir.Event=fi,yh=ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cc.NO_ERROR=0,Cc.TIMEOUT=8,Cc.HTTP_ERROR=6,Nu=ir.ErrorCode=Cc,hI.COMPLETE="complete",rv=ir.EventType=hI,aI.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Eo=ir.WebChannel=aI,nv=ir.FetchXmlHttpFactory=Ia,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,tv=ir.XhrIo=ke}).apply(typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{});var tA="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var ta="10.13.1";var Jr=new sE("@firebase/firestore");function Ao(){return Jr.logLevel}function z2(t){Jr.setLogLevel(t)}function O(t,...e){if(Jr.logLevel<=cn.DEBUG){let n=e.map(d_);Jr.debug(`Firestore (${ta}): ${t}`,...n)}}function Ue(t,...e){if(Jr.logLevel<=cn.ERROR){let n=e.map(d_);Jr.error(`Firestore (${ta}): ${t}`,...n)}}function Mn(t,...e){if(Jr.logLevel<=cn.WARN){let n=e.map(d_);Jr.warn(`Firestore (${ta}): ${t}`,...n)}}function d_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function q(t="Unexpected state"){let e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+t;throw Ue(e),new Error(e)}function K(t,e){t||q()}function wW(t,e){t||q()}function U(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends rE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ye=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Sh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}},hv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},fv=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Ye;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ye,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>N(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ye)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Sh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new Qe(e)}},pv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},gv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new pv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},yv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K(typeof n.token=="string"),this.R=n.token,new mv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function H2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Mh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=H2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function Vo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function iS(t){return t+"\0"}var Be=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Be(0,0))}static max(){return new t(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(),r===void 0?r=e.length-n:r>e.length-n&&q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},me=class t extends xh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},G2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,tt=class t extends xh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return G2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new k(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new k(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new k(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(me.fromString(e))}static fromName(e){return new t(me.fromString(e).popFirst(5))}static empty(){return new t(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new me(e.slice()))}};var Lo=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function vv(t){return t.fields.find(e=>e.kind===2)}function Wi(t){return t.fields.filter(e=>e.kind!==2)}Lo.UNKNOWN_ID=-1;var Po=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var zu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Zt.min())}};function sS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new Zt(i,$.empty(),e)}function oS(t){return new Zt(t.readTime,t.key,-1)}var Zt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Z.min(),$.empty(),-1)}static max(){return new t(Z.max(),$.empty(),-1)}};function h_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var aS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Rh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function li(t){return N(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==aS)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var S=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Nh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ye,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Xi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=f_(r.target.error);this.V.reject(new Xi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Xi(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new _v(n)}},Xr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Ta())===12.2&&Ue("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Ki(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!nE())return!1;if(t.v())return!0;let e=Ta(),n=t.S(e),r=0<n&&n<10,i=uS(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Xi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new k(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new k(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Xi(e,o))},i.onupgradeneeded=s=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return N(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Nh.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(O("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function uS(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var wv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ki(this.B.delete())}},Xi=class extends k{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function di(t){return t.name==="IndexedDbTransactionError"}var _v=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ki(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Ki(this.store.add(e))}get(e){return Ki(this.store.get(e)).next(n=>(n===void 0&&(n=null),O("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Ki(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Ki(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new S((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new S((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new S((r,i)=>{n.onerror=s=>{let o=f_(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){let r=[];return new S((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new wv(a),l=n(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Ki(t){return new S((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=f_(r.target.error);n(i)}})}var nA=!1;function f_(t){let e=Xr.S(Ta());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nA||(nA=!0,setTimeout(()=>{throw r},0)),r}}return t}var Iv=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){di(n)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield li(n)}yield this.X(6e4)}))}},Ev=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,s=!0;return S.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return O("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{let o=oS(s);h_(o,r)>0&&(r=o)}),new Zt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var jt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function pc(t){return t==null}function Hu(t){return t===0&&1/t==-1/0}function cS(t){return typeof t=="number"&&Number.isInteger(t)&&!Hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function St(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rA(e)),e=W2(t.get(n),e);return rA(e)}function W2(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function rA(t){return t+""}function Cn(t){let e=t.length;if(K(e>=2),e===2)return K(t.charAt(0)===""&&t.charAt(1)===""),me.emptyPath();let n=e-2,r=[],i="";for(let s=0;s<e;){let o=t.indexOf("",s);switch((o<0||o>n)&&q(),t.charAt(o+1)){case"":let a=t.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:q()}s=o+2}return new me(r)}var iA=["userId","batchId"];function Eh(t,e){return[t,St(e)]}function lS(t,e,n){return[t,St(e),n]}var K2={},Q2=["prefixPath","collectionGroup","readTime","documentId"],Y2=["prefixPath","collectionGroup","documentId"],Z2=["collectionGroup","readTime","prefixPath","documentId"],J2=["canonicalId","targetId"],X2=["targetId","path"],eU=["path","targetId"],tU=["collectionId","parent"],nU=["indexId","uid"],rU=["uid","sequenceNumber"],iU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sU=["indexId","uid","orderedDocumentKey"],oU=["userId","collectionPath","documentId"],aU=["userId","collectionPath","largestBatchId"],uU=["userId","collectionGroup","largestBatchId"],dS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cU=[...dS,"documentOverlays"],hS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fS=hS,p_=[...fS,"indexConfiguration","indexState","indexEntries"],lU=p_,dU=[...p_,"globals"];var Gu=class extends Rh{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function nt(t,e){let n=U(t);return Xr.F(n._e,e)}function sA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ls(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||Tn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new No(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new No(this.root,e,this.comparator,!1)}getReverseIterator(){return new No(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new No(this.root,e,this.comparator,!0)}},No=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Tn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ph(this.data.getIterator())}getIteratorFrom(e){return new Ph(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ph=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Do(t){return t.hasNext()?t.getNext():void 0}var Ut=class t{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ae(tt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Oh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function IW(){return typeof atob<"u"}var ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Oh("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ze.EMPTY_BYTE_STRING=new ze("");var hU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(K(!!t),typeof t=="string"){let e=0,n=hU.exec(t);if(K(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ei(t){return typeof t=="string"?ze.fromBase64String(t):ze.fromUint8Array(t)}function bf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function g_(t){let e=t.mapValue.fields.__previous_value__;return bf(e)?g_(e):e}function Wu(t){let e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}var Dv=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},jo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dh={nullValue:"NULL_VALUE"};function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bf(t)?4:gS(t)?9007199254740991:Tf(t)?10:11:q()}function xn(t,e){if(t===e)return!0;let n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ar(i.timestampValue),a=ar(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ei(i.bytesValue).isEqual(ei(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Re(i.geoPointValue.latitude)===Re(s.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Re(i.integerValue)===Re(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Re(i.doubleValue),a=Re(s.doubleValue);return o===a?Hu(o)===Hu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vo(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(sA(o)!==sA(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xn(o[c],a[c])))return!1;return!0}(t,e);default:return q()}}function Ku(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function ti(t,e){if(t===e)return 0;let n=es(t),r=es(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Re(s.integerValue||s.doubleValue),c=Re(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return oA(t.timestampValue,e.timestampValue);case 4:return oA(Wu(t),Wu(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,o){let a=ei(s),c=ei(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=re(a[l],c[l]);if(h!==0)return h}return re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=re(Re(s.latitude),Re(o.latitude));return a!==0?a:re(Re(s.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return aA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,h;let p=s.fields||{},g=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,D=(c=g.value)===null||c===void 0?void 0:c.arrayValue,M=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:aA(y,D)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zr.mapValue&&o===Zr.mapValue)return 0;if(s===Zr.mapValue)return 1;if(o===Zr.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=re(c[p],h[p]);if(g!==0)return g;let y=ti(a[c[p]],l[h[p]]);if(y!==0)return y}return re(c.length,h.length)}(t.mapValue,e.mapValue);default:throw q()}}function oA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=ar(t),r=ar(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function aA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=ti(n[i],r[i]);if(s)return s}return re(n.length,r.length)}function Uo(t){return Cv(t)}function Cv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Cv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Cv(n.fields[o])}`;return i+"}"}(t.mapValue):q()}function ts(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bv(t){return!!t&&"integerValue"in t}function Qu(t){return!!t&&"arrayValue"in t}function uA(t){return!!t&&"nullValue"in t}function cA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ch(t){return!!t&&"mapValue"in t}function Tf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ju(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ju(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ju(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var mS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fU(t){return"nullValue"in t?Dh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ts(jo.empty(),$.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Tf(t)?mS:{mapValue:{}}:q()}function pU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ts(jo.empty(),$.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?mS:"mapValue"in t?Tf(t)?{mapValue:{}}:Zr:q()}function lA(t,e){let n=ti(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function dA(t,e){let n=ti(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ju(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ju(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ch(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ls(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ju(this.value))}};function yS(t){let e=[];return ls(t.fields,(n,r)=>{let i=new tt([n]);if(Ch(r)){let s=yS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ut(e)}var Ze=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Z.min(),Z.min(),Z.min(),vt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Z.min(),Z.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Z.min(),Z.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Rn=class{constructor(e,n){this.position=e,this.inclusive=n}};function hA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),n.key):r=ti(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}var ns=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function gU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kh=class{},fe=class t extends kh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Sv(e,n,r):n==="array-contains"?new Rv(e,r):n==="in"?new Fh(e,r):n==="not-in"?new Nv(e,r):n==="array-contains-any"?new Pv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Mv(e,r):new xv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ti(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},De=class t extends kh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Bo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Bo(t){return t.op==="and"}function Tv(t){return t.op==="or"}function m_(t){return vS(t)&&Bo(t)}function vS(t){for(let e of t.filters)if(e instanceof De)return!1;return!0}function Av(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+Uo(t.value);if(m_(t))return t.filters.map(e=>Av(e)).join(",");{let e=t.filters.map(n=>Av(n)).join(",");return`${t.op}(${e})`}}function wS(t,e){return t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof De?function(r,i){return i instanceof De&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&wS(o,i.filters[a]),!0):!1}(t,e):void q()}function _S(t,e){let n=t.filters.concat(e);return De.create(n,t.op)}function IS(t){return t instanceof fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Uo(n.value)}`}(t):t instanceof De?function(n){return n.op.toString()+" {"+n.getFilters().map(IS).join(" ,")+"}"}(t):"Filter"}var Sv=class extends fe{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},Mv=class extends fe{constructor(e,n){super(e,"in",n),this.keys=ES("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},xv=class extends fe{constructor(e,n){super(e,"not-in",n),this.keys=ES("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ES(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var Rv=class extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Qu(n)&&Ku(n.arrayValue,this.value)}},Fh=class extends fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}},Nv=class extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ku(this.value.arrayValue,n)}},Pv=class extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Qu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ku(this.value.arrayValue,r))}};var Ov=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function kv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ov(t,e,n,r,i,s,o)}function rs(t){let e=U(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Av(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Uo(r)).join(",")),e.ue=n}return e.ue}function gc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!wS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fA(t.startAt,e.startAt)&&fA(t.endAt,e.endAt)}function Vh(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Lh(t,e){return t.filters.filter(n=>n instanceof fe&&n.field.isEqual(e))}function pA(t,e,n){let r=Dh,i=!0;for(let s of Lh(t,e)){let o=Dh,a=!0;switch(s.op){case"<":case"<=":o=fU(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Dh}lA({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];lA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function gA(t,e,n){let r=Zr,i=!0;for(let s of Lh(t,e)){let o=Zr,a=!0;switch(s.op){case">=":case">":o=pU(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zr}dA({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){let o=n.position[s];dA({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}var an=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function DS(t,e,n,r,i,s,o,a){return new an(t,e,n,r,i,s,o,a)}function na(t){return new an(t)}function mA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function y_(t){return t.collectionGroup!==null}function Oo(t){let e=U(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(tt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ns(s,r))}),n.has(tt.keyField().canonicalString())||e.ce.push(new ns(tt.keyField(),r))}return e.ce}function Mt(t){let e=U(t);return e.le||(e.le=mU(e,Oo(t))),e.le}function mU(t,e){if(t.limitType==="F")return kv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ns(i.field,s)});let n=t.endAt?new Rn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rn(t.startAt.position,t.startAt.inclusive):null;return kv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fv(t,e){let n=t.filters.concat([e]);return new an(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jh(t,e,n){return new an(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mc(t,e){return gc(Mt(t),Mt(e))&&t.limitType===e.limitType}function CS(t){return`${rs(Mt(t))}|lt:${t.limitType}`}function So(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>IS(i)).join(", ")}]`),pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Uo(i)).join(",")),`Target(${r})`}(Mt(t))}; limitType=${t.limitType})`}function yc(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Oo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=hA(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Oo(r),i)||r.endAt&&!function(o,a,c){let l=hA(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Oo(r),i))}(t,e)}function bS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TS(t){return(e,n)=>{let r=!1;for(let i of Oo(t)){let s=yU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function yU(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?ti(c,l):q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var Nn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return pS(this.inner)}size(){return this.innerSize}};var vU=new xe($.comparator);function Nt(){return vU}var AS=new xe($.comparator);function Vu(...t){let e=AS;for(let n of t)e=e.insert(n.key,n);return e}function SS(t){let e=AS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bn(){return Uu()}function MS(){return Uu()}function Uu(){return new Nn(t=>t.toString(),(t,e)=>t.isEqual(e))}var wU=new xe($.comparator),_U=new Ae($.comparator);function se(...t){let e=_U;for(let n of t)e=e.add(n);return e}var IU=new Ae(re);function v_(){return IU}function w_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function xS(t){return{integerValue:""+t}}function RS(t,e){return cS(e)?xS(e):w_(t,e)}var $o=class{constructor(){this._=void 0}};function EU(t,e,n){return t instanceof ni?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bf(s)&&(s=g_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ur?PS(t,e):t instanceof cr?OS(t,e):function(i,s){let o=NS(i,s),a=yA(o)+yA(i.Pe);return bv(o)&&bv(i.Pe)?xS(a):w_(i.serializer,a)}(t,e)}function DU(t,e,n){return t instanceof ur?PS(t,e):t instanceof cr?OS(t,e):n}function NS(t,e){return t instanceof ri?function(r){return bv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ni=class extends $o{},ur=class extends $o{constructor(e){super(),this.elements=e}};function PS(t,e){let n=kS(e);for(let r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}var cr=class extends $o{constructor(e){super(),this.elements=e}};function OS(t,e){let n=kS(e);for(let r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}var ri=class extends $o{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function yA(t){return Re(t.integerValue||t.doubleValue)}function kS(t){return Qu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var is=class{constructor(e,n){this.field=e,this.transform=n}};function CU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ur&&i instanceof ur||r instanceof cr&&i instanceof cr?Vo(r.elements,i.elements,xn):r instanceof ri&&i instanceof ri?xn(r.Pe,i.Pe):r instanceof ni&&i instanceof ni}(t.transform,e.transform)}var Vv=class{constructor(e,n){this.version=e,this.transformResults=n}},Ve=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var qo=class{};function FS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new si(t.key,Ve.none()):new ii(t.key,t.data,Ve.none());{let n=t.data,r=vt.empty(),i=new Ae(tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new un(t.key,r,new Ut(i.toArray()),Ve.none())}}function bU(t,e,n){t instanceof ii?function(i,s,o){let a=i.value.clone(),c=wA(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof un?function(i,s,o){if(!bh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=wA(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(VS(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bu(t,e,n,r){return t instanceof ii?function(s,o,a,c){if(!bh(s.precondition,o))return a;let l=s.value.clone(),h=_A(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof un?function(s,o,a,c){if(!bh(s.precondition,o))return a;let l=_A(s.fieldTransforms,c,o),h=o.data;return h.setAll(VS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return bh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function TU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=NS(r.transform,i||null);s!=null&&(n===null&&(n=vt.empty()),n.set(r.field,s))}return n||null}function vA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vo(r,i,(s,o)=>CU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ii=class extends qo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},un=class extends qo{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function VS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function wA(t,e,n){let r=new Map;K(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,DU(o,a,n[i]))}return r}function _A(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,EU(s,o,e))}return r}var si=class extends qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yu=class extends qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Zu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&bU(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Bu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=MS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=FS(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,(n,r)=>vA(n,r))&&Vo(this.baseMutations,e.baseMutations,(n,r)=>vA(n,r))}},Lv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){K(e.mutations.length===r.length);let i=function(){return wU}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Ju=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var We,ge;function LS(t){switch(t){default:return q();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function jS(t){if(t===void 0)return Ue("GRPC error has no .code"),x.UNKNOWN;switch(t){case We.OK:return x.OK;case We.CANCELLED:return x.CANCELLED;case We.UNKNOWN:return x.UNKNOWN;case We.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case We.INTERNAL:return x.INTERNAL;case We.UNAVAILABLE:return x.UNAVAILABLE;case We.UNAUTHENTICATED:return x.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case We.NOT_FOUND:return x.NOT_FOUND;case We.ALREADY_EXISTS:return x.ALREADY_EXISTS;case We.PERMISSION_DENIED:return x.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case We.ABORTED:return x.ABORTED;case We.OUT_OF_RANGE:return x.OUT_OF_RANGE;case We.UNIMPLEMENTED:return x.UNIMPLEMENTED;case We.DATA_LOSS:return x.DATA_LOSS;default:return q()}}(ge=We||(We={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var IA=null;function US(){return new TextEncoder}var AU=new Gr([4294967295,4294967295],0);function EA(t){let e=US().encode(t),n=new ev;return n.update(e),new Uint8Array(n.digest())}function DA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gr([n,r],0),new Gr([i,s],0)]}var Uv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ji(`Invalid padding: ${n}`);if(r<0)throw new Ji(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ji(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ji(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Gr.fromNumber(r)));return i.compare(AU)===1&&(i=new Gr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=EA(e),[r,i]=DA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=EA(e),[r,i]=DA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ji=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Xu=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Z.min(),i,new xe(re),Nt(),se())}},ec=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,se(),se(),se())}};var ko=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Uh=class{constructor(e,n){this.targetId=e,this.me=n}},Bh=class{constructor(e,n,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},$h=class{constructor(){this.fe=0,this.ge=bA(),this.pe=ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q()}}),new ec(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=bA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Bv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nt(),this.qe=CA(),this.Qe=new xe(re)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Vh(s))if(r===0){let o=new $(s.path);this.Ue(n,o,Ze.newNoDocument(o,Z.min()))}else K(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}IA?.et(function(h,p,g,y,D){var M,T,P,L,B,H;let ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},W=p.unchangedNames;return W&&(ie.bloomFilter={applied:D===0,hashCount:(M=W?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(L=(P=(T=W?.bits)===null||T===void 0?void 0:T.bitmap)===null||P===void 0?void 0:P.length)!==null&&L!==void 0?L:0,padding:(H=(B=W?.bits)===null||B===void 0?void 0:B.padding)!==null&&H!==void 0?H:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ie}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=ei(r).toUint8Array()}catch(c){if(c instanceof Oh)return Mn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Uv(o,i,s)}catch(c){return Mn(c instanceof Ji?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Vh(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ze.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Xu(e,n,this.Qe,this.ke,r);return this.ke=Nt(),this.qe=CA(),this.Qe=new xe(re),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new $h,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ae(re),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $h),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function CA(){return new xe($.comparator)}function bA(){return new xe($.comparator)}var SU={asc:"ASCENDING",desc:"DESCENDING"},MU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xU={and:"AND",or:"OR"},$v=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function qv(t,e){return t.useProto3Json||pc(e)?e:{value:e}}function zo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RU(t,e){return zo(t,e.toTimestamp())}function $e(t){return K(!!t),Z.fromTimestamp(function(n){let r=ar(n);return new Be(r.seconds,r.nanos)}(t))}function __(t,e){return zv(t,e).canonicalString()}function zv(t,e){let n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $S(t){let e=me.fromString(t);return K(JS(e)),e}function tc(t,e){return __(t.databaseId,e.path)}function An(t,e){let n=$S(e);if(n.get(1)!==t.databaseId.projectId)throw new k(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(HS(n))}function qS(t,e){return __(t.databaseId,e)}function zS(t){let e=$S(t);return e.length===4?me.emptyPath():HS(e)}function Hv(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HS(t){return K(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function TA(t,e,n){return{name:tc(t,e),fields:n.value.mapValue.fields}}function GS(t,e,n){let r=An(t,e.name),i=$e(e.updateTime),s=e.createTime?$e(e.createTime):Z.min(),o=new vt({mapValue:{fields:e.fields}}),a=Ze.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function NU(t,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let s=An(r,i.found.name),o=$e(i.found.updateTime),a=i.found.createTime?$e(i.found.createTime):Z.min(),c=new vt({mapValue:{fields:i.found.fields}});return Ze.newFoundDocument(s,o,a,c)}(t,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let s=An(r,i.missing),o=$e(i.readTime);return Ze.newNoDocument(s,o)}(t,e):q()}function PU(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),ze.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ze.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?x.UNKNOWN:jS(l.code);return new k(h,l.message||"")}(o);n=new Bh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=An(t,r.document.name),s=$e(r.document.updateTime),o=r.document.createTime?$e(r.document.createTime):Z.min(),a=new vt({mapValue:{fields:r.document.fields}}),c=Ze.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ko(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=An(t,r.document),s=r.readTime?$e(r.readTime):Z.min(),o=Ze.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ko([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=An(t,r.document),s=r.removedTargetIds||[];n=new ko([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new jv(i,s),a=r.targetId;n=new Uh(a,o)}}return n}function nc(t,e){let n;if(e instanceof ii)n={update:TA(t,e.key,e.value)};else if(e instanceof si)n={delete:tc(t,e.key)};else if(e instanceof un)n={update:TA(t,e.key,e.data),updateMask:jU(e.fieldMask)};else{if(!(e instanceof Yu))return q();n={verify:tc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ni)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ur)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ri)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RU(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q()}(t,e.precondition)),n}function Gv(t,e){let n=e.currentDocument?function(s){return s.updateTime!==void 0?Ve.updateTime($e(s.updateTime)):s.exists!==void 0?Ve.exists(s.exists):Ve.none()}(e.currentDocument):Ve.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new ni;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new ur(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new cr(h)}else"increment"in a?c=new ri(o,a.increment):q();let l=tt.fromServerFormat(a.fieldPath);return new is(l,c)}(t,i)):[];if(e.update){e.update.name;let i=An(t,e.update.name),s=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new Ut(l.map(h=>tt.fromServerFormat(h)))}(e.updateMask);return new un(i,s,o,n,r)}return new ii(i,s,n,r)}if(e.delete){let i=An(t,e.delete);return new si(i,n)}if(e.verify){let i=An(t,e.verify);return new Yu(i,n)}return q()}function OU(t,e){return t&&t.length>0?(K(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$e(i.updateTime):$e(s);return o.isEqual(Z.min())&&(o=$e(s)),new Vv(o,i.transformResults||[])}(n,e))):[]}function WS(t,e){return{documents:[qS(t,e.path)]}}function KS(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qS(t,i);let s=function(l){if(l.length!==0)return ZS(De.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Mo(g.field),direction:FU(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=qv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function QS(t){let e=zS(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){K(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let g=YS(p);return g instanceof De&&m_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(D){return new ns(xo(D.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,pc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){let g=!!p.before,y=p.values||[];return new Rn(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new Rn(y,g)}(n.endAt)),DS(e,i,o,s,a,"F",c,l)}function kU(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=xo(n.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=xo(n.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=xo(n.unaryFilter.field);return fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=xo(n.unaryFilter.field);return fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(t):t.fieldFilter!==void 0?function(n){return fe.create(xo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return De.create(n.compositeFilter.filters.map(r=>YS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(n.compositeFilter.op))}(t):q()}function FU(t){return SU[t]}function VU(t){return MU[t]}function LU(t){return xU[t]}function Mo(t){return{fieldPath:t.canonicalString()}}function xo(t){return tt.fromServerFormat(t.fieldPath)}function ZS(t){return t instanceof fe?function(n){if(n.op==="=="){if(cA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(uA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(uA(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:VU(n.op),value:n.value}}}(t):t instanceof De?function(n){let r=n.getFilters().map(i=>ZS(i));return r.length===1?r[0]:{compositeFilter:{op:LU(n.op),filters:r}}}(t):q()}function jU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ho=class t{constructor(e,n,r,i,s=Z.min(),o=Z.min(),a=ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var qh=class{constructor(e){this.ct=e}};function UU(t,e){let n;if(e.document)n=GS(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=os(e.noDocument.readTime);n=Ze.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return q();{let r=$.fromSegments(e.unknownDocument.path),i=os(e.unknownDocument.version);n=Ze.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let s=new Be(i[0],i[1]);return Z.fromTimestamp(s)}(e.readTime)),n}function AA(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:zh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:tc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:zo(s,o.version.toTimestamp()),createTime:zo(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ss(e.version)};else{if(!e.isUnknownDocument())return q();r.unknownDocument={path:n.path.toArray(),version:ss(e.version)}}return r}function zh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ss(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function os(t){let e=new Be(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function Qi(t,e){let n=(e.baseMutations||[]).map(s=>Gv(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>Gv(t.ct,s)),i=Be.fromMillis(e.localWriteTimeMs);return new Zu(e.batchId,i,n,r)}function Lu(t){let e=os(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?os(t.lastLimboFreeSnapshotVersion):Z.min(),r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return K(s.documents.length===1),Mt(na(zS(s.documents[0])))}(t.query):function(s){return Mt(QS(s))}(t.query),new Ho(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ze.fromBase64String(t.resumeToken))}function XS(t,e){let n=ss(e.snapshotVersion),r=ss(e.lastLimboFreeSnapshotVersion),i;i=Vh(e.target)?WS(t.ct,e.target):KS(t.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function I_(t){let e=QS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jh(e,e.limit,"L"):e}function av(t,e){return new Ju(e.largestBatchId,Gv(t.ct,e.overlayMutation))}function SA(t,e){let n=e.path.lastSegment();return[t,St(e.path.popLast()),n]}function MA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ss(r.readTime),documentKey:St(r.documentKey.path),largestBatchId:r.largestBatchId}}var Wv=class{getBundleMetadata(e,n){return xA(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:os(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return xA(e).put(function(i){return{bundleId:i.id,createTime:ss($e(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return RA(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:I_(s.bundledQuery),readTime:os(s.readTime)}}(r)})}saveNamedQuery(e,n){return RA(e).put(function(i){return{name:i.name,readTime:ss($e(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function xA(t){return nt(t,"bundles")}function RA(t){return nt(t,"namedQueries")}var Hh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Pu(e).get(SA(this.userId,n)).next(r=>r?av(this.serializer,r):null)}getOverlays(e,n){let r=bn();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((s,o)=>{let a=new Ju(n,o);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(o=>i.add(St(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Pu(e).j("collectionPathOverlayIndex",a))}),S.waitFor(s)}getOverlaysForCollection(e,n,r){let i=bn(),s=St(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pu(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=av(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let s=bn(),o,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Pu(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=av(this.serializer,l);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,n){return Pu(e).put(function(i,s,o){let[a,c,l]=SA(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:nc(i.ct,o.mutation)}}(this.serializer,this.userId,n))}};function Pu(t){return nt(t,"documentOverlays")}var Kv=class{Pt(e){return nt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?ze.fromUint8Array(r):ze.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var sr=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Re(e.integerValue));else if("doubleValue"in e){let r=Re(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Hu(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ar(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ei(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?gS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Tf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Re(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),$.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};sr.vt=new sr;function BU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function NA(t){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=BU(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}var Qv=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let n=this.qt(e),r=NA(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){let n=this.qt(e),r=NA(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Yv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},Zv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Yi=class{constructor(){this.jt=new Qv,this.Ht=new Yv(this.jt),this.Jt=new Zv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Zi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Wr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=PA(t.arrayValue,e.arrayValue),n!==0?n:(n=PA(t.directionalValue,e.directionalValue),n!==0?n:$.comparator(t.documentKey,e.documentKey)))}function PA(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Gh=class{constructor(e){this.Xt=new Ae((n,r)=>tt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let n=vv(e);if(n!==void 0&&!this.sn(n))return!1;let r=Wi(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(tt.comparator),n=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Po(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Po(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Po(r.field,r.dir==="asc"?0:1)));return new Lo(Lo.UNKNOWN_ID,this.collectionId,n,zu.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function eM(t){var e,n;if(K(t instanceof fe||t instanceof De),t instanceof fe){if(t instanceof Fh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>fe.create(t.field,"==",s)))||[];return De.create(i,"or")}return t}let r=t.filters.map(i=>eM(i));return De.create(r,t.op)}function $U(t){if(t.getFilters().length===0)return[];let e=ew(eM(t));return K(tM(e)),Jv(e)||Xv(e)?[e]:e.getFilters()}function Jv(t){return t instanceof fe}function Xv(t){return t instanceof De&&m_(t)}function tM(t){return Jv(t)||Xv(t)||function(n){if(n instanceof De&&Tv(n)){for(let r of n.getFilters())if(!Jv(r)&&!Xv(r))return!1;return!0}return!1}(t)}function ew(t){if(K(t instanceof fe||t instanceof De),t instanceof fe)return t;if(t.filters.length===1)return ew(t.filters[0]);let e=t.filters.map(r=>ew(r)),n=De.create(e,t.op);return n=Wh(n),tM(n)?n:(K(n instanceof De),K(Bo(n)),K(n.filters.length>1),n.filters.reduce((r,i)=>E_(r,i)))}function E_(t,e){let n;return K(t instanceof fe||t instanceof De),K(e instanceof fe||e instanceof De),n=t instanceof fe?e instanceof fe?function(i,s){return De.create([i,s],"and")}(t,e):OA(t,e):e instanceof fe?OA(e,t):function(i,s){if(K(i.filters.length>0&&s.filters.length>0),Bo(i)&&Bo(s))return _S(i,s.getFilters());let o=Tv(i)?i:s,a=Tv(i)?s:i,c=o.filters.map(l=>E_(l,a));return De.create(c,"or")}(t,e),Wh(n)}function OA(t,e){if(Bo(e))return _S(e,t.getFilters());{let n=e.filters.map(r=>E_(t,r));return De.create(n,"or")}}function Wh(t){if(K(t instanceof fe||t instanceof De),t instanceof fe)return t;let e=t.getFilters();if(e.length===1)return Wh(e[0]);if(vS(t))return t;let n=e.map(i=>Wh(i)),r=[];return n.forEach(i=>{i instanceof fe?r.push(i):i instanceof De&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:De.create(r,t.op)}var tw=class{constructor(){this.un=new rc}addToCollectionParentIndex(e,n){return this.un.add(n),S.resolve()}getCollectionParents(e,n){return S.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return S.resolve()}deleteFieldIndex(e,n){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,n){return S.resolve()}getDocumentsMatchingTarget(e,n){return S.resolve(null)}getIndexType(e,n){return S.resolve(0)}getFieldIndexes(e,n){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,n){return S.resolve(Zt.min())}getMinOffsetFromCollectionGroup(e,n){return S.resolve(Zt.min())}updateCollectionGroup(e,n,r){return S.resolve()}updateIndexEntries(e,n){return S.resolve()}},rc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(me.comparator)).toArray()}};var vh=new Uint8Array(0),nw=class{constructor(e,n){this.databaseId=n,this.cn=new rc,this.ln=new Nn(r=>rs(r),(r,i)=>gc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let s={collectionId:r,parent:St(i)};return kA(e).put(s)}return S.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[iS(n),""],!1,!0);return kA(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==n)break;r.push(Cn(o.parent))}return r})}addFieldIndex(e,n){let r=Ou(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let s=r.add(i);if(n.indexState){let o=bo(e);return s.next(a=>{o.put(MA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){let r=Ou(e),i=bo(e),s=Co(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Ou(e),r=Co(e),i=bo(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return S.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Gh(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){let r=Co(e),i=!0,s=new Map;return S.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se(),a=[];return S.forEach(s,(c,l)=>{O("IndexedDbIndexManager",`Using index ${function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${rs(n)}`);let h=function(B,H){let ie=vv(H);if(ie===void 0)return null;for(let W of Lh(B,ie.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null}(l,c),p=function(B,H){let ie=new Map;for(let W of Wi(H))for(let I of Lh(B,W.fieldPath))switch(I.op){case"==":case"in":ie.set(W.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ie.set(W.fieldPath.canonicalString(),I.value),Array.from(ie.values())}return null}(l,c),g=function(B,H){let ie=[],W=!0;for(let I of Wi(H)){let v=I.kind===0?pA(B,I.fieldPath,B.startAt):gA(B,I.fieldPath,B.startAt);ie.push(v.value),W&&(W=v.inclusive)}return new Rn(ie,W)}(l,c),y=function(B,H){let ie=[],W=!0;for(let I of Wi(H)){let v=I.kind===0?gA(B,I.fieldPath,B.endAt):pA(B,I.fieldPath,B.endAt);ie.push(v.value),W&&(W=v.inclusive)}return new Rn(ie,W)}(l,c),D=this.In(c,l,g),M=this.In(c,l,y),T=this.Tn(c,l,p),P=this.En(c.indexId,h,D,g.inclusive,M,y.inclusive,T);return S.forEach(P,L=>r.G(L,n.limit).next(B=>{B.forEach(H=>{let ie=$.fromSegments(H.documentKey);o.has(ie)||(o=o.add(ie),a.push(ie))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=$U(De.create(e.filters,"and")).map(r=>kv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){let c=(n!=null?n.length:1)*Math.max(r.length,s.length),l=c/(n!=null?n.length:1),h=[];for(let p=0;p<c;++p){let g=n?this.dn(n[p/l]):vh,y=this.An(e,g,r[p%l],i),D=this.Rn(e,g,s[p%l],o),M=a.map(T=>this.An(e,g,T,!0));h.push(...this.createRange(y,D,M))}return h}An(e,n,r,i){let s=new Zi(e,$.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){let s=new Zi(e,$.empty(),n,r);return i?s.Zt():s}Pn(e,n){let r=new Gh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2,i=this.hn(n);return S.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ae(tt.comparator),h=!1;for(let p of c.filters)for(let g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:l=l.add(g.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){let r=new Yi;for(let i of Wi(e)){let s=n.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);sr.vt.It(s,o)}return r.zt()}dn(e){let n=new Yi;return sr.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let r=new Yi;return sr.vt.It(ts(this.databaseId,n),r.Yt(function(s){let o=Wi(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Yi);let s=0;for(let o of Wi(e)){let a=r[s++];for(let c of i)if(this.fn(n,o.fieldPath)&&Qu(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);sr.vt.It(a,l)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new Yi;c.seed(a.zt()),sr.vt.It(o,c.Yt(n.kind)),s.push(c)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Ou(e),i=bo(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{let o=[];return S.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(h,p){let g=p?new zu(p.sequenceNumber,new Zt(os(p.readTime),new $(Cn(p.documentKey)),p.largestBatchId)):zu.empty(),y=h.fields.map(([D,M])=>new Po(tt.fromServerFormat(D),M));return new Lo(h.indexId,h.collectionGroup,y,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:re(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Ou(e),s=bo(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>S.forEach(a,c=>s.put(MA(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){let r=new Map;return S.forEach(n,(i,s)=>{let o=r.get(i.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(s,c);return l.isEqual(h)?S.resolve():this.bn(e,s,c,l,h)}))))})}Dn(e,n,r,i){return Co(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return Co(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){let i=Co(e),s=new Ae(Wr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Zi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new Ae(Wr),i=this.Vn(n,e);if(i==null)return r;let s=vv(n);if(s!=null){let o=e.data.field(s.fieldPath);if(Qu(o))for(let a of o.arrayValue.values||[])r=r.add(new Zi(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Zi(n.indexId,e.key,vh,i));return r}bn(e,n,r,i,s){O("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let o=[];return function(c,l,h,p,g){let y=c.getIterator(),D=l.getIterator(),M=Do(y),T=Do(D);for(;M||T;){let P=!1,L=!1;if(M&&T){let B=h(M,T);B<0?L=!0:B>0&&(P=!0)}else M!=null?L=!0:P=!0;P?(p(T),T=Do(D)):L?(g(M),M=Do(y)):(M=Do(y),T=Do(D))}}(i,s,Wr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),S.waitFor(o)}yn(e){let n=1;return bo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Wr(o,a)).filter((o,a,c)=>!a||Wr(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Wr(o,e),c=Wr(o,n);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(n);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,vh,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,vh,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,n){return Wr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(FA)}getMinOffset(e,n){return S.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||q())).next(FA)}};function kA(t){return nt(t,"collectionParents")}function Co(t){return nt(t,"indexEntries")}function Ou(t){return nt(t,"indexConfiguration")}function bo(t){return nt(t,"indexState")}function FA(t){K(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;h_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Zt(e.readTime,e.documentKey,n)}var VA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function nM(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId),a=0,c=r.J({range:o},(h,p,g)=>(a++,g.delete()));s.push(c.next(()=>{K(a===1)}));let l=[];for(let h of n.mutations){let p=lS(e,h.key.path,n.batchId);s.push(i.delete(p)),l.push(h.key)}return S.waitFor(s).next(()=>l)}function Kh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw q();e=t.noDocument}return JSON.stringify(e).length}Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(41943040,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);var Qh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){K(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new t(s,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let s=Ro(e),o=Kr(e);return o.add({}).next(a=>{K(typeof a=="number");let c=new Zu(a,n,r,i),l=function(y,D,M){let T=M.baseMutations.map(L=>nc(y.ct,L)),P=M.mutations.map(L=>nc(y.ct,L));return{userId:D,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:T,mutations:P}}(this.serializer,this.userId,c),h=[],p=new Ae((g,y)=>re(g.canonicalString(),y.canonicalString()));for(let g of i){let y=lS(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(o.put(l)),h.push(s.put(y,K2))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return Kr(e).get(n).next(r=>r?(K(r.userId===this.userId),Qi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?S.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Kr(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),s=Qi(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Kr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kr(e).U("userMutationsIndex",n).next(r=>r.map(i=>Qi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Eh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Ro(e).J({range:i},(o,a,c)=>{let[l,h,p]=o,g=Cn(h);if(l===this.userId&&n.path.isEqual(g))return Kr(e).get(p).next(y=>{if(!y)throw q();K(y.userId===this.userId),s.push(Qi(this.serializer,y))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(re),i=[];return n.forEach(s=>{let o=Eh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Ro(e).J({range:a},(l,h,p)=>{let[g,y,D]=l,M=Cn(y);g===this.userId&&s.path.isEqual(M)?r=r.add(D):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=Eh(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ae(re);return Ro(e).J({range:o},(c,l,h)=>{let[p,g,y]=c,D=Cn(g);p===this.userId&&r.isPrefixOf(D)?D.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){let r=[],i=[];return n.forEach(s=>{i.push(Kr(e).get(s).next(o=>{if(o===null)throw q();K(o.userId===this.userId),r.push(Qi(this.serializer,o))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return nM(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return S.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ro(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Cn(s[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,n){return rM(e,this.userId,n)}Nn(e){return iM(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function rM(t,e,n){let r=Eh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Ro(t).J({range:s,H:!0},(a,c,l)=>{let[h,p,g]=a;h===e&&p===i&&(o=!0),l.done()}).next(()=>o)}function Kr(t){return nt(t,"mutations")}function Ro(t){return nt(t,"documentMutations")}function iM(t){return nt(t,"mutationQueues")}var Go=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var rw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let r=new Go(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>Z.fromTimestamp(new Be(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>To(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0,s=[];return To(e).J((o,a)=>{let c=Lu(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(s)).next(()=>i)}forEachTarget(e,n){return To(e).J((r,i)=>{let s=Lu(i);n(s)})}qn(e){return LA(e).get("targetGlobalKey").next(n=>(K(n!==null),n))}Qn(e,n){return LA(e).put("targetGlobalKey",n)}Kn(e,n){return To(e).put(XS(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=rs(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return To(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Lu(a);gc(n,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,n,r){let i=[],s=Qr(e);return n.forEach(o=>{let a=St(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),S.waitFor(i)}removeMatchingKeys(e,n,r){let i=Qr(e);return S.forEach(n,s=>{let o=St(s.path);return S.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){let r=Qr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Qr(e),s=se();return i.J({range:r,H:!0},(o,a,c)=>{let l=Cn(o[1]),h=new $(l);s=s.add(h)}).next(()=>s)}containsKey(e,n){let r=St(n.path),i=IDBKeyRange.bound([r],[iS(r)],!1,!0),s=0;return Qr(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,n){return To(e).get(n).next(r=>r?Lu(r):null)}};function To(t){return nt(t,"targets")}function LA(t){return nt(t,"targetGlobal")}function Qr(t){return nt(t,"targetDocuments")}function jA([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var iw=class{constructor(e){this.Un=e,this.buffer=new Ae(jA),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();jA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},sw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){di(n)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield li(n)}yield this.Hn(3e5)}))}},ow=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return S.resolve(jt.oe);let r=new iw(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(VA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VA):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ao()<=cn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function qU(t,e){return new ow(t,e)}var aw=class{constructor(e,n){this.db=e,this.garbageCollector=qU(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return wh(e,r)}removeReference(e,n,r){return wh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return wh(e,n)}nr(e,n){return function(i,s){let o=!1;return iM(i).Y(a=>rM(i,a,s).next(c=>(c&&(o=!0),S.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=n){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Z.min()),Qr(e).delete(function(p){return[0,St(p.path)]}(o))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return wh(e,n)}tr(e,n){let r=Qr(e),i,s=jt.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==jt.oe&&n(new $(Cn(i)),s),s=l,i=c):s=jt.oe}).next(()=>{s!==jt.oe&&n(new $(Cn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function wh(t,e){return Qr(t).put(function(r,i){return{targetId:0,path:St(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Yh=class{constructor(){this.changes=new Nn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?S.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var uw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Gi(e).put(r)}removeEntry(e,n,r){return Gi(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],zh(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Ze.newInvalidDocument(n);return Gi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ku(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:Ze.newInvalidDocument(n)};return Gi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ku(n))},(i,s)=>{r={document:this.ir(n,s),size:Kh(s)}}).next(()=>r)}getEntries(e,n){let r=Nt();return this._r(e,n,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=Nt(),i=new xe($.comparator);return this._r(e,n,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Kh(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return S.resolve();let i=new Ae($A);n.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(ku(i.first()),ku(i.last())),o=i.getIterator(),a=o.getNext();return Gi(e).J({index:"documentKeyIndex",range:s},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&$A(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?h.$(ku(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){let o=n.path,a=[o.popLast().toArray(),o.lastSegment(),zh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let h=Nt();for(let p of l){let g=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(yc(n,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=Nt(),o=BA(n,r),a=BA(n,Zt.max());return Gi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new cw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return UA(e).get("remoteDocumentGlobalKey").next(n=>(K(!!n),n))}rr(e,n){return UA(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let r=UU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Z.min())))return r}return Ze.newInvalidDocument(e)}};function sM(t){return new uw(t)}var cw=class extends Yh{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Nn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ae((s,o)=>re(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=AA(this.cr.serializer,o);i=i.add(s.path.popLast());let l=Kh(c);r+=l-a.size,n.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=AA(this.cr.serializer,o.convertToNoDocument(Z.min()));n.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),S.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function UA(t){return nt(t,"remoteDocumentGlobal")}function Gi(t){return nt(t,"remoteDocumentsV14")}function ku(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BA(t,e){let n=e.documentKey.path.toArray();return[t,zh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $A(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=re(n[s],r[s]),i)return i;return i=re(n.length,r.length),i||(i=re(n[n.length-2],r[r.length-2]),i||re(n[n.length-1],r[r.length-1]))}var lw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Zh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Bu(r.mutation,i,Ut.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){let i=bn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Vu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=bn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Nt(),o=Uu(),a=function(){return Uu()}();return n.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof un)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Bu(h.mutation,l,h.mutation.getFieldMask(),Be.now())):o.set(l.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new lw(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Uu(),i=new xe((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let h=r.get(c)||Ut.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||se()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=MS();h.forEach(g=>{if(!s.has(g)){let y=FS(n.get(g),r.get(g));y!==null&&p.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):y_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):S.resolve(bn()),a=-1,c=s;return o.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,se())).next(h=>({batchId:a,changes:SS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Vu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Vu();return this.indexManager.getCollectionParents(e,s).next(a=>S.forEach(a,c=>{let l=function(p,g){return new an(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ze.newInvalidDocument(h)))});let a=Vu();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Bu(h.mutation,l,Ut.empty(),Be.now()),yc(n,l)&&(a=a.insert(c,l))}),a})}};var dw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return S.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$e(i.createTime)}}(n)),S.resolve()}getNamedQuery(e,n){return S.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:I_(i.bundledQuery),readTime:$e(i.readTime)}}(n)),S.resolve()}};var hw=class{constructor(){this.overlays=new xe($.comparator),this.Ir=new Map}getOverlay(e,n){return S.resolve(this.overlays.get(n))}getOverlays(e,n){let r=bn();return S.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),S.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,n,r){let i=bn(),s=n.length+1,o=new $(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=bn(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=bn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ju(n,r));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var fw=class{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,S.resolve()}};var ic=class{constructor(){this.Tr=new Ae(Ke.Er),this.dr=new Ae(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new $(new me([])),r=new Ke(n,e),i=new Ke(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new $(new me([])),r=new Ke(n,e),i=new Ke(n,e+1),s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return $.comparator(e.key,n.key)||re(e.wr,n.wr)}static Ar(e,n){return re(e.wr,n.wr)||$.comparator(e.key,n.key)}};var pw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Ke.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Zu(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ke(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,n){return S.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return S.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(re);return n.forEach(i=>{let s=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;$.isDocumentKey(s)||(s=s.child(""));let o=new Ke(new $(s),0),a=new Ae(re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),S.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){K(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(n.mutations,i=>{let s=new Ke(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ke(n,0),i=this.br.firstAfterOrEqual(r);return S.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var gw=class{constructor(e){this.Mr=e,this.docs=function(){return new xe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return S.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(e,n){let r=Nt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ze.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nt(),o=n.path,a=new $(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||h_(oS(h),r)<=0||(i.has(h.key)||yc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return S.resolve(s)}getAllFromCollectionGroup(e,n,r,i){q()}Or(e,n){return S.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mw(this)}getSize(e){return S.resolve(this.size)}},mw=class extends Yh{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var yw=class{constructor(e){this.persistence=e,this.Nr=new Nn(n=>rs(n),gc),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ic,this.targetCount=0,this.kr=Go.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),S.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,S.resolve()}updateTargetData(e,n){return this.Kn(n),S.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(s).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return S.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),S.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),S.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return S.resolve(r)}containsKey(e,n){return S.resolve(this.Br.containsKey(n))}};var Jh=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jt(0),this.Kr=!1,this.Kr=!0,this.$r=new fw,this.referenceDelegate=e(this),this.Ur=new yw(this),this.indexManager=new tw,this.remoteDocumentCache=function(i){return new gw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new qh(n),this.Gr=new dw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pw(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new vw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},vw=class extends Rh{constructor(e){super(),this.currentSequenceNumber=e}},Xh=class t{constructor(e){this.persistence=e,this.Jr=new ic,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),S.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return S.or([()=>S.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var ww=class{constructor(e){this.serializer=e}O(e,n,r,i){let s=new Nh("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iA,{unique:!0}),c.createObjectStore("documentMutations")}(e),qA(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),qA(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Z.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iA,{unique:!0});let p=l.store("mutations"),g=h.map(y=>p.put(y));return S.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:oU});l.createIndex("collectionPathOverlayIndex",aU,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",uU,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:Q2});l.createIndex("documentKeyIndex",Y2),l.createIndex("collectionGroupIndex",Z2)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:nU}).createIndex("sequenceNumberIndex",rU,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:iU}).createIndex("documentKeyIndex",sU,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Kh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>S.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>S.forEach(a,c=>{K(c.userId===s.userId);let l=Qi(this.serializer,c);return nM(e,s.userId,l).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new me(o),l=function(p){return[0,St(p)]}(c);s.push(n.get(l).next(h=>h?S.resolve():(p=>n.put({targetId:0,path:St(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:tU});let r=n.store("collectionParents"),i=new rc,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:St(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new me(o);return s(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],l)=>{let h=Cn(a);return s(h.popLast())}))}oi(e){let n=e.store("targets");return n.J((r,i)=>{let s=Lu(i),o=XS(this.serializer,s);return n.put(o)})}_i(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=n.store("remoteDocumentsV14"),c=function(p){return p.document?new $(me.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):q()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,n){let r=n.store("mutations"),i=sM(this.serializer),s=new Jh(Xh.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:se();Qi(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new Qe(l),p=Hh.lt(this.serializer,h),g=s.getIndexManager(h),y=Qh.lt(h,this.serializer,g,s.referenceDelegate);return new Zh(i,y,p,g).recalculateAndSaveOverlaysForDocumentKeys(new Gu(n,jt.oe),c).next()})})}};function qA(t){t.createObjectStore("targetDocuments",{keyPath:X2}).createIndex("documentTargetsIndex",eU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",J2,{unique:!0}),t.createObjectStore("targetGlobal")}var uv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_w=class t{constructor(e,n,r,i,s,o,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!t.D())throw new k(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aw(this,i),this.Ai=n+"main",this.serializer=new qh(c),this.Ri=new Xr(this.Ai,this.hi,new ww(this.serializer)),this.$r=new Kv,this.Ur=new rw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sM(this.serializer),this.Gr=new Wv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ue("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(x.FAILED_PRECONDITION,uv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new jt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_h(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(di(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Fu(e).get("owner").next(n=>S.resolve(this.vi(n)))}Ci(e){return _h(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=nt(n,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return S.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Fu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new k(x.FAILED_PRECONDITION,uv);return!1}}return!(!this.networkEnabled||!this.inForeground)||_h(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&O("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Gu(e,jt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>_h(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return Qh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new nw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Hh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",s=function(c){return c===17?dU:c===16?lU:c===15?p_:c===14?fS:c===13?hS:c===12?cU:c===11?dS:void q()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Gu(a,this.Qr?this.Qr.next():jt.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Ue(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(x.FAILED_PRECONDITION,aS);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Fu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new k(x.FAILED_PRECONDITION,uv)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fu(e).put("owner",n)}static D(){return Xr.D()}bi(e){let n=Fu(e);return n.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):S.resolve())}Mi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ue(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;lp()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ue("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ue("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Fu(t){return nt(t,"owner")}function _h(t){return nt(t,"clientMetadata")}function D_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Iw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=se(),i=se();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Ew=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ef=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lp()?8:uS(Ta())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Ew;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ao()<=cn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Ao()<=cn.DEBUG&&O("QueryEngine","Query:",So(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ao()<=cn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mt(n))):S.resolve())}Yi(e,n){if(mA(n))return S.resolve(null);let r=Mt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jh(n,null,"F"),r=Mt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,jh(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return mA(n)||i.isEqual(Z.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?S.resolve(null):(Ao()<=cn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),So(n)),this.rs(e,o,n,sS(i,-1)).next(a=>a))})}ts(e,n){let r=new Ae(TS(e));return n.forEach((i,s)=>{yc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Ao()<=cn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",So(n)),this.Ji.getDocumentsMatchingQuery(e,n,Zt.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Dw=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(re),this._s=new Nn(s=>rs(s),gc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function oM(t,e,n,r){return new Dw(t,e,n,r)}function aM(t,e){return N(this,null,function*(){let n=U(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=se();for(let l of i){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function zU(t,e){let n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,g=p.keys(),y=S.resolve();return g.forEach(D=>{y=y.next(()=>h.getEntry(c,D)).next(M=>{let T=l.docVersions.get(D);K(T!==null),M.version.compareTo(T)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function uM(t){let e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HU(t,e){let n=U(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ze.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(M,T,P){return M.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let c=Nt(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(cM(s,o,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Z.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function cM(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Nt();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function GU(t,e){let n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wo(t,e){let n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,S.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ho(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Ko(t,e,n){return N(this,null,function*(){let r=U(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!di(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function tf(t,e,n){let r=U(t),i=Z.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let p=U(c),g=p._s.get(h);return g!==void 0?S.resolve(p.os.get(g)):p.Ur.getTargetData(l,h)}(r,o,Mt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:se())).next(a=>(hM(r,bS(e),a),{documents:a,Ts:s})))}function lM(t,e){let n=U(t),r=U(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function dM(t,e){let n=U(t),r=n.us.get(e)||Z.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,sS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hM(n,e,i),i))}function hM(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function WU(t,e,n,r){return N(this,null,function*(){let i=U(t),s=se(),o=Nt();for(let l of n){let h=e.Es(l.metadata.name);l.document&&(s=s.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),o=o.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Wo(i,function(h){return Mt(na(me.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>cM(l,a,o).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function KU(r,i){return N(this,arguments,function*(t,e,n=se()){let s=yield Wo(t,Mt(I_(e.bundledQuery))),o=U(t);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=$e(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(ze.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,n,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function zA(t,e){return`firestore_clients_${t}_${e}`}function HA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function cv(t,e){return`firestore_targets_${t}_${e}`}var nf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new k(i.error.code,i.error.message))),o?new t(e,n,i.state,s):(Ue("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},$u=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){let r=JSON.parse(n),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new k(r.error.code,r.error.message))),s?new t(e,r.state,i):(Ue("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},rf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=v_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=cS(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new t(e,s):(Ue("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Cw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ue("SharedClientState",`Failed to parse online state: ${e}`),null)}},sc=class{constructor(){this.activeTargetIds=v_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},qu=class{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new xe(re),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=zA(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new sc),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(zA(this.persistenceKey,r));if(i){let s=rf.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let r=this.Ls(n);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(cv(this.persistenceKey,e));if(r){let i=$u.Rs(e,r);i&&(n=i.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cv(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return O("SharedClientState","READ",e,n),n}setItem(e,n){O("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(O("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ue("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let r=this.Gs(n.key);return this.zs(r,null)}{let r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){let r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){let r=function(s){let o=jt.oe;if(s!=null)try{let a=JSON.parse(s);K(typeof a=="number"),o=a}catch(a){Ue("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==jt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){let r=this.Xs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){let i=new nf(this.currentUser,e,n,r),s=HA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let n=HA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){let i=cv(this.persistenceKey,e),s=new $u(e,n,r);this.setItem(i,s.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let r=this.Gs(e);return rf.Rs(r,n)}Hs(e,n){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return nf.Rs(new Qe(s),i,n)}Ys(e,n){let r=this.Ms.exec(e),i=Number(r[1]);return $u.Rs(i,n)}Ls(e){return Cw.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=v_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},sf=class{constructor(){this.so=new sc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new sc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bw=class{_o(e){}shutdown(){}};var of=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ih=null;function lv(){return Ih===null?Ih=function(){return 268435456+Math.round(2147483648*Math.random())}():Ih++,"0x"+Ih.toString(16)}var QU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Tw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",Aw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=lv(),c=this.xo(n,r.toUriEncodedString());O("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(h=>(O("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Mn("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ta}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=QU[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=lv();return new Promise((o,a)=>{let c=new tv;c.setWithCredentials(!0),c.listenOnce(rv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nu.NO_ERROR:let h=c.getResponseJson();O(yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Nu.TIMEOUT:O(yt,`RPC '${e}' ${s} timed out`),a(new k(x.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:let p=c.getStatus();if(O(yt,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let D=function(T){let P=T.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(y.status);a(new k(D,y.message))}else a(new k(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new k(x.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{O(yt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);O(yt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=lv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ov(),a=sv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new nv({})),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let h=s.join("");O(yt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=o.createWebChannel(h,c),g=!1,y=!1,D=new Tw({Io:T=>{y?O(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(O(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),O(yt,`RPC '${e}' stream ${i} sending:`,T),p.send(T))},To:()=>p.close()}),M=(T,P,L)=>{T.listen(P,B=>{try{L(B)}catch(H){setTimeout(()=>{throw H},0)}})};return M(p,Eo.EventType.OPEN,()=>{y||(O(yt,`RPC '${e}' stream ${i} transport opened.`),D.yo())}),M(p,Eo.EventType.CLOSE,()=>{y||(y=!0,O(yt,`RPC '${e}' stream ${i} transport closed`),D.So())}),M(p,Eo.EventType.ERROR,T=>{y||(y=!0,Mn(yt,`RPC '${e}' stream ${i} transport errored:`,T),D.So(new k(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,Eo.EventType.MESSAGE,T=>{var P;if(!y){let L=T.data[0];K(!!L);let B=L,H=B.error||((P=B[0])===null||P===void 0?void 0:P.error);if(H){O(yt,`RPC '${e}' stream ${i} received error:`,H);let ie=H.status,W=function(_){let E=We[_];if(E!==void 0)return jS(E)}(ie),I=H.message;W===void 0&&(W=x.INTERNAL,I="Unknown error status: "+ie+" with message "+H.message),y=!0,D.So(new k(W,I)),p.close()}else O(yt,`RPC '${e}' stream ${i} received:`,L),D.bo(L)}}),M(a,iv.STAT_EVENT,T=>{T.stat===yh.PROXY?O(yt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===yh.NOPROXY&&O(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}};function fM(){return typeof window<"u"?window:null}function Th(){return typeof document<"u"?document:null}function vc(t){return new $v(t,!0)}var oc=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var af=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new oc(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Ue(n.toString()),Ue("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new k(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Sw=class extends af{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=PU(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?$e(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Hv(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Vh(c)?{documents:WS(s,c)}:{query:KS(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BS(s,o.resumeToken);let l=qv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=zo(s,o.snapshotVersion.toTimestamp());let l=qv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=kU(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Hv(this.serializer),n.removeTarget=e,this.a_(n)}},Mw=class extends af{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=OU(e.writeResults,e.commitTime),r=$e(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Hv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>nc(this.serializer,r))};this.a_(n)}};var xw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,zv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,zv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Rw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ue(n),this.D_=!1):O("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Nw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>N(this,null,function*(){hi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(c){return N(this,null,function*(){let l=U(c);l.L_.add(4),yield ra(l),l.q_.set("Unknown"),l.L_.delete(4),yield wc(l)})}(this))}))}),this.q_=new Rw(r,i)}};function wc(t){return N(this,null,function*(){if(hi(t))for(let e of t.B_)yield e(!0)})}function ra(t){return N(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Af(t,e){let n=U(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),T_(n)?b_(n):sa(n).r_()&&C_(n,e))}function Qo(t,e){let n=U(t),r=sa(n);n.N_.delete(e),r.r_()&&pM(n,e),n.N_.size===0&&(r.r_()?r.o_():hi(n)&&n.q_.set("Unknown"))}function C_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).A_(e)}function pM(t,e){t.Q_.xe(e),sa(t).R_(e)}function b_(t){t.Q_=new Bv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.q_.v_()}function T_(t){return hi(t)&&!sa(t).n_()&&t.N_.size>0}function hi(t){return U(t).L_.size===0}function gM(t){t.Q_=void 0}function YU(t){return N(this,null,function*(){t.q_.set("Online")})}function ZU(t){return N(this,null,function*(){t.N_.forEach((e,n)=>{C_(t,e)})})}function JU(t,e){return N(this,null,function*(){gM(t),T_(t)?(t.q_.M_(e),b_(t)):t.q_.set("Unknown")})}function XU(t,e,n){return N(this,null,function*(){if(t.q_.set("Online"),e instanceof Bh&&e.state===2&&e.cause)try{yield function(i,s){return N(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uf(t,r)}else if(e instanceof ko?t.Q_.Ke(e):e instanceof Uh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{let r=yield uM(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.N_.get(c);if(!h)return;s.N_.set(c,h.withResumeToken(ze.EMPTY_BYTE_STRING,h.snapshotVersion)),pM(s,c);let p=new Ho(h.target,c,l,h.sequenceNumber);C_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield uf(t,r)}})}function uf(t,e,n){return N(this,null,function*(){if(!di(e))throw e;t.L_.add(1),yield ra(t),t.q_.set("Offline"),n||(n=()=>uM(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield wc(t)}))})}function mM(t,e){return e().catch(n=>uf(t,n,e))}function ia(t){return N(this,null,function*(){let e=U(t),n=oi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;eB(e);)try{let i=yield GU(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,tB(e,i)}catch(i){yield uf(e,i)}yM(e)&&vM(e)})}function eB(t){return hi(t)&&t.O_.length<10}function tB(t,e){t.O_.push(e);let n=oi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function yM(t){return hi(t)&&!oi(t).n_()&&t.O_.length>0}function vM(t){oi(t).start()}function nB(t){return N(this,null,function*(){oi(t).p_()})}function rB(t){return N(this,null,function*(){let e=oi(t);for(let n of t.O_)e.m_(n.mutations)})}function iB(t,e,n){return N(this,null,function*(){let r=t.O_.shift(),i=Lv.from(r,e,n);yield mM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ia(t)})}function sB(t,e){return N(this,null,function*(){e&&oi(t).V_&&(yield function(r,i){return N(this,null,function*(){if(function(o){return LS(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();oi(r).s_(),yield mM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ia(r)}})}(t,e)),yM(t)&&vM(t)})}function GA(t,e){return N(this,null,function*(){let n=U(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=hi(n);n.L_.add(3),yield ra(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield wc(n)})}function Pw(t,e){return N(this,null,function*(){let n=U(t);e?(n.L_.delete(2),yield wc(n)):e||(n.L_.add(2),yield ra(n),n.q_.set("Unknown"))})}function sa(t){return t.K_||(t.K_=function(n,r,i){let s=U(n);return s.w_(),new Sw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:YU.bind(null,t),Ro:ZU.bind(null,t),mo:JU.bind(null,t),d_:XU.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.K_.s_(),T_(t)?b_(t):t.q_.set("Unknown")):(yield t.K_.stop(),gM(t))}))),t.K_}function oi(t){return t.U_||(t.U_=function(n,r,i){let s=U(n);return s.w_(),new Mw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:nB.bind(null,t),mo:sB.bind(null,t),f_:rB.bind(null,t),g_:iB.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.U_.s_(),yield ia(t)):(yield t.U_.stop(),t.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Ow=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ye,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function oa(t,e){if(Ue("AsyncQueue",`${e}: ${t}`),di(t))return new k(x.UNAVAILABLE,`${e}: ${t}`);throw t}var cf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Vu(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var lf=class{constructor(){this.W_=new xe($.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):q():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Yo=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,cf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var kw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Fw=class{constructor(){this.queries=WA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=U(n),s=i.queries;i.queries=WA(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new k(x.ABORTED,"Firestore shutting down"))}};function WA(){return new Nn(t=>CS(t),mc)}function A_(t,e){return N(this,null,function*(){let n=U(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new kw,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=oa(o,`Initialization of query '${So(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&M_(n)})}function S_(t,e){return N(this,null,function*(){let n=U(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function oB(t,e){let n=U(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&M_(n)}function aB(t,e,n){let r=U(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function M_(t){t.Y_.forEach(e=>{e.next()})}var Vw,KA;(KA=Vw||(Vw={})).ea="default",KA.Cache="cache";var ac=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vw.Cache}};var Lw=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var df=class{constructor(e){this.serializer=e}Es(e){return An(this.serializer,e)}ds(e){return e.metadata.exists?GS(this.serializer,e.document,!1):Ze.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return $e(e)}},jw=class{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let r=me.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,r=new df(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(n.get(o)||se()).add(s);n.set(o,a)}}return n}complete(){return N(this,null,function*(){let e=yield WU(this.localStore,new df(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let r of this.queries)yield KU(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function wM(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var hf=class{constructor(e){this.key=e}},ff=class{constructor(e){this.key=e}},pf=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=TS(e),this.Ra=new cf(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new lf,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=yc(this.query,p)?p:null,D=!!g&&this.mutatedKeys.has(g.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),T=!1;g&&y?g.data.isEqual(y.data)?D!==M&&(r.track({type:3,doc:y}),T=!0):this.ga(g,y)||(r.track({type:2,doc:y}),T=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),T=!0):g&&!y&&(r.track({type:1,doc:g}),T=!0,(c||l)&&(a=!0)),T&&(y?(o=o.add(y),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,D){let M=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return M(y)-M(D)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Yo(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new lf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ff(r))}),this.da.forEach(r=>{e.has(r)||n.push(new hf(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Uw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Bw=class{constructor(e){this.key=e,this.va=!1}},$w=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Nn(a=>CS(a),mc),this.Ma=new Map,this.xa=new Set,this.Oa=new xe($.comparator),this.Na=new Map,this.La=new ic,this.Ba={},this.ka=new Map,this.qa=Go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function uB(t,e,n=!0){return N(this,null,function*(){let r=Sf(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield _M(r,e,n,!0),i})}function cB(t,e){return N(this,null,function*(){let n=Sf(t);yield _M(n,e,!0,!1)})}function _M(t,e,n,r){return N(this,null,function*(){let i=yield Wo(t.localStore,Mt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield x_(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Af(t.remoteStore,i),a})}function x_(t,e,n,r,i){return N(this,null,function*(){t.Ka=(p,g,y)=>function(M,T,P,L){return N(this,null,function*(){let B=T.view.ma(P);B.ns&&(B=yield tf(M.localStore,T.query,!1).then(({documents:I})=>T.view.ma(I,B)));let H=L&&L.targetChanges.get(T.targetId),ie=L&&L.targetMismatches.get(T.targetId)!=null,W=T.view.applyChanges(B,M.isPrimaryClient,H,ie);return qw(M,T.targetId,W.wa),W.snapshot})}(t,p,g,y);let s=yield tf(t.localStore,e,!0),o=new pf(e,s.Ts),a=o.ma(s.documents),c=ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);qw(t,n,l.wa);let h=new Uw(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function lB(t,e,n){return N(this,null,function*(){let r=U(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!mc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ko(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Qo(r.remoteStore,i.targetId),Zo(r,i.targetId)}).catch(li))):(Zo(r,i.targetId),yield Ko(r.localStore,i.targetId,!0))})}function dB(t,e){return N(this,null,function*(){let n=U(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qo(n.remoteStore,r.targetId))})}function hB(t,e,n){return N(this,null,function*(){let r=O_(t);try{let i=yield function(o,a){let c=U(o),l=Be.now(),h=a.reduce((y,D)=>y.add(D.key),se()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Nt(),M=se();return c.cs.getEntries(y,h).next(T=>{D=T,D.forEach((P,L)=>{L.isValidDocument()||(M=M.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(T=>{p=T;let P=[];for(let L of a){let B=TU(L,p.get(L.key).overlayedDocument);B!=null&&P.push(new un(L.key,B,yS(B.value.mapValue),Ve.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(T=>{g=T;let P=T.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(y,T.batchId,P)})}).then(()=>({batchId:g.batchId,changes:SS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new xe(re)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield hr(r,i.changes),yield ia(r.remoteStore)}catch(i){let s=oa(i,"Failed to persist write");n.reject(s)}})}function IM(t,e){return N(this,null,function*(){let n=U(t);try{let r=yield HU(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?K(o.va):i.removedDocuments.size>0&&(K(o.va),o.va=!1))}),yield hr(n,r,e)}catch(r){yield li(r)}})}function QA(t,e,n){let r=U(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=U(o);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let g of p.j_)g.Z_(a)&&(l=!0)}),l&&M_(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function fB(t,e,n){return N(this,null,function*(){let r=U(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new xe($.comparator);o=o.insert(s,Ze.newNoDocument(s,Z.min()));let a=se().add(s),c=new Xu(Z.min(),new Map,new xe(re),o,a);yield IM(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),P_(r)}else yield Ko(r.localStore,e,!1).then(()=>Zo(r,e,n)).catch(li)})}function pB(t,e){return N(this,null,function*(){let n=U(t),r=e.batch.batchId;try{let i=yield zU(n.localStore,e);N_(n,r,null),R_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield hr(n,i)}catch(i){yield li(i)}})}function gB(t,e,n){return N(this,null,function*(){let r=U(t);try{let i=yield function(o,a){let c=U(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);N_(r,e,n),R_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield hr(r,i)}catch(i){yield li(i)}})}function mB(t,e){return N(this,null,function*(){let n=U(t);hi(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=U(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){let i=oa(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function R_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function N_(t,e,n){let r=U(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Zo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||EM(t,r)})}function EM(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Qo(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),P_(t))}function qw(t,e,n){for(let r of n)r instanceof hf?(t.La.addReference(r.key,e),yB(t,r)):r instanceof ff?(O("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||EM(t,r.key)):q()}function yB(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(O("SyncEngine","New document in limbo: "+n),t.xa.add(r),P_(t))}function P_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new $(me.fromString(e)),r=t.qa.next();t.Na.set(r,new Bw(n)),t.Oa=t.Oa.insert(n,r),Af(t.remoteStore,new Ho(Mt(na(n.path)),r,"TargetPurposeLimboResolution",jt.oe))}}function hr(t,e,n){return N(this,null,function*(){let r=U(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Iw.Wi(c.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return N(this,null,function*(){let h=U(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,g=>S.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>S.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!di(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.os.get(g),D=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(D);h.os=h.os.insert(g,M)}}})}(r.localStore,s))})}function vB(t,e){return N(this,null,function*(){let n=U(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield aM(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new k(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hr(n,r.hs)}})}function wB(t,e){let n=U(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function _B(t,e){return N(this,null,function*(){let n=U(t),r=yield tf(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&qw(n,e.targetId,i.wa),i})}function IB(t,e){return N(this,null,function*(){let n=U(t);return dM(n.localStore,e).then(r=>hr(n,r))})}function EB(t,e,n,r){return N(this,null,function*(){let i=U(t),s=yield function(a,c){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(g=>g?l.localDocuments.getDocuments(p,g):S.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?yield ia(i.remoteStore):n==="acknowledged"||n==="rejected"?(N_(i,e,r||null),R_(i,e),function(a,c){U(U(a).mutationQueue).On(c)}(i.localStore,e)):q(),yield hr(i,s)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function DB(t,e){return N(this,null,function*(){let n=U(t);if(Sf(n),O_(n),e===!0&&n.Qa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield YA(n,r.toArray());n.Qa=!0,yield Pw(n.remoteStore,!0);for(let s of i)Af(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){let r=[],i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Zo(n,o),Ko(n.localStore,o,!0))),Qo(n.remoteStore,o)}),yield i,yield YA(n,r),function(o){let a=U(o);a.Na.forEach((c,l)=>{Qo(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new xe($.comparator)}(n),n.Qa=!1,yield Pw(n.remoteStore,!1)}})}function YA(t,e,n){return N(this,null,function*(){let r=U(t),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield Wo(r.localStore,Mt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield _B(r,h);p.snapshot&&s.push(p.snapshot)}}else{let l=yield lM(r.localStore,o);a=yield Wo(r.localStore,l),yield x_(r,DM(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function DM(t){return DS(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function CB(t){return function(n){return U(U(n).persistence).Qi()}(U(t).localStore)}function bB(t,e,n,r){return N(this,null,function*(){let i=U(t);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{let o=yield dM(i.localStore,bS(s[0])),a=Xu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ze.EMPTY_BYTE_STRING);yield hr(i,o,a);break}case"rejected":yield Ko(i.localStore,e,!0),Zo(i,e,r);break;default:q()}})}function TB(t,e,n){return N(this,null,function*(){let r=Sf(t);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let s=yield lM(r.localStore,i),o=yield Wo(r.localStore,s);yield x_(r,DM(s),o.targetId,!1,o.resumeToken),Af(r.remoteStore,o)}for(let i of n)r.Ma.has(i)&&(yield Ko(r.localStore,i,!1).then(()=>{Qo(r.remoteStore,i),Zo(r,i)}).catch(li))}})}function Sf(t){let e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fB.bind(null,e),e.Ca.d_=oB.bind(null,e.eventManager),e.Ca.$a=aB.bind(null,e.eventManager),e}function O_(t){let e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gB.bind(null,e),e}function AB(t,e,n){let r=U(t);(function(s,o,a){return N(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(y,D){let M=U(y),T=$e(D.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",P=>M.Gr.getBundleMetadata(P,D.id)).then(P=>!!P&&P.createTime.compareTo(T)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(wM(c));let l=new jw(c,s.localStore,o.serializer),h=yield o.Ua();for(;h;){let g=yield l.la(h);g&&a._updateProgress(g),h=yield o.Ua()}let p=yield l.complete();return yield hr(s,p.Ia,void 0),yield function(y,D){let M=U(y);return M.persistence.runTransaction("Save bundle","readwrite",T=>M.Gr.saveBundleMetadata(T,D))}(s.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return Mn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var uc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=vc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return oM(this.persistence,new ef,e.initialUser,this.serializer)}createPersistence(e){return new Jh(Xh.Zr,this.serializer)}createSharedClientState(e){return new sf}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var gf=class t extends uc{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield cp(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield O_(this.Wa.syncEngine),yield ia(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return oM(this.persistence,new ef,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new sw(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Ev(n,this.persistence);return new Iv(e.asyncQueue,r)}createPersistence(e){let n=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new _w(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,fM(),Th(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new sf}},zw=class t extends gf{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield cp(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof qu&&(this.sharedClientState.syncEngine={no:EB.bind(null,n),ro:bB.bind(null,n),io:TB.bind(null,n),Qi:CB.bind(null,n),eo:IB.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield DB(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=fM();if(!qu.D(n))throw new k(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=D_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},cc=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>QA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vB.bind(null,this.syncEngine),yield Pw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Fw}()}createDatastore(e){let n=vc(e.databaseInfo.databaseId),r=function(s){return new Aw(s)}(e.databaseInfo);return function(s,o,a,c){return new xw(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Nw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>QA(this.syncEngine,n,0),function(){return of.D()?new of:new bw}())}createSyncEngine(e,n){return function(i,s,o,a,c,l,h){let p=new $w(i,s,o,a,c,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e,n;yield function(i){return N(this,null,function*(){let s=U(i);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ra(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function ZA(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Jo=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Ue("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Hw=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new Ye,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);let i=yield this.Xa(r);return new Lw(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Gw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,s){return N(this,null,function*(){let o=U(i),a={documents:s.map(p=>tc(o.serializer,p))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,me.emptyPath(),a,s.length),l=new Map;c.forEach(p=>{let g=NU(o.serializer,p);l.set(g.key.toString(),g)});let h=[];return s.forEach(p=>{let g=l.get(p.toString());K(!!g),h.push(g)}),h})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new si(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=$.fromPath(r);this.mutations.push(new Yu(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let s=U(r),o={writes:i.map(a=>nc(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,me.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw q();n=Z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new k(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Z.min())?Ve.exists(!1):Ve.updateTime(n):Ve.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Z.min()))throw new k(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ve.updateTime(n)}return Ve.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Ww=class{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new oc(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new Gw(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let n=this.updateFunction(e);return!pc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!LS(n)}return!1}};var Kw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Mh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ye;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=oa(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ah(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield aM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Qw(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield k_(t);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>GA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>GA(e.remoteStore,i)),t._onlineComponents=e})}function CM(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function k_(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ah(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!CM(n))throw n;Mn("Error using user provided cache. Falling back to memory cache: "+n),yield Ah(t,new uc)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Ah(t,new uc);return t._offlineComponents})}function Mf(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield Qw(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield Qw(t,new cc))),t._onlineComponents})}function bM(t){return k_(t).then(e=>e.persistence)}function F_(t){return k_(t).then(e=>e.localStore)}function TM(t){return Mf(t).then(e=>e.remoteStore)}function V_(t){return Mf(t).then(e=>e.syncEngine)}function SB(t){return Mf(t).then(e=>e.datastore)}function Xo(t){return N(this,null,function*(){let e=yield Mf(t),n=e.eventManager;return n.onListen=uB.bind(null,e.syncEngine),n.onUnlisten=lB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dB.bind(null,e.syncEngine),n})}function MB(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield bM(t),n=yield TM(t);return e.setNetworkEnabled(!0),function(i){let s=U(i);return s.L_.delete(0),wc(s)}(n)}))}function xB(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield bM(t),n=yield TM(t);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let s=U(i);s.L_.add(0),yield ra(s),s.q_.set("Offline")})}(n)}))}function RB(t,e){let n=new Ye;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",g=>p.localDocuments.getDocument(g,h))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new k(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=oa(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield F_(t),e,n)})),n.promise}function AM(t,e,n={}){let r=new Ye;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,c,l){let h=new Jo({next:g=>{o.enqueueAndForget(()=>S_(s,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new k(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new ac(na(a.path),h,{includeMetadataChanges:!0,_a:!0});return A_(s,p)}(yield Xo(t),t.asyncQueue,e,n,r)})),r.promise}function NB(t,e){let n=new Ye;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s,o){return N(this,null,function*(){try{let a=yield tf(i,s,!0),c=new pf(s,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);o.resolve(h.snapshot)}catch(a){let c=oa(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield F_(t),e,n)})),n.promise}function SM(t,e,n={}){let r=new Ye;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(s,o,a,c,l){let h=new Jo({next:g=>{o.enqueueAndForget(()=>S_(s,p)),g.fromCache&&c.source==="server"?l.reject(new k(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new ac(a,h,{includeMetadataChanges:!0,_a:!0});return A_(s,p)}(yield Xo(t),t.asyncQueue,e,n,r)})),r.promise}function PB(t,e){let n=new Jo(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){U(i).Y_.add(s),s.next()}(yield Xo(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,s){U(i).Y_.delete(s)}(yield Xo(t),n)}))}}function OB(t,e,n,r){let i=function(o,a){let c;return c=typeof o=="string"?US().encode(o):o,function(h,p){return new Hw(h,p)}(function(h,p){if(h instanceof Uint8Array)return ZA(h,p);if(h instanceof ArrayBuffer)return ZA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,vc(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){AB(yield V_(t),i,r)}))}function kB(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let s=U(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield F_(t),e)}))}function MM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var JA=new Map;function L_(t,e,n){if(!n)throw new k(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FB(t,e,n,r){if(e===!0&&r===!0)throw new k(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function XA(t){if(!$.isDocumentKey(t))throw new k(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eS(t){if($.isDocumentKey(t))throw new k(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function _e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=xf(t);throw new k(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xM(t,e){if(e<=0)throw new k(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var mf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},as=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dv;switch(r.type){case"firstParty":return new gv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=JA.get(n);r&&(O("ComponentProvider","Removing Datastore"),JA.delete(n),r.terminate())}(this),Promise.resolve()}};function RM(t,e,n,r={}){var i;let s=(t=_e(t,as))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Qe.MOCK_USER;else{a=tE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Qe(l)}t._authCredentials=new hv(new Sh(a,c))}}var lt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Sn=class t extends lt{constructor(e,n,r){super(e,n,na(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function NM(t,e,...n){if(t=Je(t),L_("collection","path",e),t instanceof as){let r=me.fromString(e,...n);return eS(r),new Sn(t,null,r)}{if(!(t instanceof qe||t instanceof Sn))throw new k(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return eS(r),new Sn(t.firestore,null,r)}}function VB(t,e){if(t=_e(t,as),L_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lt(t,null,function(r){return new an(me.emptyPath(),r)}(e))}function PM(t,e,...n){if(t=Je(t),arguments.length===1&&(e=Mh.newId()),L_("doc","path",e),t instanceof as){let r=me.fromString(e,...n);return XA(r),new qe(t,null,new $(r))}{if(!(t instanceof qe||t instanceof Sn))throw new k(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return XA(r),new qe(t.firestore,t instanceof Sn?t.converter:null,new $(r))}}function OM(t,e){return t=Je(t),e=Je(e),(t instanceof qe||t instanceof Sn)&&(e instanceof qe||e instanceof Sn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function kM(t,e){return t=Je(t),e=Je(e),t instanceof lt&&e instanceof lt&&t.firestore===e.firestore&&mc(t._query,e._query)&&t.converter===e.converter}var Yw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new oc(this,"async_queue_retry"),this.Eu=()=>{let n=Th();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Th();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Ye;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!di(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ue("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=Ow.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&q()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function Zw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Jw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ye,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var CW=-1,Ne=class extends as{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Yw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||VM(this),this._firestoreClient.terminate()}};function FM(t,e){let n=typeof t=="object"?t:Lc(),r=typeof t=="string"?t:e||"(default)",i=aE(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=eE("firestore");s&&RM(i,...s)}return i}function dt(t){return t._firestoreClient||VM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function VM(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,h){return new Dv(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,MM(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Kw(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function LB(t,e){jM(t=_e(t,Ne));let n=dt(t);if(n._uninitializedComponentsProvider)throw new k(x.FAILED_PRECONDITION,"SDK cache is already specified.");Mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new cc;return LM(n,i,new gf(i,r.cacheSizeBytes,e?.forceOwnership))}function jB(t){jM(t=_e(t,Ne));let e=dt(t);if(e._uninitializedComponentsProvider)throw new k(x.FAILED_PRECONDITION,"SDK cache is already specified.");Mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new cc;return LM(e,r,new zw(r,n.cacheSizeBytes))}function LM(t,e,n){let r=new Ye;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Ah(t,n),yield Qw(t,e),r.resolve()}catch(i){let s=i;if(!CM(s))throw s;Mn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function UB(t){if(t._initialized&&!t._terminated)throw new k(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ye;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Xr.D())return Promise.resolve();let i=r+"main";yield Xr.delete(i)})}(D_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function BB(t){return function(n){let r=new Ye;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return mB(yield V_(n),r)})),r.promise}(dt(t=_e(t,Ne)))}function $B(t){return MB(dt(t=_e(t,Ne)))}function qB(t){return xB(dt(t=_e(t,Ne)))}function zB(t,e){let n=dt(t=_e(t,Ne)),r=new Jw;return OB(n,t._databaseId,e,r),r}function HB(t,e){return kB(dt(t=_e(t,Ne)),e).then(n=>n?new lt(t,null,n.query):null)}function jM(t){if(t._initialized||t._terminated)throw new k(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ea=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ze.fromBase64String(e))}catch(n){throw new k(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ai=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var lr=class{constructor(e){this._methodName=e}};var lc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var dc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var GB=/^__.*__$/,Xw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new un(e,this.data,this.fieldMask,n,this.fieldTransforms):new ii(e,this.data,n,this.fieldTransforms)}},yf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new un(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function UM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var vf=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return wf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(UM(this.wu)&&GB.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},e_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vc(e)}Nu(e,n,r,i=!1){return new vf({wu:e,methodName:n,Ou:r,path:tt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ds(t){let e=t._freezeSettings(),n=vc(t._databaseId);return new e_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Rf(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);B_("Data must be an object, but it was:",o,r);let a=qM(r,o),c,l;if(s.merge)c=new Ut(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let g=s_(e,p,n);if(!o.contains(g))throw new k(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);HM(h,g)||h.push(g)}c=new Ut(h),l=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=o.fieldTransforms;return new Xw(new vt(a),c,l)}var hc=class t extends lr{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function BM(t,e,n){return new vf({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var t_=class t extends lr{_toFieldTransform(e){return new is(e.path,new ni)}isEqual(e){return e instanceof t}},n_=class t extends lr{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=BM(this,e,!0),r=this.Lu.map(s=>hs(s,n)),i=new ur(r);return new is(e.path,i)}isEqual(e){return e instanceof t&&dp(this.Lu,e.Lu)}},r_=class t extends lr{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=BM(this,e,!0),r=this.Lu.map(s=>hs(s,n)),i=new cr(r);return new is(e.path,i)}isEqual(e){return e instanceof t&&dp(this.Lu,e.Lu)}},i_=class t extends lr{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new ri(e.serializer,RS(e.serializer,this.Bu));return new is(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function j_(t,e,n,r){let i=t.Nu(1,e,n);B_("Data must be an object, but it was:",i,r);let s=[],o=vt.empty();ls(r,(c,l)=>{let h=$_(e,c,n);l=Je(l);let p=i.Cu(h);if(l instanceof hc)s.push(h);else{let g=hs(l,p);g!=null&&(s.push(h),o.set(h,g))}});let a=new Ut(s);return new yf(o,a,i.fieldTransforms)}function U_(t,e,n,r,i,s){let o=t.Nu(1,e,n),a=[s_(e,r,n)],c=[i];if(s.length%2!=0)throw new k(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(s_(e,s[g])),c.push(s[g+1]);let l=[],h=vt.empty();for(let g=a.length-1;g>=0;--g)if(!HM(l,a[g])){let y=a[g],D=c[g];D=Je(D);let M=o.Cu(y);if(D instanceof hc)l.push(y);else{let T=hs(D,M);T!=null&&(l.push(y),h.set(y,T))}}let p=new Ut(l);return new yf(h,p,o.fieldTransforms)}function $M(t,e,n,r=!1){return hs(n,t.Nu(r?4:3,e))}function hs(t,e){if(zM(t=Je(t)))return B_("Unsupported field value:",e,t),qM(t,e);if(t instanceof lr)return function(r,i){if(!UM(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=hs(a,i.Fu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Be.fromDate(r);return{timestampValue:zo(i.serializer,s)}}if(r instanceof Be){let s=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zo(i.serializer,s)}}if(r instanceof lc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ea)return{bytesValue:BS(i.serializer,r._byteString)};if(r instanceof qe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:__(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof dc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Mu("VectorValues must only contain numeric values.");return w_(a.serializer,c)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${xf(r)}`)}(t,e)}function qM(t,e){let n={};return pS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(t,(r,i)=>{let s=hs(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function zM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof lc||t instanceof ea||t instanceof qe||t instanceof lr||t instanceof dc)}function B_(t,e,n){if(!zM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=xf(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function s_(t,e,n){if((e=Je(e))instanceof ai)return e._internalPath;if(typeof e=="string")return $_(t,e);throw wf("Field path arguments must be of type string or ",t,!1,void 0,n)}var WB=new RegExp("[~\\*/\\[\\]]");function $_(t,e,n){if(e.search(WB)>=0)throw wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ai(...e.split("."))._internalPath}catch{throw wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new k(x.INVALID_ARGUMENT,a+t+c)}function HM(t,e){return t.some(n=>n.isEqual(e))}var us=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new o_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},o_=class extends us{data(){return super.data()}};function Nf(t,e){return typeof e=="string"?$_(t,e):e instanceof ai?e._internalPath:e._delegate._internalPath}function GM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fc=class{},cs=class extends fc{};function q_(t,e,...n){let r=[];e instanceof fc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof a_).length,a=s.filter(c=>c instanceof _f).length;if(o>1||o>0&&a>0)throw new k(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var _f=class t extends cs{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return KM(e._query,n),new lt(e.firestore,e.converter,Fv(e._query,n))}_parse(e){let n=ds(e.firestore);return function(s,o,a,c,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){nS(p,h);let y=[];for(let D of p)y.push(tS(c,s,D));g={arrayValue:{values:y}}}else g=tS(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||nS(p,h),g=$M(a,o,p,h==="in"||h==="not-in");return fe.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function KB(t,e,n){let r=e,i=Nf("where",t);return _f._create(i,r,n)}var a_=class t extends fc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:De.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)KM(o,c),o=Fv(o,c)}(e._query,n),new lt(e.firestore,e.converter,Fv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var u_=class t extends cs{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new k(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ns(s,o)}(e._query,this._field,this._direction);return new lt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new an(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function z_(t,e="asc"){let n=e,r=Nf("orderBy",t);return u_._create(r,n)}var If=class t extends cs{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new lt(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}};function QB(t){return xM("limit",t),If._create("limit",t,"F")}function YB(t){return xM("limitToLast",t),If._create("limitToLast",t,"L")}var Ef=class t extends cs{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=WM(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,s){return new an(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}};function ZB(...t){return Ef._create("startAt",t,!0)}function JB(...t){return Ef._create("startAfter",t,!1)}var Df=class t extends cs{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=WM(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,s){return new an(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}};function XB(...t){return Df._create("endBefore",t,!1)}function e$(...t){return Df._create("endAt",t,!0)}function WM(t,e,n,r){if(n[0]=Je(n[0]),n[0]instanceof us)return function(s,o,a,c,l){if(!c)throw new k(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Oo(s))if(p.field.isKeyField())h.push(ts(o,c.key));else{let g=c.data.field(p.field);if(bf(g))throw new k(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=p.field.canonicalString();throw new k(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new Rn(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ds(t.firestore);return function(o,a,c,l,h,p){let g=o.explicitOrderBy;if(h.length>g.length)throw new k(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let D=0;D<h.length;D++){let M=h[D];if(g[D].field.isKeyField()){if(typeof M!="string")throw new k(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!y_(o)&&M.indexOf("/")!==-1)throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let T=o.path.child(me.fromString(M));if(!$.isDocumentKey(T))throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);let P=new $(T);y.push(ts(a,P))}else{let T=$M(c,l,M);y.push(T)}}return new Rn(y,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function tS(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new k(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y_(e)&&n.indexOf("/")!==-1)throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(me.fromString(n));if(!$.isDocumentKey(r))throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ts(t,new $(r))}if(n instanceof qe)return ts(t,n._key);throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(n)}.`)}function nS(t,e){if(!Array.isArray(t)||t.length===0)throw new k(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KM(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Cf=class{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ls(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Re(o.doubleValue));return new dc(s)}convertGeoPoint(e){return new lc(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=g_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){let n=ar(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=me.fromString(e);K(JS(r));let i=new jo(r.get(1),r.get(3)),s=new $(r.popFirst(5));return i.isEqual(n)||Ue(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Pf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var c_=class extends Cf{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};var or=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ui=class extends us{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Fo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Nf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Fo=class extends ui{data(e={}){return super.data(e)}},ci=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fo(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Fo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Fo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:t$(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function t$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function n$(t,e){return t instanceof ui&&e instanceof ui?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ci&&e instanceof ci&&t._firestore===e._firestore&&kM(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function r$(t){t=_e(t,qe);let e=_e(t.firestore,Ne);return AM(dt(e),t._key).then(n=>G_(e,t,n))}var dr=class extends Cf{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};function i$(t){t=_e(t,qe);let e=_e(t.firestore,Ne),n=dt(e),r=new dr(e);return RB(n,t._key).then(i=>new ui(e,r,t._key,i,new or(i!==null&&i.hasLocalMutations,!0),t.converter))}function s$(t){t=_e(t,qe);let e=_e(t.firestore,Ne);return AM(dt(e),t._key,{source:"server"}).then(n=>G_(e,t,n))}function o$(t){t=_e(t,lt);let e=_e(t.firestore,Ne),n=dt(e),r=new dr(e);return GM(t._query),SM(n,t._query).then(i=>new ci(e,r,t,i))}function a$(t){t=_e(t,lt);let e=_e(t.firestore,Ne),n=dt(e),r=new dr(e);return NB(n,t._query).then(i=>new ci(e,r,t,i))}function u$(t){t=_e(t,lt);let e=_e(t.firestore,Ne),n=dt(e),r=new dr(e);return SM(n,t._query,{source:"server"}).then(i=>new ci(e,r,t,i))}function c$(t,e,n){t=_e(t,qe);let r=_e(t.firestore,Ne),i=Pf(t.converter,e,n);return Of(r,[Rf(ds(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ve.none())])}function l$(t,e,n,...r){t=_e(t,qe);let i=_e(t.firestore,Ne),s=ds(i),o;return o=typeof(e=Je(e))=="string"||e instanceof ai?U_(s,"updateDoc",t._key,e,n,r):j_(s,"updateDoc",t._key,e),Of(i,[o.toMutation(t._key,Ve.exists(!0))])}function d$(t){return Of(_e(t.firestore,Ne),[new si(t._key,Ve.none())])}function QM(t,e){let n=_e(t.firestore,Ne),r=PM(t),i=Pf(t.converter,e);return Of(n,[Rf(ds(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ve.exists(!1))]).then(()=>r)}function H_(t,...e){var n,r,i;t=Je(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Zw(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Zw(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(t instanceof qe)l=_e(t.firestore,Ne),h=na(t._key.path),c={next:p=>{e[o]&&e[o](G_(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=_e(t,lt);l=_e(p.firestore,Ne),h=p._query;let g=new dr(l);c={next:y=>{e[o]&&e[o](new ci(l,g,p,y))},error:e[o+1],complete:e[o+2]},GM(t._query)}return function(g,y,D,M){let T=new Jo(M),P=new ac(y,T,D);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return A_(yield Xo(g),P)})),()=>{T.za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return S_(yield Xo(g),P)}))}}(dt(l),h,a,c)}function h$(t,e){return PB(dt(t=_e(t,Ne)),Zw(e)?e:{next:e})}function Of(t,e){return function(r,i){let s=new Ye;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return hB(yield V_(r),i,s)})),s.promise}(dt(t),e)}function G_(t,e,n){let r=n.docs.get(e._key),i=new dr(t);return new ui(t,i,e._key,r,new or(n.hasPendingWrites,n.fromCache),e.converter)}var f$={maxAttempts:5};var rS=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ds(e)}set(e,n,r){this._verifyNotCommitted();let i=Yr(e,this._firestore),s=Pf(i.converter,n,r),o=Rf(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ve.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Yr(e,this._firestore),o;return o=typeof(n=Je(n))=="string"||n instanceof ai?U_(this._dataReader,"WriteBatch.update",s._key,n,r,i):j_(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ve.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Yr(e,this._firestore);return this._mutations=this._mutations.concat(new si(n._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Yr(t,e){if((t=Je(t)).firestore!==e)throw new k(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var l_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ds(n)}get(n){let r=Yr(n,this._firestore),i=new c_(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return q();let o=s[0];if(o.isFoundDocument())return new us(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new us(this._firestore,i,r._key,null,r.converter);throw q()})}set(n,r,i){let s=Yr(n,this._firestore),o=Pf(s.converter,r,i),a=Rf(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){let o=Yr(n,this._firestore),a;return a=typeof(r=Je(r))=="string"||r instanceof ai?U_(this._dataReader,"Transaction.update",o._key,r,i,s):j_(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){let r=Yr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Yr(e,this._firestore),r=new dr(this._firestore);return super.get(e).then(i=>new ui(this._firestore,r,n._key,i._document,new or(!1,!1),n.converter))}};function p$(t,e,n){t=_e(t,Ne);let r=Object.assign(Object.assign({},f$),n);return function(s){if(s.maxAttempts<1)throw new k(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Ye;return s.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield SB(s);new Ww(s.asyncQueue,l,a,o,c).ru()})),c.promise}(dt(t),i=>e(new l_(t,i)),r)}function g$(){return new hc("deleteField")}function m$(){return new t_("serverTimestamp")}function y$(...t){return new n_("arrayUnion",t)}function v$(...t){return new r_("arrayRemove",t)}function w$(t){return new i_("increment",t)}(function(e,n=!0){(function(i){ta=i})(uE),oE(new iE("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ne(new fv(r.getProvider("auth-internal")),new yv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ot(tA,"4.7.1",e),Ot(tA,"4.7.1","esm2017")})();var kf=function(){return kf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kf.apply(this,arguments)};var I$={includeMetadataChanges:!1};function YM(t,e){return e===void 0&&(e=I$),new le(function(n){var r=H_(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function ZM(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:kf(kf({},r),(n={},n[e.idField]=t.id,n))}function JM(t){return YM(t,{includeMetadataChanges:!0}).pipe(te(function(e){return e.docs}))}function XM(t,e){return e===void 0&&(e={}),JM(t).pipe(te(function(n){return n.map(function(r){return ZM(r,e)})}))}var fs=class{constructor(e){return e}},ex="firestore",W_=class{constructor(){return Eu(ex)}};var K_=new G("angularfire2.firestore-instances");function E$(t,e){let n=nh(ex,t,e);return n&&new fs(n)}function D$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fs(r)}}var C$={provide:W_,deps:[[new ut,K_]]},b$={provide:fs,useFactory:E$,deps:[[new ut,K_],nr]};function v7(t,...e){return Ot("angularfire",qi.full,"fst"),Ht([b$,C$,{provide:K_,useFactory:D$(t),multi:!0,deps:[we,rt,go,zi,[new ut,Du],[new ut,po],...e]}])}var tx=on(XM,!0);var Q_=on(QM,!0);var Ff=on(NM,!0);var w7=on(FM,!0);var Vf=class t{userSource=new et(null);currentUser=this.userSource.asObservable();user="";constructor(){}setUser(e){this.userSource.next(e),this.user=e}getUser(){return this.user}getUserNow(){return this.currentUser}static \u0275fac=function(n){return new(n||t)};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};var nx=class t{constructor(e,n,r){this.firestore=e;this.auth=n;this.dataservice=r}sub;loginsCollection=[];useractual;newMessage="";nameGame="";puntosJugador=0;jugador="";getData(e){let n=Ff(this.firestore,e),r=q_(n,z_("fecha","desc"));return tx(r)}sendPuntuaje(e,n,r){console.log(e);let i=Ff(this.firestore,e),a={fecha:new Date().toLocaleString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),juego:e,puntos:n,nombre:r};Q_(i,a).then(()=>{console.log("Documento agregado con \xE9xito")}).catch(c=>{console.error("Error al agregar documento: ",c)})}sendPuntuajeWally(e,n,r,i){console.log(e);let s=Ff(this.firestore,e),c={fecha:new Date().toLocaleString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),juego:e,puntos:n,tiempo:r,nombre:i};Q_(s,c).then(()=>{console.log("Documento agregado con \xE9xito")}).catch(l=>{console.error("Error al agregar documento: ",l)})}static \u0275fac=function(n){return new(n||t)(Y(fs),Y(Hi),Y(Vf))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})};export{le as a,Le as b,xp as c,yr as d,vr as e,Ce as f,J as g,te as h,cR as i,Dt as j,HE as k,dn as l,GE as m,vl as n,hR as o,wl as p,at as q,fR as r,z as s,wn as t,G as u,Y as v,F as w,KD as x,_n as y,I3 as z,E3 as A,Pe as B,we as C,Kt as D,D3 as E,C3 as F,b3 as G,ne as H,OO as I,GO as J,Fb as K,Vb as L,Om as M,ok as N,ak as O,M3 as P,Qn as Q,x3 as R,fk as S,R3 as T,pk as U,gk as V,N3 as W,yk as X,Ub as Y,vk as Z,P3 as _,wk as $,$b as aa,O3 as ba,k3 as ca,F3 as da,a8 as ea,u8 as fa,c8 as ga,l8 as ha,Jk as ia,Md as ja,cF as ka,C8 as la,Y8 as ma,EV as na,Br as oa,m5 as pa,y5 as qa,Vf as ra,po as sa,go as ta,KL as ua,L5 as va,j5 as wa,Hi as xa,N6 as ya,P6 as za,O6 as Aa,k6 as Ba,i2 as Ca,R0 as Da,I0 as Ea,X6 as Fa,eW as Ga,wo as Ha,S2 as Ia,Mu as Ja,R2 as Ka,nW as La,P2 as Ma,F2 as Na,L2 as Oa,U2 as Pa,q2 as Qa,rW as Ra,iW as Sa,sW as Ta,z2 as Ua,Mn as Va,wW as Wa,k as Xa,Be as Ya,tt as Za,$ as _a,IW as $a,jo as ab,FB as bb,_e as cb,RM as db,qe as eb,NM as fb,VB as gb,PM as hb,OM as ib,kM as jb,CW as kb,dt as lb,LB as mb,jB as nb,UB as ob,BB as pb,$B as qb,qB as rb,zB as sb,HB as tb,ea as ub,ai as vb,lc as wb,q_ as xb,KB as yb,z_ as zb,QB as Ab,YB as Bb,ZB as Cb,JB as Db,XB as Eb,e$ as Fb,Cf as Gb,ui as Hb,Fo as Ib,ci as Jb,n$ as Kb,r$ as Lb,i$ as Mb,s$ as Nb,o$ as Ob,a$ as Pb,u$ as Qb,c$ as Rb,l$ as Sb,d$ as Tb,QM as Ub,H_ as Vb,h$ as Wb,Of as Xb,rS as Yb,p$ as Zb,g$ as _b,m$ as $b,y$ as ac,v$ as bc,w$ as cc,fs as dc,v7 as ec,tx as fc,Q_ as gc,Ff as hc,w7 as ic,nx as jc};
