import{A as pt,Aa as Sd,B as Mn,C as ud,D as ld,E as hd,F as dd,G as sn,H as on,I as xt,J as _a,K as fd,M as pd,N as ee,O as G,P as ya,Q as jr,R as an,S as $e,T as pe,U as va,V as O,W as V,X as Te,Y as md,Z as re,_ as Je,a as xe,aa as z,b as Be,ba as Xe,c as Nt,ca as Ot,d as y,da as Vt,e as Ur,ea as Mt,f as nd,fa as ts,g as rd,ga as Ce,h as id,ha as gd,i as sd,ia as wa,j as ha,ja as _d,k as da,ka as yd,l as fa,la as vd,m as pa,ma as wd,n as Lr,na as Id,o as od,oa as qr,p as ad,pa as Ft,q as Zi,qa as Ia,r as es,ra as Ed,s as Br,sa as bd,t as ma,ta as Ut,u as je,ua as Ze,v as cd,wa as Td,x as qe,xa as Cd,y as be,ya as Ad,z as ga,za as et}from"./chunk-ZHA4UALR.js";var Ve=class n{userSource=new rd(null);currentUser=this.userSource.asObservable();user="";constructor(){}setUser(e){this.userSource.next(e),this.user=e}getUser(){return this.user}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Br({token:n,factory:n.\u0275fac,providedIn:"root"})};var ns=class n{constructor(e,t){this.router=e;this.authService=t;this.authService.currentUser.subscribe(r=>{this.user=r})}user;showButton=!0;dato="";datoPadre="";recibirDato(e){this.dato=e}juego1(){this.router.navigate(["/juegos/juego-1"])}static \u0275fac=function(t){return new(t||n)(G(et),G(Ve))};static \u0275cmp=be({type:n,selectors:[["app-home"]],standalone:!0,features:[Ce],decls:4,vars:0,consts:[[1,"contair"],[1,"card","card1",3,"click"],[1,"card","card2",3,"click"],[1,"card","card3",3,"click"]],template:function(t,r){t&1&&(O(0,"div",0)(1,"div",1),re("click",function(){return r.juego1()}),V(),O(2,"div",2),re("click",function(){return r.juego1()}),V(),O(3,"div",3),re("click",function(){return r.juego1()}),V()())},dependencies:[Ze],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f8f8f8;padding:15px}.navbar-brand[_ngcontent-%COMP%]{color:#000;font-size:1.5rem;font-weight:700}.navbar-links[_ngcontent-%COMP%]{list-style:none;display:flex;gap:20px}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}.navbar-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-size:1.1rem}.navbar-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.contair[_ngcontent-%COMP%]{width:100%;height:90vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(to bottom,#0f0c29,#302b63,#b06dbd)}.main-card[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;padding:20px;background-color:#f5f5f5;box-shadow:0 4px 8px #0003;border-radius:10px;text-align:center}.card[_ngcontent-%COMP%]{width:300px;height:350px;border:none;border-radius:10px;background-blend-mode:normal,normal,screen,overlay,normal;box-shadow:0 0 10px 1px #000;transition:transform .3s ease;margin:50px}.card[_ngcontent-%COMP%]:hover{transform:scale(1.1);cursor:pointer}.card1[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/ahorcado.jpg?alt=media&token=0b412d9c-c996-4ecb-9e33-4f9876ad2422);background-size:contain;background-color:#f8f8f8;background-repeat:no-repeat}.card2[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/cartas.jpg?alt=media&token=be839aab-2780-4586-84df-72148a8e6312);background-size:cover;background-color:#f8f8f8;background-repeat:no-repeat}@media (max-width: 1000px){.navbar[_ngcontent-%COMP%]{justify-content:center}.contair[_ngcontent-%COMP%]{height:90vh}.main-card[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.card[_ngcontent-%COMP%]{width:100%;height:300px;margin:10px}}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{justify-content:center}.contair[_ngcontent-%COMP%]{height:90vh}.main-card[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.card[_ngcontent-%COMP%]{width:100%;height:200px;margin:10px}}']})};var Rd=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},c_=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],u=n[t++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Dd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,u=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=s>>2,w=(s&3)<<4|u>>4,A=(u&15)<<2|d>>6,P=d&63;h||(P=64,a||(A=64)),r.push(t[p],t[w],t[A],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):c_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let w=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||d==null||w==null)throw new ba;let A=s<<2|u>>4;if(r.push(A),d!==64){let P=u<<4&240|d>>2;if(r.push(P),w!==64){let N=d<<6&192|w;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ba=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},u_=function(n){let e=Rd(n);return Dd.encodeByteArray(e,!0)},zr=function(n){return u_(n).replace(/\./g,"")},Ca=function(n){try{return Dd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var h_=()=>l_().__FIREBASE_DEFAULTS__,d_=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},f_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ca(n[1]);return e&&JSON.parse(e)},ss=()=>{try{return h_()||d_()||f_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Aa=n=>{var e,t;return(t=(e=ss())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},kd=n=>{let e=Aa(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Sa=()=>{var n;return(n=ss())===null||n===void 0?void 0:n.config},Pa=n=>{var e;return(e=ss())===null||e===void 0?void 0:e[`_${n}`]};var is=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Nd(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zr(JSON.stringify(t)),zr(JSON.stringify(a)),""].join(".")}function me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function p_(){var n;let e=(n=ss())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Od(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Vd(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Md(){let n=me();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Fd(){return!p_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ra(){try{return typeof indexedDB=="object"}catch{return!1}}function Ud(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var m_="FirebaseError",Me=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=m_,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mt.prototype.create)}},mt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?g_(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Me(i,u,r)}};function g_(n,e){return n.replace(__,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var __=/\{\$([^}]+)}/g;function Ld(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function un(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(Pd(s)&&Pd(a)){if(!un(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Pd(n){return n!==null&&typeof n=="object"}function $r(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fn(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Un(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Bd(n,e){let t=new Ta(n,e);return t.subscribe.bind(t)}var Ta=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");y_(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ea),i.error===void 0&&(i.error=Ea),i.complete===void 0&&(i.complete=Ea);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function y_(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ea(){}var tb=4*60*60*1e3;function Ae(n){return n&&n._delegate?n._delegate:n}var Ge=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ln="[DEFAULT]";var Da=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new is;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w_(e))try{this.getOrInitializeService({instanceIdentifier:ln})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ln){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ln){return this.instances.has(e)}getOptions(e=ln){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:v_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ln){return this.component?this.component.multipleInstances?e:ln:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function v_(n){return n===ln?void 0:n}function w_(n){return n.instantiationMode==="EAGER"}var os=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Da(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var I_=[],W=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(W||{}),E_={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},b_=W.INFO,T_={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},C_=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=T_[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Lt=class{constructor(e){this.name=e,this._logLevel=b_,this._logHandler=C_,this._userLogHandler=null,I_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}};var A_=(n,e)=>e.some(t=>n instanceof t),jd,qd;function S_(){return jd||(jd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P_(){return qd||(qd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Gd=new WeakMap,Na=new WeakMap,zd=new WeakMap,ka=new WeakMap,Oa=new WeakMap;function R_(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(nt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Gd.set(t,n)}).catch(()=>{}),Oa.set(e,n),e}function D_(n){if(Na.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Na.set(n,e)}var xa={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Na.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $d(n){xa=n(xa)}function k_(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(as(this),e,...t);return zd.set(r,e.sort?e.sort():[e]),nt(r)}:P_().includes(n)?function(...e){return n.apply(as(this),e),nt(Gd.get(this))}:function(...e){return nt(n.apply(as(this),e))}}function N_(n){return typeof n=="function"?k_(n):(n instanceof IDBTransaction&&D_(n),A_(n,S_())?new Proxy(n,xa):n)}function nt(n){if(n instanceof IDBRequest)return R_(n);if(ka.has(n))return ka.get(n);let e=N_(n);return e!==n&&(ka.set(n,e),Oa.set(e,n)),e}var as=n=>Oa.get(n);function Kd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),u=nt(a);return r&&a.addEventListener("upgradeneeded",h=>{r(nt(a.result),h.oldVersion,h.newVersion,nt(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}var x_=["get","getKey","getAll","getAllKeys","count"],O_=["put","add","delete","clear"],Va=new Map;function Wd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Va.get(e))return Va.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=O_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||x_.includes(t)))return;let s=function(a,...u){return y(this,null,function*(){let h=this.transaction(a,i?"readwrite":"readonly"),d=h.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[t](...u),i&&h.done]))[0]})};return Va.set(e,s),s}$d(n=>Be(xe({},n),{get:(e,t,r)=>Wd(e,t)||n.get(e,t,r),has:(e,t)=>!!Wd(e,t)||n.has(e,t)}));var Fa=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(V_(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function V_(n){let e=n.getComponent();return e?.type==="VERSION"}var Ua="@firebase/app",Hd="0.10.10";var gt=new Lt("@firebase/app"),M_="@firebase/app-compat",F_="@firebase/analytics-compat",U_="@firebase/analytics",L_="@firebase/app-check-compat",B_="@firebase/app-check",j_="@firebase/auth",q_="@firebase/auth-compat",G_="@firebase/database",z_="@firebase/database-compat",$_="@firebase/functions",W_="@firebase/functions-compat",K_="@firebase/installations",H_="@firebase/installations-compat",Q_="@firebase/messaging",Y_="@firebase/messaging-compat",J_="@firebase/performance",X_="@firebase/performance-compat",Z_="@firebase/remote-config",ey="@firebase/remote-config-compat",ty="@firebase/storage",ny="@firebase/storage-compat",ry="@firebase/firestore",iy="@firebase/vertexai-preview",sy="@firebase/firestore-compat",oy="firebase",ay="10.13.1";var La="[DEFAULT]",cy={[Ua]:"fire-core",[M_]:"fire-core-compat",[U_]:"fire-analytics",[F_]:"fire-analytics-compat",[B_]:"fire-app-check",[L_]:"fire-app-check-compat",[j_]:"fire-auth",[q_]:"fire-auth-compat",[G_]:"fire-rtdb",[z_]:"fire-rtdb-compat",[$_]:"fire-fn",[W_]:"fire-fn-compat",[K_]:"fire-iid",[H_]:"fire-iid-compat",[Q_]:"fire-fcm",[Y_]:"fire-fcm-compat",[J_]:"fire-perf",[X_]:"fire-perf-compat",[Z_]:"fire-rc",[ey]:"fire-rc-compat",[ty]:"fire-gcs",[ny]:"fire-gcs-compat",[ry]:"fire-fst",[sy]:"fire-fst-compat",[iy]:"fire-vertex","fire-js":"fire-js",[oy]:"fire-js-all"};var Wr=new Map,uy=new Map,Ba=new Map;function Qd(n,e){try{n.container.addComponent(e)}catch(t){gt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jt(n){let e=n.name;if(Ba.has(e))return gt.debug(`There were multiple attempts to register component ${e}.`),!1;Ba.set(e,n);for(let t of Wr.values())Qd(t,n);for(let t of uy.values())Qd(t,n);return!0}function Hr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function We(n){return n.settings!==void 0}var ly={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bt=new mt("app","Firebase",ly);var ja=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bt.create("app-deleted",{appName:this._name})}};var qt=ay;function za(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:La,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bt.create("bad-app-name",{appName:String(i)});if(t||(t=Sa()),!t)throw Bt.create("no-options");let s=Wr.get(i);if(s){if(un(t,s.options)&&un(r,s.config))return s;throw Bt.create("duplicate-app",{appName:i})}let a=new os(i);for(let h of Ba.values())a.addComponent(h);let u=new ja(t,r,a);return Wr.set(i,u),u}function Ln(n=La){let e=Wr.get(n);if(!e&&n===La&&Sa())return za();if(!e)throw Bt.create("no-app",{appName:n});return e}function cs(){return Array.from(Wr.values())}function fe(n,e,t){var r;let i=(r=cy[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gt.warn(u.join(" "));return}jt(new Ge(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var hy="firebase-heartbeat-database",dy=1,Kr="firebase-heartbeat-store",Ma=null;function Zd(){return Ma||(Ma=Kd(hy,dy,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Kr)}catch(t){console.warn(t)}}}}).catch(n=>{throw Bt.create("idb-open",{originalErrorMessage:n.message})})),Ma}function fy(n){return y(this,null,function*(){try{let t=(yield Zd()).transaction(Kr),r=yield t.objectStore(Kr).get(ef(n));return yield t.done,r}catch(e){if(e instanceof Me)gt.warn(e.message);else{let t=Bt.create("idb-get",{originalErrorMessage:e?.message});gt.warn(t.message)}}})}function Yd(n,e){return y(this,null,function*(){try{let r=(yield Zd()).transaction(Kr,"readwrite");yield r.objectStore(Kr).put(e,ef(n)),yield r.done}catch(t){if(t instanceof Me)gt.warn(t.message);else{let r=Bt.create("idb-set",{originalErrorMessage:t?.message});gt.warn(r.message)}}})}function ef(n){return`${n.name}!${n.options.appId}`}var py=1024,my=30*24*60*60*1e3,qa=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ga(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Jd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let u=new Date(a.date).valueOf();return Date.now()-u<=my}),this._storage.overwrite(this._heartbeatsCache))}catch(r){gt.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Jd(),{heartbeatsToSend:r,unsentEntries:i}=gy(this._heartbeatsCache.heartbeats),s=zr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return gt.warn(t),""}})}};function Jd(){return new Date().toISOString().substring(0,10)}function gy(n,e=py){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Xd(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Xd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ga=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return Ra()?Ud().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield fy(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Yd(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Yd(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Xd(n){return zr(JSON.stringify({version:2,heartbeats:n})).length}function _y(n){jt(new Ge("platform-logger",e=>new Fa(e),"PRIVATE")),jt(new Ge("heartbeat",e=>new qa(e),"PRIVATE")),fe(Ua,Hd,n),fe(Ua,Hd,"esm2017"),fe("fire-js","")}_y("");var yy="firebase",vy="10.13.1";fe(yy,vy,"app");var dn=new wa("ANGULARFIRE2_VERSION");function ls(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Qr=(n,e)=>{let t=e?[e]:cs(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},jn=class{constructor(){return Qr(wy)}},wy="app-check";function Bn(){}var us=class{zone;delegate;constructor(e,t=sd){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},$a=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bn,{},Bn,Bn)),t.pipe(ad({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},qn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new us(Zone.current)),this.insideAngular=t.run(()=>new us(Zone.current,id)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(cd(xt))};static \u0275prov=Br({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hs(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Iy(n){return hs().ngZone.runOutsideAngular(()=>n())}function hn(n){return hs().ngZone.run(()=>n())}function Ey(n){return by(hs())(n)}function by(n){return function(t){return t=t.lift(new $a(n.ngZone)),t.pipe(fa(n.outsideAngular),da(n.insideAngular))}}var Ty=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),hn(()=>n.apply(void 0,r))},Ke=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=hn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bn,{},Bn,Bn))),r[s]=Ty(r[s],t));let i=Iy(()=>n.apply(this,r));if(!e)if(i instanceof Ur){let s=hs();return i.pipe(fa(s.outsideAngular),da(s.insideAngular))}else return hn(()=>i);return i instanceof Ur?i.pipe(Ey):i instanceof Promise?hn(()=>new Promise((s,a)=>i.then(u=>hn(()=>s(u)),u=>hn(()=>a(u))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:hn(()=>i)};var _t=class{constructor(e){return e}},fn=class{constructor(){return cs()}};function Cy(n){return n&&n.length===1?n[0]:new _t(Ln())}var Wa=new je("angularfire2._apps"),Ay={provide:_t,useFactory:Cy,deps:[[new qe,Wa]]},Sy={provide:fn,deps:[[new qe,Wa]]};function Py(n){return(e,t)=>{let r=t.get(fd);fe("angularfire",dn.full,"core"),fe("angularfire",dn.full,"app"),fe("angular",_d.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new _t(i)}}function tf(n,...e){return Mn([Ay,Sy,{provide:Wa,useFactory:Py(n),multi:!0,deps:[xt,sn,qn,...e]}])}var nf=Ke(za,!0);function wf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var If=wf,Ef=new mt("auth","Firebase",wf());var _s=new Lt("@firebase/auth");function Ry(n,...e){_s.logLevel<=W.WARN&&_s.warn(`Auth (${qt}): ${n}`,...e)}function fs(n,...e){_s.logLevel<=W.ERROR&&_s.error(`Auth (${qt}): ${n}`,...e)}function it(n,...e){throw mc(n,...e)}function pn(n,...e){return mc(n,...e)}function bf(n,e,t){let r=Object.assign(Object.assign({},If()),{[e]:t});return new mt("auth","Firebase",r).create(e,{appName:n.name})}function wt(n){return bf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mc(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ef.create(n,...e)}function L(n,e,...t){if(!n)throw mc(e,...t)}function yt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw fs(e),new Error(e)}function zt(n,e){n||yt(e)}function Ya(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Dy(){return rf()==="http:"||rf()==="https:"}function rf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function ky(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Dy()||Od()||"connection"in navigator)?navigator.onLine:!0}function Ny(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var mn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,zt(t>e,"Short delay should be less than long delay!"),this.isMobile=xd()||Vd()}get(){return ky()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gc(n,e){zt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ys=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xy={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Oy=new mn(3e4,6e4);function $t(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Wt(s,a,u,h){return y(this,arguments,function*(n,e,t,r,i={}){return Tf(n,i,()=>y(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let w=$r(Object.assign({key:n.config.apiKey},p)).slice(1),A=yield n._getAdditionalHeaders();return A["Content-Type"]="application/json",n.languageCode&&(A["X-Firebase-Locale"]=n.languageCode),ys.fetch()(Cf(n,n.config.apiHost,t,w),Object.assign({method:e,headers:A,referrerPolicy:"no-referrer"},d))}))})}function Tf(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},xy),e);try{let i=new Ja(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw ds(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let u=s.ok?a.errorMessage:a.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ds(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw ds(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw ds(n,"user-disabled",a);let p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bf(n,p,d);it(n,p)}}catch(i){if(i instanceof Me)throw i;it(n,"network-request-failed",{message:String(i)})}})}function ri(s,a,u,h){return y(this,arguments,function*(n,e,t,r,i={}){let d=yield Wt(n,e,t,r,i);return"mfaPendingCredential"in d&&it(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Cf(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?gc(n.config,i):`${n.config.apiScheme}://${i}`}function Vy(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ja=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),Oy.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ds(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=pn(n,e,r);return i.customData._tokenResponse=t,i}function sf(n){return n!==void 0&&n.enterprise!==void 0}var Xa=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Vy(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function My(n,e){return y(this,null,function*(){return Wt(n,"GET","/v2/recaptchaConfig",$t(n,e))})}function Fy(n,e){return y(this,null,function*(){return Wt(n,"POST","/v1/accounts:delete",e)})}function Af(n,e){return y(this,null,function*(){return Wt(n,"POST","/v1/accounts:lookup",e)})}function Yr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _c(n,e=!1){return y(this,null,function*(){let t=Ae(n),r=yield t.getIdToken(e),i=yc(r);L(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Yr(Ka(i.auth_time)),issuedAtTime:Yr(Ka(i.iat)),expirationTime:Yr(Ka(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ka(n){return Number(n)*1e3}function yc(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fs("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ca(t);return i?JSON.parse(i):(fs("Failed to decode base64 JWT payload"),null)}catch(i){return fs("Caught error parsing JWT payload as JSON",i?.toString()),null}}function of(n){let e=yc(n);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xr(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Me&&Uy(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Uy({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Za=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Zr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function vs(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Xr(n,Af(t,{idToken:r}));L(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Sf(s.providerUserInfo):[],u=Ly(n.providerData,a),h=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!u?.length,p=h?d:!1,w={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Zr(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,w)})}function vc(n){return y(this,null,function*(){let e=Ae(n);yield vs(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Ly(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Sf(n){return n.map(e=>{var{providerId:t}=e,r=ha(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function By(n,e){return y(this,null,function*(){let t=yield Tf(n,{},()=>y(this,null,function*(){let r=$r({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=Cf(n,i,"/v1/token",`key=${s}`),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",ys.fetch()(a,{method:"POST",headers:u,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function jy(n,e){return y(this,null,function*(){return Wt(n,"POST","/v2/accounts:revokeToken",$t(n,e))})}var Jr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):of(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){L(e.length!==0,"internal-error");let t=of(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield By(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(L(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(L(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(L(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return yt("not implemented")}};function Gt(n,e){L(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Gn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ha(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Za(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zr(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield Xr(this,this.stsTokenManager.getToken(this.auth,e));return L(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return _c(this,e)}reload(){return vc(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield vs(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(We(this.auth.app))return Promise.reject(wt(this.auth));let e=yield this.getIdToken();return yield Xr(this,Fy(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,u,h,d,p;let w=(r=t.displayName)!==null&&r!==void 0?r:void 0,A=(i=t.email)!==null&&i!==void 0?i:void 0,P=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,F=(u=t.tenantId)!==null&&u!==void 0?u:void 0,k=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,$=(d=t.createdAt)!==null&&d!==void 0?d:void 0,H=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:Q,emailVerified:ie,isAnonymous:De,providerData:Z,stsTokenManager:I}=t;L(Q&&I,e,"internal-error");let m=Jr.fromJSON(this.name,I);L(typeof Q=="string",e,"internal-error"),Gt(w,e.name),Gt(A,e.name),L(typeof ie=="boolean",e,"internal-error"),L(typeof De=="boolean",e,"internal-error"),Gt(P,e.name),Gt(N,e.name),Gt(F,e.name),Gt(k,e.name),Gt($,e.name),Gt(H,e.name);let _=new n({uid:Q,auth:e,email:A,emailVerified:ie,displayName:w,isAnonymous:De,photoURL:N,phoneNumber:P,tenantId:F,stsTokenManager:m,createdAt:$,lastLoginAt:H});return Z&&Array.isArray(Z)&&(_.providerData=Z.map(v=>Object.assign({},v))),k&&(_._redirectEventId=k),_}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new Jr;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield vs(s),s})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];L(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Sf(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,u=new Jr;u.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Zr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(h,d),h})}};var af=new Map;function vt(n){zt(n instanceof Function,"Expected a class definition");let e=af.get(n);return e?(zt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,af.set(n,e),e)}var qy=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ec=qy;function ps(n,e,t){return`firebase:${n}:${e}:${t}`}var ws=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ps(this.userKey,i.apiKey,s),this.fullPersistenceKey=ps("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Gn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(vt(ec),e,r);let i=(yield Promise.all(t.map(d=>y(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||vt(ec),a=ps(r,e.config.apiKey,e.name),u=null;for(let d of t)try{let p=yield d._get(a);if(p){let w=Gn._fromJSON(e,p);d!==s&&(u=w),s=d;break}}catch{}let h=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new n(s,e,r):(s=h[0],u&&(yield s._set(a,u.toJSON())),yield Promise.all(t.map(d=>y(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function cf(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kf(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pf(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xf(e))return"Blackberry";if(Of(e))return"Webos";if(Rf(e))return"Safari";if((e.includes("chrome/")||Df(e))&&!e.includes("edge/"))return"Chrome";if(Nf(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Pf(n=me()){return/firefox\//i.test(n)}function Rf(n=me()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Df(n=me()){return/crios\//i.test(n)}function kf(n=me()){return/iemobile/i.test(n)}function Nf(n=me()){return/android/i.test(n)}function xf(n=me()){return/blackberry/i.test(n)}function Of(n=me()){return/webos/i.test(n)}function wc(n=me()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Gy(n=me()){var e;return wc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zy(){return Md()&&document.documentMode===10}function Vf(n=me()){return wc(n)||Nf(n)||Of(n)||xf(n)||/windows phone/i.test(n)||kf(n)}function Mf(n,e=[]){let t;switch(n){case"Browser":t=cf(me());break;case"Worker":t=`${cf(me())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qt}/${r}`}var tc=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,u)=>{try{let h=e(s);a(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function $y(t){return y(this,arguments,function*(n,e={}){return Wt(n,"GET","/v2/passwordPolicy",$t(n,e))})}var Wy=6,nc=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Wy,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,u;let h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var rc=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Is(this),this.idTokenSubscription=new Is(this),this.beforeStateQueue=new tc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ef,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vt(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ws.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield Af(this,{idToken:e}),r=yield Gn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(We(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,h=yield this.tryRedirectSignIn(e);(!a||a===u)&&h?.user&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield vs(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Ny()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(We(this.app))return Promise.reject(wt(this));let t=e?Ae(e):null;return t&&L(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return We(this.app)?Promise.reject(wt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return We(this.app)?Promise.reject(wt(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(vt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield $y(this),t=new nc(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jy(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&vt(e)||this._popupRedirectResolver;L(t,this,"argument-error"),this.redirectPersistenceManager=yield ws.create(this,[vt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{let h=e.addObserver(t);return()=>{a=!0,h()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Ry(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function _n(n){return Ae(n)}var Is=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bd(t=>this.observer=t)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ps={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ky(n){Ps=n}function Ff(n){return Ps.loadJS(n)}function Hy(){return Ps.recaptchaEnterpriseScript}function Qy(){return Ps.gapiScript}function Uf(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Yy="recaptcha-enterprise",Jy="NO_RECAPTCHA",ic=class{constructor(e){this.type=Yy,this.auth=_n(e)}verify(e="verify",t=!1){return y(this,null,function*(){function r(s){return y(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,u)=>y(this,null,function*(){My(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let d=new Xa(h);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(h=>{u(h)})}))})}function i(s,a,u){let h=window.grecaptcha;sf(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(Jy)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(u=>{if(!t&&sf(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=Hy();h.length!==0&&(h+=u),Ff(h).then(()=>{i(u,s,a)}).catch(d=>{a(d)})}}).catch(u=>{a(u)})})})}};function uf(n,e,t,r=!1){return y(this,null,function*(){let i=new ic(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function sc(n,e,t,r){return y(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield uf(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>y(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield uf(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)}))})}function Ic(n,e){let t=Hr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(un(s,e??{}))return i;it(i,"already-initialized")}return t.initialize({options:e})}function Xy(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ec(n,e,t){let r=_n(n);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Lf(e),{host:a,port:u}=Zy(e),h=u===null?"":`:${u}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||ev()}function Lf(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Zy(n){let e=Lf(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:lf(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:lf(a)}}}function lf(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ev(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ei=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yt("not implemented")}_getIdTokenResponse(e){return yt("not implemented")}_linkToIdToken(e,t){return yt("not implemented")}_getReauthenticationResolver(e){return yt("not implemented")}};function tv(n,e){return y(this,null,function*(){return Wt(n,"POST","/v1/accounts:signUp",e)})}function nv(n,e){return y(this,null,function*(){return ri(n,"POST","/v1/accounts:signInWithPassword",$t(n,e))})}function rv(n,e){return y(this,null,function*(){return ri(n,"POST","/v1/accounts:signInWithEmailLink",$t(n,e))})}function iv(n,e){return y(this,null,function*(){return ri(n,"POST","/v1/accounts:signInWithEmailLink",$t(n,e))})}var ti=class n extends ei{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return y(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(e,t,"signInWithPassword",nv);case"emailLink":return rv(e,{email:this._email,oobCode:this._password});default:it(e,"internal-error")}})}_linkToIdToken(e,t){return y(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(e,r,"signUpPassword",tv);case"emailLink":return iv(e,{idToken:t,email:this._email,oobCode:this._password});default:it(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Ha(n,e){return y(this,null,function*(){return ri(n,"POST","/v1/accounts:signInWithIdp",$t(n,e))})}function sv(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ov(n){let e=Fn(Un(n)).link,t=e?Fn(Un(e)).deep_link_id:null,r=Fn(Un(n)).deep_link_id;return(r?Fn(Un(r)).link:null)||r||t||e||n}var Es=class n{constructor(e){var t,r,i,s,a,u;let h=Fn(Un(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,w=sv((i=h.mode)!==null&&i!==void 0?i:null);L(d&&p&&w,"argument-error"),this.apiKey=d,this.operation=w,this.code=p,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){let t=ov(e);try{return new n(t)}catch{return null}}};var Bf=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ti._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Es.parseLink(r);return L(i,"argument-error"),ti._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),bs=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var oc=class extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function av(n,e){return y(this,null,function*(){return ri(n,"POST","/v1/accounts:signUp",$t(n,e))})}var zn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let s=yield Gn._fromIdTokenResponse(e,r,i),a=hf(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=hf(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function hf(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ac=class n extends Me{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function jf(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(n,s,e,r):s})}function cv(n,e,t=!1){return y(this,null,function*(){let r=yield Xr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return zn._forOperation(n,"link",r)})}function uv(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(We(r.app))return Promise.reject(wt(r));let i="reauthenticate";try{let s=yield Xr(n,jf(r,i,e,n),t);L(s.idToken,r,"internal-error");let a=yc(s.idToken);L(a,r,"internal-error");let{sub:u}=a;return L(n.uid===u,r,"user-mismatch"),zn._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&it(r,"user-mismatch"),s}})}function qf(n,e,t=!1){return y(this,null,function*(){if(We(n.app))return Promise.reject(wt(n));let r="signIn",i=yield jf(n,r,e),s=yield zn._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function bc(n,e){return y(this,null,function*(){return qf(_n(n),e)})}function Gf(n){return y(this,null,function*(){let e=_n(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Tc(n,e,t){return y(this,null,function*(){if(We(n.app))return Promise.reject(wt(n));let r=_n(n),a=yield sc(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",av).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Gf(n),h}),u=yield zn._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(u.user),u})}function Cc(n,e,t){return We(n.app)?Promise.reject(wt(n)):bc(Ae(n),Bf.credential(e,t)).catch(r=>y(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Gf(n),r}))}function Ac(n,e,t,r){return Ae(n).onIdTokenChanged(e,t,r)}function Sc(n,e,t){return Ae(n).beforeAuthStateChanged(e,t)}var Ts="__sak";var Cs=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ts,"1"),this.storage.removeItem(Ts),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var lv=1e3,hv=10,dv=(()=>{class n extends Cs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vf(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);zy()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,hv):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},lv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield Nt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield Nt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield Nt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),zf=dv;var fv=(()=>{class n extends Cs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Pc=fv;function pv(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var mv=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,u=this.handlersMap[s];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let h=Array.from(u).map(p=>y(this,null,function*(){return p(r.origin,a)})),d=yield pv(h);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function $f(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var cc=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,h)=>{let d=$f("",20);i.port1.start();let p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(w){let A=w;if(A.data.eventId===d)switch(A.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(A.data.response);break;default:clearTimeout(p),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function rt(){return window}function gv(n){rt().location.href=n}function Wf(){return typeof rt().WorkerGlobalScope<"u"&&typeof rt().importScripts=="function"}function _v(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function yv(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vv(){return Wf()?self:null}var Kf="firebaseLocalStorageDb",wv=1,As="firebaseLocalStorage",Hf="fbase_key",gn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Rs(n,e){return n.transaction([As],e?"readwrite":"readonly").objectStore(As)}function Iv(){let n=indexedDB.deleteDatabase(Kf);return new gn(n).toPromise()}function uc(){let n=indexedDB.open(Kf,wv);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(As,{keyPath:Hf})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(As)?e(r):(r.close(),yield Iv(),e(yield uc()))}))})}function df(n,e,t){return y(this,null,function*(){let r=Rs(n,!0).put({[Hf]:e,value:t});return new gn(r).toPromise()})}function Ev(n,e){return y(this,null,function*(){let t=Rs(n,!1).get(e),r=yield new gn(t).toPromise();return r===void 0?null:r.value})}function ff(n,e){let t=Rs(n,!0).delete(e);return new gn(t).toPromise()}var bv=800,Tv=3,Cv=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield uc(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Tv)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return Wf()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=mv._getInstance(vv()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield _v(),!this.activeServiceWorker)return;this.sender=new cc(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||yv()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield uc();return yield df(t,Ts,"1"),yield ff(t,Ts),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>df(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>Ev(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>ff(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(s=>{let a=Rs(s,!1).getAll();return new gn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),bv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Qf=Cv;var Hb=Uf("rcb"),Qb=new mn(3e4,6e4);function Av(n,e){return e?vt(e):(L(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ni=class extends ei{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Sv(n){return qf(n.auth,new ni(n),n.bypassAuthState)}function Pv(n){let{auth:e,user:t}=n;return L(t,e,"internal-error"),uv(t,new ni(n),n.bypassAuthState)}function Rv(n){return y(this,null,function*(){let{auth:e,user:t}=n;return L(t,e,"internal-error"),cv(t,new ni(n),n.bypassAuthState)})}var lc=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(h))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sv;case"linkViaPopup":case"linkViaRedirect":return Rv;case"reauthViaPopup":case"reauthViaRedirect":return Pv;default:it(this.auth,"internal-error")}}resolve(e){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Yb=new mn(2e3,1e4);var Dv="pendingRedirect",ms=new Map,hc=class n extends lc{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=ms.get(this.auth._key());if(!e){try{let r=(yield kv(this.resolver,this.auth))?yield Nt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ms.set(this.auth._key(),e)}return this.bypassAuthState||ms.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Nt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Nt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function kv(n,e){return y(this,null,function*(){let t=Ov(e),r=xv(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Nv(n,e){ms.set(n._key(),e)}function xv(n){return vt(n._redirectPersistence)}function Ov(n){return ps(Dv,n.config.apiKey,n.name)}function Vv(n,e,t=!1){return y(this,null,function*(){if(We(n.app))return Promise.reject(wt(n));let r=_n(n),i=Av(r,e),a=yield new hc(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var Mv=10*60*1e3,dc=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fv(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Yf(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(pn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Mv&&this.cachedEventUids.clear(),this.cachedEventUids.has(pf(e))}saveEventToCache(e){this.cachedEventUids.add(pf(e)),this.lastProcessedEventTime=Date.now()}};function pf(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Yf({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Fv(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yf(n);default:return!1}}function Uv(t){return y(this,arguments,function*(n,e={}){return Wt(n,"GET","/v1/projects",e)})}var Lv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bv=/^https?/;function jv(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Uv(n);for(let t of e)try{if(qv(t))return}catch{}it(n,"unauthorized-domain")})}function qv(n){let e=Ya(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Bv.test(t))return!1;if(Lv.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Gv=new mn(3e4,6e4);function mf(){let n=rt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zv(n){return new Promise((e,t)=>{var r,i,s;function a(){mf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mf(),t(pn(n,"network-request-failed"))},timeout:Gv.get()})}if(!((i=(r=rt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rt().gapi)===null||s===void 0)&&s.load)a();else{let u=Uf("iframefcb");return rt()[u]=()=>{gapi.load?a():t(pn(n,"network-request-failed"))},Ff(`${Qy()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw gs=null,e})}var gs=null;function $v(n){return gs=gs||zv(n),gs}var Wv=new mn(5e3,15e3),Kv="__/auth/iframe",Hv="emulator/auth/iframe",Qv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jv(n){let e=n.config;L(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?gc(e,Hv):`https://${n.config.authDomain}/${Kv}`,r={apiKey:e.apiKey,appName:n.name,v:qt},i=Yv.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${$r(r).slice(1)}`}function Xv(n){return y(this,null,function*(){let e=yield $v(n),t=rt().gapi;return L(t,n,"internal-error"),e.open({where:document.body,url:Jv(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qv,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=pn(n,"network-request-failed"),u=rt().setTimeout(()=>{s(a)},Wv.get());function h(){rt().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{s(a)})})))})}var Zv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e0=500,t0=600,n0="_blank",r0="http://localhost",Ss=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function i0(n,e,t,r=e0,i=t0){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",h=Object.assign(Object.assign({},Zv),{width:r.toString(),height:i.toString(),top:s,left:a}),d=me().toLowerCase();t&&(u=Df(d)?n0:t),Pf(d)&&(e=e||r0,h.scrollbars="yes");let p=Object.entries(h).reduce((A,[P,N])=>`${A}${P}=${N},`,"");if(Gy(d)&&u!=="_self")return s0(e||"",u),new Ss(null);let w=window.open(e||"",u,p);L(w,n,"popup-blocked");try{w.focus()}catch{}return new Ss(w)}function s0(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var o0="__/auth/handler",a0="emulator/auth/handler",c0=encodeURIComponent("fac");function gf(n,e,t,r,i,s){return y(this,null,function*(){L(n.config.authDomain,n,"auth-domain-config-required"),L(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qt,eventId:i};if(e instanceof bs){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Ld(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,w]of Object.entries(s||{}))a[p]=w}if(e instanceof oc){let p=e.getScopes().filter(w=>w!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let p of Object.keys(u))u[p]===void 0&&delete u[p];let h=yield n._getAppCheckToken(),d=h?`#${c0}=${encodeURIComponent(h)}`:"";return`${u0(n)}?${$r(u).slice(1)}${d}`})}function u0({config:n}){return n.emulator?gc(n,a0):`https://${n.authDomain}/${o0}`}var Qa="webStorageSupport",fc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pc,this._completeRedirectFn=Vv,this._overrideRedirectResult=Nv}_openPopup(e,t,r,i){return y(this,null,function*(){var s;zt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield gf(e,t,r,Ya(),i);return i0(e,a,$f())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield gf(e,t,r,Ya(),i);return gv(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(zt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield Xv(e),r=new dc(e);return t.register("authEvent",i=>(L(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qa,{type:Qa},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[Qa];a!==void 0&&t(!!a),it(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vf()||Rf()||wc()}},Jf=fc;var _f="@firebase/auth",yf="1.7.8";var pc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function l0(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h0(n){jt(new Ge("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;L(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mf(n)},d=new rc(r,i,s,h);return Xy(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jt(new Ge("auth-internal",e=>{let t=_n(e.getProvider("auth").getImmediate());return(r=>new pc(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fe(_f,yf,l0(n)),fe(_f,yf,"esm2017")}var d0=5*60,f0=Pa("authIdTokenMaxAge")||d0,vf=null,p0=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>f0)return;let i=t?.token;vf!==i&&(vf=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Rc(n=Ln()){let e=Hr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ic(n,{popupRedirectResolver:Jf,persistence:[Qf,zf,Pc]}),r=Pa("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=p0(s.toString());Sc(t,a,()=>a(t.currentUser)),Ac(t,u=>a(u))}}let i=Aa("auth");return i&&Ec(t,`http://${i}`),t}function m0(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Ky({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=pn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",m0().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h0("Browser");var Xf="auth",Fe=class{constructor(e){return e}},ii=class{constructor(){return Qr(Xf)}};var Dc=new je("angularfire2.auth-instances");function ow(n,e){let t=ls(Xf,n,e);return t&&new Fe(t)}function aw(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fe(r)}}var cw={provide:ii,deps:[[new qe,Dc]]},uw={provide:Fe,useFactory:ow,deps:[[new qe,Dc],_t]};function Zf(n,...e){return fe("angularfire",dn.full,"auth"),Mn([uw,cw,{provide:Dc,useFactory:aw(n),multi:!0,deps:[xt,sn,qn,fn,[new qe,jn],...e]}])}var ep=Ke(Tc,!0);var tp=Ke(Rc,!0);var np=Ke(Cc,!0);var lp=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(G(ya),G(_a))},e.\u0275dir=pt({type:e});let n=e;return n})(),lw=(()=>{let e=class e extends lp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=dd(e)))(s||e)}})(),e.\u0275dir=pt({type:e,features:[an]});let n=e;return n})(),hp=new je("");var hw={provide:hp,useExisting:es(()=>Kt),multi:!0};function dw(){let n=Ia()?Ia().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var fw=new je(""),Kt=(()=>{let e=class e extends lp{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dw())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(G(ya),G(_a),G(fw,8))},e.\u0275dir=pt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&re("input",function(u){return s._handleInput(u.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(u){return s._compositionEnd(u.target.value)})},features:[ts([hw]),an]});let n=e;return n})();var dp=new je(""),fp=new je("");function pp(n){return n!=null}function mp(n){return yd(n)?pa(n):n}function gp(n){let e={};return n.forEach(t=>{e=t!=null?xe(xe({},e),t):e}),Object.keys(e).length===0?null:e}function _p(n,e){return e.map(t=>t(n))}function pw(n){return!n.validate}function yp(n){return n.map(e=>pw(e)?e:t=>e.validate(t))}function mw(n){if(!n)return null;let e=n.filter(pp);return e.length==0?null:function(t){return gp(_p(t,e))}}function Nc(n){return n!=null?mw(yp(n)):null}function gw(n){if(!n)return null;let e=n.filter(pp);return e.length==0?null:function(t){let r=_p(t,e).map(mp);return od(r).pipe(Lr(gp))}}function xc(n){return n!=null?gw(yp(n)):null}function rp(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _w(n){return n._rawValidators}function yw(n){return n._rawAsyncValidators}function kc(n){return n?Array.isArray(n)?n:[n]:[]}function Ns(n,e){return Array.isArray(n)?n.includes(e):n===e}function ip(n,e){let t=kc(e);return kc(n).forEach(i=>{Ns(t,i)||t.push(i)}),t}function sp(n,e){return kc(e).filter(t=>!Ns(n,t))}var xs=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Nc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Kn=class extends xs{get formDirective(){return null}get path(){return null}},li=class extends xs{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Os=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},vw={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},JT=Be(xe({},vw),{"[class.ng-submitted]":"isSubmitted"}),Qn=(()=>{let e=class e extends Os{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(G(li,2))},e.\u0275dir=pt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&va("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[an]});let n=e;return n})(),Us=(()=>{let e=class e extends Os{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(G(Kn,10))},e.\u0275dir=pt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&va("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[an]});let n=e;return n})();var si="VALID",ks="INVALID",$n="PENDING",oi="DISABLED",Hn=class{},Vs=class extends Hn{constructor(e,t){super(),this.value=e,this.source=t}},ci=class extends Hn{constructor(e,t){super(),this.pristine=e,this.source=t}},ui=class extends Hn{constructor(e,t){super(),this.touched=e,this.source=t}},Wn=class extends Hn{constructor(e,t){super(),this.status=e,this.source=t}};function vp(n){return(Ls(n)?n.validators:n)||null}function ww(n){return Array.isArray(n)?Nc(n):n||null}function wp(n,e){return(Ls(e)?e.asyncValidators:n)||null}function Iw(n){return Array.isArray(n)?xc(n):n||null}function Ls(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Ew(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Zi(1e3,"");if(!r[t])throw new Zi(1001,"")}function bw(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Zi(1002,"")})}var Ms=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=qr(()=>this.statusReactive()),this.statusReactive=jr(void 0),this._pristine=qr(()=>this.pristineReactive()),this.pristineReactive=jr(!0),this._touched=qr(()=>this.touchedReactive()),this.touchedReactive=jr(!1),this._events=new nd,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ft(this.statusReactive)}set status(e){Ft(()=>this.statusReactive.set(e))}get valid(){return this.status===si}get invalid(){return this.status===ks}get pending(){return this.status==$n}get disabled(){return this.status===oi}get enabled(){return this.status!==oi}get pristine(){return Ft(this.pristineReactive)}set pristine(e){Ft(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ft(this.touchedReactive)}set touched(e){Ft(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ip(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ip(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sp(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sp(e,this._rawAsyncValidators))}hasValidator(e){return Ns(this._rawValidators,e)}hasAsyncValidator(e){return Ns(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Be(xe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ui(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ui(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Be(xe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ci(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ci(!0,r))}markAsPending(e={}){this.status=$n;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wn(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Be(xe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=oi,this.errors=null,this._forEachChild(i=>{i.disable(Be(xe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vs(this.value,r)),this._events.next(new Wn(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Be(xe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=si,this._forEachChild(r=>{r.enable(Be(xe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Be(xe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===si||this.status===$n)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vs(this.value,t)),this._events.next(new Wn(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Be(xe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oi:si}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=$n,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=mp(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Wn(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new on,this.statusChanges=new on}_calculateStatus(){return this._allControlsDisabled()?oi:this.errors?ks:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($n)?$n:this._anyControlsHaveStatus(ks)?ks:si}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ci(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ui(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ls(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ww(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Iw(this._rawAsyncValidators)}},Fs=class extends Ms{constructor(e,t,r){super(vp(t),wp(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bw(this,!0,e),Object.keys(e).forEach(r=>{Ew(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Oc=new je("CallSetDisabledState",{providedIn:"root",factory:()=>Vc}),Vc="always";function Tw(n,e){return[...e.path,n]}function Ip(n,e,t=Vc){Ep(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Aw(n,e),Pw(n,e),Sw(n,e),Cw(n,e)}function op(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Cw(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Ep(n,e){let t=_w(n);e.validator!==null?n.setValidators(rp(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=yw(n);e.asyncValidator!==null?n.setAsyncValidators(rp(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();op(e._rawValidators,i),op(e._rawAsyncValidators,i)}function Aw(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&bp(n,e)})}function Sw(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&bp(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function bp(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Pw(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Rw(n,e){n==null,Ep(n,e)}function Dw(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function kw(n){return Object.getPrototypeOf(n.constructor)===lw}function Nw(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function xw(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Kt?t=s:kw(s)?r=s:i=s}),i||r||t||null}var Ow={provide:Kn,useExisting:es(()=>hi)},ai=Promise.resolve(),hi=(()=>{let e=class e extends Kn{get submitted(){return Ft(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=qr(()=>this.submittedReactive()),this.submittedReactive=jr(!1),this._directives=new Set,this.ngSubmit=new on,this.form=new Fs({},Nc(r),xc(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){ai.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Ip(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){ai.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){ai.then(()=>{let i=this._findContainer(r.path),s=new Fs({});Rw(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){ai.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){ai.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),Nw(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(G(dp,10),G(fp,10),G(Oc,8))},e.\u0275dir=pt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&re("submit",function(u){return s.onSubmit(u)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ts([Ow]),an]});let n=e;return n})();function ap(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function cp(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Vw=class extends Ms{constructor(e=null,t,r){super(vp(t),wp(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ls(t)&&(t.nonNullable||t.initialValueIsDefault)&&(cp(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ap(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ap(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){cp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Mw={provide:li,useExisting:es(()=>yn)},up=Promise.resolve(),yn=(()=>{let e=class e extends li{constructor(r,i,s,a,u,h){super(),this._changeDetectorRef=u,this.callSetDisabledState=h,this.control=new Vw,this._registered=!1,this.name="",this.update=new on,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=xw(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Dw(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ip(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){up.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Id(i);up.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Tw(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(G(Kn,9),G(dp,10),G(fp,10),G(hp,10),G(wd,8),G(Oc,8))},e.\u0275dir=pt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ts([Mw]),an,ud]});let n=e;return n})(),Bs=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=pt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var Fw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ga({type:e}),e.\u0275inj=ma({});let n=e;return n})();var Yn=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Oc,useValue:r.callSetDisabledState??Vc}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ga({type:e}),e.\u0275inj=ma({imports:[Fw]});let n=e;return n})();var Tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cp={};var Ht,Fc;(function(){var n;function e(I,m){function _(){}_.prototype=m.prototype,I.D=m.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(v,E,T){for(var g=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)g[ht-2]=arguments[ht];return m.prototype[E].apply(v,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,m,_){_||(_=0);var v=Array(16);if(typeof m=="string")for(var E=0;16>E;++E)v[E]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(E=0;16>E;++E)v[E]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=I.g[0],_=I.g[1],E=I.g[2];var T=I.g[3],g=m+(T^_&(E^T))+v[0]+3614090360&4294967295;m=_+(g<<7&4294967295|g>>>25),g=T+(E^m&(_^E))+v[1]+3905402710&4294967295,T=m+(g<<12&4294967295|g>>>20),g=E+(_^T&(m^_))+v[2]+606105819&4294967295,E=T+(g<<17&4294967295|g>>>15),g=_+(m^E&(T^m))+v[3]+3250441966&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(T^_&(E^T))+v[4]+4118548399&4294967295,m=_+(g<<7&4294967295|g>>>25),g=T+(E^m&(_^E))+v[5]+1200080426&4294967295,T=m+(g<<12&4294967295|g>>>20),g=E+(_^T&(m^_))+v[6]+2821735955&4294967295,E=T+(g<<17&4294967295|g>>>15),g=_+(m^E&(T^m))+v[7]+4249261313&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(T^_&(E^T))+v[8]+1770035416&4294967295,m=_+(g<<7&4294967295|g>>>25),g=T+(E^m&(_^E))+v[9]+2336552879&4294967295,T=m+(g<<12&4294967295|g>>>20),g=E+(_^T&(m^_))+v[10]+4294925233&4294967295,E=T+(g<<17&4294967295|g>>>15),g=_+(m^E&(T^m))+v[11]+2304563134&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(T^_&(E^T))+v[12]+1804603682&4294967295,m=_+(g<<7&4294967295|g>>>25),g=T+(E^m&(_^E))+v[13]+4254626195&4294967295,T=m+(g<<12&4294967295|g>>>20),g=E+(_^T&(m^_))+v[14]+2792965006&4294967295,E=T+(g<<17&4294967295|g>>>15),g=_+(m^E&(T^m))+v[15]+1236535329&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(E^T&(_^E))+v[1]+4129170786&4294967295,m=_+(g<<5&4294967295|g>>>27),g=T+(_^E&(m^_))+v[6]+3225465664&4294967295,T=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(T^m))+v[11]+643717713&4294967295,E=T+(g<<14&4294967295|g>>>18),g=_+(T^m&(E^T))+v[0]+3921069994&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(E^T&(_^E))+v[5]+3593408605&4294967295,m=_+(g<<5&4294967295|g>>>27),g=T+(_^E&(m^_))+v[10]+38016083&4294967295,T=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(T^m))+v[15]+3634488961&4294967295,E=T+(g<<14&4294967295|g>>>18),g=_+(T^m&(E^T))+v[4]+3889429448&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(E^T&(_^E))+v[9]+568446438&4294967295,m=_+(g<<5&4294967295|g>>>27),g=T+(_^E&(m^_))+v[14]+3275163606&4294967295,T=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(T^m))+v[3]+4107603335&4294967295,E=T+(g<<14&4294967295|g>>>18),g=_+(T^m&(E^T))+v[8]+1163531501&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(E^T&(_^E))+v[13]+2850285829&4294967295,m=_+(g<<5&4294967295|g>>>27),g=T+(_^E&(m^_))+v[2]+4243563512&4294967295,T=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(T^m))+v[7]+1735328473&4294967295,E=T+(g<<14&4294967295|g>>>18),g=_+(T^m&(E^T))+v[12]+2368359562&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(_^E^T)+v[5]+4294588738&4294967295,m=_+(g<<4&4294967295|g>>>28),g=T+(m^_^E)+v[8]+2272392833&4294967295,T=m+(g<<11&4294967295|g>>>21),g=E+(T^m^_)+v[11]+1839030562&4294967295,E=T+(g<<16&4294967295|g>>>16),g=_+(E^T^m)+v[14]+4259657740&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(_^E^T)+v[1]+2763975236&4294967295,m=_+(g<<4&4294967295|g>>>28),g=T+(m^_^E)+v[4]+1272893353&4294967295,T=m+(g<<11&4294967295|g>>>21),g=E+(T^m^_)+v[7]+4139469664&4294967295,E=T+(g<<16&4294967295|g>>>16),g=_+(E^T^m)+v[10]+3200236656&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(_^E^T)+v[13]+681279174&4294967295,m=_+(g<<4&4294967295|g>>>28),g=T+(m^_^E)+v[0]+3936430074&4294967295,T=m+(g<<11&4294967295|g>>>21),g=E+(T^m^_)+v[3]+3572445317&4294967295,E=T+(g<<16&4294967295|g>>>16),g=_+(E^T^m)+v[6]+76029189&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(_^E^T)+v[9]+3654602809&4294967295,m=_+(g<<4&4294967295|g>>>28),g=T+(m^_^E)+v[12]+3873151461&4294967295,T=m+(g<<11&4294967295|g>>>21),g=E+(T^m^_)+v[15]+530742520&4294967295,E=T+(g<<16&4294967295|g>>>16),g=_+(E^T^m)+v[2]+3299628645&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(E^(_|~T))+v[0]+4096336452&4294967295,m=_+(g<<6&4294967295|g>>>26),g=T+(_^(m|~E))+v[7]+1126891415&4294967295,T=m+(g<<10&4294967295|g>>>22),g=E+(m^(T|~_))+v[14]+2878612391&4294967295,E=T+(g<<15&4294967295|g>>>17),g=_+(T^(E|~m))+v[5]+4237533241&4294967295,_=E+(g<<21&4294967295|g>>>11),g=m+(E^(_|~T))+v[12]+1700485571&4294967295,m=_+(g<<6&4294967295|g>>>26),g=T+(_^(m|~E))+v[3]+2399980690&4294967295,T=m+(g<<10&4294967295|g>>>22),g=E+(m^(T|~_))+v[10]+4293915773&4294967295,E=T+(g<<15&4294967295|g>>>17),g=_+(T^(E|~m))+v[1]+2240044497&4294967295,_=E+(g<<21&4294967295|g>>>11),g=m+(E^(_|~T))+v[8]+1873313359&4294967295,m=_+(g<<6&4294967295|g>>>26),g=T+(_^(m|~E))+v[15]+4264355552&4294967295,T=m+(g<<10&4294967295|g>>>22),g=E+(m^(T|~_))+v[6]+2734768916&4294967295,E=T+(g<<15&4294967295|g>>>17),g=_+(T^(E|~m))+v[13]+1309151649&4294967295,_=E+(g<<21&4294967295|g>>>11),g=m+(E^(_|~T))+v[4]+4149444226&4294967295,m=_+(g<<6&4294967295|g>>>26),g=T+(_^(m|~E))+v[11]+3174756917&4294967295,T=m+(g<<10&4294967295|g>>>22),g=E+(m^(T|~_))+v[2]+718787259&4294967295,E=T+(g<<15&4294967295|g>>>17),g=_+(T^(E|~m))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+m&4294967295,I.g[1]=I.g[1]+(E+(g<<21&4294967295|g>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,m){m===void 0&&(m=I.length);for(var _=m-this.blockSize,v=this.B,E=this.h,T=0;T<m;){if(E==0)for(;T<=_;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<m;)if(v[E++]=I.charCodeAt(T++),E==this.blockSize){i(this,v),E=0;break}}else for(;T<m;)if(v[E++]=I[T++],E==this.blockSize){i(this,v),E=0;break}}this.h=E,this.o+=m},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var m=1;m<I.length-8;++m)I[m]=0;var _=8*this.o;for(m=I.length-8;m<I.length;++m)I[m]=_&255,_/=256;for(this.u(I),I=Array(16),m=_=0;4>m;++m)for(var v=0;32>v;v+=8)I[_++]=this.g[m]>>>v&255;return I};function s(I,m){var _=u;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=m(I)}function a(I,m){this.h=m;for(var _=[],v=!0,E=I.length-1;0<=E;E--){var T=I[E]|0;v&&T==m||(_[E]=T,v=!1)}this.g=_}var u={};function h(I){return-128<=I&&128>I?s(I,function(m){return new a([m|0],0>m?-1:0)}):new a([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return w;if(0>I)return k(d(-I));for(var m=[],_=1,v=0;I>=_;v++)m[v]=I/_|0,_*=4294967296;return new a(m,0)}function p(I,m){if(I.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(I.charAt(0)=="-")return k(p(I.substring(1),m));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(m,8)),v=w,E=0;E<I.length;E+=8){var T=Math.min(8,I.length-E),g=parseInt(I.substring(E,E+T),m);8>T?(T=d(Math.pow(m,T)),v=v.j(T).add(d(g))):(v=v.j(_),v=v.add(d(g)))}return v}var w=h(0),A=h(1),P=h(16777216);n=a.prototype,n.m=function(){if(F(this))return-k(this).m();for(var I=0,m=1,_=0;_<this.g.length;_++){var v=this.i(_);I+=(0<=v?v:4294967296+v)*m,m*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(F(this))return"-"+k(this).toString(I);for(var m=d(Math.pow(I,6)),_=this,v="";;){var E=ie(_,m).g;_=$(_,E.j(m));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=E,N(_))return T+v;for(;6>T.length;)T="0"+T;v=T+v}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var m=0;m<I.g.length;m++)if(I.g[m]!=0)return!1;return!0}function F(I){return I.h==-1}n.l=function(I){return I=$(this,I),F(I)?-1:N(I)?0:1};function k(I){for(var m=I.g.length,_=[],v=0;v<m;v++)_[v]=~I.g[v];return new a(_,~I.h).add(A)}n.abs=function(){return F(this)?k(this):this},n.add=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0,E=0;E<=m;E++){var T=v+(this.i(E)&65535)+(I.i(E)&65535),g=(T>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);v=g>>>16,T&=65535,g&=65535,_[E]=g<<16|T}return new a(_,_[_.length-1]&-2147483648?-1:0)};function $(I,m){return I.add(k(m))}n.j=function(I){if(N(this)||N(I))return w;if(F(this))return F(I)?k(this).j(k(I)):k(k(this).j(I));if(F(I))return k(this.j(k(I)));if(0>this.l(P)&&0>I.l(P))return d(this.m()*I.m());for(var m=this.g.length+I.g.length,_=[],v=0;v<2*m;v++)_[v]=0;for(v=0;v<this.g.length;v++)for(var E=0;E<I.g.length;E++){var T=this.i(v)>>>16,g=this.i(v)&65535,ht=I.i(E)>>>16,vr=I.i(E)&65535;_[2*v+2*E]+=g*vr,H(_,2*v+2*E),_[2*v+2*E+1]+=T*vr,H(_,2*v+2*E+1),_[2*v+2*E+1]+=g*ht,H(_,2*v+2*E+1),_[2*v+2*E+2]+=T*ht,H(_,2*v+2*E+2)}for(v=0;v<m;v++)_[v]=_[2*v+1]<<16|_[2*v];for(v=m;v<2*m;v++)_[v]=0;return new a(_,0)};function H(I,m){for(;(I[m]&65535)!=I[m];)I[m+1]+=I[m]>>>16,I[m]&=65535,m++}function Q(I,m){this.g=I,this.h=m}function ie(I,m){if(N(m))throw Error("division by zero");if(N(I))return new Q(w,w);if(F(I))return m=ie(k(I),m),new Q(k(m.g),k(m.h));if(F(m))return m=ie(I,k(m)),new Q(k(m.g),m.h);if(30<I.g.length){if(F(I)||F(m))throw Error("slowDivide_ only works with positive integers.");for(var _=A,v=m;0>=v.l(I);)_=De(_),v=De(v);var E=Z(_,1),T=Z(v,1);for(v=Z(v,2),_=Z(_,2);!N(v);){var g=T.add(v);0>=g.l(I)&&(E=E.add(_),T=g),v=Z(v,1),_=Z(_,1)}return m=$(I,E.j(m)),new Q(E,m)}for(E=w;0<=I.l(m);){for(_=Math.max(1,Math.floor(I.m()/m.m())),v=Math.ceil(Math.log(_)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),T=d(_),g=T.j(m);F(g)||0<g.l(I);)_-=v,T=d(_),g=T.j(m);N(T)&&(T=A),E=E.add(T),I=$(I,g)}return new Q(E,I)}n.A=function(I){return ie(this,I).h},n.and=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)&I.i(v);return new a(_,this.h&I.h)},n.or=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)|I.i(v);return new a(_,this.h|I.h)},n.xor=function(I){for(var m=Math.max(this.g.length,I.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)^I.i(v);return new a(_,this.h^I.h)};function De(I){for(var m=I.g.length+1,_=[],v=0;v<m;v++)_[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(_,I.h)}function Z(I,m){var _=m>>5;m%=32;for(var v=I.g.length-_,E=[],T=0;T<v;T++)E[T]=0<m?I.i(T+_)>>>m|I.i(T+_+1)<<32-m:I.i(T+_);return new a(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Fc=Cp.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Ht=Cp.Integer=a}).apply(typeof Tp<"u"?Tp:typeof self<"u"?self:typeof window<"u"?window:{});var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},It={};var Uc,Lc,Jn,Bc,di,qs,jc,qc,Gc;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,l){return o==Array.prototype||o==Object.prototype||(o[c]=l.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof js=="object"&&js];for(var c=0;c<o.length;++c){var l=o[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=t(this);function i(o,c){if(c)e:{var l=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var b=o[f];if(!(b in l))break e;l=l[b]}o=o[o.length-1],f=l[o],c=c(f),c!=f&&c!=null&&e(l,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var l=0,f=!1,b={next:function(){if(!f&&l<o.length){var C=l++;return{value:c(C,o[C]),done:!1}}return f=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(o){return o||function(){return s(this,function(c,l){return l})}});var a=a||{},u=this||self;function h(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function d(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function p(o,c,l){return o.call.apply(o.bind,arguments)}function w(o,c,l){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,f),o.apply(c,b)}}return function(){return o.apply(c,arguments)}}function A(o,c,l){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:w,A.apply(null,arguments)}function P(o,c){var l=Array.prototype.slice.call(arguments,1);return function(){var f=l.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function N(o,c){function l(){}l.prototype=c.prototype,o.aa=c.prototype,o.prototype=new l,o.prototype.constructor=o,o.Qb=function(f,b,C){for(var D=Array(arguments.length-2),te=2;te<arguments.length;te++)D[te-2]=arguments[te];return c.prototype[b].apply(f,D)}}function F(o){let c=o.length;if(0<c){let l=Array(c);for(let f=0;f<c;f++)l[f]=o[f];return l}return[]}function k(o,c){for(let l=1;l<arguments.length;l++){let f=arguments[l];if(h(f)){let b=o.length||0,C=f.length||0;o.length=b+C;for(let D=0;D<C;D++)o[b+D]=f[D]}else o.push(f)}}class ${constructor(c,l){this.i=c,this.j=l,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function H(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=u.navigator;return o&&(o=o.userAgent)?o:""}function ie(o){return ie[" "](o),o}ie[" "]=function(){};var De=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function Z(o,c,l){for(let f in o)c.call(l,o[f],f,o)}function I(o,c){for(let l in o)c.call(void 0,o[l],l,o)}function m(o){let c={};for(let l in o)c[l]=o[l];return c}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,c){let l,f;for(let b=1;b<arguments.length;b++){f=arguments[b];for(l in f)o[l]=f[l];for(let C=0;C<_.length;C++)l=_[C],Object.prototype.hasOwnProperty.call(f,l)&&(o[l]=f[l])}}function E(o){var c=1;o=o.split(":");let l=[];for(;0<c&&o.length;)l.push(o.shift()),c--;return o.length&&l.push(o.join(":")),l}function T(o){u.setTimeout(()=>{throw o},0)}function g(){var o=Bo;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class ht{constructor(){this.h=this.g=null}add(c,l){let f=vr.get();f.set(c,l),this.h?this.h.next=f:this.g=f,this.h=f}}var vr=new $(()=>new Pg,o=>o.reset());class Pg{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let wr,Ir=!1,Bo=new ht,th=()=>{let o=u.Promise.resolve(void 0);wr=()=>{o.then(Rg)}};var Rg=()=>{for(var o;o=g();){try{o.h.call(o.g)}catch(l){T(l)}var c=vr;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}Ir=!1};function Pt(){this.s=this.s,this.C=this.C}Pt.prototype.s=!1,Pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Dg=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let l=()=>{};u.addEventListener("test",l,c),u.removeEventListener("test",l,c)}catch{}return o}();function Er(o,c){if(ve.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var l=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(De){e:{try{ie(c.nodeName);var b=!0;break e}catch{}b=!1}b||(c=null)}}else l=="mouseover"?c=o.fromElement:l=="mouseout"&&(c=o.toElement);this.relatedTarget=c,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:kg[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Er.aa.h.call(this)}}N(Er,ve);var kg={2:"touch",3:"pen",4:"mouse"};Er.prototype.h=function(){Er.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var br="closure_listenable_"+(1e6*Math.random()|0),Ng=0;function xg(o,c,l,f,b){this.listener=o,this.proxy=null,this.src=c,this.type=l,this.capture=!!f,this.ha=b,this.key=++Ng,this.da=this.fa=!1}function Mi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Fi(o){this.src=o,this.g={},this.h=0}Fi.prototype.add=function(o,c,l,f,b){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var D=qo(o,c,f,b);return-1<D?(c=o[D],l||(c.fa=!1)):(c=new xg(c,this.src,C,!!f,b),c.fa=l,o.push(c)),c};function jo(o,c){var l=c.type;if(l in o.g){var f=o.g[l],b=Array.prototype.indexOf.call(f,c,void 0),C;(C=0<=b)&&Array.prototype.splice.call(f,b,1),C&&(Mi(c),o.g[l].length==0&&(delete o.g[l],o.h--))}}function qo(o,c,l,f){for(var b=0;b<o.length;++b){var C=o[b];if(!C.da&&C.listener==c&&C.capture==!!l&&C.ha==f)return b}return-1}var Go="closure_lm_"+(1e6*Math.random()|0),zo={};function nh(o,c,l,f,b){if(f&&f.once)return ih(o,c,l,f,b);if(Array.isArray(c)){for(var C=0;C<c.length;C++)nh(o,c[C],l,f,b);return null}return l=Ho(l),o&&o[br]?o.K(c,l,d(f)?!!f.capture:!!f,b):rh(o,c,l,!1,f,b)}function rh(o,c,l,f,b,C){if(!c)throw Error("Invalid event type");var D=d(b)?!!b.capture:!!b,te=Wo(o);if(te||(o[Go]=te=new Fi(o)),l=te.add(c,l,f,D,C),l.proxy)return l;if(f=Og(),l.proxy=f,f.src=o,f.listener=l,o.addEventListener)Dg||(b=D),b===void 0&&(b=!1),o.addEventListener(c.toString(),f,b);else if(o.attachEvent)o.attachEvent(oh(c.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return l}function Og(){function o(l){return c.call(o.src,o.listener,l)}let c=Vg;return o}function ih(o,c,l,f,b){if(Array.isArray(c)){for(var C=0;C<c.length;C++)ih(o,c[C],l,f,b);return null}return l=Ho(l),o&&o[br]?o.L(c,l,d(f)?!!f.capture:!!f,b):rh(o,c,l,!0,f,b)}function sh(o,c,l,f,b){if(Array.isArray(c))for(var C=0;C<c.length;C++)sh(o,c[C],l,f,b);else f=d(f)?!!f.capture:!!f,l=Ho(l),o&&o[br]?(o=o.i,c=String(c).toString(),c in o.g&&(C=o.g[c],l=qo(C,l,f,b),-1<l&&(Mi(C[l]),Array.prototype.splice.call(C,l,1),C.length==0&&(delete o.g[c],o.h--)))):o&&(o=Wo(o))&&(c=o.g[c.toString()],o=-1,c&&(o=qo(c,l,f,b)),(l=-1<o?c[o]:null)&&$o(l))}function $o(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[br])jo(c.i,o);else{var l=o.type,f=o.proxy;c.removeEventListener?c.removeEventListener(l,f,o.capture):c.detachEvent?c.detachEvent(oh(l),f):c.addListener&&c.removeListener&&c.removeListener(f),(l=Wo(c))?(jo(l,o),l.h==0&&(l.src=null,c[Go]=null)):Mi(o)}}}function oh(o){return o in zo?zo[o]:zo[o]="on"+o}function Vg(o,c){if(o.da)o=!0;else{c=new Er(c,this);var l=o.listener,f=o.ha||o.src;o.fa&&$o(o),o=l.call(f,c)}return o}function Wo(o){return o=o[Go],o instanceof Fi?o:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ho(o){return typeof o=="function"?o:(o[Ko]||(o[Ko]=function(c){return o.handleEvent(c)}),o[Ko])}function we(){Pt.call(this),this.i=new Fi(this),this.M=this,this.F=null}N(we,Pt),we.prototype[br]=!0,we.prototype.removeEventListener=function(o,c,l,f){sh(this,o,c,l,f)};function ke(o,c){var l,f=o.F;if(f)for(l=[];f;f=f.F)l.push(f);if(o=o.M,f=c.type||c,typeof c=="string")c=new ve(c,o);else if(c instanceof ve)c.target=c.target||o;else{var b=c;c=new ve(f,o),v(c,b)}if(b=!0,l)for(var C=l.length-1;0<=C;C--){var D=c.g=l[C];b=Ui(D,f,!0,c)&&b}if(D=c.g=o,b=Ui(D,f,!0,c)&&b,b=Ui(D,f,!1,c)&&b,l)for(C=0;C<l.length;C++)D=c.g=l[C],b=Ui(D,f,!1,c)&&b}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var l=o.g[c],f=0;f<l.length;f++)Mi(l[f]);delete o.g[c],o.h--}}this.F=null},we.prototype.K=function(o,c,l,f){return this.i.add(String(o),c,!1,l,f)},we.prototype.L=function(o,c,l,f){return this.i.add(String(o),c,!0,l,f)};function Ui(o,c,l,f){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var b=!0,C=0;C<c.length;++C){var D=c[C];if(D&&!D.da&&D.capture==l){var te=D.listener,_e=D.ha||D.src;D.fa&&jo(o.i,D),b=te.call(_e,f)!==!1&&b}}return b&&!f.defaultPrevented}function ah(o,c,l){if(typeof o=="function")l&&(o=A(o,l));else if(o&&typeof o.handleEvent=="function")o=A(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:u.setTimeout(o,c||0)}function ch(o){o.g=ah(()=>{o.g=null,o.i&&(o.i=!1,ch(o))},o.l);let c=o.h;o.h=null,o.m.apply(null,c)}class Mg extends Pt{constructor(c,l){super(),this.m=c,this.l=l,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ch(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(o){Pt.call(this),this.h=o,this.g={}}N(Tr,Pt);var uh=[];function lh(o){Z(o.g,function(c,l){this.g.hasOwnProperty(l)&&$o(c)},o),o.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),lh(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qo=u.JSON.stringify,Fg=u.JSON.parse,Ug=class{stringify(o){return u.JSON.stringify(o,void 0)}parse(o){return u.JSON.parse(o,void 0)}};function Yo(){}Yo.prototype.h=null;function hh(o){return o.h||(o.h=o.i())}function dh(){}var Cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jo(){ve.call(this,"d")}N(Jo,ve);function Xo(){ve.call(this,"c")}N(Xo,ve);var en={},fh=null;function Li(){return fh=fh||new we}en.La="serverreachability";function ph(o){ve.call(this,en.La,o)}N(ph,ve);function Ar(o){let c=Li();ke(c,new ph(c))}en.STAT_EVENT="statevent";function mh(o,c){ve.call(this,en.STAT_EVENT,o),this.stat=c}N(mh,ve);function Ne(o){let c=Li();ke(c,new mh(c,o))}en.Ma="timingevent";function gh(o,c){ve.call(this,en.Ma,o),this.size=c}N(gh,ve);function Sr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){o()},c)}function Pr(){this.g=!0}Pr.prototype.xa=function(){this.g=!1};function Lg(o,c,l,f,b,C){o.info(function(){if(o.g)if(C)for(var D="",te=C.split("&"),_e=0;_e<te.length;_e++){var J=te[_e].split("=");if(1<J.length){var Ie=J[0];J=J[1];var Ee=Ie.split("_");D=2<=Ee.length&&Ee[1]=="type"?D+(Ie+"="+J+"&"):D+(Ie+"=redacted&")}}else D=null;else D=C;return"XMLHTTP REQ ("+f+") [attempt "+b+"]: "+c+`
`+l+`
`+D})}function Bg(o,c,l,f,b,C,D){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+b+"]: "+c+`
`+l+`
`+C+" "+D})}function Nn(o,c,l,f){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+qg(o,l)+(f?" "+f:"")})}function jg(o,c){o.info(function(){return"TIMEOUT: "+c})}Pr.prototype.info=function(){};function qg(o,c){if(!o.g)return c;if(!c)return null;try{var l=JSON.parse(c);if(l){for(o=0;o<l.length;o++)if(Array.isArray(l[o])){var f=l[o];if(!(2>f.length)){var b=f[1];if(Array.isArray(b)&&!(1>b.length)){var C=b[0];if(C!="noop"&&C!="stop"&&C!="close")for(var D=1;D<b.length;D++)b[D]=""}}}}return Qo(l)}catch{return c}}var Bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_h={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zo;function ji(){}N(ji,Yo),ji.prototype.g=function(){return new XMLHttpRequest},ji.prototype.i=function(){return{}},Zo=new ji;function Rt(o,c,l,f){this.j=o,this.i=c,this.l=l,this.R=f||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yh}function yh(){this.i=null,this.g="",this.h=!1}var vh={},ea={};function ta(o,c,l){o.L=1,o.v=$i(dt(c)),o.m=l,o.P=!0,wh(o,null)}function wh(o,c){o.F=Date.now(),qi(o),o.A=dt(o.v);var l=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),Oh(l.i,"t",f),o.C=0,l=o.j.J,o.h=new yh,o.g=Xh(o.j,l?c:null,!o.m),0<o.O&&(o.M=new Mg(A(o.Y,o,o.g),o.O)),c=o.U,l=o.g,f=o.ca;var b="readystatechange";Array.isArray(b)||(b&&(uh[0]=b.toString()),b=uh);for(var C=0;C<b.length;C++){var D=nh(l,b[C],f||c.handleEvent,!1,c.h||c);if(!D)break;c.g[D.key]=D}c=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),Ar(),Lg(o.i,o.u,o.A,o.l,o.R,o.m)}Rt.prototype.ca=function(o){o=o.target;let c=this.M;c&&ft(o)==3?c.j():this.Y(o)},Rt.prototype.Y=function(o){try{if(o==this.g)e:{let Ee=ft(this.g);var c=this.g.Ba();let Vn=this.g.Z();if(!(3>Ee)&&(Ee!=3||this.g&&(this.h.h||this.g.oa()||jh(this.g)))){this.J||Ee!=4||c==7||(c==8||0>=Vn?Ar(3):Ar(2)),na(this);var l=this.g.Z();this.X=l;t:if(Ih(this)){var f=jh(this.g);o="";var b=f.length,C=ft(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Rr(this);var D="";break t}this.h.i=new u.TextDecoder}for(c=0;c<b;c++)this.h.h=!0,o+=this.h.i.decode(f[c],{stream:!(C&&c==b-1)});f.length=0,this.h.g+=o,this.C=0,D=this.h.g}else D=this.g.oa();if(this.o=l==200,Bg(this.i,this.u,this.A,this.l,this.R,Ee,l),this.o){if(this.T&&!this.K){t:{if(this.g){var te,_e=this.g;if((te=_e.g?_e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(te)){var J=te;break t}}J=null}if(l=J)Nn(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ra(this,l);else{this.o=!1,this.s=3,Ne(12),tn(this),Rr(this);break e}}if(this.P){l=!0;let ze;for(;!this.J&&this.C<D.length;)if(ze=Gg(this,D),ze==ea){Ee==4&&(this.s=4,Ne(14),l=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(ze==vh){this.s=4,Ne(15),Nn(this.i,this.l,D,"[Invalid Chunk]"),l=!1;break}else Nn(this.i,this.l,ze,null),ra(this,ze);if(Ih(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||D.length!=0||this.h.h||(this.s=1,Ne(16),l=!1),this.o=this.o&&l,!l)Nn(this.i,this.l,D,"[Invalid Chunked Response]"),tn(this),Rr(this);else if(0<D.length&&!this.W){this.W=!0;var Ie=this.j;Ie.g==this&&Ie.ba&&!Ie.M&&(Ie.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),ua(Ie),Ie.M=!0,Ne(11))}}else Nn(this.i,this.l,D,null),ra(this,D);Ee==4&&tn(this),this.o&&!this.J&&(Ee==4?Hh(this.j,this):(this.o=!1,qi(this)))}else o_(this.g),l==400&&0<D.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),tn(this),Rr(this)}}}catch{}finally{}};function Ih(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Gg(o,c){var l=o.C,f=c.indexOf(`
`,l);return f==-1?ea:(l=Number(c.substring(l,f)),isNaN(l)?vh:(f+=1,f+l>c.length?ea:(c=c.slice(f,f+l),o.C=f+l,c)))}Rt.prototype.cancel=function(){this.J=!0,tn(this)};function qi(o){o.S=Date.now()+o.I,Eh(o,o.I)}function Eh(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Sr(A(o.ba,o),c)}function na(o){o.B&&(u.clearTimeout(o.B),o.B=null)}Rt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(jg(this.i,this.A),this.L!=2&&(Ar(),Ne(17)),tn(this),this.s=2,Rr(this)):Eh(this,this.S-o)};function Rr(o){o.j.G==0||o.J||Hh(o.j,o)}function tn(o){na(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,lh(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function ra(o,c){try{var l=o.j;if(l.G!=0&&(l.g==o||ia(l.h,o))){if(!o.K&&ia(l.h,o)&&l.G==3){try{var f=l.Da.g.parse(c)}catch{f=null}if(Array.isArray(f)&&f.length==3){var b=f;if(b[0]==0){e:if(!l.u){if(l.g)if(l.g.F+3e3<o.F)Yi(l),Hi(l);else break e;ca(l),Ne(18)}}else l.za=b[1],0<l.za-l.T&&37500>b[2]&&l.F&&l.v==0&&!l.C&&(l.C=Sr(A(l.Za,l),6e3));if(1>=Ch(l.h)&&l.ca){try{l.ca()}catch{}l.ca=void 0}}else rn(l,11)}else if((o.K||l.g==o)&&Yi(l),!H(c))for(b=l.Da.g.parse(c),c=0;c<b.length;c++){let J=b[c];if(l.T=J[0],J=J[1],l.G==2)if(J[0]=="c"){l.K=J[1],l.ia=J[2];let Ie=J[3];Ie!=null&&(l.la=Ie,l.j.info("VER="+l.la));let Ee=J[4];Ee!=null&&(l.Aa=Ee,l.j.info("SVER="+l.Aa));let Vn=J[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(f=1.5*Vn,l.L=f,l.j.info("backChannelRequestTimeoutMs_="+f)),f=l;let ze=o.g;if(ze){let Xi=ze.g?ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var C=f.h;C.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(sa(C,C.h),C.h=null))}if(f.D){let la=ze.g?ze.g.getResponseHeader("X-HTTP-Session-Id"):null;la&&(f.ya=la,se(f.I,f.D,la))}}l.G=3,l.l&&l.l.ua(),l.ba&&(l.R=Date.now()-o.F,l.j.info("Handshake RTT: "+l.R+"ms")),f=l;var D=o;if(f.qa=Jh(f,f.J?f.ia:null,f.W),D.K){Ah(f.h,D);var te=D,_e=f.L;_e&&(te.I=_e),te.B&&(na(te),qi(te)),f.g=D}else Wh(f);0<l.i.length&&Qi(l)}else J[0]!="stop"&&J[0]!="close"||rn(l,7);else l.G==3&&(J[0]=="stop"||J[0]=="close"?J[0]=="stop"?rn(l,7):aa(l):J[0]!="noop"&&l.l&&l.l.ta(J),l.v=0)}}Ar(4)}catch{}}var zg=class{constructor(o,c){this.g=o,this.map=c}};function bh(o){this.l=o||10,u.PerformanceNavigationTiming?(o=u.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Th(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ch(o){return o.h?1:o.g?o.g.size:0}function ia(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function sa(o,c){o.g?o.g.add(c):o.h=c}function Ah(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}bh.prototype.cancel=function(){if(this.i=Sh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Sh(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(let l of o.g.values())c=c.concat(l.D);return c}return F(o.i)}function $g(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(h(o)){for(var c=[],l=o.length,f=0;f<l;f++)c.push(o[f]);return c}c=[],l=0;for(f in o)c[l++]=o[f];return c}function Wg(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(h(o)||typeof o=="string"){var c=[];o=o.length;for(var l=0;l<o;l++)c.push(l);return c}c=[],l=0;for(let f in o)c[l++]=f;return c}}}function Ph(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(h(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var l=Wg(o),f=$g(o),b=f.length,C=0;C<b;C++)c.call(void 0,f[C],l&&l[C],o)}var Rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kg(o,c){if(o){o=o.split("&");for(var l=0;l<o.length;l++){var f=o[l].indexOf("="),b=null;if(0<=f){var C=o[l].substring(0,f);b=o[l].substring(f+1)}else C=o[l];c(C,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function nn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof nn){this.h=o.h,Gi(this,o.j),this.o=o.o,this.g=o.g,zi(this,o.s),this.l=o.l;var c=o.i,l=new Nr;l.i=c.i,c.g&&(l.g=new Map(c.g),l.h=c.h),Dh(this,l),this.m=o.m}else o&&(c=String(o).match(Rh))?(this.h=!1,Gi(this,c[1]||"",!0),this.o=Dr(c[2]||""),this.g=Dr(c[3]||"",!0),zi(this,c[4]),this.l=Dr(c[5]||"",!0),Dh(this,c[6]||"",!0),this.m=Dr(c[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}nn.prototype.toString=function(){var o=[],c=this.j;c&&o.push(kr(c,kh,!0),":");var l=this.g;return(l||c=="file")&&(o.push("//"),(c=this.o)&&o.push(kr(c,kh,!0),"@"),o.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.s,l!=null&&o.push(":",String(l))),(l=this.l)&&(this.g&&l.charAt(0)!="/"&&o.push("/"),o.push(kr(l,l.charAt(0)=="/"?Yg:Qg,!0))),(l=this.i.toString())&&o.push("?",l),(l=this.m)&&o.push("#",kr(l,Xg)),o.join("")};function dt(o){return new nn(o)}function Gi(o,c,l){o.j=l?Dr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function zi(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Dh(o,c,l){c instanceof Nr?(o.i=c,Zg(o.i,o.h)):(l||(c=kr(c,Jg)),o.i=new Nr(c,o.h))}function se(o,c,l){o.i.set(c,l)}function $i(o){return se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Dr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function kr(o,c,l){return typeof o=="string"?(o=encodeURI(o).replace(c,Hg),l&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Hg(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var kh=/[#\/\?@]/g,Qg=/[#\?:]/g,Yg=/[#\?]/g,Jg=/[#\?@]/g,Xg=/#/g;function Nr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Dt(o){o.g||(o.g=new Map,o.h=0,o.i&&Kg(o.i,function(c,l){o.add(decodeURIComponent(c.replace(/\+/g," ")),l)}))}n=Nr.prototype,n.add=function(o,c){Dt(this),this.i=null,o=xn(this,o);var l=this.g.get(o);return l||this.g.set(o,l=[]),l.push(c),this.h+=1,this};function Nh(o,c){Dt(o),c=xn(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function xh(o,c){return Dt(o),c=xn(o,c),o.g.has(c)}n.forEach=function(o,c){Dt(this),this.g.forEach(function(l,f){l.forEach(function(b){o.call(c,b,f,this)},this)},this)},n.na=function(){Dt(this);let o=Array.from(this.g.values()),c=Array.from(this.g.keys()),l=[];for(let f=0;f<c.length;f++){let b=o[f];for(let C=0;C<b.length;C++)l.push(c[f])}return l},n.V=function(o){Dt(this);let c=[];if(typeof o=="string")xh(this,o)&&(c=c.concat(this.g.get(xn(this,o))));else{o=Array.from(this.g.values());for(let l=0;l<o.length;l++)c=c.concat(o[l])}return c},n.set=function(o,c){return Dt(this),this.i=null,o=xn(this,o),xh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},n.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Oh(o,c,l){Nh(o,c),0<l.length&&(o.i=null,o.g.set(xn(o,c),F(l)),o.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],c=Array.from(this.g.keys());for(var l=0;l<c.length;l++){var f=c[l];let C=encodeURIComponent(String(f)),D=this.V(f);for(f=0;f<D.length;f++){var b=C;D[f]!==""&&(b+="="+encodeURIComponent(String(D[f]))),o.push(b)}}return this.i=o.join("&")};function xn(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Zg(o,c){c&&!o.j&&(Dt(o),o.i=null,o.g.forEach(function(l,f){var b=f.toLowerCase();f!=b&&(Nh(this,f),Oh(this,b,l))},o)),o.j=c}function e_(o,c){let l=new Pr;if(u.Image){let f=new Image;f.onload=P(kt,l,"TestLoadImage: loaded",!0,c,f),f.onerror=P(kt,l,"TestLoadImage: error",!1,c,f),f.onabort=P(kt,l,"TestLoadImage: abort",!1,c,f),f.ontimeout=P(kt,l,"TestLoadImage: timeout",!1,c,f),u.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else c(!1)}function t_(o,c){let l=new Pr,f=new AbortController,b=setTimeout(()=>{f.abort(),kt(l,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:f.signal}).then(C=>{clearTimeout(b),C.ok?kt(l,"TestPingServer: ok",!0,c):kt(l,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(b),kt(l,"TestPingServer: error",!1,c)})}function kt(o,c,l,f,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),f(l)}catch{}}function n_(){this.g=new Ug}function r_(o,c,l){let f=l||"";try{Ph(o,function(b,C){let D=b;d(b)&&(D=Qo(b)),c.push(f+C+"="+encodeURIComponent(D))})}catch(b){throw c.push(f+"type="+encodeURIComponent("_badmap")),b}}function xr(o){this.l=o.Ub||null,this.j=o.eb||!1}N(xr,Yo),xr.prototype.g=function(){return new Wi(this.l,this.j)},xr.prototype.i=function(o){return function(){return o}}({});function Wi(o,c){we.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Wi,we),n=Wi.prototype,n.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Vr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||u).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Or(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Vr(this)),this.g&&(this.readyState=3,Vr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vh(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vh(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Or(this):Vr(this),this.readyState==3&&Vh(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Or(this))},n.Qa=function(o){this.g&&(this.response=o,Or(this))},n.ga=function(){this.g&&Or(this)};function Or(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Vr(o)}n.setRequestHeader=function(o,c){this.u.append(o,c)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],c=this.h.entries();for(var l=c.next();!l.done;)l=l.value,o.push(l[0]+": "+l[1]),l=c.next();return o.join(`\r
`)};function Vr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Mh(o){let c="";return Z(o,function(l,f){c+=f,c+=":",c+=l,c+=`\r
`}),c}function oa(o,c,l){e:{for(f in l){var f=!1;break e}f=!0}f||(l=Mh(l),typeof o=="string"?l!=null&&encodeURIComponent(String(l)):se(o,c,l))}function ce(o){we.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ce,we);var i_=/^https?$/i,s_=["POST","PUT"];n=ce.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,c,l,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zo.g(),this.v=this.o?hh(this.o):hh(Zo),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(C){Fh(this,C);return}if(o=l||"",l=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var b in f)l.set(b,f[b]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let C of f.keys())l.set(C,f.get(C));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(l.keys()).find(C=>C.toLowerCase()=="content-type"),b=u.FormData&&o instanceof u.FormData,!(0<=Array.prototype.indexOf.call(s_,c,void 0))||f||b||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,D]of l)this.g.setRequestHeader(C,D);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bh(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){Fh(this,C)}};function Fh(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Uh(o),Ki(o)}function Uh(o){o.A||(o.A=!0,ke(o,"complete"),ke(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ke(this,"complete"),ke(this,"abort"),Ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),ce.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Lh(this):this.bb())},n.bb=function(){Lh(this)};function Lh(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ft(o)!=4||o.Z()!=2)){if(o.u&&ft(o)==4)ah(o.Ea,0,o);else if(ke(o,"readystatechange"),ft(o)==4){o.h=!1;try{let D=o.Z();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var l;if(!(l=c)){var f;if(f=D===0){var b=String(o.D).match(Rh)[1]||null;!b&&u.self&&u.self.location&&(b=u.self.location.protocol.slice(0,-1)),f=!i_.test(b?b.toLowerCase():"")}l=f}if(l)ke(o,"complete"),ke(o,"success");else{o.m=6;try{var C=2<ft(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",Uh(o)}}finally{Ki(o)}}}}function Ki(o,c){if(o.g){Bh(o);let l=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ke(o,"ready");try{l.onreadystatechange=f}catch{}}}function Bh(o){o.I&&(u.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function ft(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<ft(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Fg(c)}};function jh(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function o_(o){let c={};o=(o.g&&2<=ft(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(H(o[f]))continue;var l=E(o[f]);let b=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();let C=c[b]||[];c[b]=C,C.push(l)}I(c,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(o,c,l){return l&&l.internalChannelParams&&l.internalChannelParams[o]||c}function qh(o){this.Aa=0,this.i=[],this.j=new Pr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,o),this.cb=Mr("retryDelaySeedMs",1e4,o),this.Wa=Mr("forwardChannelMaxRetries",2,o),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new bh(o&&o.concurrentRequestLimit),this.Da=new n_,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qh.prototype,n.la=8,n.G=1,n.connect=function(o,c,l,f){Ne(0),this.W=o,this.H=c||{},l&&f!==void 0&&(this.H.OSID=l,this.H.OAID=f),this.F=this.X,this.I=Jh(this,null,this.W),Qi(this)};function aa(o){if(Gh(o),o.G==3){var c=o.U++,l=dt(o.I);if(se(l,"SID",o.K),se(l,"RID",c),se(l,"TYPE","terminate"),Fr(o,l),c=new Rt(o,o.j,c),c.L=2,c.v=$i(dt(l)),l=!1,u.navigator&&u.navigator.sendBeacon)try{l=u.navigator.sendBeacon(c.v.toString(),"")}catch{}!l&&u.Image&&(new Image().src=c.v,l=!0),l||(c.g=Xh(c.j,null),c.g.ea(c.v)),c.F=Date.now(),qi(c)}Yh(o)}function Hi(o){o.g&&(ua(o),o.g.cancel(),o.g=null)}function Gh(o){Hi(o),o.u&&(u.clearTimeout(o.u),o.u=null),Yi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&u.clearTimeout(o.s),o.s=null)}function Qi(o){if(!Th(o.h)&&!o.s){o.s=!0;var c=o.Ga;wr||th(),Ir||(wr(),Ir=!0),Bo.add(c,o),o.B=0}}function a_(o,c){return Ch(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Sr(A(o.Ga,o,c),Qh(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let b=new Rt(this,this.j,o),C=this.o;if(this.S&&(C?(C=m(C),v(C,this.S)):C=this.S),this.m!==null||this.O||(b.H=C,C=null),this.P)e:{for(var c=0,l=0;l<this.i.length;l++){t:{var f=this.i[l];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(c+=f,4096<c){c=l;break e}if(c===4096||l===this.i.length-1){c=l+1;break e}}c=1e3}else c=1e3;c=$h(this,b,c),l=dt(this.I),se(l,"RID",o),se(l,"CVER",22),this.D&&se(l,"X-HTTP-Session-Id",this.D),Fr(this,l),C&&(this.O?c="headers="+encodeURIComponent(String(Mh(C)))+"&"+c:this.m&&oa(l,this.m,C)),sa(this.h,b),this.Ua&&se(l,"TYPE","init"),this.P?(se(l,"$req",c),se(l,"SID","null"),b.T=!0,ta(b,l,null)):ta(b,l,c),this.G=2}}else this.G==3&&(o?zh(this,o):this.i.length==0||Th(this.h)||zh(this))};function zh(o,c){var l;c?l=c.l:l=o.U++;let f=dt(o.I);se(f,"SID",o.K),se(f,"RID",l),se(f,"AID",o.T),Fr(o,f),o.m&&o.o&&oa(f,o.m,o.o),l=new Rt(o,o.j,l,o.B+1),o.m===null&&(l.H=o.o),c&&(o.i=c.D.concat(o.i)),c=$h(o,l,1e3),l.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),sa(o.h,l),ta(l,f,c)}function Fr(o,c){o.H&&Z(o.H,function(l,f){se(c,f,l)}),o.l&&Ph({},function(l,f){se(c,f,l)})}function $h(o,c,l){l=Math.min(o.i.length,l);var f=o.l?A(o.l.Na,o.l,o):null;e:{var b=o.i;let C=-1;for(;;){let D=["count="+l];C==-1?0<l?(C=b[0].g,D.push("ofs="+C)):C=0:D.push("ofs="+C);let te=!0;for(let _e=0;_e<l;_e++){let J=b[_e].g,Ie=b[_e].map;if(J-=C,0>J)C=Math.max(0,b[_e].g-100),te=!1;else try{r_(Ie,D,"req"+J+"_")}catch{f&&f(Ie)}}if(te){f=D.join("&");break e}}}return o=o.i.splice(0,l),c.D=o,f}function Wh(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;wr||th(),Ir||(wr(),Ir=!0),Bo.add(c,o),o.v=0}}function ca(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Sr(A(o.Fa,o),Qh(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Kh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Sr(A(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Hi(this),Kh(this))};function ua(o){o.A!=null&&(u.clearTimeout(o.A),o.A=null)}function Kh(o){o.g=new Rt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=dt(o.qa);se(c,"RID","rpc"),se(c,"SID",o.K),se(c,"AID",o.T),se(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&se(c,"TO",o.ja),se(c,"TYPE","xmlhttp"),Fr(o,c),o.m&&o.o&&oa(c,o.m,o.o),o.L&&(o.g.I=o.L);var l=o.g;o=o.ia,l.L=1,l.v=$i(dt(c)),l.m=null,l.P=!0,wh(l,o)}n.Za=function(){this.C!=null&&(this.C=null,Hi(this),ca(this),Ne(19))};function Yi(o){o.C!=null&&(u.clearTimeout(o.C),o.C=null)}function Hh(o,c){var l=null;if(o.g==c){Yi(o),ua(o),o.g=null;var f=2}else if(ia(o.h,c))l=c.D,Ah(o.h,c),f=1;else return;if(o.G!=0){if(c.o)if(f==1){l=c.m?c.m.length:0,c=Date.now()-c.F;var b=o.B;f=Li(),ke(f,new gh(f,l)),Qi(o)}else Wh(o);else if(b=c.s,b==3||b==0&&0<c.X||!(f==1&&a_(o,c)||f==2&&ca(o)))switch(l&&0<l.length&&(c=o.h,c.i=c.i.concat(l)),b){case 1:rn(o,5);break;case 4:rn(o,10);break;case 3:rn(o,6);break;default:rn(o,2)}}}function Qh(o,c){let l=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(l*=2),l*c}function rn(o,c){if(o.j.info("Error code "+c),c==2){var l=A(o.fb,o),f=o.Xa;let b=!f;f=new nn(f||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Gi(f,"https"),$i(f),b?e_(f.toString(),l):t_(f.toString(),l)}else Ne(2);o.G=0,o.l&&o.l.sa(c),Yh(o),Gh(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function Yh(o){if(o.G=0,o.ka=[],o.l){let c=Sh(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,F(o.i),o.i.length=0),o.l.ra()}}function Jh(o,c,l){var f=l instanceof nn?dt(l):new nn(l);if(f.g!="")c&&(f.g=c+"."+f.g),zi(f,f.s);else{var b=u.location;f=b.protocol,c=c?c+"."+b.hostname:b.hostname,b=+b.port;var C=new nn(null);f&&Gi(C,f),c&&(C.g=c),b&&zi(C,b),l&&(C.l=l),f=C}return l=o.D,c=o.ya,l&&c&&se(f,l,c),se(f,"VER",o.la),Fr(o,f),f}function Xh(o,c,l){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new ce(new xr({eb:l})):new ce(o.pa),c.Ha(o.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zh(){}n=Zh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ji(){}Ji.prototype.g=function(o,c){return new Oe(o,c)};function Oe(o,c){we.call(this),this.g=new qh(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!H(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!H(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new On(this)}N(Oe,we),Oe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Oe.prototype.close=function(){aa(this.g)},Oe.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var l={};l.__data__=o,o=l}else this.u&&(l={},l.__data__=Qo(o),o=l);c.i.push(new zg(c.Ya++,o)),c.G==3&&Qi(c)},Oe.prototype.N=function(){this.g.l=null,delete this.j,aa(this.g),delete this.g,Oe.aa.N.call(this)};function ed(o){Jo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(let l in c){o=l;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}N(ed,Jo);function td(){Xo.call(this),this.status=1}N(td,Xo);function On(o){this.g=o}N(On,Zh),On.prototype.ua=function(){ke(this.g,"a")},On.prototype.ta=function(o){ke(this.g,new ed(o))},On.prototype.sa=function(o){ke(this.g,new td)},On.prototype.ra=function(){ke(this.g,"b")},Ji.prototype.createWebChannel=Ji.prototype.g,Oe.prototype.send=Oe.prototype.o,Oe.prototype.open=Oe.prototype.m,Oe.prototype.close=Oe.prototype.close,Gc=It.createWebChannelTransport=function(){return new Ji},qc=It.getStatEventTarget=function(){return Li()},jc=It.Event=en,qs=It.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,di=It.ErrorCode=Bi,_h.COMPLETE="complete",Bc=It.EventType=_h,dh.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",we.prototype.listen=we.prototype.K,Jn=It.WebChannel=dh,Lc=It.FetchXmlHttpFactory=xr,ce.prototype.listenOnce=ce.prototype.L,ce.prototype.getLastError=ce.prototype.Ka,ce.prototype.getLastErrorCode=ce.prototype.Ba,ce.prototype.getStatus=ce.prototype.Z,ce.prototype.getResponseJson=ce.prototype.Oa,ce.prototype.getResponseText=ce.prototype.oa,ce.prototype.send=ce.prototype.ea,ce.prototype.setWithCredentials=ce.prototype.Ha,Uc=It.XhrIo=ce}).apply(typeof js<"u"?js:typeof self<"u"?self:typeof window<"u"?window:{});var Ap="@firebase/firestore";var ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ge.UNAUTHENTICATED=new ge(null),ge.GOOGLE_CREDENTIALS=new ge("google-credentials-uid"),ge.FIRST_PARTY=new ge("first-party-uid"),ge.MOCK_USER=new ge("mock-user");var gr="10.13.1";var bn=new Lt("@firebase/firestore");function fi(){return bn.logLevel}function M(n,...e){if(bn.logLevel<=W.DEBUG){let t=e.map(Dl);bn.debug(`Firestore (${gr}): ${n}`,...t)}}function bt(n,...e){if(bn.logLevel<=W.ERROR){let t=e.map(Dl);bn.error(`Firestore (${gr}): ${n}`,...t)}}function ir(n,...e){if(bn.logLevel<=W.WARN){let t=e.map(Dl);bn.warn(`Firestore (${gr}): ${n}`,...t)}}function Dl(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function B(n="Unexpected state"){let e=`FIRESTORE (${gr}) INTERNAL ASSERTION FAILED: `+n;throw bt(e),new Error(e)}function ne(n,e){n||B()}function j(n,e){return n}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Me{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Et=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ks=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Hc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ge.UNAUTHENTICATED))}shutdown(){}},Qc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Yc=class{constructor(e){this.t=e,this.currentUser=ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),s=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Et,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let h=s;e.enqueueRetryable(()=>y(this,null,function*(){yield h.promise,yield i(this.currentUser)}))},u=h=>{M("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?u(h):(M("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Et)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(M("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new Ks(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new ge(e)}},Jc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ge.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Xc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Jc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Zc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eu=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&M("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,M("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{M("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):M("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ne(typeof t.token=="string"),this.R=t.token,new Zc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Uw(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Hs=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Uw(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function X(n,e){return n<e?-1:n>e?1:0}function sr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ye=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new x(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ye(0,0))}static max(){return new n(new ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qs=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&B(),r===void 0?r=e.length-t:r>e.length-t&&B(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ae=class n extends Qs{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Lw=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ue=class n extends Qs{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Lw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new x(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new x(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new x(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new x(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var U=class n{constructor(e){this.path=e}static fromPath(e){return new n(ae.fromString(e))}static fromName(e){return new n(ae.fromString(e).popFirst(5))}static empty(){return new n(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ae(e.slice()))}};var tu=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};tu.UNKNOWN_ID=-1;function Bw(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=q.fromTimestamp(r===1e9?new ye(t+1,0):new ye(t,r));return new Tn(i,U.empty(),e)}function jw(n){return new Tn(n.readTime,n.key,-1)}var Tn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(q.min(),U.empty(),-1)}static max(){return new n(q.max(),U.empty(),-1)}};function qw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=U.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}var Gw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nu=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ni(n){return y(this,null,function*(){if(n.code!==S.FAILED_PRECONDITION||n.message!==Gw)throw n;M("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&t()},h=>r(h))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),u=0;for(let h=0;h<s;h++){let d=h;t(e[d]).next(p=>{a[d]=p,++u,u===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function zw(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xi(n){return n.name==="IndexedDbTransactionError"}var am=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Co(n){return n==null}function wi(n){return n===0&&1/n==-1/0}function $w(n){return typeof n=="number"&&Number.isInteger(n)&&!wi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Ww=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hC=[...Ww,"documentOverlays"],Kw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Hw=Kw,Qw=[...Hw,"indexConfiguration","indexState","indexEntries"];var dC=[...Qw,"globals"];function Sp(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _r(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cm(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ue=class n{constructor(e,t){this.comparator=e,this.root=t||at.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tr(this.root,e,this.comparator,!1)}getReverseIterator(){return new tr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tr(this.root,e,this.comparator,!0)}},tr=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},at=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,t,r,i,s){return this}insert(e,t,r){return new at(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pe=class n{constructor(e){this.comparator=e,this.data=new ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ys(this.data.getIterator())}getIteratorFrom(e){return new Ys(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ys=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ot=class n{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new n([])}unionWith(e){let t=new Pe(Ue.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Js=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Re=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Js("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Re.EMPTY_BYTE_STRING=new Re("");var Yw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tt(n){if(ne(!!n),typeof n=="string"){let e=0,t=Yw.exec(n);if(ne(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:oe(n.seconds),nanos:oe(n.nanos)}}function oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Yt(n){return typeof n=="string"?Re.fromBase64String(n):Re.fromUint8Array(n)}function kl(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Nl(n){let e=n.mapValue.fields.__previous_value__;return kl(e)?Nl(e):e}function Ii(n){let e=Tt(n.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}var ru=class{constructor(e,t,r,i,s,a,u,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d}},Xs=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Gs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Cn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kl(n)?4:lm(n)?9007199254740991:um(n)?10:11:B()}function lt(n,e){if(n===e)return!0;let t=Cn(n);if(t!==Cn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ii(n).isEqual(Ii(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Tt(i.timestampValue),u=Tt(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Yt(i.bytesValue).isEqual(Yt(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return oe(i.geoPointValue.latitude)===oe(s.geoPointValue.latitude)&&oe(i.geoPointValue.longitude)===oe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return oe(i.integerValue)===oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=oe(i.doubleValue),u=oe(s.doubleValue);return a===u?wi(a)===wi(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return sr(n.arrayValue.values||[],e.arrayValue.values||[],lt);case 10:case 11:return function(i,s){let a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(Sp(a)!==Sp(u))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!lt(a[h],u[h])))return!1;return!0}(n,e);default:return B()}}function Ei(n,e){return(n.values||[]).find(t=>lt(t,e))!==void 0}function or(n,e){if(n===e)return 0;let t=Cn(n),r=Cn(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return function(s,a){let u=oe(s.integerValue||s.doubleValue),h=oe(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Pp(n.timestampValue,e.timestampValue);case 4:return Pp(Ii(n),Ii(e));case 5:return X(n.stringValue,e.stringValue);case 6:return function(s,a){let u=Yt(s),h=Yt(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let u=s.split("/"),h=a.split("/");for(let d=0;d<u.length&&d<h.length;d++){let p=X(u[d],h[d]);if(p!==0)return p}return X(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let u=X(oe(s.latitude),oe(a.latitude));return u!==0?u:X(oe(s.longitude),oe(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Rp(n.arrayValue,e.arrayValue);case 10:return function(s,a){var u,h,d,p;let w=s.fields||{},A=a.fields||{},P=(u=w.value)===null||u===void 0?void 0:u.arrayValue,N=(h=A.value)===null||h===void 0?void 0:h.arrayValue,F=X(((d=P?.values)===null||d===void 0?void 0:d.length)||0,((p=N?.values)===null||p===void 0?void 0:p.length)||0);return F!==0?F:Rp(P,N)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Gs.mapValue&&a===Gs.mapValue)return 0;if(s===Gs.mapValue)return 1;if(a===Gs.mapValue)return-1;let u=s.fields||{},h=Object.keys(u),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let w=0;w<h.length&&w<p.length;++w){let A=X(h[w],p[w]);if(A!==0)return A;let P=or(u[h[w]],d[p[w]]);if(P!==0)return P}return X(h.length,p.length)}(n.mapValue,e.mapValue);default:throw B()}}function Pp(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);let t=Tt(n),r=Tt(e),i=X(t.seconds,r.seconds);return i!==0?i:X(t.nanos,r.nanos)}function Rp(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=or(t[i],r[i]);if(s)return s}return X(t.length,r.length)}function ar(n){return iu(n)}function iu(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Tt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Yt(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return U.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=iu(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${iu(t.fields[a])}`;return i+"}"}(n.mapValue):B()}function Dp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function su(n){return!!n&&"integerValue"in n}function xl(n){return!!n&&"arrayValue"in n}function kp(n){return!!n&&"nullValue"in n}function Np(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $s(n){return!!n&&"mapValue"in n}function um(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function mi(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _r(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mi(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mi(n.arrayValue.values[t]);return e}return Object.assign({},n)}function lm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var He=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$s(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mi(t)}setAll(e){let t=Ue.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=mi(a):i.push(u.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());$s(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return lt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$s(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_r(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(mi(this.value))}};function hm(n){let e=[];return _r(n.fields,(t,r)=>{let i=new Ue([t]);if($s(r)){let s=hm(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new ot(e)}var Qe=class n{constructor(e,t,r,i,s,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,q.min(),q.min(),q.min(),He.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,q.min(),q.min(),He.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,q.min(),q.min(),He.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=He.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=He.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var cr=class{constructor(e,t){this.position=e,this.inclusive=t}};function xp(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=U.comparator(U.fromName(a.referenceValue),t.key):r=or(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Op(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!lt(n.position[t],e.position[t]))return!1;return!0}var An=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Jw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Zs=class{},de=class n extends Zs{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new au(e,t,r):t==="array-contains"?new lu(e,r):t==="in"?new hu(e,r):t==="not-in"?new du(e,r):t==="array-contains-any"?new fu(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new cu(e,r):new uu(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(or(t,this.value)):t!==null&&Cn(this.value)===Cn(t)&&this.matchesComparison(or(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ye=class n extends Zs{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return dm(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function dm(n){return n.op==="and"}function fm(n){return Xw(n)&&dm(n)}function Xw(n){for(let e of n.filters)if(e instanceof Ye)return!1;return!0}function ou(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+ar(n.value);if(fm(n))return n.filters.map(e=>ou(e)).join(",");{let e=n.filters.map(t=>ou(t)).join(",");return`${n.op}(${e})`}}function pm(n,e){return n instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&lt(r.value,i.value)}(n,e):n instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&pm(a,i.filters[u]),!0):!1}(n,e):void B()}function mm(n){return n instanceof de?function(t){return`${t.field.canonicalString()} ${t.op} ${ar(t.value)}`}(n):n instanceof Ye?function(t){return t.op.toString()+" {"+t.getFilters().map(mm).join(" ,")+"}"}(n):"Filter"}var au=class extends de{constructor(e,t,r){super(e,t,r),this.key=U.fromName(r.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},cu=class extends de{constructor(e,t){super(e,"in",t),this.keys=gm("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},uu=class extends de{constructor(e,t){super(e,"not-in",t),this.keys=gm("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function gm(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>U.fromName(r.referenceValue))}var lu=class extends de{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xl(t)&&Ei(t.arrayValue,this.value)}},hu=class extends de{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ei(this.value.arrayValue,t)}},du=class extends de{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ei(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ei(this.value.arrayValue,t)}},fu=class extends de{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ei(this.value.arrayValue,r))}};var pu=class{constructor(e,t=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.ue=null}};function Vp(n,e=null,t=[],r=[],i=null,s=null,a=null){return new pu(n,e,t,r,i,s,a)}function Ol(n){let e=j(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ou(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Co(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ar(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ar(r)).join(",")),e.ue=t}return e.ue}function Vl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Jw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pm(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Op(n.startAt,e.startAt)&&Op(n.endAt,e.endAt)}function mu(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Jt=class{constructor(e,t=null,r=[],i=[],s=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Zw(n,e,t,r,i,s,a,u){return new Jt(n,e,t,r,i,s,a,u)}function Ml(n){return new Jt(n)}function Mp(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _m(n){return n.collectionGroup!==null}function gi(n){let e=j(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Pe(Ue.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new An(s,r))}),t.has(Ue.keyField().canonicalString())||e.ce.push(new An(Ue.keyField(),r))}return e.ce}function ct(n){let e=j(n);return e.le||(e.le=eI(e,gi(n))),e.le}function eI(n,e){if(n.limitType==="F")return Vp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new An(i.field,s)});let t=n.endAt?new cr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cr(n.startAt.position,n.startAt.inclusive):null;return Vp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gu(n,e){let t=n.filters.concat([e]);return new Jt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _u(n,e,t){return new Jt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ao(n,e){return Vl(ct(n),ct(e))&&n.limitType===e.limitType}function ym(n){return`${Ol(ct(n))}|lt:${n.limitType}`}function Xn(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>mm(i)).join(", ")}]`),Co(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ar(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ar(i)).join(",")),`Target(${r})`}(ct(n))}; limitType=${n.limitType})`}function So(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):U.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of gi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,h){let d=xp(a,u,h);return a.inclusive?d<=0:d<0}(r.startAt,gi(r),i)||r.endAt&&!function(a,u,h){let d=xp(a,u,h);return a.inclusive?d>=0:d>0}(r.endAt,gi(r),i))}(n,e)}function tI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vm(n){return(e,t)=>{let r=!1;for(let i of gi(n)){let s=nI(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nI(n,e,t){let r=n.field.isKeyField()?U.comparator(e.key,t.key):function(s,a,u){let h=a.data.field(s),d=u.data.field(s);return h!==null&&d!==null?or(h,d):B()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var Xt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_r(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return cm(this.inner)}size(){return this.innerSize}};var rI=new ue(U.comparator);function Ct(){return rI}var wm=new ue(U.comparator);function pi(...n){let e=wm;for(let t of n)e=e.insert(t.key,t);return e}function Im(n){let e=wm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vn(){return _i()}function Em(){return _i()}function _i(){return new Xt(n=>n.toString(),(n,e)=>n.isEqual(e))}var iI=new ue(U.comparator),sI=new Pe(U.comparator);function K(...n){let e=sI;for(let t of n)e=e.add(t);return e}var oI=new Pe(X);function aI(){return oI}function Fl(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wi(e)?"-0":e}}function bm(n){return{integerValue:""+n}}function cI(n,e){return $w(e)?bm(e):Fl(n,e)}var ur=class{constructor(){this._=void 0}};function uI(n,e,t){return n instanceof lr?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kl(s)&&(s=Nl(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Sn?Cm(n,e):n instanceof Pn?Am(n,e):function(i,s){let a=Tm(i,s),u=Fp(a)+Fp(i.Pe);return su(a)&&su(i.Pe)?bm(u):Fl(i.serializer,u)}(n,e)}function lI(n,e,t){return n instanceof Sn?Cm(n,e):n instanceof Pn?Am(n,e):t}function Tm(n,e){return n instanceof hr?function(r){return su(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var lr=class extends ur{},Sn=class extends ur{constructor(e){super(),this.elements=e}};function Cm(n,e){let t=Sm(e);for(let r of n.elements)t.some(i=>lt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pn=class extends ur{constructor(e){super(),this.elements=e}};function Am(n,e){let t=Sm(e);for(let r of n.elements)t=t.filter(i=>!lt(i,r));return{arrayValue:{values:t}}}var hr=class extends ur{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Fp(n){return oe(n.integerValue||n.doubleValue)}function Sm(n){return xl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function hI(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Sn&&i instanceof Sn||r instanceof Pn&&i instanceof Pn?sr(r.elements,i.elements,lt):r instanceof hr&&i instanceof hr?lt(r.Pe,i.Pe):r instanceof lr&&i instanceof lr}(n.transform,e.transform)}var yu=class{constructor(e,t){this.version=e,this.transformResults=t}},En=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ws(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var dr=class{};function Pm(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new eo(n.key,En.none()):new Rn(n.key,n.data,En.none());{let t=n.data,r=He.empty(),i=new Pe(Ue.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new At(n.key,r,new ot(i.toArray()),En.none())}}function dI(n,e,t){n instanceof Rn?function(i,s,a){let u=i.value.clone(),h=Lp(i.fieldTransforms,s,a.transformResults);u.setAll(h),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof At?function(i,s,a){if(!Ws(i.precondition,s))return void s.convertToUnknownDocument(a.version);let u=Lp(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(Rm(i)),h.setAll(u),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function yi(n,e,t,r){return n instanceof Rn?function(s,a,u,h){if(!Ws(s.precondition,a))return u;let d=s.value.clone(),p=Bp(s.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof At?function(s,a,u,h){if(!Ws(s.precondition,a))return u;let d=Bp(s.fieldTransforms,h,a),p=a.data;return p.setAll(Rm(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(w=>w.field))}(n,e,t,r):function(s,a,u){return Ws(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function fI(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Tm(r.transform,i||null);s!=null&&(t===null&&(t=He.empty()),t.set(r.field,s))}return t||null}function Up(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sr(r,i,(s,a)=>hI(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Rn=class extends dr{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},At=class extends dr{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Rm(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Lp(n,e,t){let r=new Map;ne(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,lI(a,u,t[i]))}return r}function Bp(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,uI(s,a,e))}return r}var eo=class extends dr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vu=class extends dr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&dI(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=yi(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=yi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Em();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,u=this.applyToLocalView(a,s.mutatedFields);u=t.has(i.key)?null:u;let h=Pm(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),K())}isEqual(e){return this.batchId===e.batchId&&sr(this.mutations,e.mutations,(t,r)=>Up(t,r))&&sr(this.baseMutations,e.baseMutations,(t,r)=>Up(t,r))}},Iu=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ne(e.mutations.length===r.length);let i=function(){return iI}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var Eu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bu=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var le,Y;function pI(n){switch(n){default:return B();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function Dm(n){if(n===void 0)return bt("GRPC error has no .code"),S.UNKNOWN;switch(n){case le.OK:return S.OK;case le.CANCELLED:return S.CANCELLED;case le.UNKNOWN:return S.UNKNOWN;case le.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case le.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case le.INTERNAL:return S.INTERNAL;case le.UNAVAILABLE:return S.UNAVAILABLE;case le.UNAUTHENTICATED:return S.UNAUTHENTICATED;case le.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case le.NOT_FOUND:return S.NOT_FOUND;case le.ALREADY_EXISTS:return S.ALREADY_EXISTS;case le.PERMISSION_DENIED:return S.PERMISSION_DENIED;case le.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case le.ABORTED:return S.ABORTED;case le.OUT_OF_RANGE:return S.OUT_OF_RANGE;case le.UNIMPLEMENTED:return S.UNIMPLEMENTED;case le.DATA_LOSS:return S.DATA_LOSS;default:return B()}}(Y=le||(le={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";var jp=null;function mI(){return new TextEncoder}var gI=new Ht([4294967295,4294967295],0);function qp(n){let e=mI().encode(n),t=new Fc;return t.update(e),new Uint8Array(t.digest())}function Gp(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ht([t,r],0),new Ht([i,s],0)]}var Tu=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new wn(`Invalid padding: ${t}`);if(r<0)throw new wn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wn(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new wn(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ht.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ht.fromNumber(r)));return i.compare(gI)===1&&(i=new Ht([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=qp(e),[r,i]=Gp(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;let t=qp(e),[r,i]=Gp(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},wn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var to=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bi.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(q.min(),i,new ue(X),Ct(),K())}},bi=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,K(),K(),K())}};var nr=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},no=class{constructor(e,t){this.targetId=e,this.me=t}},ro=class{constructor(e,t,r=Re.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},io=class{constructor(){this.fe=0,this.ge=$p(),this.pe=Re.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=K(),t=K(),r=K();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:B()}}),new bi(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$p()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Cu=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ct(),this.qe=zp(),this.Qe=new ue(X)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:B()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(mu(s))if(r===0){let a=new U(s.path);this.Ue(t,a,Qe.newNoDocument(a,q.min()))}else ne(r===1);else{let a=this.Ye(t);if(a!==r){let u=this.Ze(e),h=u?this.Xe(u,e,a):1;if(h!==0){this.je(t);let d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}jp?.et(function(p,w,A,P,N){var F,k,$,H,Q,ie;let De={localCacheCount:p,existenceFilterCount:w.count,databaseId:A.database,projectId:A.projectId},Z=w.unchangedNames;return Z&&(De.bloomFilter={applied:N===0,hashCount:(F=Z?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(H=($=(k=Z?.bits)===null||k===void 0?void 0:k.bitmap)===null||$===void 0?void 0:$.length)!==null&&H!==void 0?H:0,padding:(ie=(Q=Z?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&ie!==void 0?ie:0,mightContain:I=>{var m;return(m=P?.mightContain(I))!==null&&m!==void 0&&m}}),De}(a,e.me,this.Le.tt(),u,h))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,u;try{a=Yt(r).toUint8Array()}catch(h){if(h instanceof Js)return ir("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new Tu(a,i,s)}catch(h){return ir(h instanceof wn?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ie===0?null:u}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let u=this.Je(a);if(u){if(s.current&&mu(u.target)){let h=new U(u.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Qe.newNoDocument(h,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=K();this.qe.forEach((s,a)=>{let u=!0;a.forEachWhile(h=>{let d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new to(e,t,this.Qe,this.ke,r);return this.ke=Ct(),this.qe=zp(),this.Qe=new ue(X),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new io,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pe(X),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||M("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new io),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function zp(){return new ue(U.comparator)}function $p(){return new ue(U.comparator)}var _I={asc:"ASCENDING",desc:"DESCENDING"},yI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vI={and:"AND",or:"OR"},Au=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Su(n,e){return n.useProto3Json||Co(e)?e:{value:e}}function so(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function km(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function wI(n,e){return so(n,e.toTimestamp())}function ut(n){return ne(!!n),q.fromTimestamp(function(t){let r=Tt(t);return new ye(r.seconds,r.nanos)}(n))}function Ul(n,e){return Pu(n,e).canonicalString()}function Pu(n,e){let t=function(i){return new ae(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Nm(n){let e=ae.fromString(n);return ne(Fm(e)),e}function Ru(n,e){return Ul(n.databaseId,e.path)}function zc(n,e){let t=Nm(e);if(t.get(1)!==n.databaseId.projectId)throw new x(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new U(Om(t))}function xm(n,e){return Ul(n.databaseId,e)}function II(n){let e=Nm(n);return e.length===4?ae.emptyPath():Om(e)}function Du(n){return new ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Om(n){return ne(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Wp(n,e,t){return{name:Ru(n,e),fields:t.value.mapValue.fields}}function EI(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(ne(p===void 0||typeof p=="string"),Re.fromBase64String(p||"")):(ne(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Re.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){let p=d.code===void 0?S.UNKNOWN:Dm(d.code);return new x(p,d.message||"")}(a);t=new ro(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=zc(n,r.document.name),s=ut(r.document.updateTime),a=r.document.createTime?ut(r.document.createTime):q.min(),u=new He({mapValue:{fields:r.document.fields}}),h=Qe.newFoundDocument(i,s,a,u),d=r.targetIds||[],p=r.removedTargetIds||[];t=new nr(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=zc(n,r.document),s=r.readTime?ut(r.readTime):q.min(),a=Qe.newNoDocument(i,s),u=r.removedTargetIds||[];t=new nr([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=zc(n,r.document),s=r.removedTargetIds||[];t=new nr([],s,i,null)}else{if(!("filter"in e))return B();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new bu(i,s),u=r.targetId;t=new no(u,a)}}return t}function bI(n,e){let t;if(e instanceof Rn)t={update:Wp(n,e.key,e.value)};else if(e instanceof eo)t={delete:Ru(n,e.key)};else if(e instanceof At)t={update:Wp(n,e.key,e.data),updateMask:NI(e.fieldMask)};else{if(!(e instanceof vu))return B();t={verify:Ru(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let u=a.transform;if(u instanceof lr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Sn)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Pn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof hr)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw B()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:wI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(n,e.precondition)),t}function TI(n,e){return n&&n.length>0?(ne(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?ut(i.updateTime):ut(s);return a.isEqual(q.min())&&(a=ut(s)),new yu(a,i.transformResults||[])}(t,e))):[]}function CI(n,e){return{documents:[xm(n,e.path)]}}function AI(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xm(n,i);let s=function(d){if(d.length!==0)return Mm(Ye.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(d){if(d.length!==0)return d.map(p=>function(A){return{field:Zn(A.field),direction:RI(A.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let u=Su(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function SI(n){let e=II(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ne(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(w){let A=Vm(w);return A instanceof Ye&&fm(A)?A.getFilters():[A]}(t.where));let a=[];t.orderBy&&(a=function(w){return w.map(A=>function(N){return new An(er(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(A))}(t.orderBy));let u=null;t.limit&&(u=function(w){let A;return A=typeof w=="object"?w.value:w,Co(A)?null:A}(t.limit));let h=null;t.startAt&&(h=function(w){let A=!!w.before,P=w.values||[];return new cr(P,A)}(t.startAt));let d=null;return t.endAt&&(d=function(w){let A=!w.before,P=w.values||[];return new cr(P,A)}(t.endAt)),Zw(e,i,a,s,u,"F",h,d)}function PI(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Vm(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=er(t.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=er(t.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=er(t.unaryFilter.field);return de.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=er(t.unaryFilter.field);return de.create(a,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(n):n.fieldFilter!==void 0?function(t){return de.create(er(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ye.create(t.compositeFilter.filters.map(r=>Vm(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(t.compositeFilter.op))}(n):B()}function RI(n){return _I[n]}function DI(n){return yI[n]}function kI(n){return vI[n]}function Zn(n){return{fieldPath:n.canonicalString()}}function er(n){return Ue.fromServerFormat(n.fieldPath)}function Mm(n){return n instanceof de?function(t){if(t.op==="=="){if(Np(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NAN"}};if(kp(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Np(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NOT_NAN"}};if(kp(t.value))return{unaryFilter:{field:Zn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zn(t.field),op:DI(t.op),value:t.value}}}(n):n instanceof Ye?function(t){let r=t.getFilters().map(i=>Mm(i));return r.length===1?r[0]:{compositeFilter:{op:kI(t.op),filters:r}}}(n):B()}function NI(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ti=class n{constructor(e,t,r,i,s=q.min(),a=q.min(),u=Re.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ku=class{constructor(e){this.ct=e}};function xI(n){let e=SI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_u(e,e.limit,"L"):e}var oo=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(oe(e.integerValue));else if("doubleValue"in e){let r=oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),wi(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Tt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Yt(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?lm(e)?this.dt(t,Number.MAX_SAFE_INTEGER):um(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):B()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",u=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(oe(u)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),U.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};oo.vt=new oo;var Nu=class{constructor(){this.un=new xu}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(Tn.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(Tn.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},xu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pe(ae.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(ae.comparator)).toArray()}};var pC=new Uint8Array(0);var st=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};st.DEFAULT_COLLECTION_PERCENTILE=10,st.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,st.DEFAULT=new st(41943040,st.DEFAULT_COLLECTION_PERCENTILE,st.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),st.DISABLED=new st(-1,0,0);var Ci=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Ou=class{constructor(){this.changes=new Xt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Vu=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Mu=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yi(r.mutation,i,ot.empty(),ye.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,K()).next(()=>r))}getLocalViewOfDocuments(e,t,r=K()){let i=vn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=pi();return s.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=vn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,K()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let s=Ct(),a=_i(),u=function(){return _i()}();return t.forEach((h,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof At)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),yi(p.mutation,d,p.mutation.getFieldMask(),ye.now())):a.set(d.key,ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var w;return u.set(d,new Vu(p,(w=a.get(d))!==null&&w!==void 0?w:null))}),u))}recalculateAndSaveOverlays(e,t){let r=_i(),i=new ue((a,u)=>a-u),s=K();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(h=>{let d=t.get(h);if(d===null)return;let p=r.get(h)||ot.empty();p=u.applyToLocalView(d,p),r.set(h,p);let w=(i.get(u.batchId)||K()).add(h);i=i.insert(u.batchId,w)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let h=u.getNext(),d=h.key,p=h.value,w=Em();p.forEach(A=>{if(!s.has(A)){let P=Pm(t.get(A),r.get(A));P!==null&&w.set(A,P),s=s.add(A)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,w))}return R.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return U.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_m(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):R.resolve(vn()),u=-1,h=s;return a.next(d=>R.forEach(d,(p,w)=>(u<w.largestBatchId&&(u=w.largestBatchId),s.get(p)?R.resolve():this.remoteDocumentCache.getEntry(e,p).next(A=>{h=h.insert(p,A)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,h,d,K())).next(p=>({batchId:u,changes:Im(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next(r=>{let i=pi();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=pi();return this.indexManager.getCollectionParents(e,s).next(u=>R.forEach(u,h=>{let d=function(w,A){return new Jt(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((w,A)=>{a=a.insert(w,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((h,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,Qe.newInvalidDocument(p)))});let u=pi();return a.forEach((h,d)=>{let p=s.get(h);p!==void 0&&yi(p.mutation,d,ot.empty(),ye.now()),So(t,d)&&(u=u.insert(h,d))}),u})}};var Fu=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ut(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:xI(i.bundledQuery),readTime:ut(i.readTime)}}(t)),R.resolve()}};var Uu=class{constructor(){this.overlays=new ue(U.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=vn();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=vn(),s=t.length+1,a=new U(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ue((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=vn(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let u=vn(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=i)););return R.resolve(u)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Eu(t,r));let s=this.Ir.get(t);s===void 0&&(s=K(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var Lu=class{constructor(){this.sessionToken=Re.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var Ai=class{constructor(){this.Tr=new Pe(he.Er),this.dr=new Pe(he.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new he(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new he(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new U(new ae([])),r=new he(t,e),i=new he(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new U(new ae([])),r=new he(t,e),i=new he(t,e+1),s=K();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new he(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},he=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return U.comparator(e.key,t.key)||X(e.wr,t.wr)}static Ar(e,t){return X(e.wr,t.wr)||U.comparator(e.key,t.key)}};var Bu=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pe(he.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new wu(s,t,r,i);this.mutationQueue.push(a);for(let u of i)this.br=this.br.add(new he(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return R.resolve(a)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new he(t,0),i=new he(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let u=this.Dr(a.wr);s.push(u)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(X);return t.forEach(i=>{let s=new he(i,0),a=new he(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],u=>{r=r.add(u.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;U.isDocumentKey(s)||(s=s.child(""));let a=new he(new U(s),0),u=new Pe(X);return this.br.forEachWhile(h=>{let d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.wr)),!0)},a),R.resolve(this.Cr(u))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ne(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let s=new he(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new he(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ju=class{constructor(e){this.Mr=e,this.docs=function(){return new ue(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():Qe.newInvalidDocument(t))}getEntries(e,t){let r=Ct();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qe.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ct(),a=t.path,u=new U(a.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){let{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||qw(jw(p),r)<=0||(i.has(p.key)||So(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,t,r,i){B()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qu(this)}getSize(e){return R.resolve(this.size)}},qu=class extends Ou{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Gu=class{constructor(e){this.persistence=e,this.Nr=new Xt(t=>Ol(t),Vl),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ai,this.targetCount=0,this.kr=Ci.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ci(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var zu=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new am(0),this.Kr=!1,this.Kr=!0,this.$r=new Lu,this.referenceDelegate=e(this),this.Ur=new Gu(this),this.indexManager=new Nu,this.remoteDocumentCache=function(i){return new ju(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ku(t),this.Gr=new Fu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Bu(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){M("MemoryPersistence","Starting transaction:",e);let i=new $u(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},$u=class extends nu{constructor(e){super(),this.currentSequenceNumber=e}},Wu=class n{constructor(e){this.persistence=e,this.Jr=new Ai,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw B()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=U.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Ku=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=K(),i=K();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Hu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qu=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Fd()?8:zw(me())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new Hu;return this.Xi(e,t,a).next(u=>{if(s.result=u,this.zi)return this.es(e,t,a,u.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(fi()<=W.DEBUG&&M("QueryEngine","SDK will not create cache indexes for query:",Xn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(fi()<=W.DEBUG&&M("QueryEngine","Query:",Xn(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(fi()<=W.DEBUG&&M("QueryEngine","The SDK decides to create cache indexes for query:",Xn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ct(t))):R.resolve())}Yi(e,t){if(Mp(t))return R.resolve(null);let r=ct(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_u(t,null,"F"),r=ct(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=K(...s);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{let d=this.ts(t,u);return this.ns(t,d,a,h.readTime)?this.Yi(e,_u(t,null,"F")):this.rs(e,d,t,h)}))})))}Zi(e,t,r,i){return Mp(t)||i.isEqual(q.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?R.resolve(null):(fi()<=W.DEBUG&&M("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xn(t)),this.rs(e,a,t,Bw(i,-1)).next(u=>u))})}ts(e,t){let r=new Pe(vm(e));return t.forEach((i,s)=>{So(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return fi()<=W.DEBUG&&M("QueryEngine","Using full collection scan to execute query:",Xn(t)),this.Ji.getDocumentsMatchingQuery(e,t,Tn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var Yu=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ue(X),this._s=new Xt(s=>Ol(s),Vl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mu(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function OI(n,e,t,r){return new Yu(n,e,t,r)}function Um(n,e){return y(this,null,function*(){let t=j(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],u=[],h=K();for(let d of i){a.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}for(let d of s){u.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:u}))})})})}function VI(n,e){let t=j(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(u,h,d,p){let w=d.batch,A=w.keys(),P=R.resolve();return A.forEach(N=>{P=P.next(()=>p.getEntry(h,N)).next(F=>{let k=d.docVersions.get(N);ne(k!==null),F.version.compareTo(k)<0&&(w.applyToRemoteDocument(F,d),F.isValidDocument()&&(F.setReadTime(d.commitVersion),p.addEntry(F)))})}),P.next(()=>u.mutationQueue.removeMutationBatch(h,w))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=K();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Lm(n){let e=j(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function MI(n,e){let t=j(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let u=[];e.targetChanges.forEach((p,w)=>{let A=i.get(w);if(!A)return;u.push(t.Ur.removeMatchingKeys(s,p.removedDocuments,w).next(()=>t.Ur.addMatchingKeys(s,p.addedDocuments,w)));let P=A.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(Re.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):p.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(p.resumeToken,r)),i=i.insert(w,P),function(F,k,$){return F.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(A,P,p)&&u.push(t.Ur.updateTargetData(s,P))});let h=Ct(),d=K();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(FI(s,a,e.documentUpdates).next(p=>{h=p.Ps,d=p.Is})),!r.isEqual(q.min())){let p=t.Ur.getLastRemoteSnapshotVersion(s).next(w=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return R.waitFor(u).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,h,d)).next(()=>h)}).then(s=>(t.os=i,s))}function FI(n,e,t){let r=K(),i=K();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Ct();return t.forEach((u,h)=>{let d=s.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(q.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):M("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function UI(n,e){let t=j(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LI(n,e){let t=j(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Ti(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ju(n,e,t){return y(this,null,function*(){let r=j(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!xi(a))throw a;M("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Kp(n,e,t){let r=j(n),i=q.min(),s=K();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,d,p){let w=j(h),A=w._s.get(p);return A!==void 0?R.resolve(w.os.get(A)):w.Ur.getTargetData(d,p)}(r,a,ct(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,u.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:q.min(),t?s:K())).next(u=>(BI(r,tI(e),u),{documents:u,Ts:s})))}function BI(n,e,t){let r=n.us.get(e)||q.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var ao=class{constructor(){this.activeTargetIds=aI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Xu=class{constructor(){this.so=new ao,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ao,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Zu=class{_o(e){}shutdown(){}};var co=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){M("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){M("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zs=null;function $c(){return zs===null?zs=function(){return 268435456+Math.round(2147483648*Math.random())}():zs++,"0x"+zs.toString(16)}var jI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var el=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Se="WebChannelConnection",tl=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let u=$c(),h=this.xo(t,r.toUriEncodedString());M("RestConnection",`Sending RPC '${t}' ${u}:`,h,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,a),this.No(t,h,d,i).then(p=>(M("RestConnection",`Received RPC '${t}' ${u}: `,p),p),p=>{throw ir("RestConnection",`RPC '${t}' ${u} failed with error: `,p,"url: ",h,"request:",i),p})}Lo(t,r,i,s,a,u){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=jI[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=$c();return new Promise((a,u)=>{let h=new Uc;h.setWithCredentials(!0),h.listenOnce(Bc.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case di.NO_ERROR:let p=h.getResponseJson();M(Se,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case di.TIMEOUT:M(Se,`RPC '${e}' ${s} timed out`),u(new x(S.DEADLINE_EXCEEDED,"Request time out"));break;case di.HTTP_ERROR:let w=h.getStatus();if(M(Se,`RPC '${e}' ${s} failed with status:`,w,"response text:",h.getResponseText()),w>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);let P=A?.error;if(P&&P.status&&P.message){let N=function(k){let $=k.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf($)>=0?$:S.UNKNOWN}(P.status);u(new x(N,P.message))}else u(new x(S.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new x(S.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{M(Se,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);M(Se,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=$c(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Gc(),u=qc(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.xmlHttpFactory=new Lc({})),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let p=s.join("");M(Se,`Creating RPC '${e}' stream ${i}: ${p}`,h);let w=a.createWebChannel(p,h),A=!1,P=!1,N=new el({Io:k=>{P?M(Se,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(A||(M(Se,`Opening RPC '${e}' stream ${i} transport.`),w.open(),A=!0),M(Se,`RPC '${e}' stream ${i} sending:`,k),w.send(k))},To:()=>w.close()}),F=(k,$,H)=>{k.listen($,Q=>{try{H(Q)}catch(ie){setTimeout(()=>{throw ie},0)}})};return F(w,Jn.EventType.OPEN,()=>{P||(M(Se,`RPC '${e}' stream ${i} transport opened.`),N.yo())}),F(w,Jn.EventType.CLOSE,()=>{P||(P=!0,M(Se,`RPC '${e}' stream ${i} transport closed`),N.So())}),F(w,Jn.EventType.ERROR,k=>{P||(P=!0,ir(Se,`RPC '${e}' stream ${i} transport errored:`,k),N.So(new x(S.UNAVAILABLE,"The operation could not be completed")))}),F(w,Jn.EventType.MESSAGE,k=>{var $;if(!P){let H=k.data[0];ne(!!H);let Q=H,ie=Q.error||(($=Q[0])===null||$===void 0?void 0:$.error);if(ie){M(Se,`RPC '${e}' stream ${i} received error:`,ie);let De=ie.status,Z=function(_){let v=le[_];if(v!==void 0)return Dm(v)}(De),I=ie.message;Z===void 0&&(Z=S.INTERNAL,I="Unknown error status: "+De+" with message "+ie.message),P=!0,N.So(new x(Z,I)),w.close()}else M(Se,`RPC '${e}' stream ${i} received:`,H),N.bo(H)}}),F(u,jc.STAT_EVENT,k=>{k.stat===qs.PROXY?M(Se,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===qs.NOPROXY&&M(Se,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}};function Wc(){return typeof document<"u"?document:null}function Po(n){return new Au(n,!0)}var uo=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&M("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var lo=class{constructor(e,t,r,i,s,a,u,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uo(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new x(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return M("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(M("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nl=class extends lo{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=EI(this.serializer,e),r=function(s){if(!("targetChange"in s))return q.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?q.min():a.readTime?ut(a.readTime):q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Du(this.serializer),t.addTarget=function(s,a){let u,h=a.target;if(u=mu(h)?{documents:CI(s,h)}:{query:AI(s,h)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=km(s,a.resumeToken);let d=Su(s,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(q.min())>0){u.readTime=so(s,a.snapshotVersion.toTimestamp());let d=Su(s,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);let r=PI(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Du(this.serializer),t.removeTarget=e,this.a_(t)}},rl=class extends lo{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=TI(e.writeResults,e.commitTime),r=ut(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Du(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bI(this.serializer,r))};this.a_(t)}};var il=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new x(S.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Pu(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(S.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Pu(t,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new x(S.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},sl=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bt(t),this.D_=!1):M("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var ol=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(()=>y(this,null,function*(){kn(this)&&(M("RemoteStore","Restarting streams for network reachability change."),yield function(h){return y(this,null,function*(){let d=j(h);d.L_.add(4),yield Oi(d),d.q_.set("Unknown"),d.L_.delete(4),yield Ro(d)})}(this))}))}),this.q_=new sl(r,i)}};function Ro(n){return y(this,null,function*(){if(kn(n))for(let e of n.B_)yield e(!0)})}function Oi(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Bm(n,e){let t=j(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ql(t)?jl(t):yr(t).r_()&&Bl(t,e))}function Ll(n,e){let t=j(n),r=yr(t);t.N_.delete(e),r.r_()&&jm(t,e),t.N_.size===0&&(r.r_()?r.o_():kn(t)&&t.q_.set("Unknown"))}function Bl(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yr(n).A_(e)}function jm(n,e){n.Q_.xe(e),yr(n).R_(e)}function jl(n){n.Q_=new Cu({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),yr(n).start(),n.q_.v_()}function ql(n){return kn(n)&&!yr(n).n_()&&n.N_.size>0}function kn(n){return j(n).L_.size===0}function qm(n){n.Q_=void 0}function qI(n){return y(this,null,function*(){n.q_.set("Online")})}function GI(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{Bl(n,e)})})}function zI(n,e){return y(this,null,function*(){qm(n),ql(n)?(n.q_.M_(e),jl(n)):n.q_.set("Unknown")})}function $I(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof ro&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let a=s.cause;for(let u of s.targetIds)i.N_.has(u)&&(yield i.remoteSyncer.rejectListen(u,a),i.N_.delete(u),i.Q_.removeTarget(u))})}(n,e)}catch(r){M("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ho(n,r)}else if(e instanceof nr?n.Q_.Ke(e):e instanceof no?n.Q_.He(e):n.Q_.We(e),!t.isEqual(q.min()))try{let r=yield Lm(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){let u=s.Q_.rt(a);return u.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){let p=s.N_.get(d);p&&s.N_.set(d,p.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,d)=>{let p=s.N_.get(h);if(!p)return;s.N_.set(h,p.withResumeToken(Re.EMPTY_BYTE_STRING,p.snapshotVersion)),jm(s,h);let w=new Ti(p.target,h,d,p.sequenceNumber);Bl(s,w)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){M("RemoteStore","Failed to raise snapshot:",r),yield ho(n,r)}})}function ho(n,e,t){return y(this,null,function*(){if(!xi(e))throw e;n.L_.add(1),yield Oi(n),n.q_.set("Offline"),t||(t=()=>Lm(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){M("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ro(n)}))})}function Gm(n,e){return e().catch(t=>ho(n,t,e))}function Do(n){return y(this,null,function*(){let e=j(n),t=Zt(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;WI(e);)try{let i=yield UI(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,KI(e,i)}catch(i){yield ho(e,i)}zm(e)&&$m(e)})}function WI(n){return kn(n)&&n.O_.length<10}function KI(n,e){n.O_.push(e);let t=Zt(n);t.r_()&&t.V_&&t.m_(e.mutations)}function zm(n){return kn(n)&&!Zt(n).n_()&&n.O_.length>0}function $m(n){Zt(n).start()}function HI(n){return y(this,null,function*(){Zt(n).p_()})}function QI(n){return y(this,null,function*(){let e=Zt(n);for(let t of n.O_)e.m_(t.mutations)})}function YI(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=Iu.from(r,e,t);yield Gm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Do(n)})}function JI(n,e){return y(this,null,function*(){e&&Zt(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(a){return pI(a)&&a!==S.ABORTED}(i.code)){let s=r.O_.shift();Zt(r).s_(),yield Gm(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Do(r)}})}(n,e)),zm(n)&&$m(n)})}function Hp(n,e){return y(this,null,function*(){let t=j(n);t.asyncQueue.verifyOperationInProgress(),M("RemoteStore","RemoteStore received new credentials");let r=kn(t);t.L_.add(3),yield Oi(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ro(t)})}function XI(n,e){return y(this,null,function*(){let t=j(n);e?(t.L_.delete(2),yield Ro(t)):e||(t.L_.add(2),yield Oi(t),t.q_.set("Unknown"))})}function yr(n){return n.K_||(n.K_=function(t,r,i){let s=j(t);return s.w_(),new nl(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:qI.bind(null,n),Ro:GI.bind(null,n),mo:zI.bind(null,n),d_:$I.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),ql(n)?jl(n):n.q_.set("Unknown")):(yield n.K_.stop(),qm(n))}))),n.K_}function Zt(n){return n.U_||(n.U_=function(t,r,i){let s=j(t);return s.w_(),new rl(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:HI.bind(null,n),mo:JI.bind(null,n),f_:QI.bind(null,n),g_:YI.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield Do(n)):(yield n.U_.stop(),n.O_.length>0&&(M("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var al=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,u=new n(e,t,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Gl(n,e){if(bt("AsyncQueue",`${e}: ${n}`),xi(n))return new x(S.UNAVAILABLE,`${e}: ${n}`);throw n}var fo=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||U.comparator(t.key,r.key):(t,r)=>U.comparator(t.key,r.key),this.keyedMap=pi(),this.sortedSet=new ue(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var po=class{constructor(){this.W_=new ue(U.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):B():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},fr=class n{constructor(e,t,r,i,s,a,u,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new n(e,t,fo.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ao(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var cl=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ul=class{constructor(){this.queries=Qp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=j(t),s=i.queries;i.queries=Qp(),s.forEach((a,u)=>{for(let h of u.j_)h.onError(r)})})(this,new x(S.ABORTED,"Firestore shutting down"))}};function Qp(){return new Xt(n=>ym(n),Ao)}function ZI(n,e){return y(this,null,function*(){let t=j(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new cl,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let u=Gl(a,`Initialization of query '${Xn(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&zl(t)})}function eE(n,e){return y(this,null,function*(){let t=j(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function tE(n,e){let t=j(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let u of a.j_)u.X_(i)&&(r=!0);a.z_=i}}r&&zl(t)}function nE(n,e,t){let r=j(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function zl(n){n.Y_.forEach(e=>{e.next()})}var ll,Yp;(Yp=ll||(ll={})).ea="default",Yp.Cache="cache";var hl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=fr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ll.Cache}};var mo=class{constructor(e){this.key=e}},go=class{constructor(e){this.key=e}},dl=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=K(),this.mutatedKeys=K(),this.Aa=vm(e),this.Ra=new fo(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new po,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,w)=>{let A=i.get(p),P=So(this.query,w)?w:null,N=!!A&&this.mutatedKeys.has(A.key),F=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations),k=!1;A&&P?A.data.isEqual(P.data)?N!==F&&(r.track({type:3,doc:P}),k=!0):this.ga(A,P)||(r.track({type:2,doc:P}),k=!0,(h&&this.Aa(P,h)>0||d&&this.Aa(P,d)<0)&&(u=!0)):!A&&P?(r.track({type:0,doc:P}),k=!0):A&&!P&&(r.track({type:1,doc:A}),k=!0,(h||d)&&(u=!0)),k&&(P?(a=a.add(P),s=F?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:u,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((p,w)=>function(P,N){let F=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return F(P)-F(N)}(p.type,w.type)||this.Aa(p.doc,w.doc)),this.pa(r),i=i!=null&&i;let u=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new fr(this.query,e.Ra,s,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new po,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=K(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new go(r))}),this.da.forEach(r=>{e.has(r)||t.push(new mo(r))}),t}ba(e){this.Ta=e.Ts,this.da=K();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return fr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},fl=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},pl=class{constructor(e){this.key=e,this.va=!1}},ml=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Xt(u=>ym(u),Ao),this.Ma=new Map,this.xa=new Set,this.Oa=new ue(U.comparator),this.Na=new Map,this.La=new Ai,this.Ba={},this.ka=new Map,this.qa=Ci.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function rE(n,e,t=!0){return y(this,null,function*(){let r=Jm(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Wm(r,e,t,!0),i})}function iE(n,e){return y(this,null,function*(){let t=Jm(n);yield Wm(t,e,!0,!1)})}function Wm(n,e,t,r){return y(this,null,function*(){let i=yield LI(n.localStore,ct(e)),s=i.targetId,a=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",u;return r&&(u=yield sE(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Bm(n.remoteStore,i),u})}function sE(n,e,t,r,i){return y(this,null,function*(){n.Ka=(w,A,P)=>function(F,k,$,H){return y(this,null,function*(){let Q=k.view.ma($);Q.ns&&(Q=yield Kp(F.localStore,k.query,!1).then(({documents:I})=>k.view.ma(I,Q)));let ie=H&&H.targetChanges.get(k.targetId),De=H&&H.targetMismatches.get(k.targetId)!=null,Z=k.view.applyChanges(Q,F.isPrimaryClient,ie,De);return Xp(F,k.targetId,Z.wa),Z.snapshot})}(n,w,A,P);let s=yield Kp(n.localStore,e,!0),a=new dl(e,s.Ts),u=a.ma(s.documents),h=bi.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(u,n.isPrimaryClient,h);Xp(n,t,d.wa);let p=new fl(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function oE(n,e,t){return y(this,null,function*(){let r=j(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Ao(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ju(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ll(r.remoteStore,i.targetId),gl(r,i.targetId)}).catch(Ni))):(gl(r,i.targetId),yield Ju(r.localStore,i.targetId,!0))})}function aE(n,e){return y(this,null,function*(){let t=j(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ll(t.remoteStore,r.targetId))})}function cE(n,e,t){return y(this,null,function*(){let r=mE(n);try{let i=yield function(a,u){let h=j(a),d=ye.now(),p=u.reduce((P,N)=>P.add(N.key),K()),w,A;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let N=Ct(),F=K();return h.cs.getEntries(P,p).next(k=>{N=k,N.forEach(($,H)=>{H.isValidDocument()||(F=F.add($))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,N)).next(k=>{w=k;let $=[];for(let H of u){let Q=fI(H,w.get(H.key).overlayedDocument);Q!=null&&$.push(new At(H.key,Q,hm(Q.value.mapValue),En.exists(!0)))}return h.mutationQueue.addMutationBatch(P,d,$,u)}).next(k=>{A=k;let $=k.applyToLocalDocumentSet(w,F);return h.documentOverlayCache.saveOverlays(P,k.batchId,$)})}).then(()=>({batchId:A.batchId,changes:Im(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new ue(X)),d=d.insert(u,h),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),yield Vi(r,i.changes),yield Do(r.remoteStore)}catch(i){let s=Gl(i,"Failed to persist write");t.reject(s)}})}function Km(n,e){return y(this,null,function*(){let t=j(n);try{let r=yield MI(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?ne(a.va):i.removedDocuments.size>0&&(ne(a.va),a.va=!1))}),yield Vi(t,r,e)}catch(r){yield Ni(r)}})}function Jp(n,e,t){let r=j(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let u=a.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){let h=j(a);h.onlineState=u;let d=!1;h.queries.forEach((p,w)=>{for(let A of w.j_)A.Z_(u)&&(d=!0)}),d&&zl(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uE(n,e,t){return y(this,null,function*(){let r=j(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new ue(U.comparator);a=a.insert(s,Qe.newNoDocument(s,q.min()));let u=K().add(s),h=new to(q.min(),new Map,new ue(X),a,u);yield Km(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),$l(r)}else yield Ju(r.localStore,e,!1).then(()=>gl(r,e,t)).catch(Ni)})}function lE(n,e){return y(this,null,function*(){let t=j(n),r=e.batch.batchId;try{let i=yield VI(t.localStore,e);Qm(t,r,null),Hm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vi(t,i)}catch(i){yield Ni(i)}})}function hE(n,e,t){return y(this,null,function*(){let r=j(n);try{let i=yield function(a,u){let h=j(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return h.mutationQueue.lookupMutationBatch(d,u).next(w=>(ne(w!==null),p=w.keys(),h.mutationQueue.removeMutationBatch(d,w))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>h.localDocuments.getDocuments(d,p))})}(r.localStore,e);Qm(r,e,t),Hm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vi(r,i)}catch(i){yield Ni(i)}})}function Hm(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Qm(n,e,t){let r=j(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function gl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Ym(n,r)})}function Ym(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ll(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),$l(n))}function Xp(n,e,t){for(let r of t)r instanceof mo?(n.La.addReference(r.key,e),dE(n,r)):r instanceof go?(M("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Ym(n,r.key)):B()}function dE(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(M("SyncEngine","New document in limbo: "+t),n.xa.add(r),$l(n))}function $l(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new U(ae.fromString(e)),r=n.qa.next();n.Na.set(r,new pl(t)),n.Oa=n.Oa.insert(t,r),Bm(n.remoteStore,new Ti(ct(Ml(t.path)),r,"TargetPurposeLimboResolution",am.oe))}}function Vi(n,e,t){return y(this,null,function*(){let r=j(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((u,h)=>{a.push(r.Ka(h,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let w=d?!d.fromCache:(p=t?.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,w?"current":"not-current")}if(d){i.push(d);let w=Ku.Wi(h.targetId,d);s.push(w)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(h,d){return y(this,null,function*(){let p=j(h);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>R.forEach(d,A=>R.forEach(A.$i,P=>p.persistence.referenceDelegate.addReference(w,A.targetId,P)).next(()=>R.forEach(A.Ui,P=>p.persistence.referenceDelegate.removeReference(w,A.targetId,P)))))}catch(w){if(!xi(w))throw w;M("LocalStore","Failed to update sequence numbers: "+w)}for(let w of d){let A=w.targetId;if(!w.fromCache){let P=p.os.get(A),N=P.snapshotVersion,F=P.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(A,F)}}})}(r.localStore,s))})}function fE(n,e){return y(this,null,function*(){let t=j(n);if(!t.currentUser.isEqual(e)){M("SyncEngine","User change. New user:",e.toKey());let r=yield Um(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(u=>{u.forEach(h=>{h.reject(new x(S.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vi(t,r.hs)}})}function pE(n,e){let t=j(n),r=t.Na.get(e);if(r&&r.va)return K().add(r.key);{let i=K(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let u=t.Fa.get(a);i=i.unionWith(u.view.Va)}return i}}function Jm(n){let e=j(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Km.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uE.bind(null,e),e.Ca.d_=tE.bind(null,e.eventManager),e.Ca.$a=nE.bind(null,e.eventManager),e}function mE(n){let e=j(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hE.bind(null,e),e}var _o=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=Po(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return OI(this.persistence,new Qu,e.initialUser,this.serializer)}createPersistence(e){return new zu(Wu.Zr,this.serializer)}createSharedClientState(e){return new Xu}terminate(){return y(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var _l=class{initialize(e,t){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Jp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fE.bind(null,this.syncEngine),yield XI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new ul}()}createDatastore(e){let t=Po(e.databaseInfo.databaseId),r=function(s){return new tl(s)}(e.databaseInfo);return function(s,a,u,h){return new il(s,a,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,u){return new ol(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Jp(this.syncEngine,t,0),function(){return co.D()?new co:new Zu}())}createSyncEngine(e,t){return function(i,s,a,u,h,d,p){let w=new ml(i,s,a,u,h,d);return p&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return y(this,null,function*(){var e,t;yield function(i){return y(this,null,function*(){let s=j(i);M("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Oi(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var yl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var vl=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ge.UNAUTHENTICATED,this.clientId=Hs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>y(this,null,function*(){M("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(M("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Gl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Kc(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),M("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield Um(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Zp(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _E(n);M("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Hp(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Hp(e.remoteStore,i)),n._onlineComponents=e})}function gE(n){return n.name==="FirebaseError"?n.code===S.FAILED_PRECONDITION||n.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function _E(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){M("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kc(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!gE(t))throw t;ir("Error using user provided cache. Falling back to memory cache: "+t),yield Kc(n,new _o)}}else M("FirestoreClient","Using default OfflineComponentProvider"),yield Kc(n,new _o);return n._offlineComponents})}function Xm(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(M("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zp(n,n._uninitializedComponentsProvider._online)):(M("FirestoreClient","Using default OnlineComponentProvider"),yield Zp(n,new _l))),n._onlineComponents})}function yE(n){return Xm(n).then(e=>e.syncEngine)}function em(n){return y(this,null,function*(){let e=yield Xm(n),t=e.eventManager;return t.onListen=rE.bind(null,e.syncEngine),t.onUnlisten=oE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iE.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aE.bind(null,e.syncEngine),t})}function Zm(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tm=new Map;function eg(n,e,t){if(!t)throw new x(S.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vE(n,e,t,r){if(e===!0&&r===!0)throw new x(S.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nm(n){if(!U.isDocumentKey(n))throw new x(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rm(n){if(U.isDocumentKey(n))throw new x(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ko(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":B()}function vi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ko(n);throw new x(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var yo=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new x(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zm((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(S.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pr=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yo({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new x(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yo(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hc;switch(r.type){case"firstParty":return new Xc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=tm.get(t);r&&(M("ComponentProvider","Removing Datastore"),tm.delete(t),r.terminate())}(this),Promise.resolve()}};function tg(n,e,t,r={}){var i;let s=(n=vi(n,pr))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=ge.MOCK_USER;else{u=Nd(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new x(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ge(d)}n._authCredentials=new Qc(new Ks(u,h))}}var Dn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Le=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Qt=class n extends Dn{constructor(e,t,r){super(e,t,Ml(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new U(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ng(n,e,...t){if(n=Ae(n),eg("collection","path",e),n instanceof pr){let r=ae.fromString(e,...t);return rm(r),new Qt(n,null,r)}{if(!(n instanceof Le||n instanceof Qt))throw new x(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ae.fromString(e,...t));return rm(r),new Qt(n.firestore,null,r)}}function rg(n,e,...t){if(n=Ae(n),arguments.length===1&&(e=Hs.newId()),eg("doc","path",e),n instanceof pr){let r=ae.fromString(e,...t);return nm(r),new Le(n,null,new U(r))}{if(!(n instanceof Le||n instanceof Qt))throw new x(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ae.fromString(e,...t));return nm(r),new Le(n.firestore,n instanceof Qt?n.converter:null,new U(r))}}var wl=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new uo(this,"async_queue_retry"),this.Eu=()=>{let t=Wc();t&&M("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=Wc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=Wc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new Et;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return y(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!xi(e))throw e;M("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw bt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=al.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&B()}verifyOperationInProgress(){}mu(){return y(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function im(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var mr=class extends pr{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new wl}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||og(this),this._firestoreClient.terminate()}};function ig(n,e){let t=typeof n=="object"?n:Ln(),r=typeof n=="string"?n:e||"(default)",i=Hr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=kd("firestore");s&&tg(i,...s)}return i}function sg(n){return n._firestoreClient||og(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function og(n){var e,t,r;let i=n._freezeSettings(),s=function(u,h,d,p){return new ru(u,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Zm(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new vl(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Si=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Re.fromBase64String(e))}catch(t){throw new x(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Re.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Pi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vo=class{constructor(e){this._methodName=e}};var Ri=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}};var Di=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var wE=/^__.*__$/,Il=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new At(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rn(e,this.data,t,this.fieldTransforms)}};function ag(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var El=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return wo(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(ag(this.wu)&&wE.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},bl=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Po(e)}Nu(e,t,r,i=!1){return new El({wu:e,methodName:t,Ou:r,path:Ue.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function cg(n){let e=n._freezeSettings(),t=Po(n._databaseId);return new bl(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IE(n,e,t,r,i,s={}){let a=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);hg("Data must be an object, but it was:",a,r);let u=ug(r,a),h,d;if(s.merge)h=new ot(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){let p=[];for(let w of s.mergeFields){let A=bE(e,w,t);if(!a.contains(A))throw new x(S.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);CE(p,A)||p.push(A)}h=new ot(p),d=a.fieldTransforms.filter(w=>h.covers(w.field))}else h=null,d=a.fieldTransforms;return new Il(new He(u),h,d)}function EE(n,e,t,r=!1){return Wl(t,n.Nu(r?4:3,e))}function Wl(n,e){if(lg(n=Ae(n)))return hg("Unsupported field value:",e,n),ug(n,e);if(n instanceof vo)return function(r,i){if(!ag(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let u of r){let h=Wl(u,i.Fu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ye.fromDate(r);return{timestampValue:so(i.serializer,s)}}if(r instanceof ye){let s=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:so(i.serializer,s)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Si)return{bytesValue:km(i.serializer,r._byteString)};if(r instanceof Le){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ul(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Di)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw u.Mu("VectorValues must only contain numeric values.");return Fl(u.serializer,h)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${ko(r)}`)}(n,e)}function ug(n,e){let t={};return cm(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_r(n,(r,i)=>{let s=Wl(i,e.bu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function lg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ye||n instanceof Ri||n instanceof Si||n instanceof Le||n instanceof vo||n instanceof Di)}function hg(n,e,t){if(!lg(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ko(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function bE(n,e,t){if((e=Ae(e))instanceof Pi)return e._internalPath;if(typeof e=="string")return dg(n,e);throw wo("Field path arguments must be of type string or ",n,!1,void 0,t)}var TE=new RegExp("[~\\*/\\[\\]]");function dg(n,e,t){if(e.search(TE)>=0)throw wo(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pi(...e.split("."))._internalPath}catch{throw wo(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wo(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new x(S.INVALID_ARGUMENT,u+n+h)}function CE(n,e){return n.some(t=>t.isEqual(e))}var Io=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Tl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Kl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Tl=class extends Io{data(){return super.data()}};function Kl(n,e){return typeof e=="string"?dg(n,e):e instanceof Pi?e._internalPath:e._delegate._internalPath}function AE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ki=class{},Eo=class extends ki{};function Hl(n,e,...t){let r=[];e instanceof ki&&r.push(e),r=r.concat(t),function(s){let a=s.filter(h=>h instanceof Al).length,u=s.filter(h=>h instanceof Cl).length;if(a>1||a>0&&u>0)throw new x(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Cl=class n extends Eo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return fg(e._query,t),new Dn(e.firestore,e.converter,gu(e._query,t))}_parse(e){let t=cg(e.firestore);return function(s,a,u,h,d,p,w){let A;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new x(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){om(w,p);let P=[];for(let N of w)P.push(sm(h,s,N));A={arrayValue:{values:P}}}else A=sm(h,s,w)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||om(w,p),A=EE(u,a,w,p==="in"||p==="not-in");return de.create(d,p,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Al=class n extends ki{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i,u=s.getFlattenedFilters();for(let h of u)fg(a,h),a=gu(a,h)}(e._query,t),new Dn(e.firestore,e.converter,gu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Sl=class n extends Eo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,a){if(i.startAt!==null)throw new x(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new An(s,a)}(e._query,this._field,this._direction);return new Dn(e.firestore,e.converter,function(i,s){let a=i.explicitOrderBy.concat([s]);return new Jt(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Ql(n,e="asc"){let t=e,r=Kl("orderBy",n);return Sl._create(r,t)}function sm(n,e,t){if(typeof(t=Ae(t))=="string"){if(t==="")throw new x(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_m(e)&&t.indexOf("/")!==-1)throw new x(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ae.fromString(t));if(!U.isDocumentKey(r))throw new x(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dp(n,new U(r))}if(t instanceof Le)return Dp(n,t._key);throw new x(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ko(t)}.`)}function om(n,e){if(!Array.isArray(n)||n.length===0)throw new x(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fg(n,e){let t=function(i,s){for(let a of i)for(let u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new x(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Pl=class{convertValue(e,t="none"){switch(Cn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw B()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return _r(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>oe(a.doubleValue));return new Di(s)}convertGeoPoint(e){return new Ri(oe(e.latitude),oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Nl(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ii(e));default:return null}}convertTimestamp(e){let t=Tt(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ae.fromString(e);ne(Fm(r));let i=new Xs(r.get(1),r.get(3)),s=new U(r.popFirst(5));return i.isEqual(t)||bt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function SE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var In=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bo=class extends Io{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new rr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Kl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},rr=class extends bo{data(e={}){return super.data(e)}},Rl=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new In(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rr(this._firestore,this._userDataWriter,r.key,r,new In(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let h=new rr(i._firestore,i._userDataWriter,u.doc.key,u.doc,new In(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{let h=new rr(i._firestore,i._userDataWriter,u.doc.key,u.doc,new In(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:PE(u.type),doc:h,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function PE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}var To=class extends Pl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Si(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};function pg(n,e){let t=vi(n.firestore,mr),r=rg(n),i=SE(n.converter,e);return RE(t,[IE(cg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function Yl(n,...e){var t,r,i;n=Ae(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||im(e[a])||(s=e[a],a++);let u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(im(e[a])){let w=e[a];e[a]=(t=w.next)===null||t===void 0?void 0:t.bind(w),e[a+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[a+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}let h,d,p;if(n instanceof Le)d=vi(n.firestore,mr),p=Ml(n._key.path),h={next:w=>{e[a]&&e[a](DE(d,n,w))},error:e[a+1],complete:e[a+2]};else{let w=vi(n,Dn);d=vi(w.firestore,mr),p=w._query;let A=new To(d);h={next:P=>{e[a]&&e[a](new Rl(d,A,w,P))},error:e[a+1],complete:e[a+2]},AE(n._query)}return function(A,P,N,F){let k=new yl(F),$=new hl(P,k,N);return A.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return ZI(yield em(A),$)})),()=>{k.za(),A.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return eE(yield em(A),$)}))}}(sg(d),p,u,h)}function RE(n,e){return function(r,i){let s=new Et;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return cE(yield yE(r),i,s)})),s.promise}(sg(n),e)}function DE(n,e,t){let r=t.docs.get(e._key),i=new To(n);return new bo(n,i,e._key,r,new In(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){gr=i})(qt),jt(new Ge("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),u=new mr(new Yc(r.getProvider("auth-internal")),new eu(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new x(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xs(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),fe(Ap,"4.7.1",e),fe(Ap,"4.7.1","esm2017")})();var No=function(){return No=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},No.apply(this,arguments)};var xE={includeMetadataChanges:!1};function mg(n,e){return e===void 0&&(e=xE),new Ur(function(t){var r=Yl(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function gg(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:No(No({},r),(t={},t[e.idField]=n.id,t))}function _g(n){return mg(n,{includeMetadataChanges:!0}).pipe(Lr(function(e){return e.docs}))}function yg(n,e){return e===void 0&&(e={}),_g(n).pipe(Lr(function(t){return t.map(function(r){return gg(r,e)})}))}var St=class{constructor(e){return e}},vg="firestore",Jl=class{constructor(){return Qr(vg)}};var Xl=new je("angularfire2.firestore-instances");function OE(n,e){let t=ls(vg,n,e);return t&&new St(t)}function VE(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new St(r)}}var ME={provide:Jl,deps:[[new qe,Xl]]},FE={provide:St,useFactory:OE,deps:[[new qe,Xl],_t]};function wg(n,...e){return fe("angularfire",dn.full,"fst"),Mn([FE,ME,{provide:Xl,useFactory:VE(n),multi:!0,deps:[xt,sn,qn,fn,[new qe,ii],[new qe,jn],...e]}])}var Ig=Ke(yg,!0);var Eg=Ke(pg,!0);var Zl=Ke(ng,!0);var bg=Ke(ig,!0);function UE(n,e){n&1&&(O(0,"p"),z(1,"Usuario Registrado"),V())}function LE(n,e){if(n&1&&(O(0,"p"),z(1),V()),n&2){let t=Je();ee(),Xe(t.msjError)}}function BE(n,e){n&1&&(O(0,"div",13),Te(1,"span",14),V())}var xo=class n{constructor(e,t,r,i){this.router=e;this.auth=t;this.userService=r;this.firestore=i}email="";password="";mensagges="";loggedUser="";flagError=!1;msjError="";isLoading=!1;sub;messages=[];newMessage="";loginUser(){np(this.auth,this.email,this.password).then(e=>{e.user.email!==null&&(this.isLoading=!0,setTimeout(()=>{this.userService.setUser(this.email),this.isLoading=!1,this.router.navigate(["/home"])},1e3)),this.flagError=!1}).catch(e=>{switch(this.flagError=!0,console.log(e),e.code){case"auth/weak-password":this.msjError="Contrase\xF1a demasiado corta.";break;case"auth/invalid-email":this.msjError="Correo electr\xF3nico no v\xE1lido.";break;case"auth/email-already-in-use":this.msjError="El correo electr\xF3nico ya est\xE1 en uso.";break;case"auth/user-not-found":this.msjError="No se encontr\xF3 ning\xFAn usuario con este correo.";break;case"auth/wrong-password":this.msjError="Credenciales Invalidas.";break;case"auth/invalid-credential":this.msjError="Credenciales no v\xE1lidas.";break;case"auth/account-exists-with-different-credential":this.msjError="Ya existe una cuenta con un correo diferente.";break;case"auth/credential-already-in-use":this.msjError="Estas credenciales ya est\xE1n en uso por otra cuenta.";break;default:this.msjError="Error: "+e.code;break}})}redirectToSignIn(){this.router.navigate(["/singin"])}dato="datsos del padre";recibirDato(e){this.dato=e}enviarDato=new on;datoHijo1="Dato del hijo 1";enviarDatoFn(){this.enviarDato.emit(this.dato)}autocompletar(e,t){this.email=e,this.password=t}static \u0275fac=function(t){return new(t||n)(G(et),G(Fe),G(Ve),G(St))};static \u0275cmp=be({type:n,selectors:[["app-login"]],outputs:{enviarDato:"enviarDato"},standalone:!0,features:[Ce],decls:23,vars:5,consts:[[1,"container"],["type","checkbox","id","check"],[1,"login","form"],["action","#"],["type","text","placeholder","Ingrese su Email","name","email",3,"ngModelChange","ngModel"],["type","password","placeholder","Ingrese su Contrase\xF1a","name","password",3,"ngModelChange","ngModel"],["type","button","value","Iniciar Sesi\xF3n",1,"button",3,"click"],[4,"ngIf"],[1,"botones"],["type","button",1,"botones-autocompletar",3,"click"],[1,"signup"],[1,"signup",3,"click"],["class","loader-container",4,"ngIf"],[1,"loader-container"],[1,"loader"]],template:function(t,r){t&1&&(O(0,"body")(1,"div",0),Te(2,"input",1),O(3,"div",2)(4,"header"),z(5,"Login"),V(),O(6,"form",3)(7,"input",4),Mt("ngModelChange",function(s){return Vt(r.email,s)||(r.email=s),s}),V(),O(8,"input",5),Mt("ngModelChange",function(s){return Vt(r.password,s)||(r.password=s),s}),V(),O(9,"input",6),re("click",function(){return r.loginUser()}),V(),$e(10,UE,2,0,"p",7)(11,LE,2,1,"p",7),V(),O(12,"div",8)(13,"button",9),re("click",function(){return r.autocompletar("matias.skenen@gmail.com","123456")}),z(14,"Usuario 1"),V(),O(15,"button",9),re("click",function(){return r.autocompletar("lucasmansini@gmail.com","123456")}),z(16,"Usuario 2"),V(),O(17,"button",9),re("click",function(){return r.autocompletar("jorge@gmail.com","123456")}),z(18,"Usuario 3"),V()(),O(19,"div",10)(20,"button",11),re("click",function(){return r.redirectToSignIn()}),z(21,"Registrarse"),V()()(),$e(22,BE,2,0,"div",12),V()()),t&2&&(ee(7),Ot("ngModel",r.email),ee(),Ot("ngModel",r.password),ee(2),pe("ngIf",r.loggedUser!==""),ee(),pe("ngIf",r.flagError),ee(11),pe("ngIf",r.isLoading))},dependencies:[Ze,Ut,Yn,Bs,Kt,Qn,Us,yn,hi],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.loader-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center;background:#fff;width:100%;height:100%;z-index:9999}.loader[_ngcontent-%COMP%]{width:80px;height:80px;border:8px solid #FFF;border-bottom-color:#ff3d00;border-radius:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}body[_ngcontent-%COMP%]{min-height:100vh;width:100%;background:linear-gradient(to bottom,#0f0c29,#302b63,#b06dbd)}.container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:430px;width:100%;background:#fff;border-radius:7px;box-shadow:0 5px 10px #0000004d;z-index:1}.container[_ngcontent-%COMP%]   .registration[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]:checked ~ .registration[_ngcontent-%COMP%]{display:block}#check[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:2rem}.form[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;text-align:center;margin-bottom:1.5rem}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:60px;width:100%;padding:0 15px;font-size:17px;margin-bottom:1.3rem;border:1px solid #ddd;border-radius:6px;outline:none}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#009579;box-shadow:0 0 0 1px #009579}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#009579;text-decoration:none}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]{color:#fff;background:#009579;font-size:1.2rem;font-weight:500;letter-spacing:1px;margin-top:1.7rem;cursor:pointer;transition:background-color .4s ease;border:none;border-radius:6px}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]:hover{background:#006653}.signup[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#a88cc8;border:none;padding:.75rem 1.5rem;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#19201a}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:20px}.button[_ngcontent-%COMP%], .botones-autocompletar[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:500}.button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.02)}.botones-autocompletar[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;font-weight:400}.botones-autocompletar[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:scale(1.02)}']})};var Oo=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-quiensoy"]],standalone:!0,features:[Ce],decls:23,vars:0,consts:[["rel","stylesheet","href",pd`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`],[1,"about-me-card"],[1,"about-me-header"],[1,"about-me-body"],["src","https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/perfil.jpeg?alt=media&token=94aac8c0-ba09-4f57-a1a2-6b0cf2a923ec","alt","Profile Picture",1,"profile-img"],[1,"description"],[1,"social-media"],["href","https://twitter.com/tu_perfil","target","_blank",1,"social-icon"],[1,"fab","fa-twitter"],["href","https://linkedin.com/in/tu_perfil","target","_blank",1,"social-icon"],[1,"fab","fa-linkedin"],["href","https://github.com/tu_perfil","target","_blank",1,"social-icon"],[1,"fab","fa-github"]],template:function(t,r){t&1&&(O(0,"body"),Te(1,"link",0),O(2,"div",1)(3,"div",2)(4,"h2"),z(5,"Quien soy"),V()(),O(6,"div",3),Te(7,"img",4),O(8,"p",5),z(9," Hola! Soy Matias Skenen."),Te(10,"br")(11,"br"),z(12," Estudiante en Tecnicatura Superior en Programaci\xF3n."),Te(13,"br")(14,"br"),z(15," Mi especial inter\xE9s est\xE1 en la ciberseguridad. "),V()(),O(16,"div",6)(17,"a",7),Te(18,"i",8),V(),O(19,"a",9),Te(20,"i",10),V(),O(21,"a",11),Te(22,"i",12),V()()()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:90vh;margin:0;display:flex;justify-content:center;align-items:center;background:linear-gradient(to bottom,#1a163f,#302b63,#b06dbd)}.about-me-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:700px;padding:20px;font-family:Roboto,sans-serif}.about-me-header[_ngcontent-%COMP%]{text-align:center}.about-me-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:2rem;font-weight:700}.about-me-body[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.profile-img[_ngcontent-%COMP%]{width:300px;height:300px;object-fit:cover;border-radius:10%;padding:5px}.description[_ngcontent-%COMP%]{font-size:1.1rem;color:#444;line-height:1.6;font-weight:400}.social-media[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.social-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 10px;color:#333;font-size:1.5rem;text-decoration:none;transition:color .3s ease}.social-icon[_ngcontent-%COMP%]:hover{color:#007bff}"]})};function jE(n,e){n&1&&(O(0,"p"),z(1,"Usuario Registrado"),V())}function qE(n,e){if(n&1&&(O(0,"p"),z(1),V()),n&2){let t=Je();ee(),Xe(t.msjError)}}function GE(n,e){n&1&&(O(0,"div",13),Te(1,"span",14),V())}var Vo=class n{constructor(e,t,r){this.auth=e;this.router=t;this.userService=r}email="";password="";mensagges="";loggedUser="";flagError=!1;msjError="";isLoading=!1;register(){ep(this.auth,this.email,this.password).then(e=>{e.user.email!==null&&(this.isLoading=!0,setTimeout(()=>{this.userService.setUser(this.email),this.isLoading=!1,this.router.navigate(["/home"])},1e3)),this.flagError=!1}).catch(e=>{switch(this.flagError=!0,console.log(e),e.code){case"auth/weak-password":this.msjError="Contrase\xF1a demasiado corta.";break;case"auth/invalid-email":this.msjError="Correo electr\xF3nico no v\xE1lido.";break;case"auth/email-already-in-use":this.msjError="El correo electr\xF3nico ya est\xE1 en uso.";break;case"auth/user-not-found":this.msjError="No se encontr\xF3 ning\xFAn usuario con este correo.";break;case"auth/wrong-password":this.msjError="Credenciales Invalidas.";break;case"auth/invalid-credential":this.msjError="Credenciales no v\xE1lidas.";break;case"auth/account-exists-with-different-credential":this.msjError="Ya existe una cuenta con un correo diferente.";break;case"auth/credential-already-in-use":this.msjError="Estas credenciales ya est\xE1n en uso por otra cuenta.";break;default:this.msjError="Error: "+e.code;break}})}redirectToLogin(){this.router.navigate(["/login"])}autocompletar(e,t){this.email=e,this.password=t}static \u0275fac=function(t){return new(t||n)(G(Fe),G(et),G(Ve))};static \u0275cmp=be({type:n,selectors:[["app-sing-up"]],standalone:!0,features:[Ce],decls:23,vars:5,consts:[[1,"container"],["type","checkbox","id","check"],[1,"login","form"],["action","#"],["type","text","placeholder","Ingrese su Email","name","email",3,"ngModelChange","ngModel"],["type","password","placeholder","Ingrese su Contrase\xF1a","name","password",3,"ngModelChange","ngModel"],["type","button","value","Registrarse",1,"button",3,"click"],[4,"ngIf"],[1,"botones"],["type","button",1,"botones-autocompletar",3,"click"],[1,"signup"],[1,"signup",3,"click"],["class","loader-container",4,"ngIf"],[1,"loader-container"],[1,"loader"]],template:function(t,r){t&1&&(O(0,"body")(1,"div",0),Te(2,"input",1),O(3,"div",2)(4,"header"),z(5,"Registrarse"),V(),O(6,"form",3)(7,"input",4),Mt("ngModelChange",function(s){return Vt(r.email,s)||(r.email=s),s}),V(),O(8,"input",5),Mt("ngModelChange",function(s){return Vt(r.password,s)||(r.password=s),s}),V(),O(9,"input",6),re("click",function(){return r.register()}),V(),$e(10,jE,2,0,"p",7)(11,qE,2,1,"p",7),V(),O(12,"div",8)(13,"button",9),re("click",function(){return r.autocompletar("matias.skenen@gmail.com","123456")}),z(14,"Usuario 1"),V(),O(15,"button",9),re("click",function(){return r.autocompletar("lucasmansini@gmail.com","123456")}),z(16,"Usuario 2"),V(),O(17,"button",9),re("click",function(){return r.autocompletar("jorge@gmail.com","123456")}),z(18,"Usuario 3"),V()(),O(19,"div",10)(20,"button",11),re("click",function(){return r.redirectToLogin()}),z(21,"Iniciar Sesion"),V()()(),$e(22,GE,2,0,"div",12),V()()),t&2&&(ee(7),Ot("ngModel",r.email),ee(),Ot("ngModel",r.password),ee(2),pe("ngIf",r.loggedUser!==""),ee(),pe("ngIf",r.flagError),ee(11),pe("ngIf",r.isLoading))},dependencies:[Yn,Bs,Kt,Qn,Us,yn,hi,Ze,Ut],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.loader-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center;background:#fff;width:100%;height:100%;z-index:9999}.loader[_ngcontent-%COMP%]{width:80px;height:80px;border:8px solid #FFF;border-bottom-color:#ff3d00;border-radius:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}body[_ngcontent-%COMP%]{min-height:100vh;width:100%;background:linear-gradient(to bottom,#0f0c29,#302b63,#b06dbd)}.container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:430px;width:100%;background:#fff;border-radius:7px;box-shadow:0 5px 10px #0000004d;z-index:1}.container[_ngcontent-%COMP%]   .registration[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]:checked ~ .registration[_ngcontent-%COMP%]{display:block}#check[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:2rem}.form[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;text-align:center;margin-bottom:1.5rem}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:60px;width:100%;padding:0 15px;font-size:17px;margin-bottom:1.3rem;border:1px solid #ddd;border-radius:6px;outline:none}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 1px #0003}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#009579;text-decoration:none}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]{color:#fff;background:#009579;font-size:1.2rem;font-weight:500;letter-spacing:1px;margin-top:1.7rem;cursor:pointer;transition:.4s}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]:hover{background:#006653}.signup[_ngcontent-%COMP%]{margin-top:5px;text-align:center}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;border:1px solid black;padding:.75rem;border-radius:4px;font-size:1rem;cursor:pointer}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#218838}.signup[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#a88cc8;border:none;padding:.75rem 1.5rem;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#19201a}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:20px}.button[_ngcontent-%COMP%], .botones-autocompletar[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:500}.button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.02)}.botones-autocompletar[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;font-weight:400}.botones-autocompletar[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:scale(1.02)}@keyframes _ngcontent-%COMP%_loading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading[_ngcontent-%COMP%]{border:6px solid var(--color-background);border-radius:100%;border-top-color:var(--color-primary);border-bottom-color:var(--color-primary);width:50px;height:50px;animation:_ngcontent-%COMP%_loading 1.5s infinite linear}']})};var zE=(n,e)=>({yo:n,ellos:e});function $E(n,e){if(n&1&&(O(0,"div",10)(1,"div",11)(2,"div",12),z(3),V(),O(4,"div",13)(5,"span",14),z(6),V(),O(7,"span",15),z(8),V()()()()),n&2){let t=e.$implicit,r=Je(2);pe("ngClass",gd(4,zE,t.user===r.useractual,t.user!==r.useractual)),ee(3),Xe(t.message),ee(3),Xe(t.user),ee(2),Xe(t.fecha)}}function WE(n,e){if(n&1&&(O(0,"div",8),$e(1,$E,9,7,"div",9),V()),n&2){let t=Je();ee(),pe("ngForOf",t.loginsCollection)}}function KE(n,e){n&1&&(O(0,"div",16)(1,"p"),z(2,"No hay mensajes a\xFAn. \xA1S\xE9 el primero en enviar uno!"),V()())}var Mo=class n{constructor(e,t,r){this.firestore=e;this.auth=t;this.dataservice=r;console.log(t.currentUser?.email),this.useractual=t.currentUser?.email,this.getData()}sub;loginsCollection=[];useractual;newMessage="";getData(){let e=Zl(this.firestore,"chats"),t=Hl(e,Ql("fecha","asc"));Ig(t).subscribe(i=>{this.loginsCollection=i,console.log(this.loginsCollection)})}send(){let e=Zl(this.firestore,"chats"),t={fecha:new Date().toLocaleString("es-AR"),user:this.auth.currentUser?.email,message:this.newMessage};this.newMessage="",Eg(e,t).then(()=>{console.log("Documento agregado con \xE9xito")}).catch(r=>{console.error("Error al agregar documento: ",r)})}sendMessage(){this.newMessage.trim()!==""&&(this.newMessage="")}static \u0275fac=function(t){return new(t||n)(G(St),G(Fe),G(Ve))};static \u0275cmp=be({type:n,selectors:[["app-chat"]],standalone:!0,features:[Ce],decls:12,vars:3,consts:[[1,"chat-wrapper"],[1,"chat-header"],[1,"chat-container"],["class","messages",4,"ngIf"],["class","no-messages",4,"ngIf"],[1,"message-input"],["placeholder","Escribe un mensaje...",3,"ngModelChange","ngModel"],[3,"click"],[1,"messages"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"message",3,"ngClass"],[1,"message-content"],[1,"message-text"],[1,"message-info"],[1,"user"],[1,"date"],[1,"no-messages"]],template:function(t,r){t&1&&(O(0,"body")(1,"div",0)(2,"div",1)(3,"h2"),z(4,"Chat"),V()(),O(5,"div",2),$e(6,WE,2,1,"div",3)(7,KE,3,0,"div",4),V(),O(8,"div",5)(9,"input",6),Mt("ngModelChange",function(s){return Vt(r.newMessage,s)||(r.newMessage=s),s}),V(),O(10,"button",7),re("click",function(){return r.send()}),z(11,"Enviar"),V()()()()),t&2&&(ee(6),pe("ngIf",r.loginsCollection.length>0),ee(),pe("ngIf",r.loginsCollection.length===0),ee(2),Ot("ngModel",r.newMessage))},dependencies:[Ze,Ed,bd,Ut,Yn,Kt,Qn,yn],styles:["body[_ngcontent-%COMP%]{width:100%;height:90vh;display:flex;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 auto;border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 2px 10px #0003;height:500px}.chat-header[_ngcontent-%COMP%]{background-color:#975cca;color:#fff;padding:15px;border-top-left-radius:10px;border-top-right-radius:10px;text-align:center;border:1px solid}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.6em}.chat-container[_ngcontent-%COMP%]{flex:1;padding:15px;background-color:#f9f9f9;border-top:1px solid #ddd;border-bottom:1px solid #ddd;overflow-y:auto;width:500px;height:100px}.no-messages[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic}.messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.message[_ngcontent-%COMP%]{max-width:75%;padding:12px;border-radius:12px;position:relative;display:flex;flex-direction:column;word-wrap:break-word;font-size:.95em}.message.yo[_ngcontent-%COMP%]{align-self:flex-end;background-color:#e1f5fe;border-bottom-right-radius:0}.message.ellos[_ngcontent-%COMP%]{align-self:flex-start;background-color:#dcedc8;border-bottom-left-radius:0;border:1px solid #b0bec5}.message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.message-text[_ngcontent-%COMP%]{margin-bottom:6px}.message-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.8em;color:#666}.message-input[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;background-color:#fff;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:1px solid #ddd}input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ccc;border-radius:25px;outline:none;transition:border .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#0056b3}button[_ngcontent-%COMP%]{padding:10px 18px;border:none;background-color:#0056b3;color:#fff;cursor:pointer;border-radius:25px;transition:background-color .3s ease;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:#004494}@media (max-width: 700px){.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 auto;border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 2px 10px #0003;height:500px}}"]})};var Cg=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"juegos",loadChildren:()=>import("./chunk-BABAWFNQ.js").then(n=>n.JuegosModule)},{path:"chat",component:Mo},{path:"login",component:xo},{path:"home",component:ns},{path:"quiensoy",component:Oo},{path:"singin",component:Vo}];var Ag={projectId:"tp-juegos-labo4",appId:"1:72978880966:web:edea831367194e969ffac7",storageBucket:"tp-juegos-labo4.appspot.com",apiKey:"AIzaSyCNdEW84sG5qn1Is4b-s7MVw6Ho8N_Nwcg",authDomain:"tp-juegos-labo4.firebaseapp.com",messagingSenderId:"72978880966",measurementId:"G-J3SBZF63TQ"};var Sg={providers:[vd({eventCoalescing:!0}),Td(),Sd(Cg),tf(()=>nf(Ag)),Zf(()=>tp()),wg(()=>bg())]};var Fo=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-footer"]],standalone:!0,features:[Ce],decls:6,vars:0,consts:[[1,"footer-content"],[1,"name"],[1,"copyright"]],template:function(t,r){t&1&&(O(0,"footer")(1,"div",0)(2,"span",1),z(3,"Matias Skenen"),V(),O(4,"span",2),z(5,"Copyright \xA9 2024 - Derechos Reservados."),V()()())},styles:['@charset "UTF-8";@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcg72j00.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKew72j00.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcw72j00.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfA72j00.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcQ72j00.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfw72.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3js2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjs2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;text-decoration:none;font-family:Ubuntu,sans-serif}footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:40px 0;text-align:center}.footer-container[_ngcontent-%COMP%]{max-width:1200px;margin:auto;display:flex;justify-content:space-around;flex-wrap:wrap;gap:20px;padding:0 20px}.footer-about[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]{flex:1;min-width:200px}.footer-about[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:15px;color:#fff}.footer-about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#ddd}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6af;transition:color .3s ease}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}@media (max-width: 768px){.footer-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;padding:0 10px}.footer-about[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]{min-width:100%;text-align:center;margin-bottom:20px}.footer-about[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}.footer-about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){footer[_ngcontent-%COMP%]{padding:30px 0}.footer-about[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.footer-about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}}']})};function HE(n,e){n&1&&(O(0,"li")(1,"p")(2,"a",5),z(3,"Iniciar Sesi\xF3n"),V()()())}function QE(n,e){n&1&&(O(0,"li")(1,"p")(2,"a",6),z(3,"Registrarse"),V()()())}function YE(n,e){if(n&1){let t=md();O(0,"li")(1,"p")(2,"a",7),re("click",function(){ld(t);let i=Je();return hd(i.signOut())}),z(3,"Cerrar sesion"),V()()()}}function JE(n,e){if(n&1&&(O(0,"li"),z(1),V()),n&2){let t=Je();ee(),Xe(t.user)}}var Uo=class n{constructor(e,t,r,i){this.router=e;this.authService=t;this.auth=r;this.userService=i;this.authService.currentUser.subscribe(s=>{this.user=s})}user;toHome(){this.router.navigate(["/home"])}toQuiensoy(){this.router.navigate(["/quiensoy"])}toChat(){this.router.navigate(["/chat"])}signOut(){return y(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/login"])}catch(e){console.error("Error signing out:",e)}})}static \u0275fac=function(t){return new(t||n)(G(et),G(Ve),G(Fe),G(Ve))};static \u0275cmp=be({type:n,selectors:[["app-header"]],standalone:!0,features:[Ce],decls:16,vars:4,consts:[[1,"nav-content"],[1,"logo"],[3,"click"],[1,"nav-links"],[4,"ngIf"],["href","/login"],["href","/singin"],["href","",3,"click"]],template:function(t,r){t&1&&(O(0,"nav")(1,"div",0)(2,"div",1)(3,"p",2),re("click",function(){return r.toHome()}),z(4,"GAME-TIME"),V()(),O(5,"ul",3)(6,"li",2),re("click",function(){return r.toQuiensoy()}),O(7,"p"),z(8,"Quien soy"),V()(),O(9,"li",2),re("click",function(){return r.toChat()}),O(10,"p"),z(11,"Chat"),V()(),$e(12,HE,4,0,"li",4)(13,QE,4,0,"li",4)(14,YE,4,0,"li",4)(15,JE,2,1,"li",4),V()()()),t&2&&(ee(12),pe("ngIf",!r.user),ee(),pe("ngIf",!r.user),ee(),pe("ngIf",r.user),ee(),pe("ngIf",r.user))},dependencies:[Ze,Ut],styles:['@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcg72j00.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKew72j00.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcw72j00.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfA72j00.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcQ72j00.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfw72.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3js2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjs2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;text-decoration:none;font-family:Ubuntu,sans-serif}nav[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;padding:20px;transition:all .4s ease;background-color:#fff}nav.sticky[_ngcontent-%COMP%]{padding:15px 20px;background:#4070f4;box-shadow:0 5px 10px #0000001a}nav[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]{height:100%;max-width:1200px;margin:auto;display:flex;align-items:center;justify-content:space-between}nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:35px;color:#4070f4}nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#16171a;transition:all 1s;cursor:pointer}nav.sticky[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-content[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:flex}.nav-content[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:0 8px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:none;color:#0e2431;font-size:18px;font-weight:500;padding:10px 4px;transition:all .3s ease}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#4070f4;cursor:pointer}nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;transition:all .4s ease}nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#0e2431}.home[_ngcontent-%COMP%]{height:100vh;width:100%;background-size:cover;background-position:center;background-attachment:fixed}h2[_ngcontent-%COMP%]{font-size:30px;margin-bottom:6px;color:#4070f4}.text[_ngcontent-%COMP%]{text-align:justify;padding:40px 80px;box-shadow:-5px 0 10px #0000001a}']})};var Lo=class n{constructor(e){this.router=e}title="tp-juegos";goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(G(et))};static \u0275cmp=be({type:n,selectors:[["app-root"]],standalone:!0,features:[Ce],decls:4,vars:0,consts:[[1,"contair"]],template:function(t,r){t&1&&(O(0,"div",0),Te(1,"app-header")(2,"router-outlet")(3,"app-footer"),V())},dependencies:[Ad,Fo,Uo],styles:[".menu-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px;background-color:#fff;box-shadow:0 2px 10px #0000001a}.menu-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-right:20px;font-weight:700;color:#333}.menu-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px;padding:10px 20px;border:none;border-radius:5px;background-color:#009579;color:#fff;font-size:16px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.menu-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#000}.menu-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95);background-color:#000}.menu-container[_ngcontent-%COMP%]   .active-route[_ngcontent-%COMP%]{background-color:red;box-shadow:0 2px 5px #0003}router-outlet[_ngcontent-%COMP%]{display:block}"]})};Cd(Lo,Sg).catch(n=>console.error(n));
