import{$ as Oh,A as kt,Aa as Bi,B as Ph,D as Rh,E as $,F as ae,G as de,H as Z,I as N,J as x,K as te,L as kr,M as Dr,N as kh,O as ie,P as ze,R as L,S as Qe,T as $o,U as Qt,V as Yt,W as Jt,X as Ce,Y as Dh,Z as xh,_ as Nh,a as yh,aa as Mh,b as vh,ba as Vh,c as Rt,ca as Ye,d as y,e as Rr,ea as Je,f as Ih,g as wh,ga as Fh,h as Eh,ha as Uh,i as Bo,ia as Lh,j as jo,ja as Xe,k as qo,ka as Bh,l as zo,m as Th,ma as Rn,n as Vi,na as kn,oa as Dn,p as Cn,pa as Fi,q as bh,qa as jh,ra as qh,s as Be,sa as xn,t as Ae,ta as Ui,ua as Li,v as Sn,va as zh,w as Ah,wa as $h,x as Ch,xa as Gh,y as Pn,ya as Kh,z as Sh,za as Nn}from"./chunk-VCI2HUV4.js";var Ve=class n{userSource=new Ih(null);currentUser=this.userSource.asObservable();user="";constructor(){}setUser(e){this.userSource.next(e),this.user=e}getUser(){return this.user}getUserNow(){return this.currentUser}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Vi({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hh=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cg=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],h=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Qh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,p=o>>2,I=(o&3)<<4|u>>4,C=(u&15)<<2|d>>6,P=d&63;h||(P=64,a||(C=64)),r.push(t[p],t[I],t[C],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hh(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cg(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let I=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||d==null||I==null)throw new Ko;let C=o<<2|u>>4;if(r.push(C),d!==64){let P=u<<4&240|d>>2;if(r.push(P),I!==64){let O=d<<6&192|I;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ko=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ug=function(n){let e=Hh(n);return Qh.encodeByteArray(e,!0)},Nr=function(n){return ug(n).replace(/\./g,"")},Ho=function(n){try{return Qh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hg=()=>lg().__FIREBASE_DEFAULTS__,dg=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fg=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ho(n[1]);return e&&JSON.parse(e)},qi=()=>{try{return hg()||dg()||fg()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qo=n=>{var e,t;return(t=(e=qi())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Yh=n=>{let e=Qo(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Yo=()=>{var n;return(n=qi())===null||n===void 0?void 0:n.config},Jo=n=>{var e;return(e=qi())===null||e===void 0?void 0:e[`_${n}`]};var ji=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Jh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Nr(JSON.stringify(t)),Nr(JSON.stringify(a)),""].join(".")}function _e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_e())}function pg(){var n;let e=(n=qi())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zh(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ed(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function td(){let n=_e();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nd(){return!pg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xo(){try{return typeof indexedDB=="object"}catch{return!1}}function rd(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var mg="FirebaseError",Fe=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=mg,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dt.prototype.create)}},dt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?gg(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Fe(i,u,r)}};function gg(n,e){return n.replace(_g,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _g=/\{\$([^}]+)}/g;function id(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(Wh(o)&&Wh(a)){if(!Xt(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Wh(n){return n!==null&&typeof n=="object"}function Or(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function On(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Mn(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function sd(n,e){let t=new Wo(n,e);return t.subscribe.bind(t)}var Wo=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");yg(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Go),i.error===void 0&&(i.error=Go),i.complete===void 0&&(i.complete=Go);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yg(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Go(){}var Mw=4*60*60*1e3;function Se(n){return n&&n._delegate?n._delegate:n}var je=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zt="[DEFAULT]";var Zo=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ji;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ig(e))try{this.getOrInitializeService({instanceIdentifier:Zt})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Zt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Zt){return this.instances.has(e)}getOptions(e=Zt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vg(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zt){return this.component?this.component.multipleInstances?e:Zt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vg(n){return n===Zt?void 0:n}function Ig(n){return n.instantiationMode==="EAGER"}var zi=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Zo(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var wg=[],K=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(K||{}),Eg={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Tg=K.INFO,bg={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Ag=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=bg[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Dt=class{constructor(e){this.name=e,this._logLevel=Tg,this._logHandler=Ag,this._userLogHandler=null,wg.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Eg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...e),this._logHandler(this,K.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...e),this._logHandler(this,K.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,K.INFO,...e),this._logHandler(this,K.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,K.WARN,...e),this._logHandler(this,K.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...e),this._logHandler(this,K.ERROR,...e)}};var Cg=(n,e)=>e.some(t=>n instanceof t),od,ad;function Sg(){return od||(od=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pg(){return ad||(ad=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var cd=new WeakMap,ta=new WeakMap,ud=new WeakMap,ea=new WeakMap,ra=new WeakMap;function Rg(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Ze(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&cd.set(t,n)}).catch(()=>{}),ra.set(e,n),e}function kg(n){if(ta.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});ta.set(n,e)}var na={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ta.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ud.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ze(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ld(n){na=n(na)}function Dg(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call($i(this),e,...t);return ud.set(r,e.sort?e.sort():[e]),Ze(r)}:Pg().includes(n)?function(...e){return n.apply($i(this),e),Ze(cd.get(this))}:function(...e){return Ze(n.apply($i(this),e))}}function xg(n){return typeof n=="function"?Dg(n):(n instanceof IDBTransaction&&kg(n),Cg(n,Sg())?new Proxy(n,na):n)}function Ze(n){if(n instanceof IDBRequest)return Rg(n);if(ea.has(n))return ea.get(n);let e=xg(n);return e!==n&&(ea.set(n,e),ra.set(e,n)),e}var $i=n=>ra.get(n);function dd(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=Ze(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Ze(a.result),h.oldVersion,h.newVersion,Ze(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}var Ng=["get","getKey","getAll","getAllKeys","count"],Og=["put","add","delete","clear"],ia=new Map;function hd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ia.get(e))return ia.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Og.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ng.includes(t)))return;let o=function(a,...u){return y(this,null,function*(){let h=this.transaction(a,i?"readwrite":"readonly"),d=h.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[t](...u),i&&h.done]))[0]})};return ia.set(e,o),o}ld(n=>vh(yh({},n),{get:(e,t,r)=>hd(e,t)||n.get(e,t,r),has:(e,t)=>!!hd(e,t)||n.has(e,t)}));var oa=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mg(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Mg(n){let e=n.getComponent();return e?.type==="VERSION"}var aa="@firebase/app",fd="0.10.10";var ft=new Dt("@firebase/app"),Vg="@firebase/app-compat",Fg="@firebase/analytics-compat",Ug="@firebase/analytics",Lg="@firebase/app-check-compat",Bg="@firebase/app-check",jg="@firebase/auth",qg="@firebase/auth-compat",zg="@firebase/database",$g="@firebase/database-compat",Gg="@firebase/functions",Kg="@firebase/functions-compat",Wg="@firebase/installations",Hg="@firebase/installations-compat",Qg="@firebase/messaging",Yg="@firebase/messaging-compat",Jg="@firebase/performance",Xg="@firebase/performance-compat",Zg="@firebase/remote-config",e_="@firebase/remote-config-compat",t_="@firebase/storage",n_="@firebase/storage-compat",r_="@firebase/firestore",i_="@firebase/vertexai-preview",s_="@firebase/firestore-compat",o_="firebase",a_="10.13.1";var ca="[DEFAULT]",c_={[aa]:"fire-core",[Vg]:"fire-core-compat",[Ug]:"fire-analytics",[Fg]:"fire-analytics-compat",[Bg]:"fire-app-check",[Lg]:"fire-app-check-compat",[jg]:"fire-auth",[qg]:"fire-auth-compat",[zg]:"fire-rtdb",[$g]:"fire-rtdb-compat",[Gg]:"fire-fn",[Kg]:"fire-fn-compat",[Wg]:"fire-iid",[Hg]:"fire-iid-compat",[Qg]:"fire-fcm",[Yg]:"fire-fcm-compat",[Jg]:"fire-perf",[Xg]:"fire-perf-compat",[Zg]:"fire-rc",[e_]:"fire-rc-compat",[t_]:"fire-gcs",[n_]:"fire-gcs-compat",[r_]:"fire-fst",[s_]:"fire-fst-compat",[i_]:"fire-vertex","fire-js":"fire-js",[o_]:"fire-js-all"};var Mr=new Map,u_=new Map,ua=new Map;function pd(n,e){try{n.container.addComponent(e)}catch(t){ft.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nt(n){let e=n.name;if(ua.has(e))return ft.debug(`There were multiple attempts to register component ${e}.`),!1;ua.set(e,n);for(let t of Mr.values())pd(t,n);for(let t of u_.values())pd(t,n);return!0}function Fr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $e(n){return n.settings!==void 0}var l_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xt=new dt("app","Firebase",l_);var la=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}};var Ot=a_;function fa(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ca,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw xt.create("bad-app-name",{appName:String(i)});if(t||(t=Yo()),!t)throw xt.create("no-options");let o=Mr.get(i);if(o){if(Xt(t,o.options)&&Xt(r,o.config))return o;throw xt.create("duplicate-app",{appName:i})}let a=new zi(i);for(let h of ua.values())a.addComponent(h);let u=new la(t,r,a);return Mr.set(i,u),u}function Vn(n=ca){let e=Mr.get(n);if(!e&&n===ca&&Yo())return fa();if(!e)throw xt.create("no-app",{appName:n});return e}function Gi(){return Array.from(Mr.values())}function ge(n,e,t){var r;let i=(r=c_[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ft.warn(u.join(" "));return}Nt(new je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var h_="firebase-heartbeat-database",d_=1,Vr="firebase-heartbeat-store",sa=null;function yd(){return sa||(sa=dd(h_,d_,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vr)}catch(t){console.warn(t)}}}}).catch(n=>{throw xt.create("idb-open",{originalErrorMessage:n.message})})),sa}function f_(n){return y(this,null,function*(){try{let t=(yield yd()).transaction(Vr),r=yield t.objectStore(Vr).get(vd(n));return yield t.done,r}catch(e){if(e instanceof Fe)ft.warn(e.message);else{let t=xt.create("idb-get",{originalErrorMessage:e?.message});ft.warn(t.message)}}})}function md(n,e){return y(this,null,function*(){try{let r=(yield yd()).transaction(Vr,"readwrite");yield r.objectStore(Vr).put(e,vd(n)),yield r.done}catch(t){if(t instanceof Fe)ft.warn(t.message);else{let r=xt.create("idb-set",{originalErrorMessage:t?.message});ft.warn(r.message)}}})}function vd(n){return`${n.name}!${n.options.appId}`}var p_=1024,m_=30*24*60*60*1e3,ha=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new da(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let u=new Date(a.date).valueOf();return Date.now()-u<=m_}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ft.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=gd(),{heartbeatsToSend:r,unsentEntries:i}=g_(this._heartbeatsCache.heartbeats),o=Nr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ft.warn(t),""}})}};function gd(){return new Date().toISOString().substring(0,10)}function g_(n,e=p_){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),_d(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_d(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var da=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return Xo()?rd().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield f_(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return md(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return md(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function _d(n){return Nr(JSON.stringify({version:2,heartbeats:n})).length}function __(n){Nt(new je("platform-logger",e=>new oa(e),"PRIVATE")),Nt(new je("heartbeat",e=>new ha(e),"PRIVATE")),ge(aa,fd,n),ge(aa,fd,"esm2017"),ge("fire-js","")}__("");var y_="firebase",v_="10.13.1";ge(y_,v_,"app");var tn=new xh("ANGULARFIRE2_VERSION");function Wi(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ur=(n,e)=>{let t=e?[e]:Gi(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Un=class{constructor(){return Ur(I_)}},I_="app-check";function Fn(){}var Ki=class{zone;delegate;constructor(e,t=Eh){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,r)}},pa=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fn,{},Fn,Fn)),t.pipe(Th({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ln=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ki(Zone.current)),this.insideAngular=t.run(()=>new Ki(Zone.current,wh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(bh(kt))};static \u0275prov=Vi({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hi(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function w_(n){return Hi().ngZone.runOutsideAngular(()=>n())}function en(n){return Hi().ngZone.run(()=>n())}function E_(n){return T_(Hi())(n)}function T_(n){return function(t){return t=t.lift(new pa(n.ngZone)),t.pipe(qo(n.outsideAngular),jo(n.insideAngular))}}var b_=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),en(()=>n.apply(void 0,r))},Ge=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=en(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fn,{},Fn,Fn))),r[o]=b_(r[o],t));let i=w_(()=>n.apply(this,r));if(!e)if(i instanceof Rr){let o=Hi();return i.pipe(qo(o.outsideAngular),jo(o.insideAngular))}else return en(()=>i);return i instanceof Rr?i.pipe(E_):i instanceof Promise?en(()=>new Promise((o,a)=>i.then(u=>en(()=>o(u)),u=>en(()=>a(u))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:en(()=>i)};var pt=class{constructor(e){return e}},nn=class{constructor(){return Gi()}};function A_(n){return n&&n.length===1?n[0]:new pt(Vn())}var ma=new Cn("angularfire2._apps"),C_={provide:pt,useFactory:A_,deps:[[new Be,ma]]},S_={provide:nn,deps:[[new Be,ma]]};function P_(n){return(e,t)=>{let r=t.get(Ph);ge("angularfire",tn.full,"core"),ge("angularfire",tn.full,"app"),ge("angular",Nh.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new pt(i)}}function Id(n,...e){return Sn([C_,S_,{provide:ma,useFactory:P_(n),multi:!0,deps:[kt,Pn,Ln,...e]}])}var wd=Ge(fa,!0);function Ud(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ld=Ud,Bd=new dt("auth","Firebase",Ud());var es=new Dt("@firebase/auth");function R_(n,...e){es.logLevel<=K.WARN&&es.warn(`Auth (${Ot}): ${n}`,...e)}function Yi(n,...e){es.logLevel<=K.ERROR&&es.error(`Auth (${Ot}): ${n}`,...e)}function tt(n,...e){throw Ua(n,...e)}function rn(n,...e){return Ua(n,...e)}function jd(n,e,t){let r=Object.assign(Object.assign({},Ld()),{[e]:t});return new dt("auth","Firebase",r).create(e,{appName:n.name})}function _t(n){return jd(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ua(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Bd.create(n,...e)}function B(n,e,...t){if(!n)throw Ua(e,...t)}function mt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Yi(e),new Error(e)}function Vt(n,e){n||mt(e)}function va(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function k_(){return Ed()==="http:"||Ed()==="https:"}function Ed(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function D_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k_()||Zh()||"connection"in navigator)?navigator.onLine:!0}function x_(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var sn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vt(t>e,"Short delay should be less than long delay!"),this.isMobile=Xh()||ed()}get(){return D_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function La(n,e){Vt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ts=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var N_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var O_=new sn(3e4,6e4);function Ft(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ut(o,a,u,h){return y(this,arguments,function*(n,e,t,r,i={}){return qd(n,i,()=>y(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let I=Or(Object.assign({key:n.config.apiKey},p)).slice(1),C=yield n._getAdditionalHeaders();return C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode),ts.fetch()(zd(n,n.config.apiHost,t,I),Object.assign({method:e,headers:C,referrerPolicy:"no-referrer"},d))}))})}function qd(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},N_),e);try{let i=new Ia(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw Qi(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[h,d]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qi(n,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Qi(n,"email-already-in-use",a);if(h==="USER_DISABLED")throw Qi(n,"user-disabled",a);let p=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw jd(n,p,d);tt(n,p)}}catch(i){if(i instanceof Fe)throw i;tt(n,"network-request-failed",{message:String(i)})}})}function Kr(o,a,u,h){return y(this,arguments,function*(n,e,t,r,i={}){let d=yield Ut(n,e,t,r,i);return"mfaPendingCredential"in d&&tt(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function zd(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?La(n.config,i):`${n.config.apiScheme}://${i}`}function M_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ia=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(rn(this.auth,"network-request-failed")),O_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Qi(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=rn(n,e,r);return i.customData._tokenResponse=t,i}function Td(n){return n!==void 0&&n.enterprise!==void 0}var wa=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return M_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function V_(n,e){return y(this,null,function*(){return Ut(n,"GET","/v2/recaptchaConfig",Ft(n,e))})}function F_(n,e){return y(this,null,function*(){return Ut(n,"POST","/v1/accounts:delete",e)})}function $d(n,e){return y(this,null,function*(){return Ut(n,"POST","/v1/accounts:lookup",e)})}function Lr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ba(n,e=!1){return y(this,null,function*(){let t=Se(n),r=yield t.getIdToken(e),i=ja(r);B(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Lr(ga(i.auth_time)),issuedAtTime:Lr(ga(i.iat)),expirationTime:Lr(ga(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function ga(n){return Number(n)*1e3}function ja(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yi("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ho(t);return i?JSON.parse(i):(Yi("Failed to decode base64 JWT payload"),null)}catch(i){return Yi("Caught error parsing JWT payload as JSON",i?.toString()),null}}function bd(n){let e=ja(n);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function jr(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Fe&&U_(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function U_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ea=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var qr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lr(this.lastLoginAt),this.creationTime=Lr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ns(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield jr(n,$d(t,{idToken:r}));B(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Gd(o.providerUserInfo):[],u=L_(n.providerData,a),h=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!u?.length,p=h?d:!1,I={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qr(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,I)})}function qa(n){return y(this,null,function*(){let e=Se(n);yield ns(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function L_(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Gd(n){return n.map(e=>{var{providerId:t}=e,r=Bo(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function B_(n,e){return y(this,null,function*(){let t=yield qd(n,{},()=>y(this,null,function*(){let r=Or({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=zd(n,i,"/v1/token",`key=${o}`),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",ts.fetch()(a,{method:"POST",headers:u,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function j_(n,e){return y(this,null,function*(){return Ut(n,"POST","/v2/accounts:revokeToken",Ft(n,e))})}var Br=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){B(e.length!==0,"internal-error");let t=bd(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(B(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield B_(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(B(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(B(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return mt("not implemented")}};function Mt(n,e){B(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Bn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Bo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ea(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qr(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield jr(this,this.stsTokenManager.getToken(this.auth,e));return B(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ba(this,e)}reload(){return qa(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ns(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if($e(this.auth.app))return Promise.reject(_t(this.auth));let e=yield this.getIdToken();return yield jr(this,F_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,u,h,d,p;let I=(r=t.displayName)!==null&&r!==void 0?r:void 0,C=(i=t.email)!==null&&i!==void 0?i:void 0,P=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,O=(a=t.photoURL)!==null&&a!==void 0?a:void 0,F=(u=t.tenantId)!==null&&u!==void 0?u:void 0,D=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,H=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:Q,emailVerified:se,isAnonymous:De,providerData:ee,stsTokenManager:w}=t;B(Q&&w,e,"internal-error");let m=Br.fromJSON(this.name,w);B(typeof Q=="string",e,"internal-error"),Mt(I,e.name),Mt(C,e.name),B(typeof se=="boolean",e,"internal-error"),B(typeof De=="boolean",e,"internal-error"),Mt(P,e.name),Mt(O,e.name),Mt(F,e.name),Mt(D,e.name),Mt(G,e.name),Mt(H,e.name);let _=new n({uid:Q,auth:e,email:C,emailVerified:se,displayName:I,isAnonymous:De,photoURL:O,phoneNumber:P,tenantId:F,stsTokenManager:m,createdAt:G,lastLoginAt:H});return ee&&Array.isArray(ee)&&(_.providerData=ee.map(v=>Object.assign({},v))),D&&(_._redirectEventId=D),_}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new Br;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ns(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];B(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Gd(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new Br;u.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,d),h})}};var Ad=new Map;function gt(n){Vt(n instanceof Function,"Expected a class definition");let e=Ad.get(n);return e?(Vt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ad.set(n,e),e)}var q_=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ta=q_;function Ji(n,e,t){return`firebase:${n}:${e}:${t}`}var rs=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ji(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ji("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Bn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(gt(Ta),e,r);let i=(yield Promise.all(t.map(d=>y(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||gt(Ta),a=Ji(r,e.config.apiKey,e.name),u=null;for(let d of t)try{let p=yield d._get(a);if(p){let I=Bn._fromJSON(e,p);d!==o&&(u=I),o=d;break}}catch{}let h=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new n(o,e,r):(o=h[0],u&&(yield o._set(a,u.toJSON())),yield Promise.all(t.map(d=>y(this,null,function*(){if(d!==o)try{yield d._remove(a)}catch{}}))),new n(o,e,r))})}};function Cd(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Qd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jd(e))return"Blackberry";if(Xd(e))return"Webos";if(Wd(e))return"Safari";if((e.includes("chrome/")||Hd(e))&&!e.includes("edge/"))return"Chrome";if(Yd(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Kd(n=_e()){return/firefox\//i.test(n)}function Wd(n=_e()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hd(n=_e()){return/crios\//i.test(n)}function Qd(n=_e()){return/iemobile/i.test(n)}function Yd(n=_e()){return/android/i.test(n)}function Jd(n=_e()){return/blackberry/i.test(n)}function Xd(n=_e()){return/webos/i.test(n)}function za(n=_e()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function z_(n=_e()){var e;return za(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $_(){return td()&&document.documentMode===10}function Zd(n=_e()){return za(n)||Yd(n)||Xd(n)||Jd(n)||/windows phone/i.test(n)||Qd(n)}function ef(n,e=[]){let t;switch(n){case"Browser":t=Cd(_e());break;case"Worker":t=`${Cd(_e())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ot}/${r}`}var ba=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,u)=>{try{let h=e(o);a(h)}catch(h){u(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function G_(t){return y(this,arguments,function*(n,e={}){return Ut(n,"GET","/v2/passwordPolicy",Ft(n,e))})}var K_=6,Aa=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:K_,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,u;let h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ca=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new is(this),this.idTokenSubscription=new is(this),this.beforeStateQueue=new ba(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gt(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield rs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield $d(this,{idToken:e}),r=yield Bn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if($e(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,h=yield this.tryRedirectSignIn(e);(!a||a===u)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield ns(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=x_()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if($e(this.app))return Promise.reject(_t(this));let t=e?Se(e):null;return t&&B(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return $e(this.app)?Promise.reject(_t(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return $e(this.app)?Promise.reject(_t(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(gt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield G_(this),t=new Aa(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield j_(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&gt(e)||this._popupRedirectResolver;B(t,this,"argument-error"),this.redirectPersistenceManager=yield rs.create(this,[gt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{a=!0,h()}}else{let h=e.addObserver(t);return()=>{a=!0,h()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ef(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&R_(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function an(n){return Se(n)}var is=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=sd(t=>this.observer=t)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hs={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W_(n){hs=n}function tf(n){return hs.loadJS(n)}function H_(){return hs.recaptchaEnterpriseScript}function Q_(){return hs.gapiScript}function nf(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Y_="recaptcha-enterprise",J_="NO_RECAPTCHA",Sa=class{constructor(e){this.type=Y_,this.auth=an(e)}verify(e="verify",t=!1){return y(this,null,function*(){function r(o){return y(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,u)=>y(this,null,function*(){V_(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let d=new wa(h);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,a(d.siteKey)}}).catch(h=>{u(h)})}))})}function i(o,a,u){let h=window.grecaptcha;Td(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(d=>{a(d)}).catch(()=>{a(J_)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(u=>{if(!t&&Td(window.grecaptcha))i(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=H_();h.length!==0&&(h+=u),tf(h).then(()=>{i(u,o,a)}).catch(d=>{a(d)})}}).catch(u=>{a(u)})})})}};function Sd(n,e,t,r=!1){return y(this,null,function*(){let i=new Sa(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Pa(n,e,t,r){return y(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Sd(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>y(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield Sd(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)}))})}function $a(n,e){let t=Fr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Xt(o,e??{}))return i;tt(i,"already-initialized")}return t.initialize({options:e})}function X_(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ga(n,e,t){let r=an(n);B(r._canInitEmulator,r,"emulator-config-failed"),B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=rf(e),{host:a,port:u}=Z_(e),h=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||ey()}function rf(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Z_(n){let e=rf(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Pd(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:Pd(a)}}}function Pd(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ey(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var zr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mt("not implemented")}_getIdTokenResponse(e){return mt("not implemented")}_linkToIdToken(e,t){return mt("not implemented")}_getReauthenticationResolver(e){return mt("not implemented")}};function ty(n,e){return y(this,null,function*(){return Ut(n,"POST","/v1/accounts:signUp",e)})}function ny(n,e){return y(this,null,function*(){return Kr(n,"POST","/v1/accounts:signInWithPassword",Ft(n,e))})}function ry(n,e){return y(this,null,function*(){return Kr(n,"POST","/v1/accounts:signInWithEmailLink",Ft(n,e))})}function iy(n,e){return y(this,null,function*(){return Kr(n,"POST","/v1/accounts:signInWithEmailLink",Ft(n,e))})}var $r=class n extends zr{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return y(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pa(e,t,"signInWithPassword",ny);case"emailLink":return ry(e,{email:this._email,oobCode:this._password});default:tt(e,"internal-error")}})}_linkToIdToken(e,t){return y(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Pa(e,r,"signUpPassword",ty);case"emailLink":return iy(e,{idToken:t,email:this._email,oobCode:this._password});default:tt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function _a(n,e){return y(this,null,function*(){return Kr(n,"POST","/v1/accounts:signInWithIdp",Ft(n,e))})}function sy(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oy(n){let e=On(Mn(n)).link,t=e?On(Mn(e)).deep_link_id:null,r=On(Mn(n)).deep_link_id;return(r?On(Mn(r)).link:null)||r||t||e||n}var ss=class n{constructor(e){var t,r,i,o,a,u;let h=On(Mn(e)),d=(t=h.apiKey)!==null&&t!==void 0?t:null,p=(r=h.oobCode)!==null&&r!==void 0?r:null,I=sy((i=h.mode)!==null&&i!==void 0?i:null);B(d&&p&&I,"argument-error"),this.apiKey=d,this.operation=I,this.code=p,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=h.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){let t=oy(e);try{return new n(t)}catch{return null}}};var sf=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return $r._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ss.parseLink(r);return B(i,"argument-error"),$r._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),os=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ra=class extends os{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function ay(n,e){return y(this,null,function*(){return Kr(n,"POST","/v1/accounts:signUp",Ft(n,e))})}var jn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield Bn._fromIdTokenResponse(e,r,i),a=Rd(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Rd(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Rd(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ka=class n extends Fe{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function of(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ka._fromErrorAndOperation(n,o,e,r):o})}function cy(n,e,t=!1){return y(this,null,function*(){let r=yield jr(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return jn._forOperation(n,"link",r)})}function uy(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if($e(r.app))return Promise.reject(_t(r));let i="reauthenticate";try{let o=yield jr(n,of(r,i,e,n),t);B(o.idToken,r,"internal-error");let a=ja(o.idToken);B(a,r,"internal-error");let{sub:u}=a;return B(n.uid===u,r,"user-mismatch"),jn._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&tt(r,"user-mismatch"),o}})}function af(n,e,t=!1){return y(this,null,function*(){if($e(n.app))return Promise.reject(_t(n));let r="signIn",i=yield of(n,r,e),o=yield jn._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Ka(n,e){return y(this,null,function*(){return af(an(n),e)})}function cf(n){return y(this,null,function*(){let e=an(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Wa(n,e,t){return y(this,null,function*(){if($e(n.app))return Promise.reject(_t(n));let r=an(n),a=yield Pa(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ay).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&cf(n),h}),u=yield jn._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(u.user),u})}function Ha(n,e,t){return $e(n.app)?Promise.reject(_t(n)):Ka(Se(n),sf.credential(e,t)).catch(r=>y(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&cf(n),r}))}function Qa(n,e,t,r){return Se(n).onIdTokenChanged(e,t,r)}function Ya(n,e,t){return Se(n).beforeAuthStateChanged(e,t)}var as="__sak";var cs=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(as,"1"),this.storage.removeItem(as),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var ly=1e3,hy=10,dy=(()=>{class n extends cs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zd(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);$_()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,hy):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},ly)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield Rt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield Rt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield Rt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),uf=dy;var fy=(()=>{class n extends cs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ja=fy;function py(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var my=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,u=this.handlersMap[o];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let h=Array.from(u).map(p=>y(this,null,function*(){return p(r.origin,a)})),d=yield py(h);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function lf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Da=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{let d=lf("",20);i.port1.start();let p=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(I){let C=I;if(C.data.eventId===d)switch(C.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(C.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function et(){return window}function gy(n){et().location.href=n}function hf(){return typeof et().WorkerGlobalScope<"u"&&typeof et().importScripts=="function"}function _y(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function yy(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vy(){return hf()?self:null}var df="firebaseLocalStorageDb",Iy=1,us="firebaseLocalStorage",ff="fbase_key",on=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ds(n,e){return n.transaction([us],e?"readwrite":"readonly").objectStore(us)}function wy(){let n=indexedDB.deleteDatabase(df);return new on(n).toPromise()}function xa(){let n=indexedDB.open(df,Iy);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(us,{keyPath:ff})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(us)?e(r):(r.close(),yield wy(),e(yield xa()))}))})}function kd(n,e,t){return y(this,null,function*(){let r=ds(n,!0).put({[ff]:e,value:t});return new on(r).toPromise()})}function Ey(n,e){return y(this,null,function*(){let t=ds(n,!1).get(e),r=yield new on(t).toPromise();return r===void 0?null:r.value})}function Dd(n,e){let t=ds(n,!0).delete(e);return new on(t).toPromise()}var Ty=800,by=3,Ay=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield xa(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>by)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return hf()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=my._getInstance(vy()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield _y(),!this.activeServiceWorker)return;this.sender=new Da(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||yy()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield xa();return yield kd(t,as,"1"),yield Dd(t,as),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>kd(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>Ey(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>Dd(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let a=ds(o,!1).getAll();return new on(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),Ty)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),pf=Ay;var PE=nf("rcb"),RE=new sn(3e4,6e4);function Cy(n,e){return e?gt(e):(B(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Gr=class extends zr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Sy(n){return af(n.auth,new Gr(n),n.bypassAuthState)}function Py(n){let{auth:e,user:t}=n;return B(t,e,"internal-error"),uy(t,new Gr(n),n.bypassAuthState)}function Ry(n){return y(this,null,function*(){let{auth:e,user:t}=n;return B(t,e,"internal-error"),cy(t,new Gr(n),n.bypassAuthState)})}var Na=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(h))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sy;case"linkViaPopup":case"linkViaRedirect":return Ry;case"reauthViaPopup":case"reauthViaRedirect":return Py;default:tt(this.auth,"internal-error")}}resolve(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var kE=new sn(2e3,1e4);var ky="pendingRedirect",Xi=new Map,Oa=class n extends Na{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Xi.get(this.auth._key());if(!e){try{let r=(yield Dy(this.resolver,this.auth))?yield Rt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Xi.set(this.auth._key(),e)}return this.bypassAuthState||Xi.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Rt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Rt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function Dy(n,e){return y(this,null,function*(){let t=Oy(e),r=Ny(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function xy(n,e){Xi.set(n._key(),e)}function Ny(n){return gt(n._redirectPersistence)}function Oy(n){return Ji(ky,n.config.apiKey,n.name)}function My(n,e,t=!1){return y(this,null,function*(){if($e(n.app))return Promise.reject(_t(n));let r=an(n),i=Cy(r,e),a=yield new Oa(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var Vy=10*60*1e3,Ma=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Fy(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!mf(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(rn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vy&&this.cachedEventUids.clear(),this.cachedEventUids.has(xd(e))}saveEventToCache(e){this.cachedEventUids.add(xd(e)),this.lastProcessedEventTime=Date.now()}};function xd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mf({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Fy(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mf(n);default:return!1}}function Uy(t){return y(this,arguments,function*(n,e={}){return Ut(n,"GET","/v1/projects",e)})}var Ly=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,By=/^https?/;function jy(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Uy(n);for(let t of e)try{if(qy(t))return}catch{}tt(n,"unauthorized-domain")})}function qy(n){let e=va(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!By.test(t))return!1;if(Ly.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var zy=new sn(3e4,6e4);function Nd(){let n=et().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $y(n){return new Promise((e,t)=>{var r,i,o;function a(){Nd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Nd(),t(rn(n,"network-request-failed"))},timeout:zy.get()})}if(!((i=(r=et().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=et().gapi)===null||o===void 0)&&o.load)a();else{let u=nf("iframefcb");return et()[u]=()=>{gapi.load?a():t(rn(n,"network-request-failed"))},tf(`${Q_()}?onload=${u}`).catch(h=>t(h))}}).catch(e=>{throw Zi=null,e})}var Zi=null;function Gy(n){return Zi=Zi||$y(n),Zi}var Ky=new sn(5e3,15e3),Wy="__/auth/iframe",Hy="emulator/auth/iframe",Qy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jy(n){let e=n.config;B(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?La(e,Hy):`https://${n.config.authDomain}/${Wy}`,r={apiKey:e.apiKey,appName:n.name,v:Ot},i=Yy.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Or(r).slice(1)}`}function Xy(n){return y(this,null,function*(){let e=yield Gy(n),t=et().gapi;return B(t,n,"internal-error"),e.open({where:document.body,url:Jy(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qy,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=rn(n,"network-request-failed"),u=et().setTimeout(()=>{o(a)},Ky.get());function h(){et().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(a)})})))})}var Zy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e0=500,t0=600,n0="_blank",r0="http://localhost",ls=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function i0(n,e,t,r=e0,i=t0){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",h=Object.assign(Object.assign({},Zy),{width:r.toString(),height:i.toString(),top:o,left:a}),d=_e().toLowerCase();t&&(u=Hd(d)?n0:t),Kd(d)&&(e=e||r0,h.scrollbars="yes");let p=Object.entries(h).reduce((C,[P,O])=>`${C}${P}=${O},`,"");if(z_(d)&&u!=="_self")return s0(e||"",u),new ls(null);let I=window.open(e||"",u,p);B(I,n,"popup-blocked");try{I.focus()}catch{}return new ls(I)}function s0(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var o0="__/auth/handler",a0="emulator/auth/handler",c0=encodeURIComponent("fac");function Od(n,e,t,r,i,o){return y(this,null,function*(){B(n.config.authDomain,n,"auth-domain-config-required"),B(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ot,eventId:i};if(e instanceof os){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",id(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,I]of Object.entries(o||{}))a[p]=I}if(e instanceof Ra){let p=e.getScopes().filter(I=>I!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let p of Object.keys(u))u[p]===void 0&&delete u[p];let h=yield n._getAppCheckToken(),d=h?`#${c0}=${encodeURIComponent(h)}`:"";return`${u0(n)}?${Or(u).slice(1)}${d}`})}function u0({config:n}){return n.emulator?La(n,a0):`https://${n.authDomain}/${o0}`}var ya="webStorageSupport",Va=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ja,this._completeRedirectFn=My,this._overrideRedirectResult=xy}_openPopup(e,t,r,i){return y(this,null,function*(){var o;Vt((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield Od(e,t,r,va(),i);return i0(e,a,lf())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield Od(e,t,r,va(),i);return gy(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Vt(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield Xy(e),r=new Ma(e);return t.register("authEvent",i=>(B(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ya,{type:ya},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[ya];a!==void 0&&t(!!a),tt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Zd()||Wd()||za()}},gf=Va;var Md="@firebase/auth",Vd="1.7.8";var Fa=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function l0(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h0(n){Nt(new je("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;B(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ef(n)},d=new Ca(r,i,o,h);return X_(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nt(new je("auth-internal",e=>{let t=an(e.getProvider("auth").getImmediate());return(r=>new Fa(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ge(Md,Vd,l0(n)),ge(Md,Vd,"esm2017")}var d0=5*60,f0=Jo("authIdTokenMaxAge")||d0,Fd=null,p0=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>f0)return;let i=t?.token;Fd!==i&&(Fd=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Xa(n=Vn()){let e=Fr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=$a(n,{popupRedirectResolver:gf,persistence:[pf,uf,Ja]}),r=Jo("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=p0(o.toString());Ya(t,a,()=>a(t.currentUser)),Qa(t,u=>a(u))}}let i=Qo("auth");return i&&Ga(t,`http://${i}`),t}function m0(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}W_({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=rn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",m0().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h0("Browser");var _f="auth",Oe=class{constructor(e){return e}},Wr=class{constructor(){return Ur(_f)}};var Za=new Cn("angularfire2.auth-instances");function ov(n,e){let t=Wi(_f,n,e);return t&&new Oe(t)}function av(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Oe(r)}}var cv={provide:Wr,deps:[[new Be,Za]]},uv={provide:Oe,useFactory:ov,deps:[[new Be,Za],pt]};function yf(n,...e){return ge("angularfire",tn.full,"auth"),Sn([uv,cv,{provide:Za,useFactory:av(n),multi:!0,deps:[kt,Pn,Ln,nn,[new Be,Un],...e]}])}var vf=Ge(Wa,!0);var If=Ge(Xa,!0);var wf=Ge(Ha,!0);function lv(n,e){n&1&&te(0,"img",6)}function hv(n,e){n&1&&te(0,"img",6)}function dv(n,e){n&1&&te(0,"img",6)}function fv(n,e){n&1&&te(0,"img",6)}var fs=class n{constructor(e,t,r){this.router=e;this.authService=t;this.auth=r;this.auth.onAuthStateChanged(i=>{i?(this.isLocked=!1,console.log("Usuario autenticado:",i),this.authService.setUser(i)):console.log("No hay usuario autenticado.")})}user;isLocked=!0;showButton=!0;dato="";datoPadre="";recibirDato(e){this.dato=e}juego1(){this.isLocked==!1&&this.router.navigate(["/juegos/juego-1"])}juego2(){this.isLocked==!1&&this.router.navigate(["/juegos/juego-2"])}juego3(){this.isLocked==!1&&this.router.navigate(["/juegos/juego-3"])}juego4(){this.isLocked==!1&&this.router.navigate(["/juegos/juego-4"])}static \u0275fac=function(t){return new(t||n)(ae(Xe),ae(Ve),ae(Oe))};static \u0275cmp=Ae({type:n,selectors:[["app-home"]],standalone:!0,features:[Ce],decls:9,vars:4,consts:[[1,"contair"],[1,"card","card1",3,"click"],["class","lock-icon","src","https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/candado.png?alt=media&token=7943cb9d-dbf1-419a-b60c-8948c0658979","alt","Candado",4,"ngIf"],[1,"card","card2",3,"click"],[1,"card","card3",3,"click"],[1,"card","card4",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/candado.png?alt=media&token=7943cb9d-dbf1-419a-b60c-8948c0658979","alt","Candado",1,"lock-icon"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1),ie("click",function(){return r.juego1()}),de(2,lv,1,0,"img",2),x(),N(3,"div",3),ie("click",function(){return r.juego2()}),de(4,hv,1,0,"img",2),x(),N(5,"div",4),ie("click",function(){return r.juego3()}),de(6,dv,1,0,"img",2),x(),N(7,"div",5),ie("click",function(){return r.juego4()}),de(8,fv,1,0,"img",2),x()()),t&2&&($(2),Z("ngIf",r.isLocked),$(2),Z("ngIf",r.isLocked),$(2),Z("ngIf",r.isLocked),$(2),Z("ngIf",r.isLocked))},dependencies:[Je,Ye],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f8f8f8;padding:15px}.navbar-brand[_ngcontent-%COMP%]{color:#000;font-size:1.5rem;font-weight:700}.navbar-links[_ngcontent-%COMP%]{list-style:none;display:flex;gap:20px}.navbar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}.navbar-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;font-size:1.1rem}.navbar-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.lock-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;height:80%}.contair[_ngcontent-%COMP%]{width:100%;height:90vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(to bottom,#0f0c29,#302b63,#b06dbd)}.main-card[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;padding:20px;background-color:#f5f5f5;box-shadow:0 4px 8px #0003;border-radius:10px;text-align:center}.card[_ngcontent-%COMP%]{position:relative;width:300px;height:350px;border:none;border-radius:10px;background-blend-mode:normal,normal,screen,overlay,normal;box-shadow:0 0 10px 1px #000;transition:transform .3s ease;margin:50px}.card[_ngcontent-%COMP%]:hover{transform:scale(1.1);cursor:pointer}.card1[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/ahorcado.jpg?alt=media&token=0b412d9c-c996-4ecb-9e33-4f9876ad2422);background-size:contain;background-color:#f8f8f8;background-repeat:no-repeat}.card2[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/cartas.jpg?alt=media&token=be839aab-2780-4586-84df-72148a8e6312);background-size:cover;background-color:#f8f8f8;background-repeat:no-repeat}.card3[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/preguntados.jpg?alt=media&token=04fca781-a7e5-4706-888f-3d58c80c7f27);background-size:cover;background-color:#f8f8f8;background-repeat:no-repeat}.card4[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/wally2.jpg?alt=media&token=f9b8cea6-5c41-4959-ae4f-3a71134ff2a1);background-size:cover;background-color:#f8f8f8;background-repeat:no-repeat}@media (max-width: 1000px){.navbar[_ngcontent-%COMP%]{justify-content:center}.contair[_ngcontent-%COMP%]{height:90vh}.main-card[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.card[_ngcontent-%COMP%]{width:100%;height:300px;margin:10px}}@media (max-width: 400px){.navbar[_ngcontent-%COMP%]{justify-content:center}.contair[_ngcontent-%COMP%]{height:90vh;display:flex;flex-direction:column;align-items:center;border:1px solid red}.main-card[_ngcontent-%COMP%]{flex-direction:column;gap:10px;align-items:center;width:100%}.card[_ngcontent-%COMP%]{margin:10px 0;width:100px;max-width:300px}.card1[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/ahorcado.jpg?alt=media&token=0b412d9c-c996-4ecb-9e33-4f9876ad2422);background-size:contain;height:100px;background-color:#f8f8f8;background-repeat:no-repeat}.card2[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/cartas.jpg?alt=media&token=be839aab-2780-4586-84df-72148a8e6312);background-size:contain;height:100px;background-color:#f8f8f8;background-repeat:no-repeat}.card3[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/preguntados.jpg?alt=media&token=04fca781-a7e5-4706-888f-3d58c80c7f27);background-size:contain;height:100px;background-color:#f8f8f8;background-repeat:no-repeat}}']})};var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tf={};var Lt,ec;(function(){var n;function e(w,m){function _(){}_.prototype=m.prototype,w.D=m.prototype,w.prototype=new _,w.prototype.constructor=w,w.C=function(v,E,b){for(var g=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)g[ct-2]=arguments[ct];return m.prototype[E].apply(v,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,m,_){_||(_=0);var v=Array(16);if(typeof m=="string")for(var E=0;16>E;++E)v[E]=m.charCodeAt(_++)|m.charCodeAt(_++)<<8|m.charCodeAt(_++)<<16|m.charCodeAt(_++)<<24;else for(E=0;16>E;++E)v[E]=m[_++]|m[_++]<<8|m[_++]<<16|m[_++]<<24;m=w.g[0],_=w.g[1],E=w.g[2];var b=w.g[3],g=m+(b^_&(E^b))+v[0]+3614090360&4294967295;m=_+(g<<7&4294967295|g>>>25),g=b+(E^m&(_^E))+v[1]+3905402710&4294967295,b=m+(g<<12&4294967295|g>>>20),g=E+(_^b&(m^_))+v[2]+606105819&4294967295,E=b+(g<<17&4294967295|g>>>15),g=_+(m^E&(b^m))+v[3]+3250441966&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(b^_&(E^b))+v[4]+4118548399&4294967295,m=_+(g<<7&4294967295|g>>>25),g=b+(E^m&(_^E))+v[5]+1200080426&4294967295,b=m+(g<<12&4294967295|g>>>20),g=E+(_^b&(m^_))+v[6]+2821735955&4294967295,E=b+(g<<17&4294967295|g>>>15),g=_+(m^E&(b^m))+v[7]+4249261313&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(b^_&(E^b))+v[8]+1770035416&4294967295,m=_+(g<<7&4294967295|g>>>25),g=b+(E^m&(_^E))+v[9]+2336552879&4294967295,b=m+(g<<12&4294967295|g>>>20),g=E+(_^b&(m^_))+v[10]+4294925233&4294967295,E=b+(g<<17&4294967295|g>>>15),g=_+(m^E&(b^m))+v[11]+2304563134&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(b^_&(E^b))+v[12]+1804603682&4294967295,m=_+(g<<7&4294967295|g>>>25),g=b+(E^m&(_^E))+v[13]+4254626195&4294967295,b=m+(g<<12&4294967295|g>>>20),g=E+(_^b&(m^_))+v[14]+2792965006&4294967295,E=b+(g<<17&4294967295|g>>>15),g=_+(m^E&(b^m))+v[15]+1236535329&4294967295,_=E+(g<<22&4294967295|g>>>10),g=m+(E^b&(_^E))+v[1]+4129170786&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^E&(m^_))+v[6]+3225465664&4294967295,b=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(b^m))+v[11]+643717713&4294967295,E=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(E^b))+v[0]+3921069994&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(E^b&(_^E))+v[5]+3593408605&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^E&(m^_))+v[10]+38016083&4294967295,b=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(b^m))+v[15]+3634488961&4294967295,E=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(E^b))+v[4]+3889429448&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(E^b&(_^E))+v[9]+568446438&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^E&(m^_))+v[14]+3275163606&4294967295,b=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(b^m))+v[3]+4107603335&4294967295,E=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(E^b))+v[8]+1163531501&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(E^b&(_^E))+v[13]+2850285829&4294967295,m=_+(g<<5&4294967295|g>>>27),g=b+(_^E&(m^_))+v[2]+4243563512&4294967295,b=m+(g<<9&4294967295|g>>>23),g=E+(m^_&(b^m))+v[7]+1735328473&4294967295,E=b+(g<<14&4294967295|g>>>18),g=_+(b^m&(E^b))+v[12]+2368359562&4294967295,_=E+(g<<20&4294967295|g>>>12),g=m+(_^E^b)+v[5]+4294588738&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^E)+v[8]+2272392833&4294967295,b=m+(g<<11&4294967295|g>>>21),g=E+(b^m^_)+v[11]+1839030562&4294967295,E=b+(g<<16&4294967295|g>>>16),g=_+(E^b^m)+v[14]+4259657740&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(_^E^b)+v[1]+2763975236&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^E)+v[4]+1272893353&4294967295,b=m+(g<<11&4294967295|g>>>21),g=E+(b^m^_)+v[7]+4139469664&4294967295,E=b+(g<<16&4294967295|g>>>16),g=_+(E^b^m)+v[10]+3200236656&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(_^E^b)+v[13]+681279174&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^E)+v[0]+3936430074&4294967295,b=m+(g<<11&4294967295|g>>>21),g=E+(b^m^_)+v[3]+3572445317&4294967295,E=b+(g<<16&4294967295|g>>>16),g=_+(E^b^m)+v[6]+76029189&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(_^E^b)+v[9]+3654602809&4294967295,m=_+(g<<4&4294967295|g>>>28),g=b+(m^_^E)+v[12]+3873151461&4294967295,b=m+(g<<11&4294967295|g>>>21),g=E+(b^m^_)+v[15]+530742520&4294967295,E=b+(g<<16&4294967295|g>>>16),g=_+(E^b^m)+v[2]+3299628645&4294967295,_=E+(g<<23&4294967295|g>>>9),g=m+(E^(_|~b))+v[0]+4096336452&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~E))+v[7]+1126891415&4294967295,b=m+(g<<10&4294967295|g>>>22),g=E+(m^(b|~_))+v[14]+2878612391&4294967295,E=b+(g<<15&4294967295|g>>>17),g=_+(b^(E|~m))+v[5]+4237533241&4294967295,_=E+(g<<21&4294967295|g>>>11),g=m+(E^(_|~b))+v[12]+1700485571&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~E))+v[3]+2399980690&4294967295,b=m+(g<<10&4294967295|g>>>22),g=E+(m^(b|~_))+v[10]+4293915773&4294967295,E=b+(g<<15&4294967295|g>>>17),g=_+(b^(E|~m))+v[1]+2240044497&4294967295,_=E+(g<<21&4294967295|g>>>11),g=m+(E^(_|~b))+v[8]+1873313359&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~E))+v[15]+4264355552&4294967295,b=m+(g<<10&4294967295|g>>>22),g=E+(m^(b|~_))+v[6]+2734768916&4294967295,E=b+(g<<15&4294967295|g>>>17),g=_+(b^(E|~m))+v[13]+1309151649&4294967295,_=E+(g<<21&4294967295|g>>>11),g=m+(E^(_|~b))+v[4]+4149444226&4294967295,m=_+(g<<6&4294967295|g>>>26),g=b+(_^(m|~E))+v[11]+3174756917&4294967295,b=m+(g<<10&4294967295|g>>>22),g=E+(m^(b|~_))+v[2]+718787259&4294967295,E=b+(g<<15&4294967295|g>>>17),g=_+(b^(E|~m))+v[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(E+(g<<21&4294967295|g>>>11))&4294967295,w.g[2]=w.g[2]+E&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var _=m-this.blockSize,v=this.B,E=this.h,b=0;b<m;){if(E==0)for(;b<=_;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<m;)if(v[E++]=w.charCodeAt(b++),E==this.blockSize){i(this,v),E=0;break}}else for(;b<m;)if(v[E++]=w[b++],E==this.blockSize){i(this,v),E=0;break}}this.h=E,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var _=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=_&255,_/=256;for(this.u(w),w=Array(16),m=_=0;4>m;++m)for(var v=0;32>v;v+=8)w[_++]=this.g[m]>>>v&255;return w};function o(w,m){var _=u;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=m(w)}function a(w,m){this.h=m;for(var _=[],v=!0,E=w.length-1;0<=E;E--){var b=w[E]|0;v&&b==m||(_[E]=b,v=!1)}this.g=_}var u={};function h(w){return-128<=w&&128>w?o(w,function(m){return new a([m|0],0>m?-1:0)}):new a([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return I;if(0>w)return D(d(-w));for(var m=[],_=1,v=0;w>=_;v++)m[v]=w/_|0,_*=4294967296;return new a(m,0)}function p(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return D(p(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(m,8)),v=I,E=0;E<w.length;E+=8){var b=Math.min(8,w.length-E),g=parseInt(w.substring(E,E+b),m);8>b?(b=d(Math.pow(m,b)),v=v.j(b).add(d(g))):(v=v.j(_),v=v.add(d(g)))}return v}var I=h(0),C=h(1),P=h(16777216);n=a.prototype,n.m=function(){if(F(this))return-D(this).m();for(var w=0,m=1,_=0;_<this.g.length;_++){var v=this.i(_);w+=(0<=v?v:4294967296+v)*m,m*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(O(this))return"0";if(F(this))return"-"+D(this).toString(w);for(var m=d(Math.pow(w,6)),_=this,v="";;){var E=se(_,m).g;_=G(_,E.j(m));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(w);if(_=E,O(_))return b+v;for(;6>b.length;)b="0"+b;v=b+v}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function O(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function F(w){return w.h==-1}n.l=function(w){return w=G(this,w),F(w)?-1:O(w)?0:1};function D(w){for(var m=w.g.length,_=[],v=0;v<m;v++)_[v]=~w.g[v];return new a(_,~w.h).add(C)}n.abs=function(){return F(this)?D(this):this},n.add=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],v=0,E=0;E<=m;E++){var b=v+(this.i(E)&65535)+(w.i(E)&65535),g=(b>>>16)+(this.i(E)>>>16)+(w.i(E)>>>16);v=g>>>16,b&=65535,g&=65535,_[E]=g<<16|b}return new a(_,_[_.length-1]&-2147483648?-1:0)};function G(w,m){return w.add(D(m))}n.j=function(w){if(O(this)||O(w))return I;if(F(this))return F(w)?D(this).j(D(w)):D(D(this).j(w));if(F(w))return D(this.j(D(w)));if(0>this.l(P)&&0>w.l(P))return d(this.m()*w.m());for(var m=this.g.length+w.g.length,_=[],v=0;v<2*m;v++)_[v]=0;for(v=0;v<this.g.length;v++)for(var E=0;E<w.g.length;E++){var b=this.i(v)>>>16,g=this.i(v)&65535,ct=w.i(E)>>>16,lr=w.i(E)&65535;_[2*v+2*E]+=g*lr,H(_,2*v+2*E),_[2*v+2*E+1]+=b*lr,H(_,2*v+2*E+1),_[2*v+2*E+1]+=g*ct,H(_,2*v+2*E+1),_[2*v+2*E+2]+=b*ct,H(_,2*v+2*E+2)}for(v=0;v<m;v++)_[v]=_[2*v+1]<<16|_[2*v];for(v=m;v<2*m;v++)_[v]=0;return new a(_,0)};function H(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function Q(w,m){this.g=w,this.h=m}function se(w,m){if(O(m))throw Error("division by zero");if(O(w))return new Q(I,I);if(F(w))return m=se(D(w),m),new Q(D(m.g),D(m.h));if(F(m))return m=se(w,D(m)),new Q(D(m.g),m.h);if(30<w.g.length){if(F(w)||F(m))throw Error("slowDivide_ only works with positive integers.");for(var _=C,v=m;0>=v.l(w);)_=De(_),v=De(v);var E=ee(_,1),b=ee(v,1);for(v=ee(v,2),_=ee(_,2);!O(v);){var g=b.add(v);0>=g.l(w)&&(E=E.add(_),b=g),v=ee(v,1),_=ee(_,1)}return m=G(w,E.j(m)),new Q(E,m)}for(E=I;0<=w.l(m);){for(_=Math.max(1,Math.floor(w.m()/m.m())),v=Math.ceil(Math.log(_)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),b=d(_),g=b.j(m);F(g)||0<g.l(w);)_-=v,b=d(_),g=b.j(m);O(b)&&(b=C),E=E.add(b),w=G(w,g)}return new Q(E,w)}n.A=function(w){return se(this,w).h},n.and=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)&w.i(v);return new a(_,this.h&w.h)},n.or=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)|w.i(v);return new a(_,this.h|w.h)},n.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),_=[],v=0;v<m;v++)_[v]=this.i(v)^w.i(v);return new a(_,this.h^w.h)};function De(w){for(var m=w.g.length+1,_=[],v=0;v<m;v++)_[v]=w.i(v)<<1|w.i(v-1)>>>31;return new a(_,w.h)}function ee(w,m){var _=m>>5;m%=32;for(var v=w.g.length-_,E=[],b=0;b<v;b++)E[b]=0<m?w.i(b+_)>>>m|w.i(b+_+1)<<32-m:w.i(b+_);return new a(E,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ec=Tf.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Lt=Tf.Integer=a}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});var gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yt={};var tc,nc,qn,rc,Qr,_s,ic,sc,oc;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,c,l){return s==Array.prototype||s==Object.prototype||(s[c]=l.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof gs=="object"&&gs];for(var c=0;c<s.length;++c){var l=s[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=t(this);function i(s,c){if(c)e:{var l=r;s=s.split(".");for(var f=0;f<s.length-1;f++){var T=s[f];if(!(T in l))break e;l=l[T]}s=s[s.length-1],f=l[s],c=c(f),c!=f&&c!=null&&e(l,s,{configurable:!0,writable:!0,value:c})}}function o(s,c){s instanceof String&&(s+="");var l=0,f=!1,T={next:function(){if(!f&&l<s.length){var A=l++;return{value:c(A,s[A]),done:!1}}return f=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(s){return s||function(){return o(this,function(c,l){return l})}});var a=a||{},u=this||self;function h(s){var c=typeof s;return c=c!="object"?c:s?Array.isArray(s)?"array":c:"null",c=="array"||c=="object"&&typeof s.length=="number"}function d(s){var c=typeof s;return c=="object"&&s!=null||c=="function"}function p(s,c,l){return s.call.apply(s.bind,arguments)}function I(s,c,l){if(!s)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,f),s.apply(c,T)}}return function(){return s.apply(c,arguments)}}function C(s,c,l){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:I,C.apply(null,arguments)}function P(s,c){var l=Array.prototype.slice.call(arguments,1);return function(){var f=l.slice();return f.push.apply(f,arguments),s.apply(this,f)}}function O(s,c){function l(){}l.prototype=c.prototype,s.aa=c.prototype,s.prototype=new l,s.prototype.constructor=s,s.Qb=function(f,T,A){for(var k=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)k[ne-2]=arguments[ne];return c.prototype[T].apply(f,k)}}function F(s){let c=s.length;if(0<c){let l=Array(c);for(let f=0;f<c;f++)l[f]=s[f];return l}return[]}function D(s,c){for(let l=1;l<arguments.length;l++){let f=arguments[l];if(h(f)){let T=s.length||0,A=f.length||0;s.length=T+A;for(let k=0;k<A;k++)s[T+k]=f[k]}else s.push(f)}}class G{constructor(c,l){this.i=c,this.j=l,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function H(s){return/^[\s\xa0]*$/.test(s)}function Q(){var s=u.navigator;return s&&(s=s.userAgent)?s:""}function se(s){return se[" "](s),s}se[" "]=function(){};var De=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function ee(s,c,l){for(let f in s)c.call(l,s[f],f,s)}function w(s,c){for(let l in s)c.call(void 0,s[l],l,s)}function m(s){let c={};for(let l in s)c[l]=s[l];return c}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(s,c){let l,f;for(let T=1;T<arguments.length;T++){f=arguments[T];for(l in f)s[l]=f[l];for(let A=0;A<_.length;A++)l=_[A],Object.prototype.hasOwnProperty.call(f,l)&&(s[l]=f[l])}}function E(s){var c=1;s=s.split(":");let l=[];for(;0<c&&s.length;)l.push(s.shift()),c--;return s.length&&l.push(s.join(":")),l}function b(s){u.setTimeout(()=>{throw s},0)}function g(){var s=mo;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class ct{constructor(){this.h=this.g=null}add(c,l){let f=lr.get();f.set(c,l),this.h?this.h.next=f:this.g=f,this.h=f}}var lr=new G(()=>new Pm,s=>s.reset());class Pm{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let hr,dr=!1,mo=new ct,_l=()=>{let s=u.Promise.resolve(void 0);hr=()=>{s.then(Rm)}};var Rm=()=>{for(var s;s=g();){try{s.h.call(s.g)}catch(l){b(l)}var c=lr;c.j(s),100>c.h&&(c.h++,s.next=c.g,c.g=s)}dr=!1};function At(){this.s=this.s,this.C=this.C}At.prototype.s=!1,At.prototype.ma=function(){this.s||(this.s=!0,this.N())},At.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(s,c){this.type=s,this.g=this.target=c,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var km=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var s=!1,c=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let l=()=>{};u.addEventListener("test",l,c),u.removeEventListener("test",l,c)}catch{}return s}();function fr(s,c){if(we.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var l=this.type=s.type,f=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=c,c=s.relatedTarget){if(De){e:{try{se(c.nodeName);var T=!0;break e}catch{}T=!1}T||(c=null)}}else l=="mouseover"?c=s.fromElement:l=="mouseout"&&(c=s.toElement);this.relatedTarget=c,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:Dm[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&fr.aa.h.call(this)}}O(fr,we);var Dm={2:"touch",3:"pen",4:"mouse"};fr.prototype.h=function(){fr.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var pr="closure_listenable_"+(1e6*Math.random()|0),xm=0;function Nm(s,c,l,f,T){this.listener=s,this.proxy=null,this.src=c,this.type=l,this.capture=!!f,this.ha=T,this.key=++xm,this.da=this.fa=!1}function vi(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function Ii(s){this.src=s,this.g={},this.h=0}Ii.prototype.add=function(s,c,l,f,T){var A=s.toString();s=this.g[A],s||(s=this.g[A]=[],this.h++);var k=_o(s,c,f,T);return-1<k?(c=s[k],l||(c.fa=!1)):(c=new Nm(c,this.src,A,!!f,T),c.fa=l,s.push(c)),c};function go(s,c){var l=c.type;if(l in s.g){var f=s.g[l],T=Array.prototype.indexOf.call(f,c,void 0),A;(A=0<=T)&&Array.prototype.splice.call(f,T,1),A&&(vi(c),s.g[l].length==0&&(delete s.g[l],s.h--))}}function _o(s,c,l,f){for(var T=0;T<s.length;++T){var A=s[T];if(!A.da&&A.listener==c&&A.capture==!!l&&A.ha==f)return T}return-1}var yo="closure_lm_"+(1e6*Math.random()|0),vo={};function yl(s,c,l,f,T){if(f&&f.once)return Il(s,c,l,f,T);if(Array.isArray(c)){for(var A=0;A<c.length;A++)yl(s,c[A],l,f,T);return null}return l=To(l),s&&s[pr]?s.K(c,l,d(f)?!!f.capture:!!f,T):vl(s,c,l,!1,f,T)}function vl(s,c,l,f,T,A){if(!c)throw Error("Invalid event type");var k=d(T)?!!T.capture:!!T,ne=wo(s);if(ne||(s[yo]=ne=new Ii(s)),l=ne.add(c,l,f,k,A),l.proxy)return l;if(f=Om(),l.proxy=f,f.src=s,f.listener=l,s.addEventListener)km||(T=k),T===void 0&&(T=!1),s.addEventListener(c.toString(),f,T);else if(s.attachEvent)s.attachEvent(El(c.toString()),f);else if(s.addListener&&s.removeListener)s.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return l}function Om(){function s(l){return c.call(s.src,s.listener,l)}let c=Mm;return s}function Il(s,c,l,f,T){if(Array.isArray(c)){for(var A=0;A<c.length;A++)Il(s,c[A],l,f,T);return null}return l=To(l),s&&s[pr]?s.L(c,l,d(f)?!!f.capture:!!f,T):vl(s,c,l,!0,f,T)}function wl(s,c,l,f,T){if(Array.isArray(c))for(var A=0;A<c.length;A++)wl(s,c[A],l,f,T);else f=d(f)?!!f.capture:!!f,l=To(l),s&&s[pr]?(s=s.i,c=String(c).toString(),c in s.g&&(A=s.g[c],l=_o(A,l,f,T),-1<l&&(vi(A[l]),Array.prototype.splice.call(A,l,1),A.length==0&&(delete s.g[c],s.h--)))):s&&(s=wo(s))&&(c=s.g[c.toString()],s=-1,c&&(s=_o(c,l,f,T)),(l=-1<s?c[s]:null)&&Io(l))}function Io(s){if(typeof s!="number"&&s&&!s.da){var c=s.src;if(c&&c[pr])go(c.i,s);else{var l=s.type,f=s.proxy;c.removeEventListener?c.removeEventListener(l,f,s.capture):c.detachEvent?c.detachEvent(El(l),f):c.addListener&&c.removeListener&&c.removeListener(f),(l=wo(c))?(go(l,s),l.h==0&&(l.src=null,c[yo]=null)):vi(s)}}}function El(s){return s in vo?vo[s]:vo[s]="on"+s}function Mm(s,c){if(s.da)s=!0;else{c=new fr(c,this);var l=s.listener,f=s.ha||s.src;s.fa&&Io(s),s=l.call(f,c)}return s}function wo(s){return s=s[yo],s instanceof Ii?s:null}var Eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function To(s){return typeof s=="function"?s:(s[Eo]||(s[Eo]=function(c){return s.handleEvent(c)}),s[Eo])}function Ee(){At.call(this),this.i=new Ii(this),this.M=this,this.F=null}O(Ee,At),Ee.prototype[pr]=!0,Ee.prototype.removeEventListener=function(s,c,l,f){wl(this,s,c,l,f)};function xe(s,c){var l,f=s.F;if(f)for(l=[];f;f=f.F)l.push(f);if(s=s.M,f=c.type||c,typeof c=="string")c=new we(c,s);else if(c instanceof we)c.target=c.target||s;else{var T=c;c=new we(f,s),v(c,T)}if(T=!0,l)for(var A=l.length-1;0<=A;A--){var k=c.g=l[A];T=wi(k,f,!0,c)&&T}if(k=c.g=s,T=wi(k,f,!0,c)&&T,T=wi(k,f,!1,c)&&T,l)for(A=0;A<l.length;A++)k=c.g=l[A],T=wi(k,f,!1,c)&&T}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var s=this.i,c;for(c in s.g){for(var l=s.g[c],f=0;f<l.length;f++)vi(l[f]);delete s.g[c],s.h--}}this.F=null},Ee.prototype.K=function(s,c,l,f){return this.i.add(String(s),c,!1,l,f)},Ee.prototype.L=function(s,c,l,f){return this.i.add(String(s),c,!0,l,f)};function wi(s,c,l,f){if(c=s.i.g[String(c)],!c)return!0;c=c.concat();for(var T=!0,A=0;A<c.length;++A){var k=c[A];if(k&&!k.da&&k.capture==l){var ne=k.listener,ve=k.ha||k.src;k.fa&&go(s.i,k),T=ne.call(ve,f)!==!1&&T}}return T&&!f.defaultPrevented}function Tl(s,c,l){if(typeof s=="function")l&&(s=C(s,l));else if(s&&typeof s.handleEvent=="function")s=C(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:u.setTimeout(s,c||0)}function bl(s){s.g=Tl(()=>{s.g=null,s.i&&(s.i=!1,bl(s))},s.l);let c=s.h;s.h=null,s.m.apply(null,c)}class Vm extends At{constructor(c,l){super(),this.m=c,this.l=l,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:bl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mr(s){At.call(this),this.h=s,this.g={}}O(mr,At);var Al=[];function Cl(s){ee(s.g,function(c,l){this.g.hasOwnProperty(l)&&Io(c)},s),s.g={}}mr.prototype.N=function(){mr.aa.N.call(this),Cl(this)},mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bo=u.JSON.stringify,Fm=u.JSON.parse,Um=class{stringify(s){return u.JSON.stringify(s,void 0)}parse(s){return u.JSON.parse(s,void 0)}};function Ao(){}Ao.prototype.h=null;function Sl(s){return s.h||(s.h=s.i())}function Pl(){}var gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Co(){we.call(this,"d")}O(Co,we);function So(){we.call(this,"c")}O(So,we);var Gt={},Rl=null;function Ei(){return Rl=Rl||new Ee}Gt.La="serverreachability";function kl(s){we.call(this,Gt.La,s)}O(kl,we);function _r(s){let c=Ei();xe(c,new kl(c))}Gt.STAT_EVENT="statevent";function Dl(s,c){we.call(this,Gt.STAT_EVENT,s),this.stat=c}O(Dl,we);function Ne(s){let c=Ei();xe(c,new Dl(c,s))}Gt.Ma="timingevent";function xl(s,c){we.call(this,Gt.Ma,s),this.size=c}O(xl,we);function yr(s,c){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){s()},c)}function vr(){this.g=!0}vr.prototype.xa=function(){this.g=!1};function Lm(s,c,l,f,T,A){s.info(function(){if(s.g)if(A)for(var k="",ne=A.split("&"),ve=0;ve<ne.length;ve++){var J=ne[ve].split("=");if(1<J.length){var Te=J[0];J=J[1];var be=Te.split("_");k=2<=be.length&&be[1]=="type"?k+(Te+"="+J+"&"):k+(Te+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+f+") [attempt "+T+"]: "+c+`
`+l+`
`+k})}function Bm(s,c,l,f,T,A,k){s.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+T+"]: "+c+`
`+l+`
`+A+" "+k})}function En(s,c,l,f){s.info(function(){return"XMLHTTP TEXT ("+c+"): "+qm(s,l)+(f?" "+f:"")})}function jm(s,c){s.info(function(){return"TIMEOUT: "+c})}vr.prototype.info=function(){};function qm(s,c){if(!s.g)return c;if(!c)return null;try{var l=JSON.parse(c);if(l){for(s=0;s<l.length;s++)if(Array.isArray(l[s])){var f=l[s];if(!(2>f.length)){var T=f[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return bo(l)}catch{return c}}var Ti={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Po;function bi(){}O(bi,Ao),bi.prototype.g=function(){return new XMLHttpRequest},bi.prototype.i=function(){return{}},Po=new bi;function Ct(s,c,l,f){this.j=s,this.i=c,this.l=l,this.R=f||1,this.U=new mr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ol}function Ol(){this.i=null,this.g="",this.h=!1}var Ml={},Ro={};function ko(s,c,l){s.L=1,s.v=Pi(ut(c)),s.m=l,s.P=!0,Vl(s,null)}function Vl(s,c){s.F=Date.now(),Ai(s),s.A=ut(s.v);var l=s.A,f=s.R;Array.isArray(f)||(f=[String(f)]),Yl(l.i,"t",f),s.C=0,l=s.j.J,s.h=new Ol,s.g=ph(s.j,l?c:null,!s.m),0<s.O&&(s.M=new Vm(C(s.Y,s,s.g),s.O)),c=s.U,l=s.g,f=s.ca;var T="readystatechange";Array.isArray(T)||(T&&(Al[0]=T.toString()),T=Al);for(var A=0;A<T.length;A++){var k=yl(l,T[A],f||c.handleEvent,!1,c.h||c);if(!k)break;c.g[k.key]=k}c=s.H?m(s.H):{},s.m?(s.u||(s.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,c)):(s.u="GET",s.g.ea(s.A,s.u,null,c)),_r(),Lm(s.i,s.u,s.A,s.l,s.R,s.m)}Ct.prototype.ca=function(s){s=s.target;let c=this.M;c&&lt(s)==3?c.j():this.Y(s)},Ct.prototype.Y=function(s){try{if(s==this.g)e:{let be=lt(this.g);var c=this.g.Ba();let An=this.g.Z();if(!(3>be)&&(be!=3||this.g&&(this.h.h||this.g.oa()||rh(this.g)))){this.J||be!=4||c==7||(c==8||0>=An?_r(3):_r(2)),Do(this);var l=this.g.Z();this.X=l;t:if(Fl(this)){var f=rh(this.g);s="";var T=f.length,A=lt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kt(this),Ir(this);var k="";break t}this.h.i=new u.TextDecoder}for(c=0;c<T;c++)this.h.h=!0,s+=this.h.i.decode(f[c],{stream:!(A&&c==T-1)});f.length=0,this.h.g+=s,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=l==200,Bm(this.i,this.u,this.A,this.l,this.R,be,l),this.o){if(this.T&&!this.K){t:{if(this.g){var ne,ve=this.g;if((ne=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ne)){var J=ne;break t}}J=null}if(l=J)En(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xo(this,l);else{this.o=!1,this.s=3,Ne(12),Kt(this),Ir(this);break e}}if(this.P){l=!0;let qe;for(;!this.J&&this.C<k.length;)if(qe=zm(this,k),qe==Ro){be==4&&(this.s=4,Ne(14),l=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==Ml){this.s=4,Ne(15),En(this.i,this.l,k,"[Invalid Chunk]"),l=!1;break}else En(this.i,this.l,qe,null),xo(this,qe);if(Fl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||k.length!=0||this.h.h||(this.s=1,Ne(16),l=!1),this.o=this.o&&l,!l)En(this.i,this.l,k,"[Invalid Chunked Response]"),Kt(this),Ir(this);else if(0<k.length&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.ba&&!Te.M&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Uo(Te),Te.M=!0,Ne(11))}}else En(this.i,this.l,k,null),xo(this,k);be==4&&Kt(this),this.o&&!this.J&&(be==4?lh(this.j,this):(this.o=!1,Ai(this)))}else og(this.g),l==400&&0<k.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Kt(this),Ir(this)}}}catch{}finally{}};function Fl(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function zm(s,c){var l=s.C,f=c.indexOf(`
`,l);return f==-1?Ro:(l=Number(c.substring(l,f)),isNaN(l)?Ml:(f+=1,f+l>c.length?Ro:(c=c.slice(f,f+l),s.C=f+l,c)))}Ct.prototype.cancel=function(){this.J=!0,Kt(this)};function Ai(s){s.S=Date.now()+s.I,Ul(s,s.I)}function Ul(s,c){if(s.B!=null)throw Error("WatchDog timer not null");s.B=yr(C(s.ba,s),c)}function Do(s){s.B&&(u.clearTimeout(s.B),s.B=null)}Ct.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(jm(this.i,this.A),this.L!=2&&(_r(),Ne(17)),Kt(this),this.s=2,Ir(this)):Ul(this,this.S-s)};function Ir(s){s.j.G==0||s.J||lh(s.j,s)}function Kt(s){Do(s);var c=s.M;c&&typeof c.ma=="function"&&c.ma(),s.M=null,Cl(s.U),s.g&&(c=s.g,s.g=null,c.abort(),c.ma())}function xo(s,c){try{var l=s.j;if(l.G!=0&&(l.g==s||No(l.h,s))){if(!s.K&&No(l.h,s)&&l.G==3){try{var f=l.Da.g.parse(c)}catch{f=null}if(Array.isArray(f)&&f.length==3){var T=f;if(T[0]==0){e:if(!l.u){if(l.g)if(l.g.F+3e3<s.F)Ni(l),Di(l);else break e;Fo(l),Ne(18)}}else l.za=T[1],0<l.za-l.T&&37500>T[2]&&l.F&&l.v==0&&!l.C&&(l.C=yr(C(l.Za,l),6e3));if(1>=jl(l.h)&&l.ca){try{l.ca()}catch{}l.ca=void 0}}else Ht(l,11)}else if((s.K||l.g==s)&&Ni(l),!H(c))for(T=l.Da.g.parse(c),c=0;c<T.length;c++){let J=T[c];if(l.T=J[0],J=J[1],l.G==2)if(J[0]=="c"){l.K=J[1],l.ia=J[2];let Te=J[3];Te!=null&&(l.la=Te,l.j.info("VER="+l.la));let be=J[4];be!=null&&(l.Aa=be,l.j.info("SVER="+l.Aa));let An=J[5];An!=null&&typeof An=="number"&&0<An&&(f=1.5*An,l.L=f,l.j.info("backChannelRequestTimeoutMs_="+f)),f=l;let qe=s.g;if(qe){let Mi=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var A=f.h;A.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Oo(A,A.h),A.h=null))}if(f.D){let Lo=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(f.ya=Lo,oe(f.I,f.D,Lo))}}l.G=3,l.l&&l.l.ua(),l.ba&&(l.R=Date.now()-s.F,l.j.info("Handshake RTT: "+l.R+"ms")),f=l;var k=s;if(f.qa=fh(f,f.J?f.ia:null,f.W),k.K){ql(f.h,k);var ne=k,ve=f.L;ve&&(ne.I=ve),ne.B&&(Do(ne),Ai(ne)),f.g=k}else ch(f);0<l.i.length&&xi(l)}else J[0]!="stop"&&J[0]!="close"||Ht(l,7);else l.G==3&&(J[0]=="stop"||J[0]=="close"?J[0]=="stop"?Ht(l,7):Vo(l):J[0]!="noop"&&l.l&&l.l.ta(J),l.v=0)}}_r(4)}catch{}}var $m=class{constructor(s,c){this.g=s,this.map=c}};function Ll(s){this.l=s||10,u.PerformanceNavigationTiming?(s=u.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bl(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function jl(s){return s.h?1:s.g?s.g.size:0}function No(s,c){return s.h?s.h==c:s.g?s.g.has(c):!1}function Oo(s,c){s.g?s.g.add(c):s.h=c}function ql(s,c){s.h&&s.h==c?s.h=null:s.g&&s.g.has(c)&&s.g.delete(c)}Ll.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function zl(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let c=s.i;for(let l of s.g.values())c=c.concat(l.D);return c}return F(s.i)}function Gm(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(h(s)){for(var c=[],l=s.length,f=0;f<l;f++)c.push(s[f]);return c}c=[],l=0;for(f in s)c[l++]=s[f];return c}function Km(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(h(s)||typeof s=="string"){var c=[];s=s.length;for(var l=0;l<s;l++)c.push(l);return c}c=[],l=0;for(let f in s)c[l++]=f;return c}}}function $l(s,c){if(s.forEach&&typeof s.forEach=="function")s.forEach(c,void 0);else if(h(s)||typeof s=="string")Array.prototype.forEach.call(s,c,void 0);else for(var l=Km(s),f=Gm(s),T=f.length,A=0;A<T;A++)c.call(void 0,f[A],l&&l[A],s)}var Gl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wm(s,c){if(s){s=s.split("&");for(var l=0;l<s.length;l++){var f=s[l].indexOf("="),T=null;if(0<=f){var A=s[l].substring(0,f);T=s[l].substring(f+1)}else A=s[l];c(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Wt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Wt){this.h=s.h,Ci(this,s.j),this.o=s.o,this.g=s.g,Si(this,s.s),this.l=s.l;var c=s.i,l=new Tr;l.i=c.i,c.g&&(l.g=new Map(c.g),l.h=c.h),Kl(this,l),this.m=s.m}else s&&(c=String(s).match(Gl))?(this.h=!1,Ci(this,c[1]||"",!0),this.o=wr(c[2]||""),this.g=wr(c[3]||"",!0),Si(this,c[4]),this.l=wr(c[5]||"",!0),Kl(this,c[6]||"",!0),this.m=wr(c[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}Wt.prototype.toString=function(){var s=[],c=this.j;c&&s.push(Er(c,Wl,!0),":");var l=this.g;return(l||c=="file")&&(s.push("//"),(c=this.o)&&s.push(Er(c,Wl,!0),"@"),s.push(encodeURIComponent(String(l)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.s,l!=null&&s.push(":",String(l))),(l=this.l)&&(this.g&&l.charAt(0)!="/"&&s.push("/"),s.push(Er(l,l.charAt(0)=="/"?Ym:Qm,!0))),(l=this.i.toString())&&s.push("?",l),(l=this.m)&&s.push("#",Er(l,Xm)),s.join("")};function ut(s){return new Wt(s)}function Ci(s,c,l){s.j=l?wr(c,!0):c,s.j&&(s.j=s.j.replace(/:$/,""))}function Si(s,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);s.s=c}else s.s=null}function Kl(s,c,l){c instanceof Tr?(s.i=c,Zm(s.i,s.h)):(l||(c=Er(c,Jm)),s.i=new Tr(c,s.h))}function oe(s,c,l){s.i.set(c,l)}function Pi(s){return oe(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function wr(s,c){return s?c?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function Er(s,c,l){return typeof s=="string"?(s=encodeURI(s).replace(c,Hm),l&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Hm(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Wl=/[#\/\?@]/g,Qm=/[#\?:]/g,Ym=/[#\?]/g,Jm=/[#\?@]/g,Xm=/#/g;function Tr(s,c){this.h=this.g=null,this.i=s||null,this.j=!!c}function St(s){s.g||(s.g=new Map,s.h=0,s.i&&Wm(s.i,function(c,l){s.add(decodeURIComponent(c.replace(/\+/g," ")),l)}))}n=Tr.prototype,n.add=function(s,c){St(this),this.i=null,s=Tn(this,s);var l=this.g.get(s);return l||this.g.set(s,l=[]),l.push(c),this.h+=1,this};function Hl(s,c){St(s),c=Tn(s,c),s.g.has(c)&&(s.i=null,s.h-=s.g.get(c).length,s.g.delete(c))}function Ql(s,c){return St(s),c=Tn(s,c),s.g.has(c)}n.forEach=function(s,c){St(this),this.g.forEach(function(l,f){l.forEach(function(T){s.call(c,T,f,this)},this)},this)},n.na=function(){St(this);let s=Array.from(this.g.values()),c=Array.from(this.g.keys()),l=[];for(let f=0;f<c.length;f++){let T=s[f];for(let A=0;A<T.length;A++)l.push(c[f])}return l},n.V=function(s){St(this);let c=[];if(typeof s=="string")Ql(this,s)&&(c=c.concat(this.g.get(Tn(this,s))));else{s=Array.from(this.g.values());for(let l=0;l<s.length;l++)c=c.concat(s[l])}return c},n.set=function(s,c){return St(this),this.i=null,s=Tn(this,s),Ql(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[c]),this.h+=1,this},n.get=function(s,c){return s?(s=this.V(s),0<s.length?String(s[0]):c):c};function Yl(s,c,l){Hl(s,c),0<l.length&&(s.i=null,s.g.set(Tn(s,c),F(l)),s.h+=l.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],c=Array.from(this.g.keys());for(var l=0;l<c.length;l++){var f=c[l];let A=encodeURIComponent(String(f)),k=this.V(f);for(f=0;f<k.length;f++){var T=A;k[f]!==""&&(T+="="+encodeURIComponent(String(k[f]))),s.push(T)}}return this.i=s.join("&")};function Tn(s,c){return c=String(c),s.j&&(c=c.toLowerCase()),c}function Zm(s,c){c&&!s.j&&(St(s),s.i=null,s.g.forEach(function(l,f){var T=f.toLowerCase();f!=T&&(Hl(this,f),Yl(this,T,l))},s)),s.j=c}function eg(s,c){let l=new vr;if(u.Image){let f=new Image;f.onload=P(Pt,l,"TestLoadImage: loaded",!0,c,f),f.onerror=P(Pt,l,"TestLoadImage: error",!1,c,f),f.onabort=P(Pt,l,"TestLoadImage: abort",!1,c,f),f.ontimeout=P(Pt,l,"TestLoadImage: timeout",!1,c,f),u.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=s}else c(!1)}function tg(s,c){let l=new vr,f=new AbortController,T=setTimeout(()=>{f.abort(),Pt(l,"TestPingServer: timeout",!1,c)},1e4);fetch(s,{signal:f.signal}).then(A=>{clearTimeout(T),A.ok?Pt(l,"TestPingServer: ok",!0,c):Pt(l,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(T),Pt(l,"TestPingServer: error",!1,c)})}function Pt(s,c,l,f,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),f(l)}catch{}}function ng(){this.g=new Um}function rg(s,c,l){let f=l||"";try{$l(s,function(T,A){let k=T;d(T)&&(k=bo(T)),c.push(f+A+"="+encodeURIComponent(k))})}catch(T){throw c.push(f+"type="+encodeURIComponent("_badmap")),T}}function br(s){this.l=s.Ub||null,this.j=s.eb||!1}O(br,Ao),br.prototype.g=function(){return new Ri(this.l,this.j)},br.prototype.i=function(s){return function(){return s}}({});function Ri(s,c){Ee.call(this),this.D=s,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Ri,Ee),n=Ri.prototype,n.open=function(s,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=c,this.readyState=1,Cr(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(c.body=s),(this.D||u).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jl(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jl(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var c=s.value?s.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!s.done}))&&(this.response=this.responseText+=c)}s.done?Ar(this):Cr(this),this.readyState==3&&Jl(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,Ar(this))},n.Qa=function(s){this.g&&(this.response=s,Ar(this))},n.ga=function(){this.g&&Ar(this)};function Ar(s){s.readyState=4,s.l=null,s.j=null,s.v=null,Cr(s)}n.setRequestHeader=function(s,c){this.u.append(s,c)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],c=this.h.entries();for(var l=c.next();!l.done;)l=l.value,s.push(l[0]+": "+l[1]),l=c.next();return s.join(`\r
`)};function Cr(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function Xl(s){let c="";return ee(s,function(l,f){c+=f,c+=":",c+=l,c+=`\r
`}),c}function Mo(s,c,l){e:{for(f in l){var f=!1;break e}f=!0}f||(l=Xl(l),typeof s=="string"?l!=null&&encodeURIComponent(String(l)):oe(s,c,l))}function le(s){Ee.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(le,Ee);var ig=/^https?$/i,sg=["POST","PUT"];n=le.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,c,l,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);c=c?c.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Po.g(),this.v=this.o?Sl(this.o):Sl(Po),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(c,String(s),!0),this.B=!1}catch(A){Zl(this,A);return}if(s=l||"",l=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var T in f)l.set(T,f[T]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let A of f.keys())l.set(A,f.get(A));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(l.keys()).find(A=>A.toLowerCase()=="content-type"),T=u.FormData&&s instanceof u.FormData,!(0<=Array.prototype.indexOf.call(sg,c,void 0))||f||T||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of l)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nh(this),this.u=!0,this.g.send(s),this.u=!1}catch(A){Zl(this,A)}};function Zl(s,c){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=c,s.m=5,eh(s),ki(s)}function eh(s){s.A||(s.A=!0,xe(s,"complete"),xe(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,xe(this,"complete"),xe(this,"abort"),ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),le.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?th(this):this.bb())},n.bb=function(){th(this)};function th(s){if(s.h&&typeof a<"u"&&(!s.v[1]||lt(s)!=4||s.Z()!=2)){if(s.u&&lt(s)==4)Tl(s.Ea,0,s);else if(xe(s,"readystatechange"),lt(s)==4){s.h=!1;try{let k=s.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var l;if(!(l=c)){var f;if(f=k===0){var T=String(s.D).match(Gl)[1]||null;!T&&u.self&&u.self.location&&(T=u.self.location.protocol.slice(0,-1)),f=!ig.test(T?T.toLowerCase():"")}l=f}if(l)xe(s,"complete"),xe(s,"success");else{s.m=6;try{var A=2<lt(s)?s.g.statusText:""}catch{A=""}s.l=A+" ["+s.Z()+"]",eh(s)}}finally{ki(s)}}}}function ki(s,c){if(s.g){nh(s);let l=s.g,f=s.v[0]?()=>{}:null;s.g=null,s.v=null,c||xe(s,"ready");try{l.onreadystatechange=f}catch{}}}function nh(s){s.I&&(u.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function lt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<lt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var c=this.g.responseText;return s&&c.indexOf(s)==0&&(c=c.substring(s.length)),Fm(c)}};function rh(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function og(s){let c={};s=(s.g&&2<=lt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<s.length;f++){if(H(s[f]))continue;var l=E(s[f]);let T=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();let A=c[T]||[];c[T]=A,A.push(l)}w(c,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(s,c,l){return l&&l.internalChannelParams&&l.internalChannelParams[s]||c}function ih(s){this.Aa=0,this.i=[],this.j=new vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sr("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sr("baseRetryDelayMs",5e3,s),this.cb=Sr("retryDelaySeedMs",1e4,s),this.Wa=Sr("forwardChannelMaxRetries",2,s),this.wa=Sr("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new Ll(s&&s.concurrentRequestLimit),this.Da=new ng,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ih.prototype,n.la=8,n.G=1,n.connect=function(s,c,l,f){Ne(0),this.W=s,this.H=c||{},l&&f!==void 0&&(this.H.OSID=l,this.H.OAID=f),this.F=this.X,this.I=fh(this,null,this.W),xi(this)};function Vo(s){if(sh(s),s.G==3){var c=s.U++,l=ut(s.I);if(oe(l,"SID",s.K),oe(l,"RID",c),oe(l,"TYPE","terminate"),Pr(s,l),c=new Ct(s,s.j,c),c.L=2,c.v=Pi(ut(l)),l=!1,u.navigator&&u.navigator.sendBeacon)try{l=u.navigator.sendBeacon(c.v.toString(),"")}catch{}!l&&u.Image&&(new Image().src=c.v,l=!0),l||(c.g=ph(c.j,null),c.g.ea(c.v)),c.F=Date.now(),Ai(c)}dh(s)}function Di(s){s.g&&(Uo(s),s.g.cancel(),s.g=null)}function sh(s){Di(s),s.u&&(u.clearTimeout(s.u),s.u=null),Ni(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&u.clearTimeout(s.s),s.s=null)}function xi(s){if(!Bl(s.h)&&!s.s){s.s=!0;var c=s.Ga;hr||_l(),dr||(hr(),dr=!0),mo.add(c,s),s.B=0}}function ag(s,c){return jl(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=c.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=yr(C(s.Ga,s,c),hh(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let T=new Ct(this,this.j,s),A=this.o;if(this.S&&(A?(A=m(A),v(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var c=0,l=0;l<this.i.length;l++){t:{var f=this.i[l];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(c+=f,4096<c){c=l;break e}if(c===4096||l===this.i.length-1){c=l+1;break e}}c=1e3}else c=1e3;c=ah(this,T,c),l=ut(this.I),oe(l,"RID",s),oe(l,"CVER",22),this.D&&oe(l,"X-HTTP-Session-Id",this.D),Pr(this,l),A&&(this.O?c="headers="+encodeURIComponent(String(Xl(A)))+"&"+c:this.m&&Mo(l,this.m,A)),Oo(this.h,T),this.Ua&&oe(l,"TYPE","init"),this.P?(oe(l,"$req",c),oe(l,"SID","null"),T.T=!0,ko(T,l,null)):ko(T,l,c),this.G=2}}else this.G==3&&(s?oh(this,s):this.i.length==0||Bl(this.h)||oh(this))};function oh(s,c){var l;c?l=c.l:l=s.U++;let f=ut(s.I);oe(f,"SID",s.K),oe(f,"RID",l),oe(f,"AID",s.T),Pr(s,f),s.m&&s.o&&Mo(f,s.m,s.o),l=new Ct(s,s.j,l,s.B+1),s.m===null&&(l.H=s.o),c&&(s.i=c.D.concat(s.i)),c=ah(s,l,1e3),l.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Oo(s.h,l),ko(l,f,c)}function Pr(s,c){s.H&&ee(s.H,function(l,f){oe(c,f,l)}),s.l&&$l({},function(l,f){oe(c,f,l)})}function ah(s,c,l){l=Math.min(s.i.length,l);var f=s.l?C(s.l.Na,s.l,s):null;e:{var T=s.i;let A=-1;for(;;){let k=["count="+l];A==-1?0<l?(A=T[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let ne=!0;for(let ve=0;ve<l;ve++){let J=T[ve].g,Te=T[ve].map;if(J-=A,0>J)A=Math.max(0,T[ve].g-100),ne=!1;else try{rg(Te,k,"req"+J+"_")}catch{f&&f(Te)}}if(ne){f=k.join("&");break e}}}return s=s.i.splice(0,l),c.D=s,f}function ch(s){if(!s.g&&!s.u){s.Y=1;var c=s.Fa;hr||_l(),dr||(hr(),dr=!0),mo.add(c,s),s.v=0}}function Fo(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=yr(C(s.Fa,s),hh(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,uh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=yr(C(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Di(this),uh(this))};function Uo(s){s.A!=null&&(u.clearTimeout(s.A),s.A=null)}function uh(s){s.g=new Ct(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var c=ut(s.qa);oe(c,"RID","rpc"),oe(c,"SID",s.K),oe(c,"AID",s.T),oe(c,"CI",s.F?"0":"1"),!s.F&&s.ja&&oe(c,"TO",s.ja),oe(c,"TYPE","xmlhttp"),Pr(s,c),s.m&&s.o&&Mo(c,s.m,s.o),s.L&&(s.g.I=s.L);var l=s.g;s=s.ia,l.L=1,l.v=Pi(ut(c)),l.m=null,l.P=!0,Vl(l,s)}n.Za=function(){this.C!=null&&(this.C=null,Di(this),Fo(this),Ne(19))};function Ni(s){s.C!=null&&(u.clearTimeout(s.C),s.C=null)}function lh(s,c){var l=null;if(s.g==c){Ni(s),Uo(s),s.g=null;var f=2}else if(No(s.h,c))l=c.D,ql(s.h,c),f=1;else return;if(s.G!=0){if(c.o)if(f==1){l=c.m?c.m.length:0,c=Date.now()-c.F;var T=s.B;f=Ei(),xe(f,new xl(f,l)),xi(s)}else ch(s);else if(T=c.s,T==3||T==0&&0<c.X||!(f==1&&ag(s,c)||f==2&&Fo(s)))switch(l&&0<l.length&&(c=s.h,c.i=c.i.concat(l)),T){case 1:Ht(s,5);break;case 4:Ht(s,10);break;case 3:Ht(s,6);break;default:Ht(s,2)}}}function hh(s,c){let l=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(l*=2),l*c}function Ht(s,c){if(s.j.info("Error code "+c),c==2){var l=C(s.fb,s),f=s.Xa;let T=!f;f=new Wt(f||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ci(f,"https"),Pi(f),T?eg(f.toString(),l):tg(f.toString(),l)}else Ne(2);s.G=0,s.l&&s.l.sa(c),dh(s),sh(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function dh(s){if(s.G=0,s.ka=[],s.l){let c=zl(s.h);(c.length!=0||s.i.length!=0)&&(D(s.ka,c),D(s.ka,s.i),s.h.i.length=0,F(s.i),s.i.length=0),s.l.ra()}}function fh(s,c,l){var f=l instanceof Wt?ut(l):new Wt(l);if(f.g!="")c&&(f.g=c+"."+f.g),Si(f,f.s);else{var T=u.location;f=T.protocol,c=c?c+"."+T.hostname:T.hostname,T=+T.port;var A=new Wt(null);f&&Ci(A,f),c&&(A.g=c),T&&Si(A,T),l&&(A.l=l),f=A}return l=s.D,c=s.ya,l&&c&&oe(f,l,c),oe(f,"VER",s.la),Pr(s,f),f}function ph(s,c,l){if(c&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=s.Ca&&!s.pa?new le(new br({eb:l})):new le(s.pa),c.Ha(s.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mh(){}n=mh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Oi(){}Oi.prototype.g=function(s,c){return new Me(s,c)};function Me(s,c){Ee.call(this),this.g=new ih(c),this.l=s,this.h=c&&c.messageUrlParams||null,s=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(s?s["X-WebChannel-Content-Type"]=c.messageContentType:s={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(s?s["X-WebChannel-Client-Profile"]=c.va:s={"X-WebChannel-Client-Profile":c.va}),this.g.S=s,(s=c&&c.Sb)&&!H(s)&&(this.g.m=s),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!H(c)&&(this.g.D=c,s=this.h,s!==null&&c in s&&(s=this.h,c in s&&delete s[c])),this.j=new bn(this)}O(Me,Ee),Me.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Me.prototype.close=function(){Vo(this.g)},Me.prototype.o=function(s){var c=this.g;if(typeof s=="string"){var l={};l.__data__=s,s=l}else this.u&&(l={},l.__data__=bo(s),s=l);c.i.push(new $m(c.Ya++,s)),c.G==3&&xi(c)},Me.prototype.N=function(){this.g.l=null,delete this.j,Vo(this.g),delete this.g,Me.aa.N.call(this)};function gh(s){Co.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var c=s.__sm__;if(c){e:{for(let l in c){s=l;break e}s=void 0}(this.i=s)&&(s=this.i,c=c!==null&&s in c?c[s]:void 0),this.data=c}else this.data=s}O(gh,Co);function _h(){So.call(this),this.status=1}O(_h,So);function bn(s){this.g=s}O(bn,mh),bn.prototype.ua=function(){xe(this.g,"a")},bn.prototype.ta=function(s){xe(this.g,new gh(s))},bn.prototype.sa=function(s){xe(this.g,new _h)},bn.prototype.ra=function(){xe(this.g,"b")},Oi.prototype.createWebChannel=Oi.prototype.g,Me.prototype.send=Me.prototype.o,Me.prototype.open=Me.prototype.m,Me.prototype.close=Me.prototype.close,oc=yt.createWebChannelTransport=function(){return new Oi},sc=yt.getStatEventTarget=function(){return Ei()},ic=yt.Event=Gt,_s=yt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ti.NO_ERROR=0,Ti.TIMEOUT=8,Ti.HTTP_ERROR=6,Qr=yt.ErrorCode=Ti,Nl.COMPLETE="complete",rc=yt.EventType=Nl,Pl.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,qn=yt.WebChannel=Pl,nc=yt.FetchXmlHttpFactory=br,le.prototype.listenOnce=le.prototype.L,le.prototype.getLastError=le.prototype.Ka,le.prototype.getLastErrorCode=le.prototype.Ba,le.prototype.getStatus=le.prototype.Z,le.prototype.getResponseJson=le.prototype.Oa,le.prototype.getResponseText=le.prototype.oa,le.prototype.send=le.prototype.ea,le.prototype.setWithCredentials=le.prototype.Ha,tc=yt.XhrIo=le}).apply(typeof gs<"u"?gs:typeof self<"u"?self:typeof window<"u"?window:{});var bf="@firebase/firestore";var ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ye.UNAUTHENTICATED=new ye(null),ye.GOOGLE_CREDENTIALS=new ye("google-credentials-uid"),ye.FIRST_PARTY=new ye("first-party-uid"),ye.MOCK_USER=new ye("mock-user");var ar="10.13.1";var fn=new Dt("@firebase/firestore");function Yr(){return fn.logLevel}function V(n,...e){if(fn.logLevel<=K.DEBUG){let t=e.map(Wu);fn.debug(`Firestore (${ar}): ${n}`,...t)}}function It(n,...e){if(fn.logLevel<=K.ERROR){let t=e.map(Wu);fn.error(`Firestore (${ar}): ${n}`,...t)}}function Qn(n,...e){if(fn.logLevel<=K.WARN){let t=e.map(Wu);fn.warn(`Firestore (${ar}): ${n}`,...t)}}function Wu(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function j(n="Unexpected state"){let e=`FIRESTORE (${ar}) INTERNAL ASSERTION FAILED: `+n;throw It(e),new Error(e)}function re(n,e){n||j()}function q(n,e){return n}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends Fe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Es=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ye.UNAUTHENTICATED))}shutdown(){}},dc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fc=class{constructor(e){this.t=e,this.currentUser=ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),o=new vt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vt,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let h=o;e.enqueueRetryable(()=>y(this,null,function*(){yield h.promise,yield i(this.currentUser)}))},u=h=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?u(h):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new Es(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new ye(e)}},pc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ye.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},mc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new pc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},gc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_c=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,V("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(re(typeof t.token=="string"),this.R=t.token,new gc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function pv(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ts=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=pv(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function X(n,e){return n<e?-1:n>e?1:0}function Yn(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ie=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?X(this.nanoseconds,e.nanoseconds):X(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ie(0,0))}static max(){return new n(new Ie(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bs=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&j(),r===void 0?r=e.length-t:r>e.length-t&&j(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ue=class n extends bs{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},mv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ue=class n extends bs{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return mv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new M(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new M(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new M(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new M(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var U=class n{constructor(e){this.path=e}static fromPath(e){return new n(ue.fromString(e))}static fromName(e){return new n(ue.fromString(e).popFirst(5))}static empty(){return new n(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ue.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ue(e.slice()))}};var yc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};yc.UNKNOWN_ID=-1;function gv(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new Ie(t+1,0):new Ie(t,r));return new pn(i,U.empty(),e)}function _v(n){return new pn(n.readTime,n.key,-1)}var pn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(z.min(),U.empty(),-1)}static max(){return new n(z.max(),U.empty(),-1)}};function yv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=U.comparator(n.documentKey,e.documentKey),t!==0?t:X(n.largestBatchId,e.largestBatchId))}var vv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mi(n){return y(this,null,function*(){if(n.code!==S.FAILED_PRECONDITION||n.message!==vv)throw n;V("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&t()},h=>r(h))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let h=0;h<o;h++){let d=h;t(e[d]).next(p=>{a[d]=p,++u,u===o&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Iv(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gi(n){return n.name==="IndexedDbTransactionError"}var sp=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Zs(n){return n==null}function ri(n){return n===0&&1/n==-1/0}function wv(n){return typeof n=="number"&&Number.isInteger(n)&&!ri(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Ev=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ST=[...Ev,"documentOverlays"],Tv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bv=Tv,Av=[...bv,"indexConfiguration","indexState","indexEntries"];var PT=[...Av,"globals"];function Af(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cr(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function op(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var he=class n{constructor(e,t){this.comparator=e,this.root=t||it.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kn(this.root,e,this.comparator,!0)}},Kn=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},it=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();let e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}};it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,t,r,i,o){return this}insert(e,t,r){return new it(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class n{constructor(e){this.comparator=e,this.data=new he(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new As(this.data.getIterator())}getIteratorFrom(e){return new As(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},As=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rt=class n{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new n([])}unionWith(e){let t=new Re(Ue.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yn(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Cs=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Cs("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return X(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ke.EMPTY_BYTE_STRING=new ke("");var Cv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wt(n){if(re(!!n),typeof n=="string"){let e=0,t=Cv.exec(n);if(re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ce(n.seconds),nanos:ce(n.nanos)}}function ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jt(n){return typeof n=="string"?ke.fromBase64String(n):ke.fromUint8Array(n)}function Hu(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Qu(n){let e=n.mapValue.fields.__previous_value__;return Hu(e)?Qu(e):e}function ii(n){let e=wt(n.mapValue.fields.__local_write_time__.timestampValue);return new Ie(e.seconds,e.nanos)}var Ic=class{constructor(e,t,r,i,o,a,u,h,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=d}},Ss=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ys={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hu(n)?4:cp(n)?9007199254740991:ap(n)?10:11:j()}function at(n,e){if(n===e)return!0;let t=mn(n);if(t!==mn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ii(n).isEqual(ii(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=wt(i.timestampValue),u=wt(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return jt(i.bytesValue).isEqual(jt(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ce(i.geoPointValue.latitude)===ce(o.geoPointValue.latitude)&&ce(i.geoPointValue.longitude)===ce(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ce(i.integerValue)===ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=ce(i.doubleValue),u=ce(o.doubleValue);return a===u?ri(a)===ri(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Yn(n.arrayValue.values||[],e.arrayValue.values||[],at);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Af(a)!==Af(u))return!1;for(let h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!at(a[h],u[h])))return!1;return!0}(n,e);default:return j()}}function si(n,e){return(n.values||[]).find(t=>at(t,e))!==void 0}function Jn(n,e){if(n===e)return 0;let t=mn(n),r=mn(e);if(t!==r)return X(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return X(n.booleanValue,e.booleanValue);case 2:return function(o,a){let u=ce(o.integerValue||o.doubleValue),h=ce(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return Cf(n.timestampValue,e.timestampValue);case 4:return Cf(ii(n),ii(e));case 5:return X(n.stringValue,e.stringValue);case 6:return function(o,a){let u=jt(o),h=jt(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let u=o.split("/"),h=a.split("/");for(let d=0;d<u.length&&d<h.length;d++){let p=X(u[d],h[d]);if(p!==0)return p}return X(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let u=X(ce(o.latitude),ce(a.latitude));return u!==0?u:X(ce(o.longitude),ce(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Sf(n.arrayValue,e.arrayValue);case 10:return function(o,a){var u,h,d,p;let I=o.fields||{},C=a.fields||{},P=(u=I.value)===null||u===void 0?void 0:u.arrayValue,O=(h=C.value)===null||h===void 0?void 0:h.arrayValue,F=X(((d=P?.values)===null||d===void 0?void 0:d.length)||0,((p=O?.values)===null||p===void 0?void 0:p.length)||0);return F!==0?F:Sf(P,O)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===ys.mapValue&&a===ys.mapValue)return 0;if(o===ys.mapValue)return 1;if(a===ys.mapValue)return-1;let u=o.fields||{},h=Object.keys(u),d=a.fields||{},p=Object.keys(d);h.sort(),p.sort();for(let I=0;I<h.length&&I<p.length;++I){let C=X(h[I],p[I]);if(C!==0)return C;let P=Jn(u[h[I]],d[p[I]]);if(P!==0)return P}return X(h.length,p.length)}(n.mapValue,e.mapValue);default:throw j()}}function Cf(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return X(n,e);let t=wt(n),r=wt(e),i=X(t.seconds,r.seconds);return i!==0?i:X(t.nanos,r.nanos)}function Sf(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Jn(t[i],r[i]);if(o)return o}return X(t.length,r.length)}function Xn(n){return wc(n)}function wc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=wt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return jt(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return U.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=wc(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${wc(t.fields[a])}`;return i+"}"}(n.mapValue):j()}function Pf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ec(n){return!!n&&"integerValue"in n}function Yu(n){return!!n&&"arrayValue"in n}function Rf(n){return!!n&&"nullValue"in n}function kf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Is(n){return!!n&&"mapValue"in n}function ap(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Xr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return cr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xr(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function cp(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ke=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Is(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xr(t)}setAll(e){let t=Ue.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=Xr(a):i.push(u.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Is(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return at(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Is(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){cr(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Xr(this.value))}};function up(n){let e=[];return cr(n.fields,(t,r)=>{let i=new Ue([t]);if(Is(r)){let o=up(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new rt(e)}var We=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,z.min(),z.min(),z.min(),Ke.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,z.min(),z.min(),Ke.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,z.min(),z.min(),Ke.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ke.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zn=class{constructor(e,t){this.position=e,this.inclusive=t}};function Df(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(a.referenceValue),t.key):r=Jn(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xf(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!at(n.position[t],e.position[t]))return!1;return!0}var gn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Sv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ps=class{},me=class n extends Ps{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bc(e,t,r):t==="array-contains"?new Sc(e,r):t==="in"?new Pc(e,r):t==="not-in"?new Rc(e,r):t==="array-contains-any"?new kc(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ac(e,r):new Cc(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Jn(t,this.value)):t!==null&&mn(this.value)===mn(t)&&this.matchesComparison(Jn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},He=class n extends Ps{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return lp(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function lp(n){return n.op==="and"}function hp(n){return Pv(n)&&lp(n)}function Pv(n){for(let e of n.filters)if(e instanceof He)return!1;return!0}function Tc(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+Xn(n.value);if(hp(n))return n.filters.map(e=>Tc(e)).join(",");{let e=n.filters.map(t=>Tc(t)).join(",");return`${n.op}(${e})`}}function dp(n,e){return n instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&at(r.value,i.value)}(n,e):n instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&dp(a,i.filters[u]),!0):!1}(n,e):void j()}function fp(n){return n instanceof me?function(t){return`${t.field.canonicalString()} ${t.op} ${Xn(t.value)}`}(n):n instanceof He?function(t){return t.op.toString()+" {"+t.getFilters().map(fp).join(" ,")+"}"}(n):"Filter"}var bc=class extends me{constructor(e,t,r){super(e,t,r),this.key=U.fromName(r.referenceValue)}matches(e){let t=U.comparator(e.key,this.key);return this.matchesComparison(t)}},Ac=class extends me{constructor(e,t){super(e,"in",t),this.keys=pp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Cc=class extends me{constructor(e,t){super(e,"not-in",t),this.keys=pp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function pp(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>U.fromName(r.referenceValue))}var Sc=class extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Yu(t)&&si(t.arrayValue,this.value)}},Pc=class extends me{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&si(this.value.arrayValue,t)}},Rc=class extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!si(this.value.arrayValue,t)}},kc=class extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>si(this.value.arrayValue,r))}};var Dc=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}};function Nf(n,e=null,t=[],r=[],i=null,o=null,a=null){return new Dc(n,e,t,r,i,o,a)}function Ju(n){let e=q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Zs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xn(r)).join(",")),e.ue=t}return e.ue}function Xu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Sv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dp(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xf(n.startAt,e.startAt)&&xf(n.endAt,e.endAt)}function xc(n){return U.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var qt=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Rv(n,e,t,r,i,o,a,u){return new qt(n,e,t,r,i,o,a,u)}function Zu(n){return new qt(n)}function Of(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mp(n){return n.collectionGroup!==null}function Zr(n){let e=q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Re(Ue.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new gn(o,r))}),t.has(Ue.keyField().canonicalString())||e.ce.push(new gn(Ue.keyField(),r))}return e.ce}function st(n){let e=q(n);return e.le||(e.le=kv(e,Zr(n))),e.le}function kv(n,e){if(n.limitType==="F")return Nf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new gn(i.field,o)});let t=n.endAt?new Zn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Zn(n.startAt.position,n.startAt.inclusive):null;return Nf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Nc(n,e){let t=n.filters.concat([e]);return new qt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Oc(n,e,t){return new qt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eo(n,e){return Xu(st(n),st(e))&&n.limitType===e.limitType}function gp(n){return`${Ju(st(n))}|lt:${n.limitType}`}function zn(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>fp(i)).join(", ")}]`),Zs(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xn(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xn(i)).join(",")),`Target(${r})`}(st(n))}; limitType=${n.limitType})`}function to(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Zr(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,h){let d=Df(a,u,h);return a.inclusive?d<=0:d<0}(r.startAt,Zr(r),i)||r.endAt&&!function(a,u,h){let d=Df(a,u,h);return a.inclusive?d>=0:d>0}(r.endAt,Zr(r),i))}(n,e)}function Dv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function _p(n){return(e,t)=>{let r=!1;for(let i of Zr(n)){let o=xv(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function xv(n,e,t){let r=n.field.isKeyField()?U.comparator(e.key,t.key):function(o,a,u){let h=a.data.field(o),d=u.data.field(o);return h!==null&&d!==null?Jn(h,d):j()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}var zt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return op(this.inner)}size(){return this.innerSize}};var Nv=new he(U.comparator);function Et(){return Nv}var yp=new he(U.comparator);function Jr(...n){let e=yp;for(let t of n)e=e.insert(t.key,t);return e}function vp(n){let e=yp;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function un(){return ei()}function Ip(){return ei()}function ei(){return new zt(n=>n.toString(),(n,e)=>n.isEqual(e))}var Ov=new he(U.comparator),Mv=new Re(U.comparator);function W(...n){let e=Mv;for(let t of n)e=e.add(t);return e}var Vv=new Re(X);function Fv(){return Vv}function el(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ri(e)?"-0":e}}function wp(n){return{integerValue:""+n}}function Uv(n,e){return wv(e)?wp(e):el(n,e)}var er=class{constructor(){this._=void 0}};function Lv(n,e,t){return n instanceof tr?function(i,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Hu(o)&&(o=Qu(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof _n?Tp(n,e):n instanceof yn?bp(n,e):function(i,o){let a=Ep(i,o),u=Mf(a)+Mf(i.Pe);return Ec(a)&&Ec(i.Pe)?wp(u):el(i.serializer,u)}(n,e)}function Bv(n,e,t){return n instanceof _n?Tp(n,e):n instanceof yn?bp(n,e):t}function Ep(n,e){return n instanceof nr?function(r){return Ec(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var tr=class extends er{},_n=class extends er{constructor(e){super(),this.elements=e}};function Tp(n,e){let t=Ap(e);for(let r of n.elements)t.some(i=>at(i,r))||t.push(r);return{arrayValue:{values:t}}}var yn=class extends er{constructor(e){super(),this.elements=e}};function bp(n,e){let t=Ap(e);for(let r of n.elements)t=t.filter(i=>!at(i,r));return{arrayValue:{values:t}}}var nr=class extends er{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function Mf(n){return ce(n.integerValue||n.doubleValue)}function Ap(n){return Yu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function jv(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof _n&&i instanceof _n||r instanceof yn&&i instanceof yn?Yn(r.elements,i.elements,at):r instanceof nr&&i instanceof nr?at(r.Pe,i.Pe):r instanceof tr&&i instanceof tr}(n.transform,e.transform)}var Mc=class{constructor(e,t){this.version=e,this.transformResults=t}},dn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ws(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var rr=class{};function Cp(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rs(n.key,dn.none()):new vn(n.key,n.data,dn.none());{let t=n.data,r=Ke.empty(),i=new Re(Ue.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Tt(n.key,r,new rt(i.toArray()),dn.none())}}function qv(n,e,t){n instanceof vn?function(i,o,a){let u=i.value.clone(),h=Ff(i.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Tt?function(i,o,a){if(!ws(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=Ff(i.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(Sp(i)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function ti(n,e,t,r){return n instanceof vn?function(o,a,u,h){if(!ws(o.precondition,a))return u;let d=o.value.clone(),p=Uf(o.fieldTransforms,h,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tt?function(o,a,u,h){if(!ws(o.precondition,a))return u;let d=Uf(o.fieldTransforms,h,a),p=a.data;return p.setAll(Sp(o)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(I=>I.field))}(n,e,t,r):function(o,a,u){return ws(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function zv(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Ep(r.transform,i||null);o!=null&&(t===null&&(t=Ke.empty()),t.set(r.field,o))}return t||null}function Vf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yn(r,i,(o,a)=>jv(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vn=class extends rr{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tt=class extends rr{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Sp(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Ff(n,e,t){let r=new Map;re(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,Bv(a,u,t[i]))}return r}function Uf(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,Lv(o,a,e))}return r}var Rs=class extends rr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Vc=class extends rr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Fc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&qv(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ti(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ti(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Ip();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let h=Cp(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),W())}isEqual(e){return this.batchId===e.batchId&&Yn(this.mutations,e.mutations,(t,r)=>Vf(t,r))&&Yn(this.baseMutations,e.baseMutations,(t,r)=>Vf(t,r))}},Uc=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){re(e.mutations.length===r.length);let i=function(){return Ov}(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var Lc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Bc=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var fe,Y;function $v(n){switch(n){default:return j();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function Pp(n){if(n===void 0)return It("GRPC error has no .code"),S.UNKNOWN;switch(n){case fe.OK:return S.OK;case fe.CANCELLED:return S.CANCELLED;case fe.UNKNOWN:return S.UNKNOWN;case fe.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case fe.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case fe.INTERNAL:return S.INTERNAL;case fe.UNAVAILABLE:return S.UNAVAILABLE;case fe.UNAUTHENTICATED:return S.UNAUTHENTICATED;case fe.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case fe.NOT_FOUND:return S.NOT_FOUND;case fe.ALREADY_EXISTS:return S.ALREADY_EXISTS;case fe.PERMISSION_DENIED:return S.PERMISSION_DENIED;case fe.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case fe.ABORTED:return S.ABORTED;case fe.OUT_OF_RANGE:return S.OUT_OF_RANGE;case fe.UNIMPLEMENTED:return S.UNIMPLEMENTED;case fe.DATA_LOSS:return S.DATA_LOSS;default:return j()}}(Y=fe||(fe={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";var Lf=null;function Gv(){return new TextEncoder}var Kv=new Lt([4294967295,4294967295],0);function Bf(n){let e=Gv().encode(n),t=new ec;return t.update(e),new Uint8Array(t.digest())}function jf(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Lt([t,r],0),new Lt([i,o],0)]}var jc=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ln(`Invalid padding: ${t}`);if(r<0)throw new ln(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ln(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ln(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Lt.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Lt.fromNumber(r)));return i.compare(Kv)===1&&(i=new Lt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Bf(e),[r,i]=jf(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;let t=Bf(e),[r,i]=jf(t);for(let o=0;o<this.hashCount;o++){let a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ln=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ks=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,oi.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(z.min(),i,new he(X),Et(),W())}},oi=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,W(),W(),W())}};var Wn=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Ds=class{constructor(e,t){this.targetId=e,this.me=t}},xs=class{constructor(e,t,r=ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ns=class{constructor(){this.fe=0,this.ge=zf(),this.pe=ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=W(),t=W(),r=W();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:j()}}),new oi(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=zf()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},qc=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Et(),this.qe=qf(),this.Qe=new he(X)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:j()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(xc(o))if(r===0){let a=new U(o.path);this.Ue(t,a,We.newNoDocument(a,z.min()))}else re(r===1);else{let a=this.Ye(t);if(a!==r){let u=this.Ze(e),h=u?this.Xe(u,e,a):1;if(h!==0){this.je(t);let d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}Lf?.et(function(p,I,C,P,O){var F,D,G,H,Q,se;let De={localCacheCount:p,existenceFilterCount:I.count,databaseId:C.database,projectId:C.projectId},ee=I.unchangedNames;return ee&&(De.bloomFilter={applied:O===0,hashCount:(F=ee?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(H=(G=(D=ee?.bits)===null||D===void 0?void 0:D.bitmap)===null||G===void 0?void 0:G.length)!==null&&H!==void 0?H:0,padding:(se=(Q=ee?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&se!==void 0?se:0,mightContain:w=>{var m;return(m=P?.mightContain(w))!==null&&m!==void 0&&m}}),De}(a,e.me,this.Le.tt(),u,h))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,u;try{a=jt(r).toUint8Array()}catch(h){if(h instanceof Cs)return Qn("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new jc(a,i,o)}catch(h){return Qn(h instanceof ln?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ie===0?null:u}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,a)=>{let u=this.Je(a);if(u){if(o.current&&xc(u.target)){let h=new U(u.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,We.newNoDocument(h,e))}o.be&&(t.set(a,o.ve()),o.Ce())}});let r=W();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{let d=this.Je(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let i=new ks(e,t,this.Qe,this.ke,r);return this.ke=Et(),this.qe=qf(),this.Qe=new he(X),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ns,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Re(X),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ns),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function qf(){return new he(U.comparator)}function zf(){return new he(U.comparator)}var Wv={asc:"ASCENDING",desc:"DESCENDING"},Hv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qv={and:"AND",or:"OR"},zc=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function $c(n,e){return n.useProto3Json||Zs(e)?e:{value:e}}function Os(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rp(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Yv(n,e){return Os(n,e.toTimestamp())}function ot(n){return re(!!n),z.fromTimestamp(function(t){let r=wt(t);return new Ie(r.seconds,r.nanos)}(n))}function tl(n,e){return Gc(n,e).canonicalString()}function Gc(n,e){let t=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function kp(n){let e=ue.fromString(n);return re(Mp(e)),e}function Kc(n,e){return tl(n.databaseId,e.path)}function ac(n,e){let t=kp(e);if(t.get(1)!==n.databaseId.projectId)throw new M(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new M(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new U(xp(t))}function Dp(n,e){return tl(n.databaseId,e)}function Jv(n){let e=kp(n);return e.length===4?ue.emptyPath():xp(e)}function Wc(n){return new ue(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xp(n){return re(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function $f(n,e,t){return{name:Kc(n,e),fields:t.value.mapValue.fields}}function Xv(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:j()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,p){return d.useProto3Json?(re(p===void 0||typeof p=="string"),ke.fromBase64String(p||"")):(re(p===void 0||p instanceof Buffer||p instanceof Uint8Array),ke.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){let p=d.code===void 0?S.UNKNOWN:Pp(d.code);return new M(p,d.message||"")}(a);t=new xs(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ac(n,r.document.name),o=ot(r.document.updateTime),a=r.document.createTime?ot(r.document.createTime):z.min(),u=new Ke({mapValue:{fields:r.document.fields}}),h=We.newFoundDocument(i,o,a,u),d=r.targetIds||[],p=r.removedTargetIds||[];t=new Wn(d,p,h.key,h)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ac(n,r.document),o=r.readTime?ot(r.readTime):z.min(),a=We.newNoDocument(i,o),u=r.removedTargetIds||[];t=new Wn([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ac(n,r.document),o=r.removedTargetIds||[];t=new Wn([],o,i,null)}else{if(!("filter"in e))return j();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new Bc(i,o),u=r.targetId;t=new Ds(u,a)}}return t}function Zv(n,e){let t;if(e instanceof vn)t={update:$f(n,e.key,e.value)};else if(e instanceof Rs)t={delete:Kc(n,e.key)};else if(e instanceof Tt)t={update:$f(n,e.key,e.data),updateMask:cI(e.fieldMask)};else{if(!(e instanceof Vc))return j();t={verify:Kc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){let u=a.transform;if(u instanceof tr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _n)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof yn)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof nr)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw j()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Yv(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j()}(n,e.precondition)),t}function eI(n,e){return n&&n.length>0?(re(e!==void 0),n.map(t=>function(i,o){let a=i.updateTime?ot(i.updateTime):ot(o);return a.isEqual(z.min())&&(a=ot(o)),new Mc(a,i.transformResults||[])}(t,e))):[]}function tI(n,e){return{documents:[Dp(n,e.path)]}}function nI(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Dp(n,i);let o=function(d){if(d.length!==0)return Op(He.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let a=function(d){if(d.length!==0)return d.map(p=>function(C){return{field:$n(C.field),direction:sI(C.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let u=$c(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function rI(n){let e=Jv(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){re(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let o=[];t.where&&(o=function(I){let C=Np(I);return C instanceof He&&hp(C)?C.getFilters():[C]}(t.where));let a=[];t.orderBy&&(a=function(I){return I.map(C=>function(O){return new gn(Gn(O.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(C))}(t.orderBy));let u=null;t.limit&&(u=function(I){let C;return C=typeof I=="object"?I.value:I,Zs(C)?null:C}(t.limit));let h=null;t.startAt&&(h=function(I){let C=!!I.before,P=I.values||[];return new Zn(P,C)}(t.startAt));let d=null;return t.endAt&&(d=function(I){let C=!I.before,P=I.values||[];return new Zn(P,C)}(t.endAt)),Rv(e,i,a,o,u,"F",h,d)}function iI(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Np(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Gn(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Gn(t.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Gn(t.unaryFilter.field);return me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Gn(t.unaryFilter.field);return me.create(a,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(n):n.fieldFilter!==void 0?function(t){return me.create(Gn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return He.create(t.compositeFilter.filters.map(r=>Np(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j()}}(t.compositeFilter.op))}(n):j()}function sI(n){return Wv[n]}function oI(n){return Hv[n]}function aI(n){return Qv[n]}function $n(n){return{fieldPath:n.canonicalString()}}function Gn(n){return Ue.fromServerFormat(n.fieldPath)}function Op(n){return n instanceof me?function(t){if(t.op==="=="){if(kf(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NAN"}};if(Rf(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kf(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NOT_NAN"}};if(Rf(t.value))return{unaryFilter:{field:$n(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$n(t.field),op:oI(t.op),value:t.value}}}(n):n instanceof He?function(t){let r=t.getFilters().map(i=>Op(i));return r.length===1?r[0]:{compositeFilter:{op:aI(t.op),filters:r}}}(n):j()}function cI(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mp(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ai=class n{constructor(e,t,r,i,o=z.min(),a=z.min(),u=ke.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Hc=class{constructor(e){this.ct=e}};function uI(n){let e=rI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Oc(e,e.limit,"L"):e}var Ms=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ce(e.integerValue));else if("doubleValue"in e){let r=ce(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ri(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=wt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(jt(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?cp(e)?this.dt(t,Number.MAX_SAFE_INTEGER):ap(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):j()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let a="value",u=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ce(u)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),U.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ms.vt=new Ms;var Qc=class{constructor(){this.un=new Yc}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(pn.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(pn.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},Yc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Re(ue.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(ue.comparator)).toArray()}};var kT=new Uint8Array(0);var nt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nt.DEFAULT_COLLECTION_PERCENTILE=10,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nt.DEFAULT=new nt(41943040,nt.DEFAULT_COLLECTION_PERCENTILE,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nt.DISABLED=new nt(-1,0,0);var ci=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Jc=class{constructor(){this.changes=new zt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Xc=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Zc=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ti(r.mutation,i,rt.empty(),Ie.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,W()).next(()=>r))}getLocalViewOfDocuments(e,t,r=W()){let i=un();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=Jr();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=un();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,W()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let o=Et(),a=ei(),u=function(){return ei()}();return t.forEach((h,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof Tt)?o=o.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),ti(p.mutation,d,p.mutation.getFieldMask(),Ie.now())):a.set(d.key,rt.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var I;return u.set(d,new Xc(p,(I=a.get(d))!==null&&I!==void 0?I:null))}),u))}recalculateAndSaveOverlays(e,t){let r=ei(),i=new he((a,u)=>a-u),o=W();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(h=>{let d=t.get(h);if(d===null)return;let p=r.get(h)||rt.empty();p=u.applyToLocalView(d,p),r.set(h,p);let I=(i.get(u.batchId)||W()).add(h);i=i.insert(u.batchId,I)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let h=u.getNext(),d=h.key,p=h.value,I=Ip();p.forEach(C=>{if(!o.has(C)){let P=Cp(t.get(C),r.get(C));P!==null&&I.set(C,P),o=o.add(C)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,I))}return R.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return U.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):R.resolve(un()),u=-1,h=o;return a.next(d=>R.forEach(d,(p,I)=>(u<I.largestBatchId&&(u=I.largestBatchId),o.get(p)?R.resolve():this.remoteDocumentCache.getEntry(e,p).next(C=>{h=h.insert(p,C)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,h,d,W())).next(p=>({batchId:u,changes:vp(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new U(t)).next(r=>{let i=Jr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=Jr();return this.indexManager.getCollectionParents(e,o).next(u=>R.forEach(u,h=>{let d=function(I,C){return new qt(C,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((I,C)=>{a=a.insert(I,C)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((h,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,We.newInvalidDocument(p)))});let u=Jr();return a.forEach((h,d)=>{let p=o.get(h);p!==void 0&&ti(p.mutation,d,rt.empty(),Ie.now()),to(t,d)&&(u=u.insert(h,d))}),u})}};var eu=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ot(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:uI(i.bundledQuery),readTime:ot(i.readTime)}}(t)),R.resolve()}};var tu=class{constructor(){this.overlays=new he(U.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=un();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=un(),o=t.length+1,a=new U(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let h=u.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new he((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=o.get(d.largestBatchId);p===null&&(p=un(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let u=un(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=i)););return R.resolve(u)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Lc(t,r));let o=this.Ir.get(t);o===void 0&&(o=W(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var nu=class{constructor(){this.sessionToken=ke.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var ui=class{constructor(){this.Tr=new Re(pe.Er),this.dr=new Re(pe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new pe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new pe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new U(new ue([])),r=new pe(t,e),i=new pe(t,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new U(new ue([])),r=new pe(t,e),i=new pe(t,e+1),o=W();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new pe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},pe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return U.comparator(e.key,t.key)||X(e.wr,t.wr)}static Ar(e,t){return X(e.wr,t.wr)||U.comparator(e.key,t.key)}};var ru=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Re(pe.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Fc(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.br=this.br.add(new pe(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return R.resolve(a)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new pe(t,0),i=new pe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{let u=this.Dr(a.wr);o.push(u)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Re(X);return t.forEach(i=>{let o=new pe(i,0),a=new pe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{r=r.add(u.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let a=new pe(new U(o),0),u=new Re(X);return this.br.forEachWhile(h=>{let d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(h.wr)),!0)},a),R.resolve(this.Cr(u))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){re(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let o=new pe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new pe(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var iu=class{constructor(e){this.Mr=e,this.docs=function(){return new he(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():We.newInvalidDocument(t))}getEntries(e,t){let r=Et();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():We.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Et(),a=t.path,u=new U(a.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){let{key:d,value:{document:p}}=h.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||yv(_v(p),r)<=0||(i.has(p.key)||to(t,p))&&(o=o.insert(p.key,p.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,r,i){j()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new su(this)}getSize(e){return R.resolve(this.size)}},su=class extends Jc{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var ou=class{constructor(e){this.persistence=e,this.Nr=new zt(t=>Ju(t),Xu),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ui,this.targetCount=0,this.kr=ci.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ci(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var au=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new sp(0),this.Kr=!1,this.Kr=!0,this.$r=new nu,this.referenceDelegate=e(this),this.Ur=new ou(this),this.indexManager=new Qc,this.remoteDocumentCache=function(i){return new iu(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Hc(t),this.Gr=new eu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new ru(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new cu(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},cu=class extends vc{constructor(e){super(),this.currentSequenceNumber=e}},uu=class n{constructor(e){this.persistence=e,this.Jr=new ui,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw j()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=U.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var lu=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=W(),i=W();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var hu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var du=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return nd()?8:Iv(_e())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new hu;return this.Xi(e,t,a).next(u=>{if(o.result=u,this.zi)return this.es(e,t,a,u.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Yr()<=K.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",zn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Yr()<=K.DEBUG&&V("QueryEngine","Query:",zn(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Yr()<=K.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",zn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,st(t))):R.resolve())}Yi(e,t){if(Of(t))return R.resolve(null);let r=st(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Oc(t,null,"F"),r=st(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=W(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{let d=this.ts(t,u);return this.ns(t,d,a,h.readTime)?this.Yi(e,Oc(t,null,"F")):this.rs(e,d,t,h)}))})))}Zi(e,t,r,i){return Of(t)||i.isEqual(z.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let a=this.ts(t,o);return this.ns(t,a,r,i)?R.resolve(null):(Yr()<=K.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zn(t)),this.rs(e,a,t,gv(i,-1)).next(u=>u))})}ts(e,t){let r=new Re(_p(e));return t.forEach((i,o)=>{to(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Yr()<=K.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",zn(t)),this.Ji.getDocumentsMatchingQuery(e,t,pn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var fu=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new he(X),this._s=new zt(o=>Ju(o),Xu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Zc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function lI(n,e,t,r){return new fu(n,e,t,r)}function Vp(n,e){return y(this,null,function*(){let t=q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],h=W();for(let d of i){a.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}for(let d of o){u.push(d.batchId);for(let p of d.mutations)h=h.add(p.key)}return t.localDocuments.getDocuments(r,h).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:u}))})})})}function hI(n,e){let t=q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(u,h,d,p){let I=d.batch,C=I.keys(),P=R.resolve();return C.forEach(O=>{P=P.next(()=>p.getEntry(h,O)).next(F=>{let D=d.docVersions.get(O);re(D!==null),F.version.compareTo(D)<0&&(I.applyToRemoteDocument(F,d),F.isValidDocument()&&(F.setReadTime(d.commitVersion),p.addEntry(F)))})}),P.next(()=>u.mutationQueue.removeMutationBatch(h,I))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=W();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(h=h.add(u.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Fp(n){let e=q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function dI(n,e){let t=q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let u=[];e.targetChanges.forEach((p,I)=>{let C=i.get(I);if(!C)return;u.push(t.Ur.removeMatchingKeys(o,p.removedDocuments,I).next(()=>t.Ur.addMatchingKeys(o,p.addedDocuments,I)));let P=C.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(I)!==null?P=P.withResumeToken(ke.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):p.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(p.resumeToken,r)),i=i.insert(I,P),function(F,D,G){return F.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(C,P,p)&&u.push(t.Ur.updateTargetData(o,P))});let h=Et(),d=W();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,p))}),u.push(fI(o,a,e.documentUpdates).next(p=>{h=p.Ps,d=p.Is})),!r.isEqual(z.min())){let p=t.Ur.getLastRemoteSnapshotVersion(o).next(I=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(p)}return R.waitFor(u).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,d)).next(()=>h)}).then(o=>(t.os=i,o))}function fI(n,e,t){let r=W(),i=W();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=Et();return t.forEach((u,h)=>{let d=o.get(u);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(z.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):V("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function pI(n,e){let t=q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function mI(n,e){let t=q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new ai(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function pu(n,e,t){return y(this,null,function*(){let r=q(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!gi(a))throw a;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Gf(n,e,t){let r=q(n),i=z.min(),o=W();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,d,p){let I=q(h),C=I._s.get(p);return C!==void 0?R.resolve(I.os.get(C)):I.Ur.getTargetData(d,p)}(r,a,st(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:z.min(),t?o:W())).next(u=>(gI(r,Dv(e),u),{documents:u,Ts:o})))}function gI(n,e,t){let r=n.us.get(e)||z.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var Vs=class{constructor(){this.activeTargetIds=Fv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mu=class{constructor(){this.so=new Vs,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Vs,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gu=class{_o(e){}shutdown(){}};var Fs=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vs=null;function cc(){return vs===null?vs=function(){return 268435456+Math.round(2147483648*Math.random())}():vs++,"0x"+vs.toString(16)}var _I={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var _u=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Pe="WebChannelConnection",yu=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,a){let u=cc(),h=this.xo(t,r.toUriEncodedString());V("RestConnection",`Sending RPC '${t}' ${u}:`,h,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,a),this.No(t,h,d,i).then(p=>(V("RestConnection",`Received RPC '${t}' ${u}: `,p),p),p=>{throw Qn("RestConnection",`RPC '${t}' ${u} failed with error: `,p,"url: ",h,"request:",i),p})}Lo(t,r,i,o,a,u){return this.Mo(t,r,i,o,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ar}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>t[a]=o),i&&i.headers.forEach((o,a)=>t[a]=o)}xo(t,r){let i=_I[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=cc();return new Promise((a,u)=>{let h=new tc;h.setWithCredentials(!0),h.listenOnce(rc.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Qr.NO_ERROR:let p=h.getResponseJson();V(Pe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Qr.TIMEOUT:V(Pe,`RPC '${e}' ${o} timed out`),u(new M(S.DEADLINE_EXCEEDED,"Request time out"));break;case Qr.HTTP_ERROR:let I=h.getStatus();if(V(Pe,`RPC '${e}' ${o} failed with status:`,I,"response text:",h.getResponseText()),I>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);let P=C?.error;if(P&&P.status&&P.message){let O=function(D){let G=D.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(G)>=0?G:S.UNKNOWN}(P.status);u(new M(O,P.message))}else u(new M(S.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new M(S.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{V(Pe,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);V(Pe,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=cc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=oc(),u=sc(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.xmlHttpFactory=new nc({})),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let p=o.join("");V(Pe,`Creating RPC '${e}' stream ${i}: ${p}`,h);let I=a.createWebChannel(p,h),C=!1,P=!1,O=new _u({Io:D=>{P?V(Pe,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(C||(V(Pe,`Opening RPC '${e}' stream ${i} transport.`),I.open(),C=!0),V(Pe,`RPC '${e}' stream ${i} sending:`,D),I.send(D))},To:()=>I.close()}),F=(D,G,H)=>{D.listen(G,Q=>{try{H(Q)}catch(se){setTimeout(()=>{throw se},0)}})};return F(I,qn.EventType.OPEN,()=>{P||(V(Pe,`RPC '${e}' stream ${i} transport opened.`),O.yo())}),F(I,qn.EventType.CLOSE,()=>{P||(P=!0,V(Pe,`RPC '${e}' stream ${i} transport closed`),O.So())}),F(I,qn.EventType.ERROR,D=>{P||(P=!0,Qn(Pe,`RPC '${e}' stream ${i} transport errored:`,D),O.So(new M(S.UNAVAILABLE,"The operation could not be completed")))}),F(I,qn.EventType.MESSAGE,D=>{var G;if(!P){let H=D.data[0];re(!!H);let Q=H,se=Q.error||((G=Q[0])===null||G===void 0?void 0:G.error);if(se){V(Pe,`RPC '${e}' stream ${i} received error:`,se);let De=se.status,ee=function(_){let v=fe[_];if(v!==void 0)return Pp(v)}(De),w=se.message;ee===void 0&&(ee=S.INTERNAL,w="Unknown error status: "+De+" with message "+se.message),P=!0,O.So(new M(ee,w)),I.close()}else V(Pe,`RPC '${e}' stream ${i} received:`,H),O.bo(H)}}),F(u,ic.STAT_EVENT,D=>{D.stat===_s.PROXY?V(Pe,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===_s.NOPROXY&&V(Pe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.wo()},0),O}};function uc(){return typeof document<"u"?document:null}function no(n){return new zc(n,!0)}var Us=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ls=class{constructor(e,t,r,i,o,a,u,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Us(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(It(t.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new M(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vu=class extends Ls{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Xv(this.serializer,e),r=function(o){if(!("targetChange"in o))return z.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?z.min():a.readTime?ot(a.readTime):z.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Wc(this.serializer),t.addTarget=function(o,a){let u,h=a.target;if(u=xc(h)?{documents:tI(o,h)}:{query:nI(o,h)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Rp(o,a.resumeToken);let d=$c(o,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(z.min())>0){u.readTime=Os(o,a.snapshotVersion.toTimestamp());let d=$c(o,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);let r=iI(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Wc(this.serializer),t.removeTarget=e,this.a_(t)}},Iu=class extends Ls{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return re(!!e.streamToken),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=eI(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Wc(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Zv(this.serializer,r))};this.a_(t)}};var wu=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new M(S.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Gc(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(S.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Gc(t,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new M(S.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Eu=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(It(t),this.D_=!1):V("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Tu=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(()=>y(this,null,function*(){wn(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(h){return y(this,null,function*(){let d=q(h);d.L_.add(4),yield _i(d),d.q_.set("Unknown"),d.L_.delete(4),yield ro(d)})}(this))}))}),this.q_=new Eu(r,i)}};function ro(n){return y(this,null,function*(){if(wn(n))for(let e of n.B_)yield e(!0)})}function _i(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Up(n,e){let t=q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),sl(t)?il(t):ur(t).r_()&&rl(t,e))}function nl(n,e){let t=q(n),r=ur(t);t.N_.delete(e),r.r_()&&Lp(t,e),t.N_.size===0&&(r.r_()?r.o_():wn(t)&&t.q_.set("Unknown"))}function rl(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ur(n).A_(e)}function Lp(n,e){n.Q_.xe(e),ur(n).R_(e)}function il(n){n.Q_=new qc({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ur(n).start(),n.q_.v_()}function sl(n){return wn(n)&&!ur(n).n_()&&n.N_.size>0}function wn(n){return q(n).L_.size===0}function Bp(n){n.Q_=void 0}function yI(n){return y(this,null,function*(){n.q_.set("Online")})}function vI(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{rl(n,e)})})}function II(n,e){return y(this,null,function*(){Bp(n),sl(n)?(n.q_.M_(e),il(n)):n.q_.set("Unknown")})}function wI(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof xs&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let a=o.cause;for(let u of o.targetIds)i.N_.has(u)&&(yield i.remoteSyncer.rejectListen(u,a),i.N_.delete(u),i.Q_.removeTarget(u))})}(n,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bs(n,r)}else if(e instanceof Wn?n.Q_.Ke(e):e instanceof Ds?n.Q_.He(e):n.Q_.We(e),!t.isEqual(z.min()))try{let r=yield Fp(n.localStore);t.compareTo(r)>=0&&(yield function(o,a){let u=o.Q_.rt(a);return u.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){let p=o.N_.get(d);p&&o.N_.set(d,p.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,d)=>{let p=o.N_.get(h);if(!p)return;o.N_.set(h,p.withResumeToken(ke.EMPTY_BYTE_STRING,p.snapshotVersion)),Lp(o,h);let I=new ai(p.target,h,d,p.sequenceNumber);rl(o,I)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Bs(n,r)}})}function Bs(n,e,t){return y(this,null,function*(){if(!gi(e))throw e;n.L_.add(1),yield _i(n),n.q_.set("Offline"),t||(t=()=>Fp(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ro(n)}))})}function jp(n,e){return e().catch(t=>Bs(n,t,e))}function io(n){return y(this,null,function*(){let e=q(n),t=$t(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EI(e);)try{let i=yield pI(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,TI(e,i)}catch(i){yield Bs(e,i)}qp(e)&&zp(e)})}function EI(n){return wn(n)&&n.O_.length<10}function TI(n,e){n.O_.push(e);let t=$t(n);t.r_()&&t.V_&&t.m_(e.mutations)}function qp(n){return wn(n)&&!$t(n).n_()&&n.O_.length>0}function zp(n){$t(n).start()}function bI(n){return y(this,null,function*(){$t(n).p_()})}function AI(n){return y(this,null,function*(){let e=$t(n);for(let t of n.O_)e.m_(t.mutations)})}function CI(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=Uc.from(r,e,t);yield jp(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield io(n)})}function SI(n,e){return y(this,null,function*(){e&&$t(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(a){return $v(a)&&a!==S.ABORTED}(i.code)){let o=r.O_.shift();$t(r).s_(),yield jp(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield io(r)}})}(n,e)),qp(n)&&zp(n)})}function Kf(n,e){return y(this,null,function*(){let t=q(n);t.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=wn(t);t.L_.add(3),yield _i(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ro(t)})}function PI(n,e){return y(this,null,function*(){let t=q(n);e?(t.L_.delete(2),yield ro(t)):e||(t.L_.add(2),yield _i(t),t.q_.set("Unknown"))})}function ur(n){return n.K_||(n.K_=function(t,r,i){let o=q(t);return o.w_(),new vu(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:yI.bind(null,n),Ro:vI.bind(null,n),mo:II.bind(null,n),d_:wI.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),sl(n)?il(n):n.q_.set("Unknown")):(yield n.K_.stop(),Bp(n))}))),n.K_}function $t(n){return n.U_||(n.U_=function(t,r,i){let o=q(t);return o.w_(),new Iu(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bI.bind(null,n),mo:SI.bind(null,n),f_:AI.bind(null,n),g_:CI.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield io(n)):(yield n.U_.stop(),n.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var bu=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ol(n,e){if(It("AsyncQueue",`${e}: ${n}`),gi(n))return new M(S.UNAVAILABLE,`${e}: ${n}`);throw n}var js=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||U.comparator(t.key,r.key):(t,r)=>U.comparator(t.key,r.key),this.keyedMap=Jr(),this.sortedSet=new he(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var qs=class{constructor(){this.W_=new he(U.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):j():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ir=class n{constructor(e,t,r,i,o,a,u,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new n(e,t,js.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Au=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Cu=class{constructor(){this.queries=Wf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=q(t),o=i.queries;i.queries=Wf(),o.forEach((a,u)=>{for(let h of u.j_)h.onError(r)})})(this,new M(S.ABORTED,"Firestore shutting down"))}};function Wf(){return new zt(n=>gp(n),eo)}function RI(n,e){return y(this,null,function*(){let t=q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Au,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let u=ol(a,`Initialization of query '${zn(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&al(t)})}function kI(n,e){return y(this,null,function*(){let t=q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function DI(n,e){let t=q(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let u of a.j_)u.X_(i)&&(r=!0);a.z_=i}}r&&al(t)}function xI(n,e,t){let r=q(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function al(n){n.Y_.forEach(e=>{e.next()})}var Su,Hf;(Hf=Su||(Su={})).ea="default",Hf.Cache="cache";var Pu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ir(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ir.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Su.Cache}};var zs=class{constructor(e){this.key=e}},$s=class{constructor(e){this.key=e}},Ru=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=W(),this.mutatedKeys=W(),this.Aa=_p(e),this.Ra=new js(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new qs,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,I)=>{let C=i.get(p),P=to(this.query,I)?I:null,O=!!C&&this.mutatedKeys.has(C.key),F=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations),D=!1;C&&P?C.data.isEqual(P.data)?O!==F&&(r.track({type:3,doc:P}),D=!0):this.ga(C,P)||(r.track({type:2,doc:P}),D=!0,(h&&this.Aa(P,h)>0||d&&this.Aa(P,d)<0)&&(u=!0)):!C&&P?(r.track({type:0,doc:P}),D=!0):C&&!P&&(r.track({type:1,doc:C}),D=!0,(h||d)&&(u=!0)),D&&(P?(a=a.add(P),o=F?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:u,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((p,I)=>function(P,O){let F=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j()}};return F(P)-F(O)}(p.type,I.type)||this.Aa(p.doc,I.doc)),this.pa(r),i=i!=null&&i;let u=t&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,d=h!==this.Ea;return this.Ea=h,a.length!==0||d?{snapshot:new ir(this.query,e.Ra,o,a,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qs,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=W(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new $s(r))}),this.da.forEach(r=>{e.has(r)||t.push(new zs(r))}),t}ba(e){this.Ta=e.Ts,this.da=W();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ir.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ku=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Du=class{constructor(e){this.key=e,this.va=!1}},xu=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new zt(u=>gp(u),eo),this.Ma=new Map,this.xa=new Set,this.Oa=new he(U.comparator),this.Na=new Map,this.La=new ui,this.Ba={},this.ka=new Map,this.qa=ci.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function NI(n,e,t=!0){return y(this,null,function*(){let r=Qp(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield $p(r,e,t,!0),i})}function OI(n,e){return y(this,null,function*(){let t=Qp(n);yield $p(t,e,!0,!1)})}function $p(n,e,t,r){return y(this,null,function*(){let i=yield mI(n.localStore,st(e)),o=i.targetId,a=t?n.sharedClientState.addLocalQueryTarget(o):"not-current",u;return r&&(u=yield MI(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Up(n.remoteStore,i),u})}function MI(n,e,t,r,i){return y(this,null,function*(){n.Ka=(I,C,P)=>function(F,D,G,H){return y(this,null,function*(){let Q=D.view.ma(G);Q.ns&&(Q=yield Gf(F.localStore,D.query,!1).then(({documents:w})=>D.view.ma(w,Q)));let se=H&&H.targetChanges.get(D.targetId),De=H&&H.targetMismatches.get(D.targetId)!=null,ee=D.view.applyChanges(Q,F.isPrimaryClient,se,De);return Yf(F,D.targetId,ee.wa),ee.snapshot})}(n,I,C,P);let o=yield Gf(n.localStore,e,!0),a=new Ru(e,o.Ts),u=a.ma(o.documents),h=oi.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(u,n.isPrimaryClient,h);Yf(n,t,d.wa);let p=new ku(e,t,a);return n.Fa.set(e,p),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function VI(n,e,t){return y(this,null,function*(){let r=q(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!eo(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield pu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nl(r.remoteStore,i.targetId),Nu(r,i.targetId)}).catch(mi))):(Nu(r,i.targetId),yield pu(r.localStore,i.targetId,!0))})}function FI(n,e){return y(this,null,function*(){let t=q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nl(t.remoteStore,r.targetId))})}function UI(n,e,t){return y(this,null,function*(){let r=GI(n);try{let i=yield function(a,u){let h=q(a),d=Ie.now(),p=u.reduce((P,O)=>P.add(O.key),W()),I,C;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let O=Et(),F=W();return h.cs.getEntries(P,p).next(D=>{O=D,O.forEach((G,H)=>{H.isValidDocument()||(F=F.add(G))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,O)).next(D=>{I=D;let G=[];for(let H of u){let Q=zv(H,I.get(H.key).overlayedDocument);Q!=null&&G.push(new Tt(H.key,Q,up(Q.value.mapValue),dn.exists(!0)))}return h.mutationQueue.addMutationBatch(P,d,G,u)}).next(D=>{C=D;let G=D.applyToLocalDocumentSet(I,F);return h.documentOverlayCache.saveOverlays(P,D.batchId,G)})}).then(()=>({batchId:C.batchId,changes:vp(I)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let d=a.Ba[a.currentUser.toKey()];d||(d=new he(X)),d=d.insert(u,h),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),yield yi(r,i.changes),yield io(r.remoteStore)}catch(i){let o=ol(i,"Failed to persist write");t.reject(o)}})}function Gp(n,e){return y(this,null,function*(){let t=q(n);try{let r=yield dI(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Na.get(o);a&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?re(a.va):i.removedDocuments.size>0&&(re(a.va),a.va=!1))}),yield yi(t,r,e)}catch(r){yield mi(r)}})}function Qf(n,e,t){let r=q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,a)=>{let u=a.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){let h=q(a);h.onlineState=u;let d=!1;h.queries.forEach((p,I)=>{for(let C of I.j_)C.Z_(u)&&(d=!0)}),d&&al(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function LI(n,e,t){return y(this,null,function*(){let r=q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let a=new he(U.comparator);a=a.insert(o,We.newNoDocument(o,z.min()));let u=W().add(o),h=new ks(z.min(),new Map,new he(X),a,u);yield Gp(r,h),r.Oa=r.Oa.remove(o),r.Na.delete(e),cl(r)}else yield pu(r.localStore,e,!1).then(()=>Nu(r,e,t)).catch(mi)})}function BI(n,e){return y(this,null,function*(){let t=q(n),r=e.batch.batchId;try{let i=yield hI(t.localStore,e);Wp(t,r,null),Kp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yi(t,i)}catch(i){yield mi(i)}})}function jI(n,e,t){return y(this,null,function*(){let r=q(n);try{let i=yield function(a,u){let h=q(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return h.mutationQueue.lookupMutationBatch(d,u).next(I=>(re(I!==null),p=I.keys(),h.mutationQueue.removeMutationBatch(d,I))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,p,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>h.localDocuments.getDocuments(d,p))})}(r.localStore,e);Wp(r,e,t),Kp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yi(r,i)}catch(i){yield mi(i)}})}function Kp(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Wp(n,e,t){let r=q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Nu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Hp(n,r)})}function Hp(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(nl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),cl(n))}function Yf(n,e,t){for(let r of t)r instanceof zs?(n.La.addReference(r.key,e),qI(n,r)):r instanceof $s?(V("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Hp(n,r.key)):j()}function qI(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(V("SyncEngine","New document in limbo: "+t),n.xa.add(r),cl(n))}function cl(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new U(ue.fromString(e)),r=n.qa.next();n.Na.set(r,new Du(t)),n.Oa=n.Oa.insert(t,r),Up(n.remoteStore,new ai(st(Zu(t.path)),r,"TargetPurposeLimboResolution",sp.oe))}}function yi(n,e,t){return y(this,null,function*(){let r=q(n),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((u,h)=>{a.push(r.Ka(h,e,t).then(d=>{var p;if((d||t)&&r.isPrimaryClient){let I=d?!d.fromCache:(p=t?.targetChanges.get(h.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,I?"current":"not-current")}if(d){i.push(d);let I=lu.Wi(h.targetId,d);o.push(I)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(h,d){return y(this,null,function*(){let p=q(h);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>R.forEach(d,C=>R.forEach(C.$i,P=>p.persistence.referenceDelegate.addReference(I,C.targetId,P)).next(()=>R.forEach(C.Ui,P=>p.persistence.referenceDelegate.removeReference(I,C.targetId,P)))))}catch(I){if(!gi(I))throw I;V("LocalStore","Failed to update sequence numbers: "+I)}for(let I of d){let C=I.targetId;if(!I.fromCache){let P=p.os.get(C),O=P.snapshotVersion,F=P.withLastLimboFreeSnapshotVersion(O);p.os=p.os.insert(C,F)}}})}(r.localStore,o))})}function zI(n,e){return y(this,null,function*(){let t=q(n);if(!t.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield Vp(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(h=>{h.reject(new M(S.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yi(t,r.hs)}})}function $I(n,e){let t=q(n),r=t.Na.get(e);if(r&&r.va)return W().add(r.key);{let i=W(),o=t.Ma.get(e);if(!o)return i;for(let a of o){let u=t.Fa.get(a);i=i.unionWith(u.view.Va)}return i}}function Qp(n){let e=q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$I.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LI.bind(null,e),e.Ca.d_=DI.bind(null,e.eventManager),e.Ca.$a=xI.bind(null,e.eventManager),e}function GI(n){let e=q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jI.bind(null,e),e}var Gs=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=no(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return lI(this.persistence,new du,e.initialUser,this.serializer)}createPersistence(e){return new au(uu.Zr,this.serializer)}createSharedClientState(e){return new mu}terminate(){return y(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Ou=class{initialize(e,t){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Qf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zI.bind(null,this.syncEngine),yield PI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Cu}()}createDatastore(e){let t=no(e.databaseInfo.databaseId),r=function(o){return new yu(o)}(e.databaseInfo);return function(o,a,u,h){return new wu(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,a,u){return new Tu(r,i,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,t=>Qf(this.syncEngine,t,0),function(){return Fs.D()?new Fs:new gu}())}createSyncEngine(e,t){return function(i,o,a,u,h,d,p){let I=new xu(i,o,a,u,h,d);return p&&(I.Qa=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return y(this,null,function*(){var e,t;yield function(i){return y(this,null,function*(){let o=q(i);V("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield _i(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Mu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Vu=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ye.UNAUTHENTICATED,this.clientId=Ts.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){V("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(V("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ol(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lc(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield Vp(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Jf(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield WI(n);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Kf(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Kf(e.remoteStore,i)),n._onlineComponents=e})}function KI(n){return n.name==="FirebaseError"?n.code===S.FAILED_PRECONDITION||n.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function WI(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lc(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!KI(t))throw t;Qn("Error using user provided cache. Falling back to memory cache: "+t),yield lc(n,new Gs)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield lc(n,new Gs);return n._offlineComponents})}function Yp(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield Jf(n,n._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield Jf(n,new Ou))),n._onlineComponents})}function HI(n){return Yp(n).then(e=>e.syncEngine)}function Xf(n){return y(this,null,function*(){let e=yield Yp(n),t=e.eventManager;return t.onListen=NI.bind(null,e.syncEngine),t.onUnlisten=VI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FI.bind(null,e.syncEngine),t})}function Jp(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Zf=new Map;function Xp(n,e,t){if(!t)throw new M(S.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QI(n,e,t,r){if(e===!0&&r===!0)throw new M(S.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ep(n){if(!U.isDocumentKey(n))throw new M(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tp(n){if(U.isDocumentKey(n))throw new M(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function so(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":j()}function ni(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=so(n);throw new M(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Ks=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jp((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new M(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new M(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new M(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},sr=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ks({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ks(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hc;switch(r.type){case"firstParty":return new mc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Zf.get(t);r&&(V("ComponentProvider","Removing Datastore"),Zf.delete(t),r.terminate())}(this),Promise.resolve()}};function Zp(n,e,t,r={}){var i;let o=(n=ni(n,sr))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=ye.MOCK_USER;else{u=Jh(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new M(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ye(d)}n._authCredentials=new dc(new Es(u,h))}}var In=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Le=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Bt=class n extends In{constructor(e,t,r){super(e,t,Zu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new U(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function em(n,e,...t){if(n=Se(n),Xp("collection","path",e),n instanceof sr){let r=ue.fromString(e,...t);return tp(r),new Bt(n,null,r)}{if(!(n instanceof Le||n instanceof Bt))throw new M(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ue.fromString(e,...t));return tp(r),new Bt(n.firestore,null,r)}}function tm(n,e,...t){if(n=Se(n),arguments.length===1&&(e=Ts.newId()),Xp("doc","path",e),n instanceof sr){let r=ue.fromString(e,...t);return ep(r),new Le(n,null,new U(r))}{if(!(n instanceof Le||n instanceof Bt))throw new M(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ue.fromString(e,...t));return ep(r),new Le(n.firestore,n instanceof Bt?n.converter:null,new U(r))}}var Fu=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Us(this,"async_queue_retry"),this.Eu=()=>{let t=uc();t&&V("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=uc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=uc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new vt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return y(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!gi(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw It("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=bu.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&j()}verifyOperationInProgress(){}mu(){return y(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function np(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var or=class extends sr{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Fu}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||im(this),this._firestoreClient.terminate()}};function nm(n,e){let t=typeof n=="object"?n:Vn(),r=typeof n=="string"?n:e||"(default)",i=Fr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Yh("firestore");o&&Zp(i,...o)}return i}function rm(n){return n._firestoreClient||im(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function im(n){var e,t,r;let i=n._freezeSettings(),o=function(u,h,d,p){return new Ic(u,h,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Jp(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Vu(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var li=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ke.fromBase64String(e))}catch(t){throw new M(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ws=class{constructor(e){this._methodName=e}};var di=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return X(this._lat,e._lat)||X(this._long,e._long)}};var fi=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var YI=/^__.*__$/,Uu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tt(e,this.data,this.fieldMask,t,this.fieldTransforms):new vn(e,this.data,t,this.fieldTransforms)}};function sm(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var Lu=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Hs(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(sm(this.wu)&&YI.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Bu=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||no(e)}Nu(e,t,r,i=!1){return new Lu({wu:e,methodName:t,Ou:r,path:Ue.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function om(n){let e=n._freezeSettings(),t=no(n._databaseId);return new Bu(n._databaseId,!!e.ignoreUndefinedProperties,t)}function JI(n,e,t,r,i,o={}){let a=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);um("Data must be an object, but it was:",a,r);let u=am(r,a),h,d;if(o.merge)h=new rt(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){let p=[];for(let I of o.mergeFields){let C=ZI(e,I,t);if(!a.contains(C))throw new M(S.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);tw(p,C)||p.push(C)}h=new rt(p),d=a.fieldTransforms.filter(I=>h.covers(I.field))}else h=null,d=a.fieldTransforms;return new Uu(new Ke(u),h,d)}function XI(n,e,t,r=!1){return ul(t,n.Nu(r?4:3,e))}function ul(n,e){if(cm(n=Se(n)))return um("Unsupported field value:",e,n),am(n,e);if(n instanceof Ws)return function(r,i){if(!sm(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],a=0;for(let u of r){let h=ul(u,i.Fu(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Uv(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ie.fromDate(r);return{timestampValue:Os(i.serializer,o)}}if(r instanceof Ie){let o=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Os(i.serializer,o)}}if(r instanceof di)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof li)return{bytesValue:Rp(i.serializer,r._byteString)};if(r instanceof Le){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tl(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fi)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw u.Mu("VectorValues must only contain numeric values.");return el(u.serializer,h)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${so(r)}`)}(n,e)}function am(n,e){let t={};return op(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(n,(r,i)=>{let o=ul(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function cm(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ie||n instanceof di||n instanceof li||n instanceof Le||n instanceof Ws||n instanceof fi)}function um(n,e,t){if(!cm(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=so(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function ZI(n,e,t){if((e=Se(e))instanceof hi)return e._internalPath;if(typeof e=="string")return lm(n,e);throw Hs("Field path arguments must be of type string or ",n,!1,void 0,t)}var ew=new RegExp("[~\\*/\\[\\]]");function lm(n,e,t){if(e.search(ew)>=0)throw Hs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hi(...e.split("."))._internalPath}catch{throw Hs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hs(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new M(S.INVALID_ARGUMENT,u+n+h)}function tw(n,e){return n.some(t=>t.isEqual(e))}var Qs=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new ju(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ll("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},ju=class extends Qs{data(){return super.data()}};function ll(n,e){return typeof e=="string"?lm(n,e):e instanceof hi?e._internalPath:e._delegate._internalPath}function nw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new M(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pi=class{},Ys=class extends pi{};function hl(n,e,...t){let r=[];e instanceof pi&&r.push(e),r=r.concat(t),function(o){let a=o.filter(h=>h instanceof zu).length,u=o.filter(h=>h instanceof qu).length;if(a>1||a>0&&u>0)throw new M(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var qu=class n extends Ys{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return hm(e._query,t),new In(e.firestore,e.converter,Nc(e._query,t))}_parse(e){let t=om(e.firestore);return function(o,a,u,h,d,p,I){let C;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new M(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){ip(I,p);let P=[];for(let O of I)P.push(rp(h,o,O));C={arrayValue:{values:P}}}else C=rp(h,o,I)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||ip(I,p),C=XI(u,a,I,p==="in"||p==="not-in");return me.create(d,p,C)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var zu=class n extends pi{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:He.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let a=i,u=o.getFlattenedFilters();for(let h of u)hm(a,h),a=Nc(a,h)}(e._query,t),new In(e.firestore,e.converter,Nc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $u=class n extends Ys{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,a){if(i.startAt!==null)throw new M(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new M(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gn(o,a)}(e._query,this._field,this._direction);return new In(e.firestore,e.converter,function(i,o){let a=i.explicitOrderBy.concat([o]);return new qt(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function dl(n,e="asc"){let t=e,r=ll("orderBy",n);return $u._create(r,t)}function rp(n,e,t){if(typeof(t=Se(t))=="string"){if(t==="")throw new M(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mp(e)&&t.indexOf("/")!==-1)throw new M(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ue.fromString(t));if(!U.isDocumentKey(r))throw new M(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pf(n,new U(r))}if(t instanceof Le)return Pf(n,t._key);throw new M(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${so(t)}.`)}function ip(n,e){if(!Array.isArray(n)||n.length===0)throw new M(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hm(n,e){let t=function(i,o){for(let a of i)for(let u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new M(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Gu=class{convertValue(e,t="none"){switch(mn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return cr(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ce(a.doubleValue));return new fi(o)}convertGeoPoint(e){return new di(ce(e.latitude),ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Qu(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ii(e));default:return null}}convertTimestamp(e){let t=wt(e);return new Ie(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ue.fromString(e);re(Mp(r));let i=new Ss(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(t)||It(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function rw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var hn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Js=class extends Qs{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hn(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ll("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Hn=class extends Js{data(e={}){return super.data(e)}},Ku=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hn(this._firestore,this._userDataWriter,r.key,r,new hn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let h=new Hn(i._firestore,i._userDataWriter,u.doc.key,u.doc,new hn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let h=new Hn(i._firestore,i._userDataWriter,u.doc.key,u.doc,new hn(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:iw(u.type),doc:h,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function iw(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j()}}var Xs=class extends Gu{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};function dm(n,e){let t=ni(n.firestore,or),r=tm(n),i=rw(n.converter,e);return sw(t,[JI(om(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function fl(n,...e){var t,r,i;n=Se(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||np(e[a])||(o=e[a],a++);let u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(np(e[a])){let I=e[a];e[a]=(t=I.next)===null||t===void 0?void 0:t.bind(I),e[a+1]=(r=I.error)===null||r===void 0?void 0:r.bind(I),e[a+2]=(i=I.complete)===null||i===void 0?void 0:i.bind(I)}let h,d,p;if(n instanceof Le)d=ni(n.firestore,or),p=Zu(n._key.path),h={next:I=>{e[a]&&e[a](ow(d,n,I))},error:e[a+1],complete:e[a+2]};else{let I=ni(n,In);d=ni(I.firestore,or),p=I._query;let C=new Xs(d);h={next:P=>{e[a]&&e[a](new Ku(d,C,I,P))},error:e[a+1],complete:e[a+2]},nw(n._query)}return function(C,P,O,F){let D=new Mu(F),G=new Pu(P,D,O);return C.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return RI(yield Xf(C),G)})),()=>{D.za(),C.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return kI(yield Xf(C),G)}))}}(rm(d),p,u,h)}function sw(n,e){return function(r,i){let o=new vt;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return UI(yield HI(r),i,o)})),o.promise}(rm(n),e)}function ow(n,e,t){let r=t.docs.get(e._key),i=new Xs(n);return new Js(n,i,e._key,r,new hn(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ar=i})(Ot),Nt(new je("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new or(new fc(r.getProvider("auth-internal")),new _c(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new M(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ss(d.options.projectId,p)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),ge(bf,"4.7.1",e),ge(bf,"4.7.1","esm2017")})();var oo=function(){return oo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},oo.apply(this,arguments)};var uw={includeMetadataChanges:!1};function fm(n,e){return e===void 0&&(e=uw),new Rr(function(t){var r=fl(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function pm(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:oo(oo({},r),(t={},t[e.idField]=n.id,t))}function mm(n){return fm(n,{includeMetadataChanges:!0}).pipe(zo(function(e){return e.docs}))}function gm(n,e){return e===void 0&&(e={}),mm(n).pipe(zo(function(t){return t.map(function(r){return pm(r,e)})}))}var bt=class{constructor(e){return e}},_m="firestore",pl=class{constructor(){return Ur(_m)}};var ml=new Cn("angularfire2.firestore-instances");function lw(n,e){let t=Wi(_m,n,e);return t&&new bt(t)}function hw(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bt(r)}}var dw={provide:pl,deps:[[new Be,ml]]},fw={provide:bt,useFactory:lw,deps:[[new Be,ml],pt]};function ym(n,...e){return ge("angularfire",tn.full,"fst"),Sn([fw,dw,{provide:ml,useFactory:hw(n),multi:!0,deps:[kt,Pn,Ln,nn,[new Be,Wr],[new Be,Un],...e]}])}var vm=Ge(gm,!0);var Im=Ge(dm,!0);var gl=Ge(em,!0);var wm=Ge(nm,!0);function pw(n,e){n&1&&(N(0,"p"),L(1,"Usuario Registrado"),x())}function mw(n,e){if(n&1&&(N(0,"p"),L(1),x()),n&2){let t=ze();$(),Qe(t.msjError)}}function gw(n,e){n&1&&(N(0,"div",13),te(1,"span",14),x())}var ao=class n{constructor(e,t,r,i){this.router=e;this.auth=t;this.userService=r;this.firestore=i}email="";password="";mensagges="";loggedUser="";flagError=!1;msjError="";isLoading=!1;sub;messages=[];newMessage="";loginUser(){wf(this.auth,this.email,this.password).then(e=>{e.user.email!==null&&(this.isLoading=!0,setTimeout(()=>{this.userService.setUser(this.email),this.isLoading=!1,this.router.navigate(["/home"])},1e3)),this.flagError=!1}).catch(e=>{switch(this.flagError=!0,console.log(e),e.code){case"auth/weak-password":this.msjError="Contrase\xF1a demasiado corta.";break;case"auth/invalid-email":this.msjError="Correo electr\xF3nico no v\xE1lido.";break;case"auth/email-already-in-use":this.msjError="El correo electr\xF3nico ya est\xE1 en uso.";break;case"auth/user-not-found":this.msjError="No se encontr\xF3 ning\xFAn usuario con este correo.";break;case"auth/wrong-password":this.msjError="Credenciales Invalidas.";break;case"auth/invalid-credential":this.msjError="Credenciales no v\xE1lidas.";break;case"auth/account-exists-with-different-credential":this.msjError="Ya existe una cuenta con un correo diferente.";break;case"auth/credential-already-in-use":this.msjError="Estas credenciales ya est\xE1n en uso por otra cuenta.";break;default:this.msjError="Error: "+e.code;break}})}redirectToSignIn(){this.router.navigate(["/singin"])}dato="datsos del padre";recibirDato(e){this.dato=e}enviarDato=new Sh;datoHijo1="Dato del hijo 1";enviarDatoFn(){this.enviarDato.emit(this.dato)}autocompletar(e,t){this.email=e,this.password=t}static \u0275fac=function(t){return new(t||n)(ae(Xe),ae(Oe),ae(Ve),ae(bt))};static \u0275cmp=Ae({type:n,selectors:[["app-login"]],outputs:{enviarDato:"enviarDato"},standalone:!0,features:[Ce],decls:23,vars:5,consts:[[1,"container"],["type","checkbox","id","check"],[1,"login","form"],["action","#"],["type","text","placeholder","Ingrese su Email","name","email",3,"ngModelChange","ngModel"],["type","password","placeholder","Ingrese su Contrase\xF1a","name","password",3,"ngModelChange","ngModel"],["type","button","value","Iniciar Sesi\xF3n",1,"button",3,"click"],[4,"ngIf"],[1,"botones"],["type","button",1,"botones-autocompletar",3,"click"],[1,"signup"],[1,"signup",3,"click"],["class","loader-container",4,"ngIf"],[1,"loader-container"],[1,"loader"]],template:function(t,r){t&1&&(N(0,"body")(1,"div",0),te(2,"input",1),N(3,"div",2)(4,"header"),L(5,"Login"),x(),N(6,"form",3)(7,"input",4),Jt("ngModelChange",function(o){return Yt(r.email,o)||(r.email=o),o}),x(),N(8,"input",5),Jt("ngModelChange",function(o){return Yt(r.password,o)||(r.password=o),o}),x(),N(9,"input",6),ie("click",function(){return r.loginUser()}),x(),de(10,pw,2,0,"p",7)(11,mw,2,1,"p",7),x(),N(12,"div",8)(13,"button",9),ie("click",function(){return r.autocompletar("matias.skenen@gmail.com","123456")}),L(14,"Usuario 1"),x(),N(15,"button",9),ie("click",function(){return r.autocompletar("lucasmansini@gmail.com","123456")}),L(16,"Usuario 2"),x(),N(17,"button",9),ie("click",function(){return r.autocompletar("jorge@gmail.com","123456")}),L(18,"Usuario 3"),x()(),N(19,"div",10)(20,"button",11),ie("click",function(){return r.redirectToSignIn()}),L(21,"Registrarse"),x()()(),de(22,gw,2,0,"div",12),x()()),t&2&&($(7),Qt("ngModel",r.email),$(),Qt("ngModel",r.password),$(2),Z("ngIf",r.loggedUser!==""),$(),Z("ngIf",r.flagError),$(11),Z("ngIf",r.isLoading))},dependencies:[Je,Ye,Nn,Li,Rn,Dn,Fi,Ui,qh],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.loader-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center;background:#fff;width:100%;height:100%;z-index:9999}.loader[_ngcontent-%COMP%]{width:80px;height:80px;border:8px solid #FFF;border-bottom-color:#ff3d00;border-radius:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}body[_ngcontent-%COMP%]{min-height:100vh;width:100%;background:linear-gradient(to bottom,#0f0c29,#302b63,#b06dbd)}.container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:430px;width:100%;background:#fff;border-radius:7px;box-shadow:0 5px 10px #0000004d;z-index:1}.container[_ngcontent-%COMP%]   .registration[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]:checked ~ .registration[_ngcontent-%COMP%]{display:block}#check[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:2rem}.form[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;text-align:center;margin-bottom:1.5rem}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:60px;width:100%;padding:0 15px;font-size:17px;margin-bottom:1.3rem;border:1px solid #ddd;border-radius:6px;outline:none}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#009579;box-shadow:0 0 0 1px #009579}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#009579;text-decoration:none}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]{color:#fff;background:#009579;font-size:1.2rem;font-weight:500;letter-spacing:1px;margin-top:1.7rem;cursor:pointer;transition:background-color .4s ease;border:none;border-radius:6px}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]:hover{background:#006653}.signup[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#a88cc8;border:none;padding:.75rem 1.5rem;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#19201a}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:20px}.button[_ngcontent-%COMP%], .botones-autocompletar[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:500}.button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.02)}.botones-autocompletar[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;font-weight:400}.botones-autocompletar[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:scale(1.02)}']})};var co=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ae({type:n,selectors:[["app-quiensoy"]],standalone:!0,features:[Ce],decls:23,vars:0,consts:[["rel","stylesheet","href",Rh`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css`],[1,"about-me-card"],[1,"about-me-header"],[1,"about-me-body"],["src","https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/perfil.jpeg?alt=media&token=94aac8c0-ba09-4f57-a1a2-6b0cf2a923ec","alt","Profile Picture",1,"profile-img"],[1,"description"],[1,"social-media"],["href","https://twitter.com/tu_perfil","target","_blank",1,"social-icon"],[1,"fab","fa-twitter"],["href","https://linkedin.com/in/tu_perfil","target","_blank",1,"social-icon"],[1,"fab","fa-linkedin"],["href","https://github.com/tu_perfil","target","_blank",1,"social-icon"],[1,"fab","fa-github"]],template:function(t,r){t&1&&(N(0,"body"),te(1,"link",0),N(2,"div",1)(3,"div",2)(4,"h2"),L(5,"Quien soy"),x()(),N(6,"div",3),te(7,"img",4),N(8,"p",5),L(9," Hola! Soy Matias Skenen."),te(10,"br")(11,"br"),L(12," Estudiante en Tecnicatura Superior en Programaci\xF3n."),te(13,"br")(14,"br"),L(15," Mi especial inter\xE9s est\xE1 en la ciberseguridad. "),x()(),N(16,"div",6)(17,"a",7),te(18,"i",8),x(),N(19,"a",9),te(20,"i",10),x(),N(21,"a",11),te(22,"i",12),x()()()())},styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:90vh;margin:0;display:flex;justify-content:center;align-items:center;background:linear-gradient(to bottom,#1a163f,#302b63,#b06dbd)}.about-me-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:700px;padding:20px;font-family:Roboto,sans-serif}.about-me-header[_ngcontent-%COMP%]{text-align:center}.about-me-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:2rem;font-weight:700}.about-me-body[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.profile-img[_ngcontent-%COMP%]{width:300px;height:300px;object-fit:cover;border-radius:10%;padding:5px}.description[_ngcontent-%COMP%]{font-size:1.1rem;color:#444;line-height:1.6;font-weight:400}.social-media[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.social-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 10px;color:#333;font-size:1.5rem;text-decoration:none;transition:color .3s ease}.social-icon[_ngcontent-%COMP%]:hover{color:#007bff}"]})};function bm(){return n=>{let e=n.get("clave"),t=n.get("repiteClave"),r={noCoincide:"La clave no coincide"};return e?.value!==t?.value?(n.get("repiteClave")?.setErrors(r),r):(n.get("repiteClave")?.setErrors(null),null)}}function _w(n,e){n&1&&(kr(0),N(1,"small",17),L(2,"S\xF3lo debe contener solo letras"),x(),Dr())}function yw(n,e){n&1&&(kr(0),N(1,"small",17),L(2,"Formato inv\xE1lido"),x(),Dr())}function vw(n,e){n&1&&(kr(0),N(1,"small",17),L(2,"Debe ser mayor de edad"),x(),Dr())}function Iw(n,e){if(n&1&&(kr(0),N(1,"small",17),L(2),x(),Dr()),n&2){let t=ze();$(2),$o(" La clave debe tener m\xEDnimo ",t.clave==null?null:t.clave.getError("minlength").requiredLength," caracteres ")}}function ww(n,e){n&1&&(N(0,"p"),L(1,"Usuario Registrado"),x())}function Ew(n,e){if(n&1&&(N(0,"p"),L(1),x()),n&2){let t=ze();$(),Qe(t.msjError)}}function Tw(n,e){n&1&&(N(0,"div",24),te(1,"span",25),x())}var uo=class n{constructor(e,t,r,i){this.auth=e;this.router=t;this.userService=r;this.fb=i}email="";password="";mensagges="";loggedUser="";flagError=!1;msjError="";isLoading=!1;form;ngOnInit(){this.form=new jh({nombre:new xn("",[kn.pattern("^[a-zA-Z]+$")]),edad:new xn("",kn.min(18)),mail:new xn("",kn.email),clave:new xn("",kn.minLength(4)),repiteClave:new xn("",kn.required)},bm())}get usuario(){return this.form.get("usuario")}get nombre(){return this.form.get("nombre")}get edad(){return this.form.get("edad")}get mail(){return this.form.get("mail")}get clave(){return this.form.get("clave")}get repiteClave(){return this.form.get("repiteClave")}enviarForm(){console.log(this.form.value)}register(){vf(this.auth,this.email,this.password).then(e=>{e.user.email!==null&&(this.isLoading=!0,setTimeout(()=>{this.userService.setUser(this.email),this.isLoading=!1,this.router.navigate(["/home"])},1e3)),this.flagError=!1}).catch(e=>{switch(this.flagError=!0,console.log(e),e.code){case"auth/weak-password":this.msjError="Contrase\xF1a demasiado corta. Minimo 6 caracteres.";break;case"auth/invalid-email":this.msjError="Correo electr\xF3nico no v\xE1lido.";break;case"auth/email-already-in-use":this.msjError="El correo electr\xF3nico ya est\xE1 en uso.";break;case"auth/user-not-found":this.msjError="No se encontr\xF3 ning\xFAn usuario con este correo.";break;case"auth/wrong-password":this.msjError="Credenciales Invalidas.";break;case"auth/invalid-credential":this.msjError="Credenciales no v\xE1lidas.";break;case"auth/account-exists-with-different-credential":this.msjError="Ya existe una cuenta con un correo diferente.";break;case"auth/credential-already-in-use":this.msjError="Estas credenciales ya est\xE1n en uso por otra cuenta.";break;default:this.msjError="Error: "+e.code;break}})}redirectToLogin(){this.router.navigate(["/login"])}autocompletar(e,t){this.email=e,this.password=t}static \u0275fac=function(t){return new(t||n)(ae(Oe),ae(Xe),ae(Ve),ae(Kh))};static \u0275cmp=Ae({type:n,selectors:[["app-sing-up"]],standalone:!0,features:[Ce],decls:52,vars:11,consts:[[1,"container"],["type","checkbox","id","check"],[1,"login","form"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"form-control-group","col-5"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre",1,"form-control"],[4,"ngIf"],["for","mail",1,"form-label"],["type","email","id","mail","formControlName","mail",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","formControlName","edad",1,"form-control"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control",3,"ngModelChange","ngModel"],["for","repiteClave",1,"form-label"],["type","password","id","repiteClave","formControlName","repiteClave",1,"form-control"],[1,"text-danger"],["type","button","value","Registrarse",1,"button",3,"click"],[1,"botones"],["type","button",1,"botones-autocompletar",3,"click"],[1,"signup"],[1,"signup",3,"click"],["class","loader-container",4,"ngIf"],[1,"loader-container"],[1,"loader"]],template:function(t,r){t&1&&(N(0,"body")(1,"div",0),te(2,"input",1),N(3,"div",2)(4,"header"),L(5,"Registrarse"),x(),N(6,"form",3),ie("ngSubmit",function(){return r.enviarForm()}),N(7,"div",4)(8,"div",5)(9,"label",6),L(10,"Nombre"),x(),te(11,"input",7),de(12,_w,3,0,"ng-container",8),x()(),N(13,"div",4)(14,"div",5)(15,"label",9),L(16,"Mail"),x(),te(17,"input",10),de(18,yw,3,0,"ng-container",8),x()(),N(19,"div",5)(20,"label",11),L(21,"Edad"),x(),te(22,"input",12),de(23,vw,3,0,"ng-container",8),x(),N(24,"div",4)(25,"div",5)(26,"label",13),L(27,"Clave"),x(),N(28,"input",14),Jt("ngModelChange",function(o){return Yt(r.password,o)||(r.password=o),o}),x(),de(29,Iw,3,1,"ng-container",8),x(),N(30,"div",5)(31,"label",15),L(32,"Repite clave"),x(),te(33,"input",16),N(34,"small",17),L(35),x()()(),N(36,"input",18),ie("click",function(){return r.register()}),x(),de(37,ww,2,0,"p",8)(38,Ew,2,1,"p",8),x(),N(39,"div",19)(40,"button",20),ie("click",function(){return r.autocompletar("matias.skenen@gmail.com","123456")}),L(41,"Usuario 1"),x(),N(42,"button",20),ie("click",function(){return r.autocompletar("lucasmansini@gmail.com","123456")}),L(43,"Usuario 2"),x(),N(44,"button",20),ie("click",function(){return r.autocompletar("jorge@gmail.com","123456")}),L(45,"Usuario 3"),x()(),N(46,"div",21)(47,"button",22),ie("click",function(){return r.redirectToLogin()}),L(48,"Iniciar Sesion"),x()()(),de(49,Tw,2,0,"div",23),N(50,"form",3),ie("ngSubmit",function(){return r.enviarForm()}),te(51,"input",10),x()()()),t&2&&($(6),Z("formGroup",r.form),$(6),Z("ngIf",r.nombre==null?null:r.nombre.hasError("pattern")),$(6),Z("ngIf",r.mail==null?null:r.mail.hasError("mail")),$(5),Z("ngIf",r.edad==null?null:r.edad.hasError("min")),$(5),Qt("ngModel",r.password),$(),Z("ngIf",r.clave==null?null:r.clave.hasError("minlength")),$(6),$o(" ",r.repiteClave==null?null:r.repiteClave.getError("noCoincide")," "),$(2),Z("ngIf",r.loggedUser!==""),$(),Z("ngIf",r.flagError),$(11),Z("ngIf",r.isLoading),$(),Z("formGroup",r.form))},dependencies:[Nn,Li,Rn,zh,Dn,Fi,Je,Ye,Bi,$h,Gh],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.loader-container[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center;background:#fff;width:100%;height:100%;z-index:9999}.loader[_ngcontent-%COMP%]{width:80px;height:80px;border:8px solid #FFF;border-bottom-color:#ff3d00;border-radius:50%;box-sizing:border-box;animation:_ngcontent-%COMP%_rotation 1s linear infinite}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}body[_ngcontent-%COMP%]{min-height:100vh;width:100%;background:linear-gradient(to bottom,#0f0c29,#302b63,#b06dbd)}.container[_ngcontent-%COMP%]{position:absolute;top:55%;left:50%;transform:translate(-50%,-50%);max-width:450px;height:850px;width:100%;background:#fff;border-radius:7px;box-shadow:0 5px 10px #0000004d;z-index:1}.container[_ngcontent-%COMP%]   .registration[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]:checked ~ .registration[_ngcontent-%COMP%]{display:block}#check[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]{display:none}#check[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:2rem}.form[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{font-size:2rem;font-weight:500;text-align:center;margin-bottom:1.5rem}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;width:100%;padding:0 15px;font-size:17px;margin-bottom:1.3rem;border:1px solid #ddd;border-radius:6px;outline:none}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:0 1px #0003}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#009579;text-decoration:none}.form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]{color:#fff;background:#009579;font-size:1.2rem;font-weight:500;letter-spacing:1px;margin-top:50px;cursor:pointer;transition:.4s}.form[_ngcontent-%COMP%]   input.button[_ngcontent-%COMP%]:hover{background:#006653}.signup[_ngcontent-%COMP%]{margin-top:5px;text-align:center}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000;border:1px solid black;padding:.75rem;border-radius:4px;font-size:1rem;cursor:pointer}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#218838}.signup[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:#a88cc8;border:none;padding:.75rem 1.5rem;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.signup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#19201a}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:20px}.button[_ngcontent-%COMP%], .botones-autocompletar[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,transform .3s ease}.button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:500}.button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.02)}.botones-autocompletar[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;font-weight:400}.botones-autocompletar[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:scale(1.02)}@keyframes _ngcontent-%COMP%_loading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading[_ngcontent-%COMP%]{border:6px solid var(--color-background);border-radius:100%;border-top-color:var(--color-primary);border-bottom-color:var(--color-primary);width:50px;height:50px;animation:_ngcontent-%COMP%_loading 1.5s infinite linear}.ng-valid[required][_ngcontent-%COMP%], .ng-valid.required[_ngcontent-%COMP%]{border-left:5px solid #42A948}input.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #cf1916!important;width:300px!important;height:50px!important}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fed3d3;color:#820000;padding:1rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}select[_ngcontent-%COMP%]{width:100%;padding:.5rem}"]})};var bw=(n,e)=>({yo:n,ellos:e});function Aw(n,e){if(n&1&&(N(0,"div",11)(1,"div",12)(2,"div",13),L(3),x(),N(4,"div",14)(5,"span",15),L(6),x(),N(7,"span",16),L(8),x()()()()),n&2){let t=e.$implicit,r=ze(2);Z("ngClass",Dh(4,bw,t.user===r.useractual,t.user!==r.useractual)),$(3),Qe(t.message),$(3),Qe(t.user),$(2),Qe(t.fecha)}}function Cw(n,e){if(n&1&&(N(0,"div",9),de(1,Aw,9,7,"div",10),x()),n&2){let t=ze();$(),Z("ngForOf",t.loginsCollection)}}function Sw(n,e){n&1&&(N(0,"div",17)(1,"p"),L(2,"No hay mensajes a\xFAn. \xA1S\xE9 el primero en enviar uno!"),x()())}function Pw(n,e){n&1&&te(0,"img",18)}var lo=class n{constructor(e,t,r){this.firestore=e;this.auth=t;this.dataservice=r;console.log(t.currentUser?.email),this.useractual=t.currentUser?.email,this.getData(),this.auth.onAuthStateChanged(i=>{i?(this.isLocked=!1,console.log("Usuario autenticado:",i),this.dataservice.setUser(i)):console.log("No hay usuario autenticado.")})}sub;loginsCollection=[];useractual;newMessage="";isLocked=!0;getData(){let e=gl(this.firestore,"chats"),t=hl(e,dl("fecha","asc"));vm(t).subscribe(i=>{this.loginsCollection=i,console.log(this.loginsCollection)})}send(){if(this.isLocked==!1){let e=gl(this.firestore,"chats"),t={fecha:new Date().toLocaleString("es-AR"),user:this.auth.currentUser?.email,message:this.newMessage};this.newMessage="",Im(e,t).then(()=>{console.log("Documento agregado con \xE9xito")}).catch(r=>{console.error("Error al agregar documento: ",r)})}}sendMessage(){this.newMessage.trim()!==""&&(this.newMessage="")}static \u0275fac=function(t){return new(t||n)(ae(bt),ae(Oe),ae(Ve))};static \u0275cmp=Ae({type:n,selectors:[["app-chat"]],standalone:!0,features:[Ce],decls:13,vars:4,consts:[[1,"chat-wrapper"],[1,"chat-header"],[1,"chat-container"],["class","messages",4,"ngIf"],["class","no-messages",4,"ngIf"],[1,"message-input"],["placeholder","Escribe un mensaje...",3,"ngModelChange","ngModel"],[3,"click"],["class","lock-icon","src","https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/candado.png?alt=media&token=7943cb9d-dbf1-419a-b60c-8948c0658979","alt","Candado",4,"ngIf"],[1,"messages"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"message",3,"ngClass"],[1,"message-content"],[1,"message-text"],[1,"message-info"],[1,"user"],[1,"date"],[1,"no-messages"],["src","https://firebasestorage.googleapis.com/v0/b/tp-juegos-labo4.appspot.com/o/candado.png?alt=media&token=7943cb9d-dbf1-419a-b60c-8948c0658979","alt","Candado",1,"lock-icon"]],template:function(t,r){t&1&&(N(0,"body")(1,"div",0)(2,"div",1)(3,"h2"),L(4,"Chat"),x()(),N(5,"div",2),de(6,Cw,2,1,"div",3)(7,Sw,3,0,"div",4),x(),N(8,"div",5)(9,"input",6),Jt("ngModelChange",function(o){return Yt(r.newMessage,o)||(r.newMessage=o),o}),x(),N(10,"button",7),ie("click",function(){return r.send()}),L(11,"Enviar"),x()(),de(12,Pw,1,0,"img",8),x()()),t&2&&($(6),Z("ngIf",r.loginsCollection.length>0),$(),Z("ngIf",r.loginsCollection.length===0),$(2),Qt("ngModel",r.newMessage),$(3),Z("ngIf",r.isLocked))},dependencies:[Je,Mh,Vh,Ye,Nn,Rn,Dn,Ui],styles:["body[_ngcontent-%COMP%]{width:100%;height:90vh;display:flex;justify-content:center;align-items:center;margin:0;font-family:Arial,sans-serif}.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 auto;border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 2px 10px #0003;height:500px}.chat-header[_ngcontent-%COMP%]{background-color:#975cca;color:#fff;padding:15px;border-top-left-radius:10px;border-top-right-radius:10px;text-align:center;border:1px solid}.chat-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.6em}.chat-container[_ngcontent-%COMP%]{flex:1;padding:15px;background-color:#f9f9f9;border-top:1px solid #ddd;border-bottom:1px solid #ddd;overflow-y:auto;width:500px;height:100px}.no-messages[_ngcontent-%COMP%]{text-align:center;color:#888;font-style:italic}.messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.message[_ngcontent-%COMP%]{max-width:75%;padding:12px;border-radius:12px;position:relative;display:flex;flex-direction:column;word-wrap:break-word;font-size:.95em}.message.yo[_ngcontent-%COMP%]{align-self:flex-end;background-color:#e1f5fe;border-bottom-right-radius:0}.message.ellos[_ngcontent-%COMP%]{align-self:flex-start;background-color:#dcedc8;border-bottom-left-radius:0;border:1px solid #b0bec5}.message-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.message-text[_ngcontent-%COMP%]{margin-bottom:6px}.message-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.8em;color:#666}.message-input[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;background-color:#fff;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:1px solid #ddd}input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ccc;border-radius:25px;outline:none;transition:border .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#0056b3}button[_ngcontent-%COMP%]{padding:10px 18px;border:none;background-color:#0056b3;color:#fff;cursor:pointer;border-radius:25px;transition:background-color .3s ease;font-weight:700}button[_ngcontent-%COMP%]:hover{background-color:#004494}.lock-icon[_ngcontent-%COMP%]{position:absolute;top:45%;left:50%;transform:translate(-50%,-50%);width:30%;height:40%}@media (max-width: 700px){.chat-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:100px;border:1px solid #ccc;border-radius:10px;background-color:#fff;box-shadow:0 2px 10px #0003;height:500px;width:300px;border:1px solid red}.chat-container[_ngcontent-%COMP%]{flex:1;padding:15px;background-color:#f9f9f9;border-top:1px solid #ddd;border-bottom:1px solid #ddd;overflow-y:auto;width:250px;height:200px}.messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.message[_ngcontent-%COMP%]{max-width:45%;padding:12px;border-radius:12px;position:relative;display:flex;flex-direction:column;word-wrap:break-word;font-size:.45em}}"]})};var Am=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"juegos",loadChildren:()=>import("./chunk-IZWYF474.js").then(n=>n.JuegosModule)},{path:"chat",component:lo},{path:"login",component:ao},{path:"home",component:fs},{path:"quiensoy",component:co},{path:"singin",component:uo}];var Cm={projectId:"tp-juegos-labo4",appId:"1:72978880966:web:edea831367194e969ffac7",storageBucket:"tp-juegos-labo4.appspot.com",apiKey:"AIzaSyCNdEW84sG5qn1Is4b-s7MVw6Ho8N_Nwcg",authDomain:"tp-juegos-labo4.firebaseapp.com",messagingSenderId:"72978880966",measurementId:"G-J3SBZF63TQ"};var Sm={providers:[Oh({eventCoalescing:!0}),Fh(),Bh(Am),Id(()=>wd(Cm)),yf(()=>If()),ym(()=>wm())]};var ho=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ae({type:n,selectors:[["app-footer"]],standalone:!0,features:[Ce],decls:6,vars:0,consts:[[1,"footer-content"],[1,"name"],[1,"copyright"]],template:function(t,r){t&1&&(N(0,"footer")(1,"div",0)(2,"span",1),L(3,"Matias Skenen"),x(),N(4,"span",2),L(5,"Copyright \xA9 2024 - Derechos Reservados."),x()()())},styles:['@charset "UTF-8";@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcg72j00.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKew72j00.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcw72j00.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfA72j00.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcQ72j00.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfw72.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3js2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjs2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;text-decoration:none;font-family:Ubuntu,sans-serif}footer[_ngcontent-%COMP%]{background-color:#333;color:#fff;padding:40px 0;text-align:center}.footer-container[_ngcontent-%COMP%]{max-width:1200px;margin:auto;display:flex;justify-content:space-around;flex-wrap:wrap;gap:20px;padding:0 20px}.footer-about[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]{flex:1;min-width:200px}.footer-about[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:15px;color:#fff}.footer-about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#ddd}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#6af;transition:color .3s ease}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}@media (max-width: 768px){.footer-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;padding:0 10px}.footer-about[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]{min-width:100%;text-align:center;margin-bottom:20px}.footer-about[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:22px}.footer-about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){footer[_ngcontent-%COMP%]{padding:30px 0}.footer-about[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.footer-about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .footer-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}}']})};function Rw(n,e){n&1&&(N(0,"li")(1,"p")(2,"a",6),L(3,"Iniciar Sesi\xF3n"),x()()())}function kw(n,e){n&1&&(N(0,"li")(1,"p")(2,"a",7),L(3,"Registrarse"),x()()())}function Dw(n,e){if(n&1){let t=kh();N(0,"li")(1,"p")(2,"a",8),ie("click",function(){Ah(t);let i=ze();return Ch(i.signOut())}),L(3,"Cerrar sesion"),x()()()}}function xw(n,e){if(n&1&&(N(0,"li",9),L(1),x()),n&2){let t=ze();$(),Qe(t.user)}}var fo=class n{constructor(e,t,r,i){this.router=e;this.authService=t;this.auth=r;this.userService=i;this.checkUser()}user;checkUser(){this.authService.getUserNow().subscribe(e=>{e?(this.user=e.email,console.log("Usuario:",this.user)):console.log("No hay usuario disponible.")})}toHome(){this.router.navigate(["/home"])}toQuiensoy(){this.router.navigate(["/quiensoy"])}toChat(){this.router.navigate(["/chat"])}signOut(){return y(this,null,function*(){try{yield this.auth.signOut(),this.router.navigate(["/login"])}catch(e){console.error("Error signing out:",e)}})}static \u0275fac=function(t){return new(t||n)(ae(Xe),ae(Ve),ae(Oe),ae(Ve))};static \u0275cmp=Ae({type:n,selectors:[["app-header"]],standalone:!0,features:[Ce],decls:16,vars:4,consts:[[1,"nav-content"],[1,"logo"],[3,"click"],[1,"nav-links"],[4,"ngIf"],["class","test",4,"ngIf"],["href","/login"],["href","/singin"],["href","",3,"click"],[1,"test"]],template:function(t,r){t&1&&(N(0,"nav")(1,"div",0)(2,"div",1)(3,"p",2),ie("click",function(){return r.toHome()}),L(4,"GAME-TIME"),x()(),N(5,"ul",3)(6,"li",2),ie("click",function(){return r.toQuiensoy()}),N(7,"p"),L(8,"Quien soy"),x()(),N(9,"li",2),ie("click",function(){return r.toChat()}),N(10,"p"),L(11,"Chat"),x()(),de(12,Rw,4,0,"li",4)(13,kw,4,0,"li",4)(14,Dw,4,0,"li",4)(15,xw,2,1,"li",5),x()()()),t&2&&($(12),Z("ngIf",!r.user),$(),Z("ngIf",!r.user),$(),Z("ngIf",r.user),$(),Z("ngIf",r.user))},dependencies:[Je,Ye],styles:['@charset "UTF-8";@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcg72j00.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKew72j00.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcw72j00.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfA72j00.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKcQ72j00.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCs6KVjbNBYlgoKfw72.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3js2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCjC3jsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvWyNL4U.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjtGyNL4U.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvGyNL4U.woff2) format("woff2");unicode-range:U+1F00-1FFF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjs2yNL4U.woff2) format("woff2");unicode-range:U+0370-0377,U+037A-037F,U+0384-038A,U+038C,U+038E-03A1,U+03A3-03FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjvmyNL4U.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Ubuntu;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/ubuntu/v20/4iCv6KVjbNBYlgoCxCvjsGyN.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;text-decoration:none;font-family:Ubuntu,sans-serif}nav[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;padding:20px;transition:all .4s ease;background-color:#fff}nav.sticky[_ngcontent-%COMP%]{padding:15px 20px;background:#4070f4;box-shadow:0 5px 10px #0000001a}nav[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]{height:100%;max-width:1200px;margin:auto;display:flex;align-items:center;justify-content:space-between}nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:35px;color:#4070f4}nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#16171a;transition:all 1s;cursor:pointer}nav.sticky[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.nav-content[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:flex}.nav-content[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin:0 8px}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-decoration:none;color:#0e2431;font-size:18px;font-weight:500;padding:10px 4px;transition:all .3s ease}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#4070f4;cursor:pointer}nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;transition:all .4s ease}nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, nav.sticky[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#0e2431}.home[_ngcontent-%COMP%]{height:100vh;width:100%;background-size:cover;background-position:center;background-attachment:fixed}h2[_ngcontent-%COMP%]{font-size:30px;margin-bottom:6px;color:#4070f4}.text[_ngcontent-%COMP%]{text-align:justify;padding:40px 80px;box-shadow:-5px 0 10px #0000001a}.test[_ngcontent-%COMP%]{text-decoration:none;color:#0e2431;font-size:18px;font-weight:500;padding:10px 4px;transition:all .3s ease}@media (max-width: 700px){.nav-content[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px 0}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;padding:8px 10}nav[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px}}']})};var po=class n{constructor(e){this.router=e}title="tp-juegos";goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(ae(Xe))};static \u0275cmp=Ae({type:n,selectors:[["app-root"]],standalone:!0,features:[Ce],decls:4,vars:0,consts:[[1,"contair"]],template:function(t,r){t&1&&(N(0,"div",0),te(1,"app-header")(2,"router-outlet")(3,"app-footer"),x())},dependencies:[Lh,ho,fo,Bi],styles:[".menu-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px;background-color:#fff;box-shadow:0 2px 10px #0000001a}.menu-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-right:20px;font-weight:700;color:#333}.menu-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px;padding:10px 20px;border:none;border-radius:5px;background-color:#009579;color:#fff;font-size:16px;cursor:pointer;transition:background-color .3s ease,transform .2s ease}.menu-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#000}.menu-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.95);background-color:#000}.menu-container[_ngcontent-%COMP%]   .active-route[_ngcontent-%COMP%]{background-color:red;box-shadow:0 2px 5px #0003}router-outlet[_ngcontent-%COMP%]{display:block}"]})};Uh(po,Sm).catch(n=>console.error(n));
